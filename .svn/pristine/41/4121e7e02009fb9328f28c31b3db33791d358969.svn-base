{"errors":[],"warnings":[],"version":"1.12.2","hash":"2654239b55248b4b3769","time":190,"publicPath":"","assetsByChunkName":{"app":["app.js","0.a78b832e293e7c2d8478.hot-update.js","app.css"]},"assets":[{"name":"styles/images/6161dd37.defaultbig.jpg","size":25360,"chunks":[],"chunkNames":[],"emitted":false},{"name":"app.js","size":1675262,"chunks":[0],"chunkNames":["app"],"emitted":true},{"name":"0.a78b832e293e7c2d8478.hot-update.js","size":1846,"chunks":[0],"chunkNames":["app"],"emitted":true},{"name":"a78b832e293e7c2d8478.hot-update.json","size":36,"chunks":[],"chunkNames":[],"emitted":true},{"name":"app.css","size":491769,"chunks":[0],"chunkNames":["app"],"emitted":true}],"chunks":[{"id":0,"rendered":true,"initial":true,"entry":true,"extraAsync":false,"size":1530762,"names":["app"],"files":["app.js","0.a78b832e293e7c2d8478.hot-update.js","app.css"],"hash":"fac3f13801d54c8bcda2","parents":[],"origins":[{"moduleId":0,"module":"multi app","moduleIdentifier":"multi app","moduleName":"multi app","loc":"","name":"app","reasons":[]}]}],"modules":[{"id":0,"identifier":"multi app","name":"multi app","index":0,"index2":160,"size":28,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":null,"failed":false,"errors":0,"warnings":0,"reasons":[]},{"id":1,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","name":"./src/modules/main.js","index":1,"index2":159,"size":4990,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"multi app","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":0,"moduleIdentifier":"multi app","module":"multi app","moduleName":"multi app","type":"single entry","userRequest":"./src/modules/main.js"}],"source":"require('framework7');\r\nrequire('framework7.ios.css');\r\nrequire('framework7.ios.colors.css');\r\n// 自定义的css\r\nrequire('../styles/css/iconfont.css');\r\nrequire('../styles/css/commond.css');\r\nrequire('../styles/css/recommend.css');\r\nrequire('../styles/css/seek.css');\r\nrequire('../styles/css/my.css');\r\nrequire('../styles/css/daixi-my.css');\r\nrequire('../styles/css/daixi-activity.css');\r\nrequire('../styles/css/myinfo.css');\r\nrequire('../styles/css/search.css');\r\nrequire('../styles/css/items.css');\r\n//唐亚敏增加\r\nrequire('../styles/css/tym-activity.css');\r\nrequire('../styles/css/activity-detail.css');\r\nrequire('../styles/css/tym-wallet.css');\r\nrequire('../styles/css/launch-act-info.css');\r\n\r\n// 觅趣\r\nrequire('../styles/css/launch-act.css');\r\nrequire('../styles/css/activity.css');\r\n\r\nvar appFunc = require('./utils/appFunc'),\r\n    router = require('./router'),\r\n    appModule = require('./app/app'),\r\n    retinueSelectDefault = []; //保存复选框选中的值\r\n\r\nvar app = {\r\n    initialize: function() {\r\n        this.initFramework7();\r\n    },\r\n    initFramework7: function() {\r\n        Template7.registerHelper('room', function(number) {\r\n            var number = parseInt(number, 10);\r\n            if (number) {\r\n                var roomObj = {\r\n                    1: '单人间',\r\n                    2: \"双人间\",\r\n                    3: '三人间',\r\n                    4: '四人间',\r\n                    5: '五人间',\r\n                    6: '六人间',\r\n                    7: '七人间',\r\n                    8: '八人间',\r\n                    9: '九人间',\r\n                    10: '十人间'\r\n                };\r\n                return roomObj[number];\r\n            } else {\r\n                return 0;\r\n            }\r\n\r\n        });\r\n\r\n        Template7.registerHelper('showDay', function(day) {\r\n\r\n            var num_han = function(num) {\r\n                if (num >= 100) {\r\n                    return num;\r\n                }\r\n                if (day_num >= 100) {\r\n                    return '第' + day_num + '天' + wu + '午';\r\n                } else {\r\n                    var zi = {\r\n                        0: '零',\r\n                        1: '一',\r\n                        2: '二',\r\n                        3: '三',\r\n                        4: '四',\r\n                        5: '五',\r\n                        6: '六',\r\n                        7: '七',\r\n                        8: '八',\r\n                        9: '九',\r\n                        10: '十'\r\n                    };\r\n                    if (num > 10 || num < 0 || isNaN(num)) {\r\n                        if (num > 10) {\r\n                            var str = num + '';\r\n                            var nu = '';\r\n                            for (var i = 0, len = str.length; i < len; i++) {\r\n                                var j = i == 0 ? zi[10] : '';\r\n                                if (str[i] != 0) {\r\n                                    nu += num_han(str[i]) + j;\r\n                                }\r\n                            }\r\n                            return nu;\r\n                        } else {\r\n                            return num;\r\n                        }\r\n                    } else {\r\n                        return zi[num];\r\n                    }\r\n                }\r\n\r\n            };\r\n\r\n            // 计算上下午\r\n            var wu = day % 2 == 1 ? '上' : '下';\r\n            // 计算第几天\r\n            var day_num = Math.ceil(day / 2);\r\n\r\n            return '第' + num_han(day_num) + '天' + wu + '午';\r\n        });\r\n\r\n        Template7.registerHelper('mergeDay', function(day) {\r\n            var dayArray = ['第一天','第二天','第三天','第四天','第五天','第六天','第七天','第八天','第九天','第十天'];\r\n            return dayArray[Math.ceil(day/2)-1];\r\n        });\r\n\r\n        Template7.registerHelper('formatStartDate', function(date) {\r\n            return date.replace(/-/g, '.');\r\n        });\r\n        Template7.registerHelper('formatEndDate', function(date) {\r\n            return date.slice(5).replace(/-/g, '.');\r\n        });\r\n\r\n        window.$$ = Dom7;\r\n        window.tmmApp = new Framework7({\r\n            imagesLazyLoadThreshold: 300,\r\n            popupCloseByOutside: false,\r\n            animateNavBackIcon: true,\r\n            modalTitle: '',\r\n            modalButtonOk: '确定',\r\n            modalButtonCancel: '取消',\r\n            fastClicksDelayBetweenClicks: 200,\r\n            showBarsOnPageScrollEnd: false,\r\n            template7Pages: true,\r\n            template7Data: {\r\n\r\n            }\r\n        });\r\n\r\n        window.homeF7View = tmmApp.addView('#recommendView', {\r\n            dynamicNavbar: true,\r\n            domCache: true\r\n        });\r\n\r\n        tmmApp.addView('#seekView', {\r\n            dynamicNavbar: true,\r\n            domCache: true\r\n        });\r\n\r\n        tmmApp.addView('#seekFreshView', {\r\n            dynamicNavbar: true,\r\n            domCache: true\r\n        });\r\n\r\n        tmmApp.addView('#myView', {\r\n            dynamicNavbar: true,\r\n            domCache: true\r\n        });\r\n\r\n        // init app\r\n        router.init();\r\n        appModule.init();\r\n    }\r\n};\r\n\r\n\r\napp.initialize();\r\n"},{"id":2,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\bower_components\\framework7\\dist\\js\\framework7.js","name":"./bower_components/framework7/dist/js/framework7.js","index":2,"index2":0,"size":707084,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"framework7","loc":"1:0-21"},{"moduleId":21,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\appFunc.js","module":"./src/modules/utils/appFunc.js","moduleName":"./src/modules/utils/appFunc.js","type":"cjs require","userRequest":"framework7","loc":"8:0-21"},{"moduleId":22,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\services\\httpService.js","module":"./src/modules/services/httpService.js","moduleName":"./src/modules/services/httpService.js","type":"cjs require","userRequest":"framework7","loc":"8:0-21"}],"source":"/**\n * Framework7 1.3.1\n * Full Featured Mobile HTML Framework For Building iOS & Android Apps\n * \n * http://www.idangero.us/framework7\n * \n * Copyright 2015, Vladimir Kharlampidi\n * The iDangero.us\n * http://www.idangero.us/\n * \n * Licensed under MIT\n * \n * Released on: October 12, 2015\n */\n(function () {\n\n    'use strict';\n    /*===========================\n    Framework 7\n    ===========================*/\n    window.Framework7 = function (params) {\n        // App\n        var app = this;\n    \n        // Version\n        app.version = '1.3.1';\n    \n        // Default Parameters\n        app.params = {\n            cache: true,\n            cacheIgnore: [],\n            cacheIgnoreGetParameters: false,\n            cacheDuration: 1000 * 60 * 10, // Ten minutes \n            preloadPreviousPage: true,\n            uniqueHistory: false,\n            uniqueHistoryIgnoreGetParameters: false,\n            dynamicPageUrl: 'content-{{index}}',\n            allowDuplicateUrls: false,\n            router: true,\n            // Push State\n            pushState: false,\n            pushStateRoot: undefined,\n            pushStateNoAnimation: false,\n            pushStateSeparator: '#!/',\n            pushStatePreventOnLoad: true,\n            // Fast clicks\n            fastClicks: true,\n            fastClicksDistanceThreshold: 10,\n            fastClicksDelayBetweenClicks: 50,\n            // Tap Hold\n            tapHold: false,\n            tapHoldDelay: 750,\n            tapHoldPreventClicks: true,\n            // Active State\n            activeState: true,\n            activeStateElements: 'a, button, label, span',\n            // Animate Nav Back Icon\n            animateNavBackIcon: false,\n            // Swipe Back\n            swipeBackPage: true,\n            swipeBackPageThreshold: 0,\n            swipeBackPageActiveArea: 30,\n            swipeBackPageAnimateShadow: true,\n            swipeBackPageAnimateOpacity: true,\n            // Ajax\n            ajaxLinks: undefined, // or CSS selector\n            // External Links\n            externalLinks: '.external', // CSS selector\n            // Sortable\n            sortable: true,\n            // Scroll toolbars\n            hideNavbarOnPageScroll: false,\n            hideToolbarOnPageScroll: false,\n            hideTabbarOnPageScroll: false,\n            showBarsOnPageScrollEnd: true,\n            showBarsOnPageScrollTop: true,\n            // Swipeout\n            swipeout: true,\n            swipeoutActionsNoFold: false,\n            swipeoutNoFollow: false,\n            // Smart Select Back link template\n            smartSelectOpenIn: 'page', // or 'popup' or 'picker'\n            smartSelectBackText: 'Back',\n            smartSelectPopupCloseText: 'Close',\n            smartSelectPickerCloseText: 'Done',\n            smartSelectSearchbar: false,\n            smartSelectBackOnSelect: false,\n            // Tap Navbar or Statusbar to scroll to top\n            scrollTopOnNavbarClick: false,\n            scrollTopOnStatusbarClick: false,\n            // Panels\n            swipePanel: false, // or 'left' or 'right'\n            swipePanelActiveArea: 0,\n            swipePanelCloseOpposite: true,\n            swipePanelOnlyClose: false,\n            swipePanelNoFollow: false,\n            swipePanelThreshold: 0,\n            panelsCloseByOutside: true,\n            // Modals\n            modalButtonOk: 'OK',\n            modalButtonCancel: 'Cancel',\n            modalUsernamePlaceholder: 'Username',\n            modalPasswordPlaceholder: 'Password',\n            modalTitle: 'Framework7',\n            modalCloseByOutside: false,\n            actionsCloseByOutside: true,\n            popupCloseByOutside: true,\n            modalPreloaderTitle: 'Loading... ',\n            modalStack: true,\n            // Lazy Load\n            imagesLazyLoadThreshold: 0,\n            imagesLazyLoadSequential: true,\n            // Name space\n            viewClass: 'view',\n            viewMainClass: 'view-main',\n            viewsClass: 'views',\n            // Notifications defaults\n            notificationCloseOnClick: false,\n            notificationCloseIcon: true,\n            notificationCloseButtonText: 'Close',\n            // Animate Pages\n            animatePages: true,\n            // Template7\n            templates: {},\n            template7Data: {},\n            template7Pages: false,\n            precompileTemplates: false,\n            // Material\n            material: false,\n            materialPageLoadDelay: 0,\n            materialPreloaderSvg: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"75\" width=\"75\" viewbox=\"0 0 75 75\"><circle cx=\"37.5\" cy=\"37.5\" r=\"33.5\" stroke-width=\"8\"/></svg>',\n            materialRipple: true,\n            materialRippleElements: '.ripple, a.link, a.item-link, .button, .modal-button, .tab-link, .label-radio, .label-checkbox, .actions-modal-button, a.searchbar-clear, .floating-button',\n            // Auto init\n            init: true,\n        };\n    \n        // Extend defaults with parameters\n        for (var param in params) {\n            app.params[param] = params[param];\n        }\n    \n        // DOM lib\n        var $ = Dom7;\n    \n        // Template7 lib\n        var t7 = Template7;\n        app._compiledTemplates = {};\n    \n        // Touch events\n        app.touchEvents = {\n            start: app.support.touch ? 'touchstart' : 'mousedown',\n            move: app.support.touch ? 'touchmove' : 'mousemove',\n            end: app.support.touch ? 'touchend' : 'mouseup'\n        };\n    \n        // Link to local storage\n        app.ls = window.localStorage;\n    \n        // RTL\n        app.rtl = $('body').css('direction') === 'rtl';\n        if (app.rtl) $('html').attr('dir', 'rtl');\n    \n        // Overwrite statusbar overlay\n        if (typeof app.params.statusbarOverlay !== 'undefined') {\n            if (app.params.statusbarOverlay) $('html').addClass('with-statusbar-overlay');\n            else $('html').removeClass('with-statusbar-overlay');\n        }\n    \n        \n    \n\n        /*======================================================\n        ************   Views   ************\n        ======================================================*/\n        app.views = [];\n        var View = function (selector, params) {\n            var defaults = {\n                dynamicNavbar: false,\n                domCache: false,\n                linksView: undefined,\n                reloadPages: false,\n                uniqueHistory: app.params.uniqueHistory,\n                uniqueHistoryIgnoreGetParameters: app.params.uniqueHistoryIgnoreGetParameters,\n                allowDuplicateUrls: app.params.allowDuplicateUrls,\n                swipeBackPage: app.params.swipeBackPage,\n                swipeBackPageAnimateShadow: app.params.swipeBackPageAnimateShadow,\n                swipeBackPageAnimateOpacity: app.params.swipeBackPageAnimateOpacity,\n                swipeBackPageActiveArea: app.params.swipeBackPageActiveArea,\n                swipeBackPageThreshold: app.params.swipeBackPageThreshold,\n                animatePages: app.params.animatePages,\n                preloadPreviousPage: app.params.preloadPreviousPage\n            };\n            var i;\n        \n            // Params\n            params = params || {};\n        \n            // Disable dynamic navbar for material theme\n            if (params.dynamicNavbar && app.params.material) params.dynamicNavbar = false;\n        \n            // Extend params with defaults\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined') {\n                    params[def] = defaults[def];\n                }\n            }\n            // View\n            var view = this;\n            view.params = params;\n        \n            // Selector\n            view.selector = selector;\n        \n            // Container\n            var container = $(selector);\n            view.container = container[0];\n        \n            // Fix Selector\n        \n            if (typeof selector !== 'string') {\n                // Supposed to be HTMLElement or Dom7\n                selector = (container.attr('id') ? '#' + container.attr('id') : '') + (container.attr('class') ? '.' + container.attr('class').replace(/ /g, '.').replace('.active', '') : '');\n                view.selector = selector;\n            }\n        \n            // Is main\n            view.main = container.hasClass(app.params.viewMainClass);\n        \n            // Content cache\n            view.contentCache = {};\n        \n            // Pages cache\n            view.pagesCache = {};\n        \n            // Store View in element for easy access\n            container[0].f7View = view;\n        \n            // Pages\n            view.pagesContainer = container.find('.pages')[0];\n            view.initialPages = [];\n            view.initialNavbars = [];\n            if (view.params.domCache) {\n                var initialPages = container.find('.page');\n                for (i = 0; i < initialPages.length; i++) {\n                    view.initialPages.push(initialPages[i]);\n                }\n                if (view.params.dynamicNavbar) {\n                    var initialNavbars = container.find('.navbar-inner');\n                    for (i = 0; i < initialNavbars.length; i++) {\n                        view.initialNavbars.push(initialNavbars[i]);\n                    }\n                }\n        \n            }\n        \n            view.allowPageChange = true;\n        \n            // Location\n            var docLocation = document.location.href;\n        \n            // History\n            view.history = [];\n            var viewURL = docLocation;\n            var pushStateSeparator = app.params.pushStateSeparator;\n            var pushStateRoot = app.params.pushStateRoot;\n            if (app.params.pushState && view.main) {\n                if (pushStateRoot) {\n                    viewURL = pushStateRoot;\n                }\n                else {\n                    if (viewURL.indexOf(pushStateSeparator) >= 0 && viewURL.indexOf(pushStateSeparator + '#') < 0) viewURL = viewURL.split(pushStateSeparator)[0];\n                }\n        \n            }\n        \n            // Active Page\n            var currentPage, currentPageData;\n            if (!view.activePage) {\n                currentPage = $(view.pagesContainer).find('.page-on-center');\n                if (currentPage.length === 0) {\n                    currentPage = $(view.pagesContainer).find('.page:not(.cached)');\n                    currentPage = currentPage.eq(currentPage.length - 1);\n                }\n                if (currentPage.length > 0) {\n                    currentPageData = currentPage[0].f7PageData;\n                }\n            }\n        \n            // View startup URL\n            if (view.params.domCache && currentPage) {\n                view.url = container.attr('data-url') || view.params.url || '#' + currentPage.attr('data-page');   \n                view.pagesCache[view.url] = currentPage.attr('data-page');\n            }\n            else view.url = container.attr('data-url') || view.params.url || viewURL;\n        \n            // Update current page Data\n            if (currentPageData) {\n                currentPageData.view = view;\n                currentPageData.url = view.url;\n                if (view.params.domCache && view.params.dynamicNavbar && !currentPageData.navbarInnerContainer) {\n                    currentPageData.navbarInnerContainer = view.initialNavbars[view.initialPages.indexOf(currentPageData.container)];\n                }\n                view.activePage = currentPageData;\n                currentPage[0].f7PageData = currentPageData;\n            }\n        \n            // Store to history main view's url\n            if (view.url) {\n                view.history.push(view.url);\n            }\n        \n            // Touch events\n            var isTouched = false,\n                isMoved = false,\n                touchesStart = {},\n                isScrolling,\n                activePage = [],\n                previousPage = [],\n                viewContainerWidth,\n                touchesDiff,\n                allowViewTouchMove = true,\n                touchStartTime,\n                activeNavbar = [],\n                previousNavbar = [],\n                activeNavElements,\n                previousNavElements,\n                activeNavBackIcon,\n                previousNavBackIcon,\n                dynamicNavbar,\n                pageShadow,\n                el;\n        \n            view.handleTouchStart = function (e) {\n                if (!allowViewTouchMove || !view.params.swipeBackPage || isTouched || app.swipeoutOpenedEl || !view.allowPageChange) return;\n                isMoved = false;\n                isTouched = true;\n                isScrolling = undefined;\n                touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                touchStartTime = (new Date()).getTime();\n                dynamicNavbar = view.params.dynamicNavbar && container.find('.navbar-inner').length > 1;\n            };\n        \n            view.handleTouchMove = function (e) {\n                if (!isTouched) return;\n                var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n                }\n                if (isScrolling || e.f7PreventSwipeBack || app.preventSwipeBack) {\n                    isTouched = false;\n                    return;\n                }\n                if (!isMoved) {\n                    var cancel = false;\n                    // Calc values during first move fired\n                    viewContainerWidth = container.width();\n                    var target = $(e.target);\n                    var swipeout = target.hasClass('swipeout') ? target : target.parents('.swipeout');\n                    if (swipeout.length > 0) {\n                        if (!app.rtl && swipeout.find('.swipeout-actions-left').length > 0) cancel = true;\n                        if (app.rtl && swipeout.find('.swipeout-actions-right').length > 0) cancel = true;\n                    }\n                    activePage = target.is('.page') ? target : target.parents('.page');\n                    if (activePage.hasClass('no-swipeback')) cancel = true;\n                    previousPage = container.find('.page-on-left:not(.cached)');\n                    var notFromBorder = touchesStart.x - container.offset().left > view.params.swipeBackPageActiveArea;\n                    if (app.rtl) {\n                        notFromBorder = touchesStart.x < container.offset().left - container[0].scrollLeft + viewContainerWidth - view.params.swipeBackPageActiveArea;\n                    }\n                    else {\n                        notFromBorder = touchesStart.x - container.offset().left > view.params.swipeBackPageActiveArea;\n                    }\n                    if (notFromBorder) cancel = true;\n                    if (previousPage.length === 0 || activePage.length === 0) cancel = true;\n                    if (cancel) {\n                        isTouched = false;\n                        return;\n                    }\n        \n                    if (view.params.swipeBackPageAnimateShadow && !app.device.android) {\n                        pageShadow = activePage.find('.swipeback-page-shadow');\n                        if (pageShadow.length === 0) {\n                            pageShadow = $('<div class=\"swipeback-page-shadow\"></div>');\n                            activePage.append(pageShadow);\n                        }\n                    }\n        \n                    if (dynamicNavbar) {\n                        activeNavbar = container.find('.navbar-on-center:not(.cached)');\n                        previousNavbar = container.find('.navbar-on-left:not(.cached)');\n                        activeNavElements = activeNavbar.find('.left, .center, .right, .subnavbar, .fading');\n                        previousNavElements = previousNavbar.find('.left, .center, .right, .subnavbar, .fading');\n                        if (app.params.animateNavBackIcon) {\n                            activeNavBackIcon = activeNavbar.find('.left.sliding .back .icon');\n                            previousNavBackIcon = previousNavbar.find('.left.sliding .back .icon');\n                        }\n                    }\n        \n                    // Close/Hide Any Picker\n                    if ($('.picker-modal.modal-in').length > 0) {\n                        app.closeModal($('.picker-modal.modal-in'));\n                    }\n                }\n                e.f7PreventPanelSwipe = true;\n                isMoved = true;\n                e.preventDefault();\n        \n                // RTL inverter\n                var inverter = app.rtl ? -1 : 1;\n        \n                // Touches diff\n                touchesDiff = (pageX - touchesStart.x - view.params.swipeBackPageThreshold) * inverter;\n                if (touchesDiff < 0) touchesDiff = 0;\n                var percentage = touchesDiff / viewContainerWidth;\n        \n                // Swipe Back Callback\n                var callbackData = {\n                    percentage: percentage,\n                    activePage: activePage[0],\n                    previousPage: previousPage[0],\n                    activeNavbar: activeNavbar[0],\n                    previousNavbar: previousNavbar[0]\n                };\n                if (view.params.onSwipeBackMove) {\n                    view.params.onSwipeBackMove(callbackData);\n                }\n                container.trigger('swipeBackMove', callbackData);\n        \n                // Transform pages\n                var activePageTranslate = touchesDiff * inverter;\n                var previousPageTranslate = (touchesDiff / 5 - viewContainerWidth / 5) * inverter;\n                if (app.device.pixelRatio === 1) {\n                    activePageTranslate = Math.round(activePageTranslate);\n                    previousPageTranslate = Math.round(previousPageTranslate);\n                }\n        \n                activePage.transform('translate3d(' + activePageTranslate + 'px,0,0)');\n                if (view.params.swipeBackPageAnimateShadow && !app.device.android) pageShadow[0].style.opacity = 1 - 1 * percentage;\n        \n                previousPage.transform('translate3d(' + previousPageTranslate + 'px,0,0)');\n                if (view.params.swipeBackPageAnimateOpacity) previousPage[0].style.opacity = 0.9 + 0.1 * percentage;\n        \n                // Dynamic Navbars Animation\n                if (dynamicNavbar) {\n                    var i;\n                    for (i = 0; i < activeNavElements.length; i++) {\n                        el = $(activeNavElements[i]);\n                        if (!el.is('.subnavbar.sliding')) el[0].style.opacity = (1 - percentage * 1.3);\n                        if (el[0].className.indexOf('sliding') >= 0) {\n                            var activeNavTranslate = percentage * el[0].f7NavbarRightOffset;\n                            if (app.device.pixelRatio === 1) activeNavTranslate = Math.round(activeNavTranslate);\n                            el.transform('translate3d(' + activeNavTranslate + 'px,0,0)');\n                            if (app.params.animateNavBackIcon) {\n                                if (el[0].className.indexOf('left') >= 0 && activeNavBackIcon.length > 0) {\n                                    activeNavBackIcon.transform('translate3d(' + -activeNavTranslate + 'px,0,0)');\n                                }\n                            }\n                        }\n                    }\n                    for (i = 0; i < previousNavElements.length; i++) {\n                        el = $(previousNavElements[i]);\n                        if (!el.is('.subnavbar.sliding')) el[0].style.opacity = percentage * 1.3 - 0.3;\n                        if (el[0].className.indexOf('sliding') >= 0) {\n                            var previousNavTranslate = el[0].f7NavbarLeftOffset * (1 - percentage);\n                            if (app.device.pixelRatio === 1) previousNavTranslate = Math.round(previousNavTranslate);\n                            el.transform('translate3d(' + previousNavTranslate + 'px,0,0)');\n                            if (app.params.animateNavBackIcon) {\n                                if (el[0].className.indexOf('left') >= 0 && previousNavBackIcon.length > 0) {\n                                    previousNavBackIcon.transform('translate3d(' + -previousNavTranslate + 'px,0,0)');\n                                }\n                            }\n                        }\n                    }\n                }\n            };\n        \n            view.handleTouchEnd = function (e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n                isTouched = false;\n                isMoved = false;\n                if (touchesDiff === 0) {\n                    $([activePage[0], previousPage[0]]).transform('').css({opacity: '', boxShadow: ''});\n                    if (dynamicNavbar) {\n                        activeNavElements.transform('').css({opacity: ''});\n                        previousNavElements.transform('').css({opacity: ''});\n                        if (activeNavBackIcon && activeNavBackIcon.length > 0) activeNavBackIcon.transform('');\n                        if (previousNavBackIcon && activeNavBackIcon.length > 0) previousNavBackIcon.transform('');\n                    }\n                    return;\n                }\n                var timeDiff = (new Date()).getTime() - touchStartTime;\n                var pageChanged = false;\n                // Swipe back to previous page\n                if (\n                        timeDiff < 300 && touchesDiff > 10 ||\n                        timeDiff >= 300 && touchesDiff > viewContainerWidth / 2\n                    ) {\n                    activePage.removeClass('page-on-center').addClass('page-on-right');\n                    previousPage.removeClass('page-on-left').addClass('page-on-center');\n                    if (dynamicNavbar) {\n                        activeNavbar.removeClass('navbar-on-center').addClass('navbar-on-right');\n                        previousNavbar.removeClass('navbar-on-left').addClass('navbar-on-center');\n                    }\n                    pageChanged = true;\n                }\n                // Reset custom styles\n                // Add transitioning class for transition-duration\n                $([activePage[0], previousPage[0]]).transform('').css({opacity: '', boxShadow: ''}).addClass('page-transitioning');\n                if (dynamicNavbar) {\n                    activeNavElements.css({opacity: ''})\n                    .each(function () {\n                        var translate = pageChanged ? this.f7NavbarRightOffset : 0;\n                        var sliding = $(this);\n                        sliding.transform('translate3d(' + translate + 'px,0,0)');\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('left') && activeNavBackIcon.length > 0) {\n                                activeNavBackIcon.addClass('page-transitioning').transform('translate3d(' + -translate + 'px,0,0)');\n                            }\n                        }\n        \n                    }).addClass('page-transitioning');\n        \n                    previousNavElements.transform('').css({opacity: ''}).each(function () {\n                        var translate = pageChanged ? 0 : this.f7NavbarLeftOffset;\n                        var sliding = $(this);\n                        sliding.transform('translate3d(' + translate + 'px,0,0)');\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('left') && previousNavBackIcon.length > 0) {\n                                previousNavBackIcon.addClass('page-transitioning').transform('translate3d(' + -translate + 'px,0,0)');\n                            }\n                        }\n                    }).addClass('page-transitioning');\n                }\n                allowViewTouchMove = false;\n                view.allowPageChange = false;\n                // Swipe Back Callback\n                var callbackData = {\n                    activePage: activePage[0],\n                    previousPage: previousPage[0],\n                    activeNavbar: activeNavbar[0],\n                    previousNavbar: previousNavbar[0]\n                };\n                if (pageChanged) {\n                    // Update View's URL\n                    var url = view.history[view.history.length - 2];\n                    view.url = url;\n        \n                    // Page before animation callback\n                    app.pageBackCallback('before', view, {pageContainer: activePage[0], url: url, position: 'center', newPage: previousPage, oldPage: activePage, swipeBack: true});\n                    app.pageAnimCallback('before', view, {pageContainer: previousPage[0], url: url, position: 'left', newPage: previousPage, oldPage: activePage, swipeBack: true});\n        \n                    if (view.params.onSwipeBackBeforeChange) {\n                        view.params.onSwipeBackBeforeChange(callbackData);\n                    }\n                    container.trigger('swipeBackBeforeChange', callbackData);\n                }\n                else {\n                    if (view.params.onSwipeBackBeforeReset) {\n                        view.params.onSwipeBackBeforeReset(callbackData);\n                    }\n                    container.trigger('swipeBackBeforeReset', callbackData);\n                }\n        \n                activePage.transitionEnd(function () {\n                    $([activePage[0], previousPage[0]]).removeClass('page-transitioning');\n                    if (dynamicNavbar) {\n                        activeNavElements.removeClass('page-transitioning').css({opacity: ''});\n                        previousNavElements.removeClass('page-transitioning').css({opacity: ''});\n                        if (activeNavBackIcon && activeNavBackIcon.length > 0) activeNavBackIcon.removeClass('page-transitioning');\n                        if (previousNavBackIcon && previousNavBackIcon.length > 0) previousNavBackIcon.removeClass('page-transitioning');\n                    }\n                    allowViewTouchMove = true;\n                    view.allowPageChange = true;\n                    if (pageChanged) {\n                        if (app.params.pushState && view.main) history.back();\n                        // Page after animation callback\n                        app.pageBackCallback('after', view, {pageContainer: activePage[0], url: url, position: 'center', newPage: previousPage, oldPage: activePage, swipeBack: true});\n                        app.pageAnimCallback('after', view, {pageContainer: previousPage[0], url: url, position: 'left', newPage: previousPage, oldPage: activePage, swipeBack: true});\n                        app.router.afterBack(view, activePage, previousPage);\n        \n                        if (view.params.onSwipeBackAfterChange) {\n                            view.params.onSwipeBackAfterChange(callbackData);\n                        }\n                        container.trigger('swipeBackAfterChange', callbackData);\n                    }\n                    else {\n                        if (view.params.onSwipeBackAfterReset) {\n                            view.params.onSwipeBackAfterReset(callbackData);\n                        }\n                        container.trigger('swipeBackAfterReset', callbackData);\n                    }\n                    if (pageShadow && pageShadow.length > 0) pageShadow.remove();\n                });\n            };\n            view.attachEvents = function (detach) {\n                var action = detach ? 'off' : 'on';\n                container[action](app.touchEvents.start, view.handleTouchStart);\n                container[action](app.touchEvents.move, view.handleTouchMove);\n                container[action](app.touchEvents.end, view.handleTouchEnd);\n            };\n            view.detachEvents = function () {\n                view.attachEvents(true);\n            };\n        \n            // Init\n            if (view.params.swipeBackPage && !app.params.material) {\n                view.attachEvents();\n            }\n        \n            // Add view to app\n            app.views.push(view);\n            if (view.main) app.mainView = view;\n        \n            // Router \n            view.router = {\n                load: function (options) {\n                    return app.router.load(view, options);\n                },\n                back: function (options) {\n                    return app.router.back(view, options);  \n                },\n                // Shortcuts\n                loadPage: function (options) {\n                    options = options || {};\n                    if (typeof options === 'string') {\n                        var url = options;\n                        options = {};\n                        if (url && url.indexOf('#') === 0 && view.params.domCache) {\n                            options.pageName = url.split('#')[1];\n                        }\n                        else options.url = url;\n                    }\n                    return app.router.load(view, options);\n                },\n                loadContent: function (content) {\n                    return app.router.load(view, {content: content});\n                },\n                reloadPage: function (url) {\n                    return app.router.load(view, {url: url, reload: true});\n                },\n                reloadContent: function (content) {\n                    return app.router.load(view, {content: content, reload: true});\n                },\n                reloadPreviousPage: function (url) {\n                    return app.router.load(view, {url: url, reloadPrevious: true, reload: true});\n                },\n                reloadPreviousContent: function (content) {\n                    return app.router.load(view, {content: content, reloadPrevious: true, reload: true});\n                },\n                refreshPage: function () {\n                    var options = {\n                        url: view.url,\n                        reload: true,\n                        ignoreCache: true\n                    };\n                    if (options.url && options.url.indexOf('#') === 0) {\n                        if (view.params.domCache && view.pagesCache[options.url]) {\n                            options.pageName = view.pagesCache[options.url];\n                            options.url = undefined;\n                            delete options.url;\n                        }\n                        else if (view.contentCache[options.url]) {\n                            options.content = view.contentCache[options.url];\n                            options.url = undefined;\n                            delete options.url;\n                        }\n                    }\n                    return app.router.load(view, options);\n                },\n                refreshPreviousPage: function () {\n                    var options = {\n                        url: view.history[view.history.length - 2],\n                        reload: true,\n                        reloadPrevious: true,\n                        ignoreCache: true\n                    };\n                    if (options.url && options.url.indexOf('#') === 0 && view.params.domCache && view.pagesCache[options.url]) {\n                        options.pageName = view.pagesCache[options.url];\n                        options.url = undefined;\n                        delete options.url;\n                    }\n                    return app.router.load(view, options);\n                }\n            };\n        \n            // Aliases for temporary backward compatibility\n            view.loadPage = view.router.loadPage;\n            view.loadContent = view.router.loadContent;\n            view.reloadPage = view.router.reloadPage;\n            view.reloadContent = view.router.reloadContent;\n            view.reloadPreviousPage = view.router.reloadPreviousPage;\n            view.reloadPreviousContent = view.router.reloadPreviousContent;\n            view.refreshPage = view.router.refreshPage;\n            view.refreshPreviousPage = view.router.refreshPreviousPage;\n            view.back = view.router.back;\n        \n            // Bars methods\n            view.hideNavbar = function () {\n                return app.hideNavbar(container.find('.navbar'));\n            };\n            view.showNavbar = function () {\n                return app.showNavbar(container.find('.navbar'));\n            };\n            view.hideToolbar = function () {\n                return app.hideToolbar(container.find('.toolbar'));\n            };\n            view.showToolbar = function () {\n                return app.showToolbar(container.find('.toolbar'));\n            };\n        \n            // Push State on load\n            if (app.params.pushState && view.main) {\n                var pushStateUrl;\n                if (pushStateRoot) {\n                    pushStateUrl = docLocation.split(app.params.pushStateRoot + pushStateSeparator)[1];\n                }\n                else if (docLocation.indexOf(pushStateSeparator) >= 0 && docLocation.indexOf(pushStateSeparator + '#') < 0) {\n                    pushStateUrl = docLocation.split(pushStateSeparator)[1];\n                }\n                var pushStateAnimatePages = app.params.pushStateNoAnimation ? false : undefined;\n        \n                if (pushStateUrl) {\n                    app.router.load(view, {url: pushStateUrl, animatePages: pushStateAnimatePages, pushState: false});\n                }\n                else if (docLocation.indexOf(pushStateSeparator + '#') >= 0) {\n                    var state = history.state;\n                    if (state.pageName && 'viewIndex' in state) {\n                        app.router.load(view, {pageName: state.pageName, pushState: false});\n                    }\n                }\n        \n            }\n        \n            // Destroy\n            view.destroy = function () {\n                view.detachEvents();\n                view = undefined;\n            };\n        \n            // Plugin hook\n            app.pluginHook('addView', view);\n        \n            // Return view\n            return view;\n        };\n        \n        app.addView = function (selector, params) {\n            return new View(selector, params);\n        };\n        \n        app.getCurrentView = function (index) {\n            var popoverView = $('.popover.modal-in .view');\n            var popupView = $('.popup.modal-in .view');\n            var panelView = $('.panel.active .view');\n            var appViews = $('.views');\n            // Find active view as tab\n            var appView = appViews.children('.view');\n            // Propably in tabs or split view\n            if (appView.length > 1) {\n                if (appView.hasClass('tab')) {\n                    // Tabs\n                    appView = appViews.children('.view.active');\n                }\n                else {\n                    // Split View, leave appView intact\n                }\n            }\n            if (popoverView.length > 0 && popoverView[0].f7View) return popoverView[0].f7View;\n            if (popupView.length > 0 && popupView[0].f7View) return popupView[0].f7View;\n            if (panelView.length > 0 && panelView[0].f7View) return panelView[0].f7View;\n            if (appView.length > 0) {\n                if (appView.length === 1 && appView[0].f7View) return appView[0].f7View;\n                if (appView.length > 1) {\n                    var currentViews = [];\n                    for (var i = 0; i < appView.length; i++) {\n                        if (appView[i].f7View) currentViews.push(appView[i].f7View);\n                    }\n                    if (currentViews.length > 0 && typeof index !== 'undefined') return currentViews[index];\n                    if (currentViews.length > 1) return currentViews;\n                    if (currentViews.length === 1) return currentViews[0];\n                    return undefined;\n                }\n            }\n            return undefined;\n        };\n        \n\n        /*======================================================\n        ************   Navbars && Toolbars   ************\n        ======================================================*/\n        // On Navbar Init Callback\n        app.navbarInitCallback = function (view, pageContainer, navbarContainer, navbarInnerContainer) {\n            if (!navbarContainer && navbarInnerContainer) navbarContainer = $(navbarInnerContainer).parent('.navbar')[0];\n            if (navbarInnerContainer.f7NavbarInitialized && view && !view.params.domCache) return;\n            var navbarData = {\n                container: navbarContainer,\n                innerContainer: navbarInnerContainer\n            };\n            var pageData = pageContainer && pageContainer.f7PageData;\n        \n            var eventData = {\n                page: pageData,\n                navbar: navbarData\n            };\n        \n            if (navbarInnerContainer.f7NavbarInitialized && ((view && view.params.domCache) || (!view && $(navbarContainer).parents('.popup, .popover, .login-screen, .modal, .actions-modal, .picker-modal').length > 0))) {\n                // Reinit Navbar\n                app.reinitNavbar(navbarContainer, navbarInnerContainer);\n        \n                // Plugin hook\n                app.pluginHook('navbarReinit', eventData);\n        \n                // Event\n                $(navbarInnerContainer).trigger('navbarReinit', eventData);\n                return;\n            }\n            navbarInnerContainer.f7NavbarInitialized = true;\n            // Before Init\n            app.pluginHook('navbarBeforeInit', navbarData, pageData);\n            $(navbarInnerContainer).trigger('navbarBeforeInit', eventData);\n        \n            // Initialize Navbar\n            app.initNavbar(navbarContainer, navbarInnerContainer);\n        \n            // On init\n            app.pluginHook('navbarInit', navbarData, pageData);\n            $(navbarInnerContainer).trigger('navbarInit', eventData);\n        };\n        // Navbar Remove Callback\n        app.navbarRemoveCallback = function (view, pageContainer, navbarContainer, navbarInnerContainer) {\n            if (!navbarContainer && navbarInnerContainer) navbarContainer = $(navbarInnerContainer).parent('.navbar')[0];\n            var navbarData = {\n                container: navbarContainer,\n                innerContainer: navbarInnerContainer\n            };\n            var pageData = pageContainer.f7PageData;\n        \n            var eventData = {\n                page: pageData,\n                navbar: navbarData\n            };\n            app.pluginHook('navbarBeforeRemove', navbarData, pageData);\n            $(navbarInnerContainer).trigger('navbarBeforeRemove', eventData);\n        };\n        app.initNavbar = function (navbarContainer, navbarInnerContainer) {\n            // Init Subnavbar Searchbar\n            if (app.initSearchbar) app.initSearchbar(navbarInnerContainer);\n        };\n        app.reinitNavbar = function (navbarContainer, navbarInnerContainer) {\n            // Re init navbar methods\n        };\n        app.initNavbarWithCallback = function (navbarContainer) {\n            navbarContainer = $(navbarContainer);\n            var viewContainer = navbarContainer.parents('.' + app.params.viewClass);\n            var view;\n            if (viewContainer.length === 0) return;\n            if (navbarContainer.parents('.navbar-through').length === 0 && viewContainer.find('.navbar-through').length === 0) return;\n            view = viewContainer[0].f7View || undefined;\n        \n            navbarContainer.find('.navbar-inner').each(function () {\n                var navbarInnerContainer = this;\n                var pageContainer;\n                if ($(navbarInnerContainer).attr('data-page')) {\n                    // For dom cache\n                    pageContainer = viewContainer.find('.page[data-page=\"' + $(navbarInnerContainer).attr('data-page') + '\"]')[0];\n                }\n                if (!pageContainer) {\n                    var pages = viewContainer.find('.page');\n                    if (pages.length === 1) {\n                        pageContainer = pages[0];\n                    }\n                    else {\n                        viewContainer.find('.page').each(function () {\n                            if (this.f7PageData && this.f7PageData.navbarInnerContainer === navbarInnerContainer) {\n                                pageContainer = this;\n                            }\n                        });\n                    }\n                }\n                app.navbarInitCallback(view, pageContainer, navbarContainer[0], navbarInnerContainer);\n            });\n        };\n        \n        // Size Navbars\n        app.sizeNavbars = function (viewContainer) {\n            if (app.params.material) return;\n            var navbarInner = viewContainer ? $(viewContainer).find('.navbar .navbar-inner:not(.cached)') : $('.navbar .navbar-inner:not(.cached)');\n            navbarInner.each(function () {\n                var n = $(this);\n                if (n.hasClass('cached')) return;\n                var left = app.rtl ? n.find('.right') : n.find('.left'),\n                    right = app.rtl ? n.find('.left') : n.find('.right'),\n                    center = n.find('.center'),\n                    subnavbar = n.find('.subnavbar'),\n                    noLeft = left.length === 0,\n                    noRight = right.length === 0,\n                    leftWidth = noLeft ? 0 : left.outerWidth(true),\n                    rightWidth = noRight ? 0 : right.outerWidth(true),\n                    centerWidth = center.outerWidth(true),\n                    navbarStyles = n.styles(),\n                    navbarWidth = n[0].offsetWidth - parseInt(navbarStyles.paddingLeft, 10) - parseInt(navbarStyles.paddingRight, 10),\n                    onLeft = n.hasClass('navbar-on-left'),\n                    currLeft, diff;\n        \n                if (noRight) {\n                    currLeft = navbarWidth - centerWidth;\n                }\n                if (noLeft) {\n                    currLeft = 0;\n                }\n                if (!noLeft && !noRight) {\n                    currLeft = (navbarWidth - rightWidth - centerWidth + leftWidth) / 2;\n                }\n                var requiredLeft = (navbarWidth - centerWidth) / 2;\n                if (navbarWidth - leftWidth - rightWidth > centerWidth) {\n                    if (requiredLeft < leftWidth) {\n                        requiredLeft = leftWidth;\n                    }\n                    if (requiredLeft + centerWidth > navbarWidth - rightWidth) {\n                        requiredLeft = navbarWidth - rightWidth - centerWidth;\n                    }\n                    diff = requiredLeft - currLeft;\n                }\n                else {\n                    diff = 0;\n                }\n                // RTL inverter\n                var inverter = app.rtl ? -1 : 1;\n        \n                if (center.hasClass('sliding')) {\n                    center[0].f7NavbarLeftOffset = -(currLeft + diff) * inverter;\n                    center[0].f7NavbarRightOffset = (navbarWidth - currLeft - diff - centerWidth) * inverter;\n                    if (onLeft) center.transform('translate3d(' + center[0].f7NavbarLeftOffset + 'px, 0, 0)');\n                }\n                if (!noLeft && left.hasClass('sliding')) {\n                    if (app.rtl) {\n                        left[0].f7NavbarLeftOffset = -(navbarWidth - left[0].offsetWidth) / 2 * inverter;\n                        left[0].f7NavbarRightOffset = leftWidth * inverter;\n                    }\n                    else {\n                        left[0].f7NavbarLeftOffset = -leftWidth;\n                        left[0].f7NavbarRightOffset = (navbarWidth - left[0].offsetWidth) / 2;\n                    }\n                    if (onLeft) left.transform('translate3d(' + left[0].f7NavbarLeftOffset + 'px, 0, 0)');\n                }\n                if (!noRight && right.hasClass('sliding')) {\n                    if (app.rtl) {\n                        right[0].f7NavbarLeftOffset = -rightWidth * inverter;\n                        right[0].f7NavbarRightOffset = (navbarWidth - right[0].offsetWidth) / 2 * inverter;\n                    }\n                    else {\n                        right[0].f7NavbarLeftOffset = -(navbarWidth - right[0].offsetWidth) / 2;\n                        right[0].f7NavbarRightOffset = rightWidth;\n                    }\n                    if (onLeft) right.transform('translate3d(' + right[0].f7NavbarLeftOffset + 'px, 0, 0)');\n                }\n                if (subnavbar.length && subnavbar.hasClass('sliding')) {\n                    subnavbar[0].f7NavbarLeftOffset = app.rtl ? subnavbar[0].offsetWidth : -subnavbar[0].offsetWidth;\n                    subnavbar[0].f7NavbarRightOffset = -subnavbar[0].f7NavbarLeftOffset;\n                }\n        \n                // Center left\n                var centerLeft = diff;\n                if (app.rtl && noLeft && noRight && center.length > 0) centerLeft = -centerLeft;\n                center.css({left: centerLeft + 'px'});\n                \n            });\n        };\n        \n        // Hide/Show Navbars/Toolbars\n        app.hideNavbar = function (navbarContainer) {\n            $(navbarContainer).addClass('navbar-hidden');\n            return true;\n        };\n        app.showNavbar = function (navbarContainer) {\n            var navbar = $(navbarContainer);\n            navbar.addClass('navbar-hiding').removeClass('navbar-hidden').transitionEnd(function () {\n                navbar.removeClass('navbar-hiding');\n            });\n            return true;\n        };\n        app.hideToolbar = function (toolbarContainer) {\n            $(toolbarContainer).addClass('toolbar-hidden');\n            return true;\n        };\n        app.showToolbar = function (toolbarContainer) {\n            var toolbar = $(toolbarContainer);\n            toolbar.addClass('toolbar-hiding').removeClass('toolbar-hidden').transitionEnd(function () {\n                toolbar.removeClass('toolbar-hiding');\n            });\n        };\n        \n\n        /*======================================================\n        ************   Searchbar   ************\n        ======================================================*/\n        var Searchbar = function (container, params) {\n            var defaults = {\n                input: null,\n                clearButton: null,\n                cancelButton: null,\n                searchList: null,\n                searchIn: '.item-title',\n                searchBy: '',\n                found: null,\n                notFound: null,\n                overlay: null,\n                ignore: '.searchbar-ignore',\n                customSearch: false,\n                removeDiacritics: false,\n                hideDividers: true,\n                hideGroups: true,\n                /* Callbacks\n                onSearch\n                onEnable\n                onDisable\n                onClear\n                */\n        \n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined' || params[def] === null) {\n                    params[def] = defaults[def];\n                }\n            }\n            \n            // Instance\n            var s = this;\n        \n            // Material\n            s.material = app.params.material;\n        \n            // Params\n            s.params = params;\n        \n            // Container\n            container = $(container);\n            s.container = container;\n        \n            // Active\n            s.active = false;\n        \n            // Input\n            s.input = s.params.input ? $(s.params.input) : s.container.find('input[type=\"search\"]');\n            s.clearButton = s.params.clearButton ? $(s.params.clearButton) : s.container.find('.searchbar-clear');\n            s.cancelButton = s.params.cancelButton ? $(s.params.cancelButton) : s.container.find('.searchbar-cancel');\n        \n            // Search List\n            s.searchList = $(s.params.searchList);\n        \n            // Is Virtual List\n            s.isVirtualList = s.searchList.hasClass('virtual-list');\n        \n            // Is In Page\n            s.pageContainer = s.container.parents('.page').eq(0);\n        \n            // Overlay\n            if (!s.params.overlay) {\n                s.overlay = s.pageContainer.length > 0 ? s.pageContainer.find('.searchbar-overlay') : $('.searchbar-overlay');\n            }\n            else {\n                s.overlay = $(s.params.overlay);\n            }\n            // Found and not found\n            if (!s.params.found) {\n                s.found = s.pageContainer.length > 0 ? s.pageContainer.find('.searchbar-found') : $('.searchbar-found');\n            }\n            else {\n                s.found = $(s.params.found);\n            }\n            if (!s.params.notFound) {\n                s.notFound = s.pageContainer.length > 0 ? s.pageContainer.find('.searchbar-not-found') : $('.searchbar-not-found');\n            }\n            else {\n                s.notFound = $(s.params.notFound);\n            }\n        \n            \n        \n            // Diacritics\n            var defaultDiacriticsRemovalap = [\n                {base:'A', letters:'\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F'},\n                {base:'AA',letters:'\\uA732'},\n                {base:'AE',letters:'\\u00C6\\u01FC\\u01E2'},\n                {base:'AO',letters:'\\uA734'},\n                {base:'AU',letters:'\\uA736'},\n                {base:'AV',letters:'\\uA738\\uA73A'},\n                {base:'AY',letters:'\\uA73C'},\n                {base:'B', letters:'\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181'},\n                {base:'C', letters:'\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E'},\n                {base:'D', letters:'\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779'},\n                {base:'DZ',letters:'\\u01F1\\u01C4'},\n                {base:'Dz',letters:'\\u01F2\\u01C5'},\n                {base:'E', letters:'\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E'},\n                {base:'F', letters:'\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B'},\n                {base:'G', letters:'\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E'},\n                {base:'H', letters:'\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D'},\n                {base:'I', letters:'\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197'},\n                {base:'J', letters:'\\u004A\\u24BF\\uFF2A\\u0134\\u0248'},\n                {base:'K', letters:'\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2'},\n                {base:'L', letters:'\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780'},\n                {base:'LJ',letters:'\\u01C7'},\n                {base:'Lj',letters:'\\u01C8'},\n                {base:'M', letters:'\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C'},\n                {base:'N', letters:'\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4'},\n                {base:'NJ',letters:'\\u01CA'},\n                {base:'Nj',letters:'\\u01CB'},\n                {base:'O', letters:'\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C'},\n                {base:'OI',letters:'\\u01A2'},\n                {base:'OO',letters:'\\uA74E'},\n                {base:'OU',letters:'\\u0222'},\n                {base:'OE',letters:'\\u008C\\u0152'},\n                {base:'oe',letters:'\\u009C\\u0153'},\n                {base:'P', letters:'\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754'},\n                {base:'Q', letters:'\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A'},\n                {base:'R', letters:'\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782'},\n                {base:'S', letters:'\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784'},\n                {base:'T', letters:'\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786'},\n                {base:'TZ',letters:'\\uA728'},\n                {base:'U', letters:'\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244'},\n                {base:'V', letters:'\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245'},\n                {base:'VY',letters:'\\uA760'},\n                {base:'W', letters:'\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72'},\n                {base:'X', letters:'\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C'},\n                {base:'Y', letters:'\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE'},\n                {base:'Z', letters:'\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762'},\n                {base:'a', letters:'\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250'},\n                {base:'aa',letters:'\\uA733'},\n                {base:'ae',letters:'\\u00E6\\u01FD\\u01E3'},\n                {base:'ao',letters:'\\uA735'},\n                {base:'au',letters:'\\uA737'},\n                {base:'av',letters:'\\uA739\\uA73B'},\n                {base:'ay',letters:'\\uA73D'},\n                {base:'b', letters:'\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253'},\n                {base:'c', letters:'\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184'},\n                {base:'d', letters:'\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A'},\n                {base:'dz',letters:'\\u01F3\\u01C6'},\n                {base:'e', letters:'\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD'},\n                {base:'f', letters:'\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C'},\n                {base:'g', letters:'\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F'},\n                {base:'h', letters:'\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265'},\n                {base:'hv',letters:'\\u0195'},\n                {base:'i', letters:'\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131'},\n                {base:'j', letters:'\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249'},\n                {base:'k', letters:'\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3'},\n                {base:'l', letters:'\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747'},\n                {base:'lj',letters:'\\u01C9'},\n                {base:'m', letters:'\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F'},\n                {base:'n', letters:'\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5'},\n                {base:'nj',letters:'\\u01CC'},\n                {base:'o', letters:'\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275'},\n                {base:'oi',letters:'\\u01A3'},\n                {base:'ou',letters:'\\u0223'},\n                {base:'oo',letters:'\\uA74F'},\n                {base:'p',letters:'\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755'},\n                {base:'q',letters:'\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759'},\n                {base:'r',letters:'\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783'},\n                {base:'s',letters:'\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B'},\n                {base:'t',letters:'\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787'},\n                {base:'tz',letters:'\\uA729'},\n                {base:'u',letters: '\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289'},\n                {base:'v',letters:'\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C'},\n                {base:'vy',letters:'\\uA761'},\n                {base:'w',letters:'\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73'},\n                {base:'x',letters:'\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D'},\n                {base:'y',letters:'\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF'},\n                {base:'z',letters:'\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763'}\n            ];\n        \n            var diacriticsMap = {};\n            for (var i=0; i < defaultDiacriticsRemovalap.length; i++){\n                var letters = defaultDiacriticsRemovalap[i].letters;\n                for (var j=0; j < letters.length ; j++){\n                    diacriticsMap[letters[j]] = defaultDiacriticsRemovalap[i].base;\n                }\n            }\n        \n            function removeDiacritics (str) {\n                return str.replace(/[^\\u0000-\\u007E]/g, function(a){ \n                   return diacriticsMap[a] || a; \n                });\n            }\n        \n            // Set Cancel button\n            var cancelMarginProp = app.rtl ? 'margin-left' : 'margin-right';\n            var cancelButtonHasMargin = false;\n            s.setCancelButtonMargin = function () {\n                s.cancelButton.transition(0).show();\n                s.cancelButton.css(cancelMarginProp, -s.cancelButton[0].offsetWidth + 'px');\n                var clientLeft = s.cancelButton[0].clientLeft;\n                s.cancelButton.transition('');\n                cancelButtonHasMargin = true;\n            };\n        \n            // Trigger\n            s.triggerEvent = function (eventName, callbackName, eventData) {\n                s.container.trigger(eventName, eventData);\n                if (s.searchList.length > 0) s.searchList.trigger(eventName, eventData);\n                if (callbackName && s.params[callbackName]) s.params[callbackName](s, eventData);\n            };\n        \n            // Enable/disalbe\n            s.enable = function () {\n                function _enable() {\n                    if ((s.searchList.length || s.params.customSearch) && !s.container.hasClass('searchbar-active')) s.overlay.addClass('searchbar-overlay-active');\n                    s.container.addClass('searchbar-active');\n                    if (s.cancelButton.length > 0 && !s.material) {\n                        if (!cancelButtonHasMargin) {\n                            s.setCancelButtonMargin();\n                        }\n                        s.cancelButton.css(cancelMarginProp, '0px');\n                    }\n                    s.triggerEvent('enableSearch', 'onEnable');\n                    s.active = true;\n                }\n                if (app.device.ios) {\n                    setTimeout(function () {\n                        _enable();\n                    }, 400);\n                }\n                else {\n                    _enable();\n                }\n            };\n        \n            s.disable = function () {\n                s.input.val('').trigger('change');\n                s.container.removeClass('searchbar-active searchbar-not-empty');\n                if (s.cancelButton.length > 0 && !s.material) s.cancelButton.css(cancelMarginProp, -s.cancelButton[0].offsetWidth + 'px');\n                \n                if (s.searchList.length || s.params.customSearch) s.overlay.removeClass('searchbar-overlay-active');\n                function _disable() {\n                    s.input.blur();\n                    s.triggerEvent('disableSearch', 'onDisable');\n                    s.active = false;\n                }\n                if (app.device.ios) {\n                    setTimeout(function () {\n                        _disable();\n                    }, 400);\n                }\n                else {\n                    _disable();\n                }\n            };\n        \n            // Clear\n            s.clear = function (e) {\n                if (!s.query && e && $(e.target).hasClass('searchbar-clear')) {\n                    s.disable();\n                    return;\n                }\n                s.input.val('').trigger('change').focus();\n                s.triggerEvent('clearSearch', 'onClear');\n            };\n        \n            // Search\n            s.handleInput = function () {\n                setTimeout(function () {\n                    var value = s.input.val().trim();\n                    if ((s.searchList.length > 0 || s.params.customSearch) && (s.params.searchIn || s.isVirtualList)) s.search(value, true);\n                }, 0);\n            };\n        \n            var previousQuery = '';\n            var virtualList;\n            s.search = function (query, internal) {\n                if (query.trim() === previousQuery) return;\n                previousQuery = query.trim();\n        \n                if (!internal) {\n                    if (!s.active) {\n                        s.enable();\n                    }\n                    if (!internal) {\n                        s.input.val(query);\n                    }\n                }\n                s.query = s.value = query;\n                // Add active/inactive classes on overlay\n                if (query.length === 0) {\n                    s.container.removeClass('searchbar-not-empty');\n                    if (s.searchList.length && s.container.hasClass('searchbar-active')) s.overlay.addClass('searchbar-overlay-active');\n                }\n                else {\n                    s.container.addClass('searchbar-not-empty');\n                    if (s.searchList.length && s.container.hasClass('searchbar-active')) s.overlay.removeClass('searchbar-overlay-active');\n                }\n        \n                if (s.params.customSearch) {\n                    s.triggerEvent('search', 'onSearch', {query: query});\n                    return;\n                }\n                \n                var foundItems = [];\n                if (s.isVirtualList) {\n                    virtualList = s.searchList[0].f7VirtualList;\n                    if (query.trim() === '') {\n                        virtualList.resetFilter();\n                        s.notFound.hide();\n                        s.found.show();\n                        return;\n                    }\n                    if (virtualList.params.searchAll) {\n                        foundItems = virtualList.params.searchAll(query, virtualList.items) || [];\n                    }\n                    else if (virtualList.params.searchByItem) {\n                        for (var i = 0; i < virtualList.items.length; i++) {\n                            if(virtualList.params.searchByItem(query, i, virtualList.params.items[i])) {\n                                foundItems.push(i);\n                            }\n                        }\n                    }\n                }\n                else {\n                    var values;\n                    if (s.params.removeDiacritics) values = removeDiacritics(query.trim().toLowerCase()).split(' ');\n                    else {\n                        values = query.trim().toLowerCase().split(' ');\n                    }\n                    s.searchList.find('li').removeClass('hidden-by-searchbar').each(function (index, el) {\n                        el = $(el);\n                        var compareWithText = [];\n                        el.find(s.params.searchIn).each(function () {\n                            var itemText = $(this).text().trim().toLowerCase();\n                            if (s.params.removeDiacritics) itemText = removeDiacritics(itemText);\n                            compareWithText.push(itemText);\n                        });\n                        compareWithText = compareWithText.join(' ');\n                        var wordsMatch = 0;\n                        for (var i = 0; i < values.length; i++) {\n                            if (compareWithText.indexOf(values[i]) >= 0) wordsMatch++;\n                        }\n                        if (wordsMatch !== values.length && !(s.params.ignore && el.is(s.params.ignore))) {\n                            el.addClass('hidden-by-searchbar');\n                        }\n                        else {\n                            foundItems.push(el[0]);\n                        }\n                    });\n        \n                    if (s.params.hideDividers) {\n                        s.searchList.find('.item-divider, .list-group-title').each(function () {\n                            var title = $(this);\n                            var nextElements = title.nextAll('li');\n                            var hide = true;\n                            for (var i = 0; i < nextElements.length; i++) {\n                                var nextEl = $(nextElements[i]);\n                                if (nextEl.hasClass('list-group-title') || nextEl.hasClass('item-divider')) break;\n                                if (!nextEl.hasClass('hidden-by-searchbar')) {\n                                    hide = false;\n                                }\n                            }\n                            var ignore = s.params.ignore && title.is(s.params.ignore);\n                            if (hide && !ignore) title.addClass('hidden-by-searchbar');\n                            else title.removeClass('hidden-by-searchbar');\n                        });\n                    }\n                    if (s.params.hideGroups) {\n                        s.searchList.find('.list-group').each(function () {\n                            var group = $(this);\n                            var ignore = s.params.ignore && group.is(s.params.ignore);\n                            var notHidden = group.find('li:not(.hidden-by-searchbar)');\n                            if (notHidden.length === 0 && !ignore) {\n                                group.addClass('hidden-by-searchbar');\n                            }\n                            else {\n                                group.removeClass('hidden-by-searchbar');\n                            }\n                        });\n                    }\n                }\n                s.triggerEvent('search', 'onSearch', {query: query, foundItems: foundItems});\n                if (foundItems.length === 0) {\n                    s.notFound.show();\n                    s.found.hide();\n                }\n                else {\n                    s.notFound.hide();\n                    s.found.show();\n                }\n                if (s.isVirtualList) {\n                    virtualList.filterItems(foundItems);\n                }\n            };\n        \n            // Events\n            function preventSubmit(e) {\n                e.preventDefault();\n            }\n        \n            s.attachEvents = function (destroy) {\n                var method = destroy ? 'off' : 'on';\n                s.container[method]('submit', preventSubmit);\n                if (!s.material) s.cancelButton[method]('click', s.disable);\n                s.overlay[method]('click', s.disable);\n                s.input[method]('focus', s.enable);\n                s.input[method]('change keydown keypress keyup', s.handleInput);\n                s.clearButton[method]('click', s.clear);\n                    \n            };\n            s.detachEvents = function() {\n                s.attachEvents(true);\n            };\n        \n            // Init Destroy\n            s.init = function () {\n                s.attachEvents();\n            };\n            s.destroy = function () {\n                if (!s) return;\n                s.detachEvents();\n                s = null;\n            };\n        \n            // Init\n            s.init();\n        \n            s.container[0].f7Searchbar = s;\n            return s;\n        \n        };\n        app.searchbar = function (container, params) {\n            return new Searchbar(container, params);\n        };\n        app.initSearchbar = function (container) {\n            container = $(container);\n            var searchbar = container.hasClass('searchbar') ? container : container.find('.searchbar');\n            if (searchbar.length === 0) return;\n            if (!searchbar.hasClass('searchbar-init')) return;\n        \n            var sb = app.searchbar(searchbar, searchbar.dataset());\n        \n            function onBeforeRemove() {\n                if (sb) sb.destroy();\n            }\n            if (container.hasClass('page')) {\n                container.once('pageBeforeRemove', onBeforeRemove);   \n            }\n            else if (container.hasClass('navbar-inner')) {\n                container.once('navbarBeforeRemove', onBeforeRemove);\n            }\n        };\n\n        /*======================================================\n        ************   Messagebar   ************\n        ======================================================*/\n        var Messagebar = function (container, params) {\n            var defaults = {\n                textarea: null,\n                maxHeight: null,\n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined' || params[def] === null) {\n                    params[def] = defaults[def];\n                }\n            }\n            \n            // Instance\n            var m = this;\n        \n            // Params\n            m.params = params;\n        \n            // Container\n            m.container = $(container);\n            if (m.container.length === 0) return;\n        \n            // Textarea\n            m.textarea = m.params.textarea ? $(m.params.textarea) : m.container.find('textarea');\n        \n            // Is In Page\n            m.pageContainer = m.container.parents('.page').eq(0);\n            m.pageContent = m.pageContainer.find('.page-content');\n        \n            // Initial Sizes\n            m.pageContentPadding = parseInt(m.pageContent.css('padding-bottom'));\n            m.initialBarHeight = m.container[0].offsetHeight;\n            m.initialAreaHeight = m.textarea[0].offsetHeight;\n            \n        \n            // Resize textarea\n            m.sizeTextarea = function () {\n                // Reset\n                m.textarea.css({'height': ''});\n                \n                var height = m.textarea[0].offsetHeight;\n                var diff = height - m.textarea[0].clientHeight;\n                var scrollHeight = m.textarea[0].scrollHeight;\n        \n                // Update\n                if (scrollHeight + diff > height) {\n                    var newAreaHeight = scrollHeight + diff;\n                    var newBarHeight = m.initialBarHeight + (newAreaHeight - m.initialAreaHeight);\n                    var maxBarHeight = m.params.maxHeight || m.container.parents('.view')[0].offsetHeight - 88;\n                    if (newBarHeight > maxBarHeight) {\n                        newBarHeight = parseInt(maxBarHeight, 10);\n                        newAreaHeight = newBarHeight - m.initialBarHeight + m.initialAreaHeight;\n                    }\n                    m.textarea.css('height', newAreaHeight + 'px');\n                    m.container.css('height', newBarHeight + 'px');\n                    var onBottom = (m.pageContent[0].scrollTop === m.pageContent[0].scrollHeight - m.pageContent[0].offsetHeight);\n                    if (m.pageContent.length > 0) {\n                        m.pageContent.css('padding-bottom', newBarHeight + 'px');\n                        if (m.pageContent.find('.messages-new-first').length === 0 && onBottom) {\n                            m.pageContent.scrollTop(m.pageContent[0].scrollHeight - m.pageContent[0].offsetHeight);\n                        }\n                    }\n                }\n                else {\n                    if (m.pageContent.length > 0) {\n                        m.container.css({'height': '', 'bottom': ''});\n                        m.pageContent.css({'padding-bottom': ''});\n                    }\n                }\n            };\n            \n            // Clear\n            m.clear = function () {\n                m.textarea.val('').trigger('change');\n            };\n            m.value = function (value) {\n                if (typeof value === 'undefined') return m.textarea.val();\n                else m.textarea.val(value).trigger('change');  \n            };\n            \n            // Handle textarea\n            m.textareaTimeout = undefined;\n            m.handleTextarea = function (e) {\n                clearTimeout(m.textareaTimeout);\n                m.textareaTimeout = setTimeout(function () {\n                    m.sizeTextarea();\n                }, 0);\n            };\n        \n            //Events\n            function preventSubmit(e) {\n                e.preventDefault();\n            }\n        \n            m.attachEvents = function (destroy) {\n                var method = destroy ? 'off' : 'on';\n                m.container[method]('submit', preventSubmit);\n                m.textarea[method]('change keydown keypress keyup paste cut', m.handleTextarea);\n            };\n            m.detachEvents = function () {\n                m.attachEvents(true);\n            };\n            \n            // Init Destroy\n            m.init = function () {\n                m.attachEvents();\n            };\n            m.destroy = function () {\n                m.detachEvents();\n                m = null;\n            };\n        \n            // Init\n            m.init();\n        \n            m.container[0].f7Messagebar = m;\n            return m;\n        };\n        app.messagebar = function (container, params) {\n            return new Messagebar(container, params);\n        };\n        app.initPageMessagebar = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var messagebar = pageContainer.hasClass('messagebar') ? pageContainer : pageContainer.find('.messagebar');\n            if (messagebar.length === 0) return;\n            if (!messagebar.hasClass('messagebar-init')) return;\n            var mb = app.messagebar(messagebar, messagebar.dataset());\n        \n            // Destroy on page remove\n            function pageBeforeRemove() {\n                mb.destroy();\n                pageContainer.off('pageBeforeRemove', pageBeforeRemove);\n            }\n            if (pageContainer.hasClass('page')) {\n                pageContainer.on('pageBeforeRemove', pageBeforeRemove);\n            }\n        };\n\n        /*======================================================\n        ************   XHR   ************\n        ======================================================*/\n        // XHR Caching\n        app.cache = [];\n        app.removeFromCache = function (url) {\n            var index = false;\n            for (var i = 0; i < app.cache.length; i++) {\n                if (app.cache[i].url === url) index = i;\n            }\n            if (index !== false) app.cache.splice(index, 1);\n        };\n        \n        // XHR\n        app.xhr = false;\n        app.get = function (url, view, ignoreCache, callback) {\n            // should we ignore get params or not\n            var _url = url;\n            if (app.params.cacheIgnoreGetParameters && url.indexOf('?') >= 0) {\n                _url = url.split('?')[0];\n            }\n            if (app.params.cache && !ignoreCache && url.indexOf('nocache') < 0 && app.params.cacheIgnore.indexOf(_url) < 0) {\n                // Check is the url cached\n                for (var i = 0; i < app.cache.length; i++) {\n                    if (app.cache[i].url === _url) {\n                        // Check expiration\n                        if ((new Date()).getTime() - app.cache[i].time < app.params.cacheDuration) {\n                            // Load from cache\n                            callback(app.cache[i].content);\n                            return false;\n                        }\n                    }\n                }\n            }\n        \n            app.xhr = $.ajax({\n                url: url,\n                method: 'GET',\n                beforeSend: app.params.onAjaxStart,\n                complete: function (xhr) {\n                    if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) {\n                        if (app.params.cache && !ignoreCache) {\n                            app.removeFromCache(_url);\n                            app.cache.push({\n                                url: _url,\n                                time: (new Date()).getTime(),\n                                content: xhr.responseText\n                            });\n                        }\n                        callback(xhr.responseText, false);\n                    }\n                    else {\n                        callback(xhr.responseText, true);\n                    }\n                    if (app.params.onAjaxComplete) app.params.onAjaxComplete(xhr);\n                },\n                error: function (xhr) {\n                    callback(xhr.responseText, true);\n                    if (app.params.onAjaxError) app.params.onAjaxError(xhr);\n                }\n            });\n            if (view) view.xhr = app.xhr;\n        \n            return app.xhr;\n        };\n        \n\n        /*======================================================\n        ************   Pages   ************\n        ======================================================*/\n        // Page Callbacks API\n        app.pageCallbacks = {};\n        \n        app.onPage = function (callbackName, pageName, callback) {\n            if (pageName && pageName.split(' ').length > 1) {\n                var pageNames = pageName.split(' ');\n                var returnCallbacks = [];\n                for (var i = 0; i < pageNames.length; i++) {\n                    returnCallbacks.push(app.onPage(callbackName, pageNames[i], callback));\n                }\n                returnCallbacks.remove = function () {\n                    for (var i = 0; i < returnCallbacks.length; i++) {\n                        returnCallbacks[i].remove();\n                    }\n                };\n                returnCallbacks.trigger = function () {\n                    for (var i = 0; i < returnCallbacks.length; i++) {\n                        returnCallbacks[i].trigger();\n                    }\n                };\n                return returnCallbacks;\n            }\n            var callbacks = app.pageCallbacks[callbackName][pageName];\n            if (!callbacks) {\n                callbacks = app.pageCallbacks[callbackName][pageName] = [];\n            }\n            app.pageCallbacks[callbackName][pageName].push(callback);\n            return {\n                remove: function () {\n                    var removeIndex;\n                    for (var i = 0; i < callbacks.length; i++) {\n                        if (callbacks[i].toString() === callback.toString()) {\n                            removeIndex = i;\n                        }\n                    }\n                    if (typeof removeIndex !== 'undefined') callbacks.splice(removeIndex, 1);\n                },\n                trigger: callback\n            };\n        };\n        \n        //Create callbacks methods dynamically\n        function createPageCallback(callbackName) {\n            var capitalized = callbackName.replace(/^./, function (match) {\n                return match.toUpperCase();\n            });\n            app['onPage' + capitalized] = function (pageName, callback) {\n                return app.onPage(callbackName, pageName, callback);\n            };\n        }\n        \n        var pageCallbacksNames = ('beforeInit init reinit beforeAnimation afterAnimation back afterBack beforeRemove').split(' ');\n        for (var i = 0; i < pageCallbacksNames.length; i++) {\n            app.pageCallbacks[pageCallbacksNames[i]] = {};\n            createPageCallback(pageCallbacksNames[i]);\n        }\n        \n        app.triggerPageCallbacks = function (callbackName, pageName, pageData) {\n            var allPagesCallbacks = app.pageCallbacks[callbackName]['*'];\n            if (allPagesCallbacks) {\n                for (var j = 0; j < allPagesCallbacks.length; j++) {\n                    allPagesCallbacks[j](pageData);\n                }\n            }\n            var callbacks = app.pageCallbacks[callbackName][pageName];\n            if (!callbacks || callbacks.length === 0) return;\n            for (var i = 0; i < callbacks.length; i++) {\n                callbacks[i](pageData);\n            }\n        };\n        \n        // On Page Init Callback\n        app.pageInitCallback = function (view, params) {\n            var pageContainer = params.pageContainer;\n            if (pageContainer.f7PageInitialized && view && !view.params.domCache) return;\n        \n            // Page Data\n            var pageData = {\n                container: pageContainer,\n                url: params.url,\n                query: params.query || $.parseUrlQuery(params.url || ''),\n                name: $(pageContainer).attr('data-page'),\n                view: view,\n                from: params.position,\n                context: params.context,\n                navbarInnerContainer: params.navbarInnerContainer,\n                fromPage: params.fromPage\n            };\n            if (params.fromPage && !params.fromPage.navbarInnerContainer && params.oldNavbarInnerContainer) {\n                params.fromPage.navbarInnerContainer = params.oldNavbarInnerContainer;\n            }\n        \n            if (pageContainer.f7PageInitialized && ((view && view.params.domCache) || (!view && $(pageContainer).parents('.popup, .popover, .login-screen, .modal, .actions-modal, .picker-modal').length > 0))) {\n                // Reinit Page\n                app.reinitPage(pageContainer);\n        \n                // Callbacks\n                app.pluginHook('pageReinit', pageData);\n                if (app.params.onPageReinit) app.params.onPageReinit(app, pageData);\n                app.triggerPageCallbacks('reinit', pageData.name, pageData);\n                $(pageData.container).trigger('pageReinit', {page: pageData});\n                return;\n            }\n            pageContainer.f7PageInitialized = true;\n        \n            // Store pagedata in page\n            pageContainer.f7PageData = pageData;\n        \n            // Update View's activePage\n            if (view && !params.preloadOnly && !params.reloadPrevious) {\n                // Add data-page on view\n                $(view.container).attr('data-page', pageData.name);\n                // Update View active page data\n                view.activePage = pageData;\n            }\n        \n            // Before Init Callbacks\n            app.pluginHook('pageBeforeInit', pageData);\n            if (app.params.onPageBeforeInit) app.params.onPageBeforeInit(app, pageData);\n            app.triggerPageCallbacks('beforeInit', pageData.name, pageData);\n            $(pageData.container).trigger('pageBeforeInit', {page: pageData});\n        \n            // Init page\n            app.initPage(pageContainer);\n        \n            // Init Callback\n            app.pluginHook('pageInit', pageData);\n            if (app.params.onPageInit) app.params.onPageInit(app, pageData);\n            app.triggerPageCallbacks('init', pageData.name, pageData);\n            $(pageData.container).trigger('pageInit', {page: pageData});\n        };\n        app.pageRemoveCallback = function (view, pageContainer, position) {\n            var pageContext;\n            if (pageContainer.f7PageData) pageContext = pageContainer.f7PageData.context;\n            // Page Data\n            var pageData = {\n                container: pageContainer,\n                name: $(pageContainer).attr('data-page'),\n                view: view,\n                url: pageContainer.f7PageData && pageContainer.f7PageData.url,\n                query: pageContainer.f7PageData && pageContainer.f7PageData.query,\n                navbarInnerContainer: pageContainer.f7PageData && pageContainer.f7PageData.navbarInnerContainer,\n                from: position,\n                context: pageContext\n            };\n            // Before Init Callback\n            app.pluginHook('pageBeforeRemove', pageData);\n            if (app.params.onPageBeforeRemove) app.params.onPageBeforeRemove(app, pageData);\n            app.triggerPageCallbacks('beforeRemove', pageData.name, pageData);\n            $(pageData.container).trigger('pageBeforeRemove', {page: pageData});\n        };\n        app.pageBackCallback = function (callback, view, params) {\n            // Page Data\n            var pageContainer = params.pageContainer;\n            var pageContext;\n            if (pageContainer.f7PageData) pageContext = pageContainer.f7PageData.context;\n        \n            var pageData = {\n                container: pageContainer,\n                name: $(pageContainer).attr('data-page'),\n                url: pageContainer.f7PageData && pageContainer.f7PageData.url,\n                query: pageContainer.f7PageData && pageContainer.f7PageData.query,\n                view: view,\n                from: params.position,\n                context: pageContext,\n                navbarInnerContainer: pageContainer.f7PageData && pageContainer.f7PageData.navbarInnerContainer,\n                swipeBack: params.swipeBack\n            };\n        \n            if (callback === 'after') {\n                app.pluginHook('pageAfterBack', pageData);\n                if (app.params.onPageAfterBack) app.params.onPageAfterBack(app, pageData);\n                app.triggerPageCallbacks('afterBack', pageData.name, pageData);\n                $(pageContainer).trigger('pageAfterBack', {page: pageData});\n        \n            }\n            if (callback === 'before') {\n                app.pluginHook('pageBack', pageData);\n                if (app.params.onPageBack) app.params.onPageBack(app, pageData);\n                app.triggerPageCallbacks('back', pageData.name, pageData);\n                $(pageData.container).trigger('pageBack', {page: pageData});\n            }\n        };\n        app.pageAnimCallback = function (callback, view, params) {\n            var pageContainer = params.pageContainer;\n            var pageContext;\n            if (pageContainer.f7PageData) pageContext = pageContainer.f7PageData.context;\n            // Page Data\n            var pageData = {\n                container: pageContainer,\n                url: params.url,\n                query: params.query || $.parseUrlQuery(params.url || ''),\n                name: $(pageContainer).attr('data-page'),\n                view: view,\n                from: params.position,\n                context: pageContext,\n                swipeBack: params.swipeBack,\n                navbarInnerContainer: pageContainer.f7PageData && pageContainer.f7PageData.navbarInnerContainer,\n                fromPage: params.fromPage\n            };\n            var oldPage = params.oldPage,\n                newPage = params.newPage;\n        \n            // Update page date\n            pageContainer.f7PageData = pageData;\n        \n            if (callback === 'after') {\n                app.pluginHook('pageAfterAnimation', pageData);\n                if (app.params.onPageAfterAnimation) app.params.onPageAfterAnimation(app, pageData);\n                app.triggerPageCallbacks('afterAnimation', pageData.name, pageData);\n                $(pageData.container).trigger('pageAfterAnimation', {page: pageData});\n        \n            }\n            if (callback === 'before') {\n                // Add data-page on view\n                $(view.container).attr('data-page', pageData.name);\n        \n                // Update View's activePage\n                if (view) view.activePage = pageData;\n        \n                // Hide/show navbar dynamically\n                if (newPage.hasClass('no-navbar') && !oldPage.hasClass('no-navbar')) {\n                    view.hideNavbar();\n                }\n                if (!newPage.hasClass('no-navbar') && (oldPage.hasClass('no-navbar') || oldPage.hasClass('no-navbar-by-scroll'))) {\n                    view.showNavbar();\n                }\n                // Hide/show navbar toolbar\n                if (newPage.hasClass('no-toolbar') && !oldPage.hasClass('no-toolbar')) {\n                    view.hideToolbar();\n                }\n                if (!newPage.hasClass('no-toolbar') && (oldPage.hasClass('no-toolbar') || oldPage.hasClass('no-toolbar-by-scroll'))) {\n                    view.showToolbar();\n                }\n                // Hide/show tabbar\n                var tabBar;\n                if (newPage.hasClass('no-tabbar') && !oldPage.hasClass('no-tabbar')) {\n                    tabBar = $(view.container).find('.tabbar');\n                    if (tabBar.length === 0) tabBar = $(view.container).parents('.' + app.params.viewsClass).find('.tabbar');\n                    app.hideToolbar(tabBar);\n                }\n                if (!newPage.hasClass('no-tabbar') && (oldPage.hasClass('no-tabbar') || oldPage.hasClass('no-tabbar-by-scroll'))) {\n                    tabBar = $(view.container).find('.tabbar');\n                    if (tabBar.length === 0) tabBar = $(view.container).parents('.' + app.params.viewsClass).find('.tabbar');\n                    app.showToolbar(tabBar);\n                }\n        \n                oldPage.removeClass('no-navbar-by-scroll no-toolbar-by-scroll');\n                // Callbacks\n                app.pluginHook('pageBeforeAnimation', pageData);\n                if (app.params.onPageBeforeAnimation) app.params.onPageBeforeAnimation(app, pageData);\n                app.triggerPageCallbacks('beforeAnimation', pageData.name, pageData);\n                $(pageData.container).trigger('pageBeforeAnimation', {page: pageData});\n            }\n        };\n        \n        // Init Page Events and Manipulations\n        app.initPage = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            if (pageContainer.length === 0) return;\n            // Size navbars on page load\n            if (app.sizeNavbars) app.sizeNavbars(pageContainer.parents('.' + app.params.viewClass)[0]);\n            // Init messages\n            if (app.initPageMessages) app.initPageMessages(pageContainer);\n            // Init forms storage\n            if (app.initFormsStorage) app.initFormsStorage(pageContainer);\n            // Init smart select\n            if (app.initSmartSelects) app.initSmartSelects(pageContainer);\n            // Init slider\n            if (app.initPageSwiper) app.initPageSwiper(pageContainer);\n            // Init pull to refres\n            if (app.initPullToRefresh) app.initPullToRefresh(pageContainer);\n            // Init infinite scroll\n            if (app.initInfiniteScroll) app.initInfiniteScroll(pageContainer);\n            // Init searchbar\n            if (app.initSearchbar) app.initSearchbar(pageContainer);\n            // Init message bar\n            if (app.initPageMessagebar) app.initPageMessagebar(pageContainer);\n            // Init scroll toolbars\n            if (app.initScrollToolbars) app.initScrollToolbars(pageContainer);\n            // Init lazy images\n            if (app.initImagesLazyLoad) app.initImagesLazyLoad(pageContainer);\n            // Init resizeable textareas\n            if (app.initPageResizableTextareas) app.initPageResizableTextareas(pageContainer);\n            // Init Material Preloader\n            if (app.params.material && app.initPageMaterialPreloader) app.initPageMaterialPreloader(pageContainer);\n            // Init Material Inputs\n            if (app.params.material && app.initPageMaterialInputs) app.initPageMaterialInputs(pageContainer);\n            // Init Material Tabbar\n            if (app.params.material && app.initPageMaterialTabbar) app.initPageMaterialTabbar(pageContainer);\n        };\n        app.reinitPage = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            if (pageContainer.length === 0) return;\n            // Size navbars on page reinit\n            if (app.sizeNavbars) app.sizeNavbars(pageContainer.parents('.' + app.params.viewClass)[0]);\n            // Reinit slider\n            if (app.reinitPageSwiper) app.reinitPageSwiper(pageContainer);\n            // Reinit lazy load\n            if (app.reinitLazyLoad) app.reinitLazyLoad(pageContainer);\n        };\n        app.initPageWithCallback = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var viewContainer = pageContainer.parents('.' + app.params.viewClass);\n            if (viewContainer.length === 0) return;\n            var view = viewContainer[0].f7View || undefined;\n            var url = view && view.url ? view.url : undefined;\n            if (viewContainer && pageContainer.attr('data-page')) {\n                viewContainer.attr('data-page', pageContainer.attr('data-page'));\n            }\n            app.pageInitCallback(view, {pageContainer: pageContainer[0], url: url, position: 'center'});\n        };\n\n        /*======================================================\n        ************   Navigation / Router   ************\n        ======================================================*/\n        app.router = {\n            // Temporary DOM Element\n            temporaryDom: document.createElement('div'),\n        \n            // Find page or navbar in passed container which are related to View\n            findElement: function (selector, container, view, notCached) {\n                container = $(container);\n                if (notCached) selector = selector + ':not(.cached)';\n                var found = container.find(selector);\n                if (found.length > 1) {\n                    if (typeof view.selector === 'string') {\n                        // Search in related view\n                        found = container.find(view.selector + ' ' + selector);\n                    }\n                    if (found.length > 1) {\n                        // Search in main view\n                        found = container.find('.' + app.params.viewMainClass + ' ' + selector);\n                    }\n                }\n                if (found.length === 1) return found;\n                else {\n                    // Try to find non cached\n                    if (!notCached) found = app.router.findElement(selector, container, view, true);\n                    if (found && found.length === 1) return found;\n                    else return undefined;\n                }\n            },\n        \n            // Set pages classess for animationEnd\n            animatePages: function (leftPage, rightPage, direction, view) {\n                // Loading new page\n                var removeClasses = 'page-on-center page-on-right page-on-left';\n                if (direction === 'to-left') {\n                    leftPage.removeClass(removeClasses).addClass('page-from-center-to-left');\n                    rightPage.removeClass(removeClasses).addClass('page-from-right-to-center');\n                }\n                // Go back\n                if (direction === 'to-right') {\n                    leftPage.removeClass(removeClasses).addClass('page-from-left-to-center');\n                    rightPage.removeClass(removeClasses).addClass('page-from-center-to-right');\n                    \n                }\n            },\n        \n            // Prepare navbar before animarion\n            prepareNavbar: function (newNavbarInner, oldNavbarInner, newNavbarPosition) {\n                $(newNavbarInner).find('.sliding').each(function () {\n                    var sliding = $(this);\n                    var slidingOffset = newNavbarPosition === 'right' ? this.f7NavbarRightOffset : this.f7NavbarLeftOffset;\n        \n                    if (app.params.animateNavBackIcon) {\n                        if (sliding.hasClass('left') && sliding.find('.back .icon').length > 0) {\n                            sliding.find('.back .icon').transform('translate3d(' + (-slidingOffset) + 'px,0,0)');\n                        }\n                        if (newNavbarPosition === 'left' && sliding.hasClass('center') && $(oldNavbarInner).find('.left .back .icon ~ span').length > 0) {\n                            slidingOffset += $(oldNavbarInner).find('.left .back span')[0].offsetLeft;\n                        }\n                    }\n        \n                    sliding.transform('translate3d(' + slidingOffset + 'px,0,0)');\n                });\n            },\n        \n            // Set navbars classess for animation\n            animateNavbars: function (leftNavbarInner, rightNavbarInner, direction, view) {\n                // Loading new page\n                var removeClasses = 'navbar-on-right navbar-on-center navbar-on-left';\n                if (direction === 'to-left') {\n                    rightNavbarInner.removeClass(removeClasses).addClass('navbar-from-right-to-center');\n                    rightNavbarInner.find('.sliding').each(function () {\n                        var sliding = $(this);\n                        sliding.transform('translate3d(0px,0,0)');\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('left') && sliding.find('.back .icon').length > 0) {\n                                sliding.find('.back .icon').transform('translate3d(0px,0,0)');\n                            }\n                        }\n                    });\n        \n                    leftNavbarInner.removeClass(removeClasses).addClass('navbar-from-center-to-left');\n                    leftNavbarInner.find('.sliding').each(function () {\n                        var sliding = $(this);\n                        var rightText;\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('center') && rightNavbarInner.find('.sliding.left .back .icon').length > 0) {\n                                rightText = rightNavbarInner.find('.sliding.left .back span');\n                                if (rightText.length > 0) this.f7NavbarLeftOffset += rightText[0].offsetLeft;\n                            }\n                            if (sliding.hasClass('left') && sliding.find('.back .icon').length > 0) {\n                                sliding.find('.back .icon').transform('translate3d(' + (-this.f7NavbarLeftOffset) + 'px,0,0)');\n                            }\n                        }\n                        sliding.transform('translate3d(' + (this.f7NavbarLeftOffset) + 'px,0,0)');\n                    });\n                }\n                // Go back\n                if (direction === 'to-right') {\n                    leftNavbarInner.removeClass(removeClasses).addClass('navbar-from-left-to-center');\n                    leftNavbarInner.find('.sliding').each(function () {\n                        var sliding = $(this);\n                        sliding.transform('translate3d(0px,0,0)');\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('left') && sliding.find('.back .icon').length > 0) {\n                                sliding.find('.back .icon').transform('translate3d(0px,0,0)');\n                            }\n                        }\n                    });\n        \n                    rightNavbarInner.removeClass(removeClasses).addClass('navbar-from-center-to-right');\n                    rightNavbarInner.find('.sliding').each(function () {\n                        var sliding = $(this);\n                        if (app.params.animateNavBackIcon) {\n                            if (sliding.hasClass('left') && sliding.find('.back .icon').length > 0) {\n                                sliding.find('.back .icon').transform('translate3d(' + (-this.f7NavbarRightOffset) + 'px,0,0)');\n                            }\n                        }\n                        sliding.transform('translate3d(' + (this.f7NavbarRightOffset) + 'px,0,0)');\n                    });\n                }\n            },\n        \n            preprocess: function(view, content, url, next) {\n                // Plugin hook\n                app.pluginHook('routerPreprocess', view, content, url, next);\n                \n                // Preprocess by plugin\n                content = app.pluginProcess('preprocess', content);\n        \n                if (view && view.params && view.params.preprocess) {\n                    content = view.params.preprocess(content, url, next);\n                    if (typeof content !== 'undefined') {\n                        next(content);\n                    }\n                } \n                else if (app.params.preprocess) {\n                    content = app.params.preprocess(content, url, next);\n                    if (typeof content !== 'undefined') {\n                        next(content);\n                    }  \n                }\n                else {\n                    next(content);\n                }\n            },\n            preroute: function(view, options) {\n                app.pluginHook('routerPreroute', view, options);\n                if ((app.params.preroute && app.params.preroute(view, options) === false) || (view && view.params.preroute && view.params.preroute(view, options) === false)) {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            },\n        \n            template7Render: function (view, options) {\n                var url = options.url,\n                    content = options.content, //initial content\n                    t7_rendered_content = options.content, // will be rendered using Template7\n                    context = options.context, // Context data for Template7\n                    contextName = options.contextName, \n                    template = options.template, // Template 7 compiled template\n                    pageName = options.pageName;\n        \n                var t7_ctx, t7_template;\n                if (typeof content === 'string') {\n                    if (url) {\n                        if (app.template7Cache[url] && !options.ignoreCache) t7_template = t7.cache[url];\n                        else {\n                            t7_template = t7.compile(content);\n                            t7.cache[url] = t7_template;\n                        }\n                    }\n                    else t7_template = t7.compile(content);\n                }\n                else if (template) {\n                    t7_template = template;\n                }\n        \n                if (context) t7_ctx = context;\n                else {\n                    if (contextName) {\n                        if (contextName.indexOf('.') >= 0) {\n                            var _ctx_path = contextName.split('.');\n                            var _ctx = t7.data[_ctx_path[0]];\n                            for (var i = 1; i < _ctx_path.length; i++) {\n                                if (_ctx_path[i]) _ctx = _ctx[_ctx_path[i]];\n                            }\n                            t7_ctx = _ctx;\n                        }\n                        else t7_ctx = t7.data[contextName];\n                    }\n                    if (!t7_ctx && url) {\n                        t7_ctx = t7.data['url:' + url];\n                    }\n                    if (!t7_ctx && typeof content === 'string' && !template) {\n                        //try to find by page name in content\n                        var pageNameMatch = content.match(/(data-page=[\"'][^\"^']*[\"'])/);\n                        if (pageNameMatch) {\n                            var page = pageNameMatch[0].split('data-page=')[1].replace(/['\"]/g, '');\n                            if (page) t7_ctx = t7.data['page:' + page];\n                        }\n                    }\n                    if (!t7_ctx && template && t7.templates) {\n                        // Try to find matched template name in t7.templates\n                        for (var templateName in t7.templates) {\n                            if (t7.templates[templateName] === template) t7_ctx = t7.data[templateName];\n                        }\n                    }\n                    if (!t7_ctx) t7_ctx = {};\n                }\n        \n                if (t7_template && t7_ctx) {\n                    if (typeof t7_ctx === 'function') t7_ctx = t7_ctx();\n                    if (url) {\n                        // Extend data with URL query\n                        var query = $.parseUrlQuery(url);\n                        t7_ctx.url_query = {};\n                        for (var key in query) {\n                            t7_ctx.url_query[key] = query[key];\n                        }\n                    }\n                    t7_rendered_content = t7_template(t7_ctx);\n                }\n        \n                return {content: t7_rendered_content, context: t7_ctx};\n            }\n        };\n        \n        \n        app.router._load = function (view, options) {\n            options = options || {};\n            \n            var url = options.url,\n                content = options.content, //initial content\n                t7_rendered = {content: options.content},\n                template = options.template, // Template 7 compiled template\n                pageName = options.pageName,\n                viewContainer = $(view.container), \n                pagesContainer = $(view.pagesContainer),\n                animatePages = options.animatePages,\n                newPage, oldPage, pagesInView, i, oldNavbarInner, newNavbarInner, navbar, dynamicNavbar, reloadPosition,\n                isDynamicPage = typeof url === 'undefined' && content || template, \n                pushState = options.pushState;\n        \n            if (typeof animatePages === 'undefined') animatePages = view.params.animatePages;\n        \n            // Plugin hook\n            app.pluginHook('routerLoad', view, options);\n        \n            // Render with Template7\n            if (app.params.template7Pages && typeof content === 'string' || template) {\n                t7_rendered = app.router.template7Render(view, options);\n                if (t7_rendered.content && !content) {\n                    content = t7_rendered.content;\n                }\n            }\n        \n            app.router.temporaryDom.innerHTML = '';\n        \n            // Parse DOM\n            if (!pageName) {\n                if (url || (typeof content === 'string')) {\n                    app.router.temporaryDom.innerHTML = t7_rendered.content;\n                } else {\n                    if ('length' in content && content.length > 1) {\n                        for (var ci = 0; ci < content.length; ci++) {\n                            $(app.router.temporaryDom).append(content[ci]);\n                        }\n                    } else {\n                        $(app.router.temporaryDom).append(content);\n                    }\n                }\n            }\n        \n            // Reload position\n            reloadPosition = options.reload && (options.reloadPrevious ? 'left' : 'center');\n        \n            // Find new page\n            if (pageName) newPage = pagesContainer.find('.page[data-page=\"' + pageName + '\"]');\n            else {\n                newPage = app.router.findElement('.page', app.router.temporaryDom, view);\n            }\n        \n            // If page not found exit\n            if (!newPage || newPage.length === 0 || (pageName && view.activePage && view.activePage.name === pageName)) {\n                view.allowPageChange = true;\n                return;\n            }\n        \n            newPage.addClass(options.reload ? 'page-on-' + reloadPosition : 'page-on-right');\n        \n            // Find old page (should be the last one) and remove older pages\n            pagesInView = pagesContainer.children('.page:not(.cached)');\n        \n            if (options.reload && options.reloadPrevious && pagesInView.length === 1)  {\n                view.allowPageChange = true;\n                return;\n            }\n        \n            if (options.reload) {\n                oldPage = pagesInView.eq(pagesInView.length - 1);\n            }\n            else {\n                if (pagesInView.length > 1) {\n                    for (i = 0; i < pagesInView.length - 2; i++) {\n                        if (!view.params.domCache) {\n                            app.pageRemoveCallback(view, pagesInView[i], 'left');\n                            $(pagesInView[i]).remove();\n                        }\n                        else {\n                            $(pagesInView[i]).addClass('cached');\n                        }\n                    }\n                    if (!view.params.domCache) {\n                        app.pageRemoveCallback(view, pagesInView[i], 'left');\n                        $(pagesInView[i]).remove();\n                    }\n                    else {\n                        $(pagesInView[i]).addClass('cached');\n                    }\n                }\n                oldPage = pagesContainer.children('.page:not(.cached)');\n            }\n            if(view.params.domCache) newPage.removeClass('cached');\n        \n            // Dynamic navbar\n            if (view.params.dynamicNavbar) {\n                dynamicNavbar = true;\n                // Find navbar\n                if (pageName) {\n                    newNavbarInner = viewContainer.find('.navbar-inner[data-page=\"' + pageName + '\"]');\n                }\n                else {\n                    newNavbarInner = app.router.findElement('.navbar-inner', app.router.temporaryDom, view);    \n                }\n                if (!newNavbarInner || newNavbarInner.length === 0) {\n                    dynamicNavbar = false;\n                }\n                navbar = viewContainer.find('.navbar');\n                if (options.reload) {\n                    oldNavbarInner = navbar.find('.navbar-inner:not(.cached):last-child');\n                }\n                else {\n                    oldNavbarInner = navbar.find('.navbar-inner:not(.cached)');    \n                \n                    if (oldNavbarInner.length > 0) {\n                        for (i = 0; i < oldNavbarInner.length - 1; i++) {\n                            if (!view.params.domCache) {\n                                app.navbarRemoveCallback(view, pagesInView[i], navbar[0], oldNavbarInner[i]);\n                                $(oldNavbarInner[i]).remove();\n                            }\n                            else\n                                $(oldNavbarInner[i]).addClass('cached');\n                        }\n                        if (!newNavbarInner && oldNavbarInner.length === 1) {\n                            if (!view.params.domCache) {\n                                app.navbarRemoveCallback(view, pagesInView[0], navbar[0], oldNavbarInner[0]);\n                                $(oldNavbarInner[0]).remove();\n                            }\n                            else\n                                $(oldNavbarInner[0]).addClass('cached');\n                        }\n                        oldNavbarInner = navbar.find('.navbar-inner:not(.cached)');\n                    }\n                }\n            }\n            if (dynamicNavbar) {\n                newNavbarInner.addClass(options.reload ? 'navbar-on-' + reloadPosition : 'navbar-on-right');\n                if(view.params.domCache) newNavbarInner.removeClass('cached');\n                newPage[0].f7RelatedNavbar = newNavbarInner[0];\n                newNavbarInner[0].f7RelatedPage = newPage[0];\n            }\n        \n            // save content areas into view's cache\n            if (!url) {\n                var newPageName = pageName || newPage.attr('data-page');\n                if (isDynamicPage) url = '#' + app.params.dynamicPageUrl.replace(/{{name}}/g, newPageName).replace(/{{index}}/g, view.history.length - (options.reload ? 1 : 0));\n                else url = '#' + newPageName;\n                if (!view.params.domCache) {\n                    view.contentCache[url] = content;\n                }\n                if (view.params.domCache && pageName) {\n                    view.pagesCache[url] = pageName;\n                }\n            }\n        \n            // Push State\n            if (app.params.pushState && !options.reloadPrevious && view.main)  {\n                if (typeof pushState === 'undefined') pushState = true;\n                var pushStateRoot = app.params.pushStateRoot || '';\n                var method = options.reload ? 'replaceState' : 'pushState';\n                if (pushState) {\n                    if (!isDynamicPage && !pageName) {\n                        history[method]({url: url, viewIndex: app.views.indexOf(view)}, '', pushStateRoot + app.params.pushStateSeparator + url);\n                    }\n                    else if (isDynamicPage && content) {\n                        history[method]({content: content, url: url, viewIndex: app.views.indexOf(view)}, '', pushStateRoot + app.params.pushStateSeparator + url);\n                    }\n                    else if (pageName) {\n                        history[method]({pageName: pageName, url: url, viewIndex: app.views.indexOf(view)}, '', pushStateRoot + app.params.pushStateSeparator + url);\n                    }\n                }\n            }\n        \n            // Update View history\n            view.url = url;\n            if (options.reload) {\n                var lastUrl = view.history[view.history.length - (options.reloadPrevious ? 2 : 1)];\n                if (lastUrl && lastUrl.indexOf('#') === 0 && lastUrl in view.contentCache && lastUrl !== url) {\n                    view.contentCache[lastUrl] = null;\n                    delete view.contentCache[lastUrl];\n                }\n                view.history[view.history.length - (options.reloadPrevious ? 2 : 1)] = url;\n            }\n            else {\n                view.history.push(url);\n            }\n        \n            // Unique history\n            var historyBecameUnique = false;\n            if (view.params.uniqueHistory) {\n                var _history = view.history;\n                var _url = url;\n                if (view.params.uniqueHistoryIgnoreGetParameters) {\n                    _history = [];\n                    _url = url.split('?')[0];\n                    for (i = 0; i < view.history.length; i++) {\n                        _history.push(view.history[i].split('?')[0]);\n                    }\n                }\n                \n                if (_history.indexOf(_url) !== _history.lastIndexOf(_url)) {\n                    view.history = view.history.slice(0, _history.indexOf(_url));\n                    view.history.push(url);\n                    historyBecameUnique = true;\n                }\n            }\n            // Dom manipulations\n            if (options.reloadPrevious) {\n                oldPage = oldPage.prev('.page');\n                newPage.insertBefore(oldPage);\n                if (dynamicNavbar) {\n                    oldNavbarInner = oldNavbarInner.prev('.navbar-inner');\n                    newNavbarInner.insertAfter(oldNavbarInner);\n                }\n            }\n            else {\n                pagesContainer.append(newPage[0]);\n                if (dynamicNavbar) navbar.append(newNavbarInner[0]);\n            }\n            // Remove Old Page And Navbar\n            if (options.reload) {\n                if (view.params.domCache && view.initialPages.indexOf(oldPage[0]) >= 0) {\n                    oldPage.addClass('cached');\n                    if (dynamicNavbar) oldNavbarInner.addClass('cached');\n                }\n                else {\n                    app.pageRemoveCallback(view, oldPage[0], reloadPosition);\n                    if (dynamicNavbar) app.navbarRemoveCallback(view, oldPage[0], navbar[0], oldNavbarInner[0]);\n                    oldPage.remove();\n                    if (dynamicNavbar) oldNavbarInner.remove();\n                }\n            }\n        \n            // Page Init Events\n            app.pageInitCallback(view, {\n                pageContainer: newPage[0], \n                url: url, \n                position: options.reload ? reloadPosition : 'right', \n                navbarInnerContainer: dynamicNavbar ? newNavbarInner && newNavbarInner[0] : undefined, \n                oldNavbarInnerContainer: dynamicNavbar ? oldNavbarInner && oldNavbarInner[0] : undefined,\n                context: t7_rendered.context,\n                query: options.query,\n                fromPage: oldPage && oldPage.length && oldPage[0].f7PageData,\n                reload: options.reload,\n                reloadPrevious: options.reloadPrevious\n            });\n        \n            // Navbar init event\n            if (dynamicNavbar) {\n                app.navbarInitCallback(view, newPage[0], navbar[0], newNavbarInner[0], url, options.reload ? reloadPosition : 'right');\n            }\n        \n            if (options.reload) {\n                view.allowPageChange = true;\n                if (historyBecameUnique) view.refreshPreviousPage();\n                return;\n            }\n        \n            if (dynamicNavbar && animatePages) {\n                app.router.prepareNavbar(newNavbarInner, oldNavbarInner, 'right');\n            }\n            // Force reLayout\n            var clientLeft = newPage[0].clientLeft;\n        \n            // Before Anim Callback\n            app.pageAnimCallback('before', view, {\n                pageContainer: newPage[0], \n                url: url, \n                position: 'right', \n                oldPage: oldPage, \n                newPage: newPage, \n                query: options.query,\n                fromPage: oldPage && oldPage.length && oldPage[0].f7PageData\n            });\n        \n            function afterAnimation() {\n                view.allowPageChange = true;\n                newPage.removeClass('page-from-right-to-center page-on-right page-on-left').addClass('page-on-center');\n                oldPage.removeClass('page-from-center-to-left page-on-center page-on-right').addClass('page-on-left');\n                if (dynamicNavbar) {\n                    newNavbarInner.removeClass('navbar-from-right-to-center navbar-on-left navbar-on-right').addClass('navbar-on-center');\n                    oldNavbarInner.removeClass('navbar-from-center-to-left navbar-on-center navbar-on-right').addClass('navbar-on-left');\n                }\n                app.pageAnimCallback('after', view, {\n                    pageContainer: newPage[0], \n                    url: url, \n                    position: 'right', \n                    oldPage: oldPage, \n                    newPage: newPage, \n                    query: options.query,\n                    fromPage: oldPage && oldPage.length && oldPage[0].f7PageData\n                });\n                if (app.params.pushState && view.main) app.pushStateClearQueue();\n                if (!(view.params.swipeBackPage || view.params.preloadPreviousPage)) {\n                    if (view.params.domCache) {\n                        oldPage.addClass('cached');\n                        oldNavbarInner.addClass('cached');\n                    }\n                    else {\n                        if (!(url.indexOf('#') === 0 && newPage.attr('data-page').indexOf('smart-select-') === 0)) {\n                            app.pageRemoveCallback(view, oldPage[0], 'left');\n                            if (dynamicNavbar) app.navbarRemoveCallback(view, oldPage[0], navbar[0], oldNavbarInner[0]);\n                            oldPage.remove();\n                            if (dynamicNavbar) oldNavbarInner.remove();    \n                        }\n                    }\n                }\n                if (view.params.uniqueHistory && historyBecameUnique) {\n                    view.refreshPreviousPage();\n                }\n            }\n            if (animatePages) {\n                // Set pages before animation\n                if (app.params.material && app.params.materialPageLoadDelay) {\n                    setTimeout(function () {\n                        app.router.animatePages(oldPage, newPage, 'to-left', view);            \n                    }, app.params.materialPageLoadDelay);\n                }\n                else {\n                    app.router.animatePages(oldPage, newPage, 'to-left', view);    \n                }\n        \n                // Dynamic navbar animation\n                if (dynamicNavbar) {\n                    setTimeout(function() {\n                        app.router.animateNavbars(oldNavbarInner, newNavbarInner, 'to-left', view);\n                    }, 0);\n                }\n                newPage.animationEnd(function (e) {\n                    afterAnimation();\n                });\n            }\n            else {\n                if (dynamicNavbar) newNavbarInner.find('.sliding, .sliding .back .icon').transform('');\n                afterAnimation();\n            }\n        \n        };\n        \n        app.router.load = function (view, options) {\n            if (app.router.preroute(view, options)) {\n                return false;\n            }\n            options = options || {};\n            var url = options.url;\n            var content = options.content;\n            var pageName = options.pageName;\n            if (pageName) {\n                if (pageName.indexOf('?') > 0) {\n                    options.query = $.parseUrlQuery(pageName);\n                    options.pageName = pageName = pageName.split('?')[0];\n                }\n            }\n            var template = options.template;\n            if (view.params.reloadPages === true) options.reload = true;\n        \n            if (!view.allowPageChange) return false;\n            if (url && view.url === url && !options.reload && !view.params.allowDuplicateUrls) return false;\n            view.allowPageChange = false;\n            if (app.xhr && view.xhr && view.xhr === app.xhr) {\n                app.xhr.abort();\n                app.xhr = false;\n            }\n            function proceed(content) {\n                app.router.preprocess(view, content, url, function (content) {\n                    options.content = content;\n                    app.router._load(view, options);\n                });\n            }\n            if (content || pageName) {\n                proceed(content);\n                return;\n            }\n            else if (template) {\n                app.router._load(view, options);\n                return;\n            }\n        \n            if (!options.url || options.url === '#') {\n                view.allowPageChange = true;\n                return;\n            }\n            app.get(options.url, view, options.ignoreCache, function (content, error) {\n                if (error) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                proceed(content);\n            });\n        };\n        \n        app.router._back = function (view, options) {\n            options = options || {};\n            var url = options.url,\n                content = options.content, \n                t7_rendered = {content: options.content}, // will be rendered using Template7\n                template = options.template, // Template 7 compiled template\n                animatePages = options.animatePages, \n                preloadOnly = options.preloadOnly, \n                pushState = options.pushState, \n                ignoreCache = options.ignoreCache,\n                force = options.force,\n                pageName = options.pageName;\n        \n            var viewContainer = $(view.container),\n                pagesContainer = $(view.pagesContainer),\n                pagesInView = pagesContainer.children('.page:not(.cached)'),\n                oldPage, newPage, oldNavbarInner, newNavbarInner, navbar, navbarInners, dynamicNavbar, manipulateDom = true;\n        \n            if (typeof animatePages === 'undefined') animatePages = view.params.animatePages;\n        \n            app.pluginHook('routerBack', view, options);\n        \n            // Render with Template7\n            if (app.params.template7Pages && typeof content === 'string' || template) {\n                t7_rendered = app.router.template7Render(view, options);\n                if (t7_rendered.content && !content) {\n                    content = t7_rendered.content;\n                }\n            }\n        \n            // Animation\n            function afterAnimation() {\n                app.pageBackCallback('after', view, {\n                    pageContainer: oldPage[0], \n                    url: url, \n                    position: 'center', \n                    oldPage: oldPage, \n                    newPage: newPage, \n                });\n                app.pageAnimCallback('after', view, {\n                    pageContainer: newPage[0], \n                    url: url, \n                    position: 'left', \n                    oldPage: oldPage, \n                    newPage: newPage, \n                    query: options.query,\n                    fromPage: oldPage && oldPage.length && oldPage[0].f7PageData\n                });\n                app.router.afterBack(view, oldPage[0], newPage[0]);\n            }\n            function animateBack() {\n                // Page before animation callback\n                app.pageBackCallback('before', view, {\n                    pageContainer: oldPage[0], \n                    url: url, \n                    position: 'center', \n                    oldPage: oldPage, \n                    newPage: newPage, \n                });\n                app.pageAnimCallback('before', view, {\n                    pageContainer: newPage[0], \n                    url: url, \n                    position: 'left', \n                    oldPage: oldPage, \n                    newPage: newPage, \n                    query: options.query,\n                    fromPage: oldPage && oldPage.length && oldPage[0].f7PageData\n                });\n        \n                if (animatePages) {\n                    // Set pages before animation\n                    app.router.animatePages(newPage, oldPage, 'to-right', view);\n        \n                    // Dynamic navbar animation\n                    if (dynamicNavbar) {\n                        setTimeout(function () {\n                            app.router.animateNavbars(newNavbarInner, oldNavbarInner, 'to-right', view);\n                        }, 0);\n                    }\n                    \n                    newPage.animationEnd(function () {\n                        afterAnimation();\n                    });\n                }\n                else {\n                    if (dynamicNavbar) newNavbarInner.find('.sliding, .sliding .back .icon').transform('');\n                    afterAnimation();\n                }\n            }\n        \n            function parseNewPage() {\n                app.router.temporaryDom.innerHTML = '';\n                // Parse DOM\n                if (url || (typeof content === 'string')) {\n                    app.router.temporaryDom.innerHTML = t7_rendered.content;\n                } else {\n                    if ('length' in content && content.length > 1) {\n                        for (var ci = 0; ci < content.length; ci++) {\n                            $(app.router.temporaryDom).append(content[ci]);\n                        }\n                    } else {\n                        $(app.router.temporaryDom).append(content);\n                    }\n                }\n                newPage = app.router.findElement('.page', app.router.temporaryDom, view);\n        \n                if (view.params.dynamicNavbar) {\n                    // Find navbar\n                    newNavbarInner = app.router.findElement('.navbar-inner', app.router.temporaryDom, view);\n                }\n            }\n            function setPages() {\n                // If pages not found or there are still more than one, exit\n                if (!newPage || newPage.length === 0) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                if (view.params.dynamicNavbar && typeof dynamicNavbar === 'undefined') {\n                    if (!newNavbarInner || newNavbarInner.length === 0) {\n                        dynamicNavbar = false;\n                    }\n                    else {\n                        dynamicNavbar = true;\n                    }\n                }\n        \n                newPage.addClass('page-on-left').removeClass('cached');\n                if (dynamicNavbar) {\n                    navbar = viewContainer.find('.navbar');\n                    navbarInners = viewContainer.find('.navbar-inner:not(.cached)');\n                    newNavbarInner.addClass('navbar-on-left').removeClass('cached');\n                }\n                // Remove/hide previous page in force mode\n                if (force) {\n                    var pageToRemove, navbarToRemove;\n                    pageToRemove = $(pagesInView[pagesInView.length - 2]);\n                    \n                    if (dynamicNavbar) navbarToRemove = $(pageToRemove[0] && pageToRemove[0].f7RelatedNavbar || navbarInners[navbarInners.length - 2]);\n                    if (view.params.domCache && view.initialPages.indexOf(pageToRemove[0]) >= 0) {\n                        if (pageToRemove.length && pageToRemove[0] !== newPage[0]) pageToRemove.addClass('cached');\n                        if (dynamicNavbar && navbarToRemove.length && navbarToRemove[0] !== newNavbarInner[0]) {\n                            navbarToRemove.addClass('cached');\n                        }\n                    }\n                    else {\n                        var removeNavbar = dynamicNavbar && navbarToRemove.length;\n                        if (pageToRemove.length) {\n                            app.pageRemoveCallback(view, pageToRemove[0], 'right');\n                            if (removeNavbar) {\n                                app.navbarRemoveCallback(view, pageToRemove[0], navbar[0], navbarToRemove[0]);\n                            }    \n                            pageToRemove.remove();\n                            if (removeNavbar) navbarToRemove.remove();\n                        }\n                        else if (removeNavbar) {\n                            app.navbarRemoveCallback(view, pageToRemove[0], navbar[0], navbarToRemove[0]);\n                            navbarToRemove.remove();\n                        } \n                    }\n                    pagesInView = pagesContainer.children('.page:not(.cached)');\n                    if (dynamicNavbar) {\n                        navbarInners = viewContainer.find('.navbar-inner:not(.cached)');\n                    }\n                    if (view.history.indexOf(url) >= 0) {\n                        view.history = view.history.slice(0, view.history.indexOf(url) + 2);\n                    }\n                    else {\n                        if (view.history[[view.history.length - 2]]) {\n                            view.history[view.history.length - 2] = url;    \n                        }\n                        else {\n                            view.history.unshift(url);\n                        }\n                    }\n                }\n        \n                oldPage = $(pagesInView[pagesInView.length - 1]);\n                if (view.params.domCache) {\n                    if (oldPage[0] === newPage[0]) {\n                        oldPage = pagesContainer.children('.page.page-on-center');\n                        if (oldPage.length === 0 && view.activePage) oldPage = $(view.activePage.container);\n                    }\n                }\n                    \n                if (dynamicNavbar && !oldNavbarInner) {\n                    oldNavbarInner = $(navbarInners[navbarInners.length - 1]);\n                    if (view.params.domCache) {\n                        if (oldNavbarInner[0] === newNavbarInner[0]) {\n                            oldNavbarInner = navbar.children('.navbar-inner.navbar-on-center:not(.cached)');\n                        }\n                        if (oldNavbarInner.length === 0) {\n                            oldNavbarInner = navbar.children('.navbar-inner[data-page=\"'+oldPage.attr('data-page')+'\"]');\n                        }\n                    }\n                    if (oldNavbarInner.length === 0 || newNavbarInner[0] === oldNavbarInner[0]) dynamicNavbar = false;\n                }\n        \n                if (dynamicNavbar) {\n                    if (manipulateDom) newNavbarInner.insertBefore(oldNavbarInner);\n                    newNavbarInner[0].f7RelatedPage = newPage[0];\n                    newPage[0].f7RelatedNavbar = newNavbarInner[0];\n                }\n                if (manipulateDom) newPage.insertBefore(oldPage);\n        \n                // Page Init Events\n                app.pageInitCallback(view, {\n                    pageContainer: newPage[0], \n                    url: url, \n                    position: 'left', \n                    navbarInnerContainer: dynamicNavbar ? newNavbarInner[0] : undefined, \n                    oldNavbarInnerContainer: dynamicNavbar ? oldNavbarInner && oldNavbarInner[0] : undefined,\n                    context: t7_rendered.context,\n                    query: options.query,\n                    fromPage: oldPage && oldPage.length && oldPage[0].f7PageData,\n                    preloadOnly: preloadOnly\n                });\n                if (dynamicNavbar) {\n                    app.navbarInitCallback(view, newPage[0], navbar[0], newNavbarInner[0], url, 'right');\n                }\n        \n                if (dynamicNavbar && newNavbarInner.hasClass('navbar-on-left') && animatePages) {\n                    app.router.prepareNavbar(newNavbarInner,  oldNavbarInner, 'left');\n                }\n        \n                if (preloadOnly) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                \n                // Update View's URL\n                view.url = url;\n        \n                // Force reLayout\n                var clientLeft = newPage[0].clientLeft;\n        \n                animateBack();\n        \n                // Push state\n                if (app.params.pushState && view.main)  {\n                    if (typeof pushState === 'undefined') pushState = true;\n                    if (!preloadOnly && history.state && pushState) {\n                        history.back();\n                    }\n                }\n                return;\n            }\n        \n            // Simple go back when we have pages on left\n            if (pagesInView.length > 1 && !force) {\n                // Exit if only preloadOnly\n                if (preloadOnly) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                // Update View's URL\n                view.url = view.history[view.history.length - 2];\n                url = view.url;\n        \n                // Define old and new pages\n                newPage = $(pagesInView[pagesInView.length - 2]);\n                oldPage = $(pagesInView[pagesInView.length - 1]);\n        \n                // Dynamic navbar\n                if (view.params.dynamicNavbar) {\n                    dynamicNavbar = true;\n                    // Find navbar\n                    navbarInners = viewContainer.find('.navbar-inner:not(.cached)');\n                    newNavbarInner = $(navbarInners[0]);\n                    oldNavbarInner = $(navbarInners[1]);\n                    if (newNavbarInner.length === 0 || oldNavbarInner.length === 0 || oldNavbarInner[0] === newNavbarInner[0]) {\n                        dynamicNavbar = false;\n                    }\n                }\n                manipulateDom = false;\n                setPages();\n                return;\n            }\n            \n            if (!force) {\n                // Go back when there is no pages on left\n                if (!preloadOnly) {\n                    view.url = view.history[view.history.length - 2];\n                    url = view.url;\n                }\n                    \n                if (content) {\n                    parseNewPage();\n                    setPages();\n                    return;\n                }\n                else if (pageName) {\n                    // Get dom cached pages\n                    newPage = $(viewContainer).find('.page[data-page=\"' + pageName + '\"]');\n                    if (view.params.dynamicNavbar) {\n                        newNavbarInner = $(viewContainer).find('.navbar-inner[data-page=\"' + pageName + '\"]');\n                        if (newNavbarInner.length === 0 && newPage[0].f7RelatedNavbar) {\n                            newNavbarInner = $(newPage[0].f7RelatedNavbar);\n                        }\n                        if (newNavbarInner.length === 0 && newPage[0].f7PageData) {\n                            newNavbarInner = $(newPage[0].f7PageData.navbarInnerContainer);   \n                        }\n                    }\n                    setPages();\n                    return;\n                }\n                else {\n                    view.allowPageChange = true;\n                    return;\n                }\n            }\n            else {\n                if (url && url === view.url || pageName && view.activePage && view.activePage.name === pageName) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                // Go back with force url\n                if (content) {\n                    parseNewPage();\n                    setPages();\n                    return;\n                }\n                else if (pageName && view.params.domCache) {\n                    if (pageName) url = '#' + pageName;\n                    \n                    newPage = $(viewContainer).find('.page[data-page=\"' + pageName + '\"]');\n                    if (newPage[0].f7PageData && newPage[0].f7PageData.url) {\n                        url = newPage[0].f7PageData.url;\n                    }\n                    if (view.params.dynamicNavbar) {\n                        newNavbarInner = $(viewContainer).find('.navbar-inner[data-page=\"' + pageName + '\"]');\n                        if (newNavbarInner.length === 0 && newPage[0].f7RelatedNavbar) {\n                            newNavbarInner = $(newPage[0].f7RelatedNavbar);\n                        }\n                        if (newNavbarInner.length === 0 && newPage[0].f7PageData) {\n                            newNavbarInner = $(newPage[0].f7PageData.navbarInnerContainer);   \n                        }\n                    }\n                    setPages();\n                    return;\n                }\n                else {\n                    view.allowPageChange = true;\n                    return;\n                }\n            }\n            \n        };\n        app.router.back = function (view, options) {\n            if (app.router.preroute(view, options)) {\n                return false;\n            }\n            options = options || {};\n            var url = options.url;\n            var content = options.content;\n            var pageName = options.pageName;\n            if (pageName) {\n                if (pageName.indexOf('?') > 0) {\n                    options.query = $.parseUrlQuery(pageName);\n                    options.pageName = pageName = pageName.split('?')[0];\n                }\n            }\n            var force = options.force;\n            if (!view.allowPageChange) return false;\n            view.allowPageChange = false;\n            if (app.xhr && view.xhr && view.xhr === app.xhr) {\n                app.xhr.abort();\n                app.xhr = false;\n            }\n            var pagesInView = $(view.pagesContainer).find('.page:not(.cached)');\n            \n            function proceed(content) {\n                app.router.preprocess(view, content, url, function (content) {\n                    options.content = content;\n                    app.router._back(view, options);\n                });\n            }\n            if (pagesInView.length > 1 && !force) {\n                // Simple go back to previos page in view\n                app.router._back(view, options);\n                return;\n            }\n            if (!force) {\n                url = options.url = view.history[view.history.length - 2];\n                if (!url) {\n                    view.allowPageChange = true;\n                    return;\n                }\n                if (url.indexOf('#') === 0 && view.contentCache[url]) {\n                    proceed(view.contentCache[url]);\n                    return;\n                }\n                else if (url.indexOf('#') === 0 && view.params.domCache) {\n                    if (!pageName) options.pageName = url.split('#')[1];\n                    proceed();\n                    return;\n                }\n                else if (url.indexOf('#') !== 0) {\n                    // Load ajax page\n                    app.get(options.url, view, options.ignoreCache, function (content, error) {\n                        if (error) {\n                            view.allowPageChange = true;\n                            return;\n                        }\n                        proceed(content);\n                    });\n                    return;\n                }\n            }\n            else {\n                // Go back with force url\n                if (!url && content) {\n                    proceed(content);\n                    return;\n                }\n                else if (!url && pageName) {\n                    if (pageName) url = '#' + pageName;\n                    proceed();\n                    return;\n                }\n                else if (url) {\n                    app.get(options.url, view, options.ignoreCache, function (content, error) {\n                        if (error) {\n                            view.allowPageChange = true;\n                            return;\n                        }\n                        proceed(content);\n                    });\n                    return;\n                }\n            }\n            view.allowPageChange = true;\n            return;\n        };\n        \n        app.router.afterBack = function (view, oldPage, newPage) {\n            // Remove old page and set classes on new one\n            oldPage = $(oldPage);\n            newPage = $(newPage);\n            \n            if (view.params.domCache && view.initialPages.indexOf(oldPage[0]) >= 0) {\n                oldPage.removeClass('page-from-center-to-right').addClass('cached');\n            }\n            else {\n                app.pageRemoveCallback(view, oldPage[0], 'right');\n                oldPage.remove();\n            }\n                \n            newPage.removeClass('page-from-left-to-center page-on-left').addClass('page-on-center');\n            view.allowPageChange = true;\n        \n            // Update View's History\n            var previousURL = view.history.pop();\n        \n            var newNavbar;\n        \n            // Updated dynamic navbar\n            if (view.params.dynamicNavbar) {\n                var inners = $(view.container).find('.navbar-inner:not(.cached)');\n                var oldNavbar = $(oldPage[0].f7RelatedNavbar || inners[1]);\n                if (view.params.domCache && view.initialNavbars.indexOf(oldNavbar[0]) >= 0) {\n                    oldNavbar.removeClass('navbar-from-center-to-right').addClass('cached');\n                }\n                else {\n                    app.navbarRemoveCallback(view, oldPage[0], undefined, oldNavbar[0]);\n                    oldNavbar.remove();\n                }\n                newNavbar = $(inners[0]).removeClass('navbar-on-left navbar-from-left-to-center').addClass('navbar-on-center');\n            }\n        \n            // Remove pages in dom cache\n            if (view.params.domCache) {\n                $(view.container).find('.page.cached').each(function () {\n                    var page = $(this);\n                    var index = page.index();\n                    var pageUrl = page[0].f7PageData && page[0].f7PageData.url;\n                    if (pageUrl && view.history.indexOf(pageUrl) < 0 && view.initialPages.indexOf(this) < 0) {\n                        app.pageRemoveCallback(view, page[0], 'right');\n                        if (page[0].f7RelatedNavbar && view.params.dynamicNavbar) app.navbarRemoveCallback(view, page[0], undefined, page[0].f7RelatedNavbar);\n                        page.remove();\n                        if (page[0].f7RelatedNavbar && view.params.dynamicNavbar) $(page[0].f7RelatedNavbar).remove();\n                    }\n                });\n            }\n            \n            // Check previous page is content based only and remove it from content cache\n            if (!view.params.domCache && previousURL && previousURL.indexOf('#') > -1 && (previousURL in view.contentCache)) {\n                view.contentCache[previousURL] = null;\n                delete view.contentCache[previousURL];\n            }\n            \n            if (app.params.pushState && view.main) app.pushStateClearQueue();\n        \n            // Preload previous page\n            if (view.params.preloadPreviousPage) {\n                if (view.params.domCache && view.history.length > 1) {\n                    var preloadUrl = view.history[view.history.length - 2];\n                    var previousPage;\n                    var previousNavbar;\n                    if (preloadUrl && view.pagesCache[preloadUrl]) {\n                        // Load by page name\n                        previousPage = $(view.container).find('.page[data-page=\"' + view.pagesCache[preloadUrl] + '\"]');\n                        if (previousPage.next('.page')[0] !== newPage[0]) previousPage.insertBefore(newPage);\n                        if (newNavbar) {\n                            previousNavbar = $(view.container).find('.navbar-inner[data-page=\"' + view.pagesCache[preloadUrl] + '\"]');\n                            if(!previousNavbar || previousNavbar.length === 0) previousNavbar = newNavbar.prev('.navbar-inner.cached');\n                            if (previousNavbar.next('.navbar-inner')[0] !== newNavbar[0]) previousNavbar.insertBefore(newNavbar);\n                        }\n                    }\n                    else {\n                        // Just load previous page\n                        previousPage = newPage.prev('.page.cached');\n                        if (newNavbar) previousNavbar = newNavbar.prev('.navbar-inner.cached');\n                    }\n                    if (previousPage && previousPage.length > 0) previousPage.removeClass('cached page-on-right page-on-center').addClass('page-on-left');\n                    if (previousNavbar && previousNavbar.length > 0) previousNavbar.removeClass('cached navbar-on-right navbar-on-center').addClass('navbar-on-left');\n                }\n                else {\n                    app.router.back(view, {preloadOnly: true}); \n                }\n            }\n        };\n        \n\n        /*======================================================\n        ************   Modals   ************\n        ======================================================*/\n        var _modalTemplateTempDiv = document.createElement('div');\n        app.modalStack = [];\n        app.modalStackClearQueue = function () {\n            if (app.modalStack.length) {\n                (app.modalStack.shift())();\n            }\n        };\n        app.modal = function (params) {\n            params = params || {};\n            var modalHTML = '';\n            if (app.params.modalTemplate) {\n                if (!app._compiledTemplates.modal) app._compiledTemplates.modal = t7.compile(app.params.modalTemplate);\n                modalHTML = app._compiledTemplates.modal(params);\n            }\n            else {\n                var buttonsHTML = '';\n                if (params.buttons && params.buttons.length > 0) {\n                    for (var i = 0; i < params.buttons.length; i++) {\n                        buttonsHTML += '<span class=\"modal-button' + (params.buttons[i].bold ? ' modal-button-bold' : '') + '\">' + params.buttons[i].text + '</span>';\n                    }\n                }\n                var titleHTML = params.title ? '<div class=\"modal-title\">' + params.title + '</div>' : '';\n                var textHTML = params.text ? '<div class=\"modal-text\">' + params.text + '</div>' : '';\n                var afterTextHTML = params.afterText ? params.afterText : '';\n                var noButtons = !params.buttons || params.buttons.length === 0 ? 'modal-no-buttons' : '';\n                var verticalButtons = params.verticalButtons ? 'modal-buttons-vertical': '';\n                var modalButtonsHTML = params.buttons && params.buttons.length > 0 ? '<div class=\"modal-buttons modal-buttons-' + params.buttons.length + ' ' + verticalButtons + '\">' + buttonsHTML + '</div>' : '';\n                modalHTML = '<div class=\"modal ' + noButtons + ' ' + (params.cssClass || '') + '\"><div class=\"modal-inner\">' + (titleHTML + textHTML + afterTextHTML) + '</div>' + modalButtonsHTML + '</div>';\n            }\n        \n            _modalTemplateTempDiv.innerHTML = modalHTML;\n        \n            var modal = $(_modalTemplateTempDiv).children();\n        \n            $('body').append(modal[0]);\n        \n            // Add events on buttons\n            modal.find('.modal-button').each(function (index, el) {\n                $(el).on('click', function (e) {\n                    if (params.buttons[index].close !== false) app.closeModal(modal);\n                    if (params.buttons[index].onClick) params.buttons[index].onClick(modal, e);\n                    if (params.onClick) params.onClick(modal, index);\n                });\n            });\n            app.openModal(modal);\n            return modal[0];\n        };\n        app.alert = function (text, title, callbackOk) {\n            if (typeof title === 'function') {\n                callbackOk = arguments[1];\n                title = undefined;\n            }\n            return app.modal({\n                text: text || '',\n                title: typeof title === 'undefined' ? app.params.modalTitle : title,\n                buttons: [ {text: app.params.modalButtonOk, bold: true, onClick: callbackOk} ]\n            });\n        };\n        app.confirm = function (text, title, callbackOk, callbackCancel) {\n            if (typeof title === 'function') {\n                callbackCancel = arguments[2];\n                callbackOk = arguments[1];\n                title = undefined;\n            }\n            return app.modal({\n                text: text || '',\n                title: typeof title === 'undefined' ? app.params.modalTitle : title,\n                buttons: [\n                    {text: app.params.modalButtonCancel, onClick: callbackCancel},\n                    {text: app.params.modalButtonOk, bold: true, onClick: callbackOk}\n                ]\n            });\n        };\n        app.prompt = function (text, title, callbackOk, callbackCancel) {\n            if (typeof title === 'function') {\n                callbackCancel = arguments[2];\n                callbackOk = arguments[1];\n                title = undefined;\n            }\n            return app.modal({\n                text: text || '',\n                title: typeof title === 'undefined' ? app.params.modalTitle : title,\n                afterText: '<div class=\"input-field\"><input type=\"text\" class=\"modal-text-input\"></div>',\n                buttons: [\n                    {\n                        text: app.params.modalButtonCancel\n                    },\n                    {\n                        text: app.params.modalButtonOk,\n                        bold: true\n                    }\n                ],\n                onClick: function (modal, index) {\n                    if (index === 0 && callbackCancel) callbackCancel($(modal).find('.modal-text-input').val());\n                    if (index === 1 && callbackOk) callbackOk($(modal).find('.modal-text-input').val());\n                }\n            });\n        };\n        app.modalLogin = function (text, title, callbackOk, callbackCancel) {\n            if (typeof title === 'function') {\n                callbackCancel = arguments[2];\n                callbackOk = arguments[1];\n                title = undefined;\n            }\n            return app.modal({\n                text: text || '',\n                title: typeof title === 'undefined' ? app.params.modalTitle : title,\n                afterText: '<div class=\"input-field modal-input-double\"><input type=\"text\" name=\"modal-username\" placeholder=\"' + app.params.modalUsernamePlaceholder + '\" class=\"modal-text-input\"></div><div class=\"input-field modal-input-double\"><input type=\"password\" name=\"modal-password\" placeholder=\"' + app.params.modalPasswordPlaceholder + '\" class=\"modal-text-input\"></div>',\n                buttons: [\n                    {\n                        text: app.params.modalButtonCancel\n                    },\n                    {\n                        text: app.params.modalButtonOk,\n                        bold: true\n                    }\n                ],\n                onClick: function (modal, index) {\n                    var username = $(modal).find('.modal-text-input[name=\"modal-username\"]').val();\n                    var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                    if (index === 0 && callbackCancel) callbackCancel(username, password);\n                    if (index === 1 && callbackOk) callbackOk(username, password);\n                }\n            });\n        };\n        app.modalPassword = function (text, title, callbackOk, callbackCancel) {\n            if (typeof title === 'function') {\n                callbackCancel = arguments[2];\n                callbackOk = arguments[1];\n                title = undefined;\n            }\n            return app.modal({\n                text: text || '',\n                title: typeof title === 'undefined' ? app.params.modalTitle : title,\n                afterText: '<div class=\"input-field\"><input type=\"password\" name=\"modal-password\" placeholder=\"' + app.params.modalPasswordPlaceholder + '\" class=\"modal-text-input\"></div>',\n                buttons: [\n                    {\n                        text: app.params.modalButtonCancel\n                    },\n                    {\n                        text: app.params.modalButtonOk,\n                        bold: true\n                    }\n                ],\n                onClick: function (modal, index) {\n                    var password = $(modal).find('.modal-text-input[name=\"modal-password\"]').val();\n                    if (index === 0 && callbackCancel) callbackCancel(password);\n                    if (index === 1 && callbackOk) callbackOk(password);\n                }\n            });\n        };\n        app.showPreloader = function (title) {\n            return app.modal({\n                title: title || app.params.modalPreloaderTitle,\n                text: '<div class=\"preloader\">' + (app.params.material ? app.params.materialPreloaderSvg : '') + '</div>',\n                cssClass: 'modal-preloader'\n            });\n        };\n        app.hidePreloader = function () {\n            app.closeModal('.modal.modal-in');\n        };\n        app.showIndicator = function () {\n            $('body').append('<div class=\"preloader-indicator-overlay\"></div><div class=\"preloader-indicator-modal\"><span class=\"preloader preloader-white\">' + (app.params.material ? app.params.materialPreloaderSvg : '') + '</span></div>');\n        };\n        app.hideIndicator = function () {\n            $('.preloader-indicator-overlay, .preloader-indicator-modal').remove();\n        };\n        // Action Sheet\n        app.actions = function (target, params) {\n            var toPopover = false, modal, groupSelector, buttonSelector;\n            if (arguments.length === 1) {\n                // Actions\n                params = target;\n            }\n            else {\n                // Popover\n                if (app.device.ios) {\n                    if (app.device.ipad) toPopover = true;\n                }\n                else {\n                    if ($(window).width() >= 768) toPopover = true;\n                }\n            }\n            params = params || [];\n        \n            if (params.length > 0 && !$.isArray(params[0])) {\n                params = [params];\n            }\n            var modalHTML;\n            if (toPopover) {\n                var actionsToPopoverTemplate = app.params.modalActionsToPopoverTemplate ||\n                    '<div class=\"popover actions-popover\">' +\n                      '<div class=\"popover-inner\">' +\n                        '{{#each this}}' +\n                        '<div class=\"list-block\">' +\n                          '<ul>' +\n                            '{{#each this}}' +\n                            '{{#if label}}' +\n                            '<li class=\"actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}\">{{text}}</li>' +\n                            '{{else}}' +\n                            '<li><a href=\"#\" class=\"item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}\">{{text}}</a></li>' +\n                            '{{/if}}' +\n                            '{{/each}}' +\n                          '</ul>' +\n                        '</div>' +\n                        '{{/each}}' +\n                      '</div>' +\n                    '</div>';\n                if (!app._compiledTemplates.actionsToPopover) {\n                    app._compiledTemplates.actionsToPopover = t7.compile(actionsToPopoverTemplate);\n                }\n                var popoverHTML = app._compiledTemplates.actionsToPopover(params);\n                modal = $(app.popover(popoverHTML, target, true));\n                groupSelector = '.list-block ul';\n                buttonSelector = '.list-button';\n            }\n            else {\n                if (app.params.modalActionsTemplate) {\n                    if (!app._compiledTemplates.actions) app._compiledTemplates.actions = t7.compile(app.params.modalActionsTemplate);\n                    modalHTML = app._compiledTemplates.actions(params);\n                }\n                else {\n                    var buttonsHTML = '';\n                    for (var i = 0; i < params.length; i++) {\n                        for (var j = 0; j < params[i].length; j++) {\n                            if (j === 0) buttonsHTML += '<div class=\"actions-modal-group\">';\n                            var button = params[i][j];\n                            var buttonClass = button.label ? 'actions-modal-label' : 'actions-modal-button';\n                            if (button.bold) buttonClass += ' actions-modal-button-bold';\n                            if (button.color) buttonClass += ' color-' + button.color;\n                            if (button.bg) buttonClass += ' bg-' + button.bg;\n                            if (button.disabled) buttonClass += ' disabled';\n                            buttonsHTML += '<div class=\"' + buttonClass + '\">' + button.text + '</div>';\n                            if (j === params[i].length - 1) buttonsHTML += '</div>';\n                        }\n                    }\n                    modalHTML = '<div class=\"actions-modal\">' + buttonsHTML + '</div>';\n                }\n                _modalTemplateTempDiv.innerHTML = modalHTML;\n                modal = $(_modalTemplateTempDiv).children();\n                $('body').append(modal[0]);\n                groupSelector = '.actions-modal-group';\n                buttonSelector = '.actions-modal-button';\n            }\n        \n            var groups = modal.find(groupSelector);\n            groups.each(function (index, el) {\n                var groupIndex = index;\n                $(el).children().each(function (index, el) {\n                    var buttonIndex = index;\n                    var buttonParams = params[groupIndex][buttonIndex];\n                    var clickTarget;\n                    if (!toPopover && $(el).is(buttonSelector)) clickTarget = $(el);\n                    if (toPopover && $(el).find(buttonSelector).length > 0) clickTarget = $(el).find(buttonSelector);\n        \n                    if (clickTarget) {\n                        clickTarget.on('click', function (e) {\n                            if (buttonParams.close !== false) app.closeModal(modal);\n                            if (buttonParams.onClick) buttonParams.onClick(modal, e);\n                        });\n                    }\n                });\n            });\n            if (!toPopover) app.openModal(modal);\n            return modal[0];\n        };\n        app.popover = function (modal, target, removeOnClose) {\n            if (typeof removeOnClose === 'undefined') removeOnClose = true;\n            if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n                var _modal = document.createElement('div');\n                _modal.innerHTML = modal.trim();\n                if (_modal.childNodes.length > 0) {\n                    modal = _modal.childNodes[0];\n                    if (removeOnClose) modal.classList.add('remove-on-close');\n                    $('body').append(modal);\n                }\n                else return false; //nothing found\n            }\n            modal = $(modal);\n            target = $(target);\n            if (modal.length === 0 || target.length === 0) return false;\n            if (modal.find('.popover-angle').length === 0 && !app.params.material) {\n                modal.append('<div class=\"popover-angle\"></div>');\n            }\n            modal.show();\n        \n            var material = app.params.material;\n        \n            function sizePopover() {\n                modal.css({left: '', top: ''});\n                var modalWidth =  modal.width();\n                var modalHeight =  modal.height(); // 13 - height of angle\n                var modalAngle, modalAngleSize = 0, modalAngleLeft, modalAngleTop;\n                if (!material) {\n                    modalAngle = modal.find('.popover-angle');\n                    modalAngleSize = modalAngle.width() / 2;\n                    modalAngle.removeClass('on-left on-right on-top on-bottom').css({left: '', top: ''});\n                }\n                else {\n                    modal.removeClass('popover-on-left popover-on-right popover-on-top popover-on-bottom').css({left: '', top: ''});\n                }\n        \n                var targetWidth = target.outerWidth();\n                var targetHeight = target.outerHeight();\n                var targetOffset = target.offset();\n                var targetParentPage = target.parents('.page');\n                if (targetParentPage.length > 0) {\n                    targetOffset.top = targetOffset.top - targetParentPage[0].scrollTop;\n                }\n        \n                var windowHeight = $(window).height();\n                var windowWidth = $(window).width();\n        \n                var modalTop = 0;\n                var modalLeft = 0;\n                var diff = 0;\n                // Top Position\n                var modalPosition = material ? 'bottom' : 'top';\n                if (material) {\n                    if (modalHeight < windowHeight - targetOffset.top - targetHeight) {\n                        // On bottom\n                        modalPosition = 'bottom';\n                        modalTop = targetOffset.top;\n                    }\n                    else if (modalHeight < targetOffset.top) {\n                        // On top\n                        modalTop = targetOffset.top - modalHeight + targetHeight;\n                        modalPosition = 'top';\n                    }\n                    else {\n                        // On middle\n                        modalPosition = 'bottom';\n                        modalTop = targetOffset.top;\n                    }\n        \n                    if (modalTop <= 0) {\n                        modalTop = 8;\n                    }\n                    else if (modalTop + modalHeight >= windowHeight) {\n                        modalTop = windowHeight - modalHeight - 8;\n                    }\n        \n                    // Horizontal Position\n                    modalLeft = targetOffset.left;\n                    if (modalLeft + modalWidth >= windowWidth - 8) {\n                        modalLeft = targetOffset.left + targetWidth - modalWidth - 8;\n                    }\n                    if (modalLeft < 8) {\n                        modalLeft = 8;\n                    }\n                    if (modalPosition === 'top') {\n                        modal.addClass('popover-on-top');\n                    }\n                    if (modalPosition === 'bottom') {\n                        modal.addClass('popover-on-bottom');\n                    }\n        \n                }\n                else {\n                    if ((modalHeight + modalAngleSize) < targetOffset.top) {\n                        // On top\n                        modalTop = targetOffset.top - modalHeight - modalAngleSize;\n                    }\n                    else if ((modalHeight + modalAngleSize) < windowHeight - targetOffset.top - targetHeight) {\n                        // On bottom\n                        modalPosition = 'bottom';\n                        modalTop = targetOffset.top + targetHeight + modalAngleSize;\n                    }\n                    else {\n                        // On middle\n                        modalPosition = 'middle';\n                        modalTop = targetHeight / 2 + targetOffset.top - modalHeight / 2;\n                        diff = modalTop;\n                        if (modalTop <= 0) {\n                            modalTop = 5;\n                        }\n                        else if (modalTop + modalHeight >= windowHeight) {\n                            modalTop = windowHeight - modalHeight - 5;\n                        }\n                        diff = diff - modalTop;\n                    }\n        \n                    // Horizontal Position\n                    if (modalPosition === 'top' || modalPosition === 'bottom') {\n                        modalLeft = targetWidth / 2 + targetOffset.left - modalWidth / 2;\n                        diff = modalLeft;\n                        if (modalLeft < 5) modalLeft = 5;\n                        if (modalLeft + modalWidth > windowWidth) modalLeft = windowWidth - modalWidth - 5;\n                        if (modalPosition === 'top') {\n                            modalAngle.addClass('on-bottom');\n                        }\n                        if (modalPosition === 'bottom') {\n                            modalAngle.addClass('on-top');\n                        }\n                        diff = diff - modalLeft;\n                        modalAngleLeft = (modalWidth / 2 - modalAngleSize + diff);\n                        modalAngleLeft = Math.max(Math.min(modalAngleLeft, modalWidth - modalAngleSize * 2 - 13), 13);\n                        modalAngle.css({left: modalAngleLeft + 'px'});\n        \n                    }\n                    else if (modalPosition === 'middle') {\n                        modalLeft = targetOffset.left - modalWidth - modalAngleSize;\n                        modalAngle.addClass('on-right');\n                        if (modalLeft < 5 || (modalLeft + modalWidth > windowWidth)) {\n                            if (modalLeft < 5) modalLeft = targetOffset.left + targetWidth + modalAngleSize;\n                            if (modalLeft + modalWidth > windowWidth) modalLeft = windowWidth - modalWidth - 5;\n                            modalAngle.removeClass('on-right').addClass('on-left');\n                        }\n                        modalAngleTop = (modalHeight / 2 - modalAngleSize + diff);\n                        modalAngleTop = Math.max(Math.min(modalAngleTop, modalHeight - modalAngleSize * 2 - 13), 13);\n                        modalAngle.css({top: modalAngleTop + 'px'});\n                    }\n                }\n        \n        \n                // Apply Styles\n                modal.css({top: modalTop + 'px', left: modalLeft + 'px'});\n            }\n            sizePopover();\n        \n            $(window).on('resize', sizePopover);\n            modal.on('close', function () {\n                $(window).off('resize', sizePopover);\n            });\n        \n            app.openModal(modal);\n            return modal[0];\n        };\n        app.popup = function (modal, removeOnClose) {\n            if (typeof removeOnClose === 'undefined') removeOnClose = true;\n            if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n                var _modal = document.createElement('div');\n                _modal.innerHTML = modal.trim();\n                if (_modal.childNodes.length > 0) {\n                    modal = _modal.childNodes[0];\n                    if (removeOnClose) modal.classList.add('remove-on-close');\n                    $('body').append(modal);\n                }\n                else return false; //nothing found\n            }\n            modal = $(modal);\n            if (modal.length === 0) return false;\n            modal.show();\n            \n            app.openModal(modal);\n            return modal[0];\n        };\n        app.pickerModal = function (modal, removeOnClose) {\n            if (typeof removeOnClose === 'undefined') removeOnClose = true;\n            if (typeof modal === 'string' && modal.indexOf('<') >= 0) {\n                modal = $(modal);\n                if (modal.length > 0) {\n                    if (removeOnClose) modal.addClass('remove-on-close');\n                    $('body').append(modal[0]);\n                }\n                else return false; //nothing found\n            }\n            modal = $(modal);\n            if (modal.length === 0) return false;\n            if ($('.picker-modal.modal-in:not(.modal-out)').length > 0 && !modal.hasClass('modal-in')) {\n                app.closeModal('.picker-modal.modal-in:not(.modal-out)');\n            }\n            modal.show();\n            app.openModal(modal);\n            return modal[0];\n        };\n        app.loginScreen = function (modal) {\n            if (!modal) modal = '.login-screen';\n            modal = $(modal);\n            if (modal.length === 0) return false;\n            if ($('.login-screen.modal-in:not(.modal-out)').length > 0 && !modal.hasClass('modal-in')) {\n                app.closeModal('.login-screen.modal-in:not(.modal-out)');\n            }\n            modal.show();\n            \n            app.openModal(modal);\n            return modal[0];\n        };\n        app.openModal = function (modal) {\n            modal = $(modal);\n            var isModal = modal.hasClass('modal');\n            if ($('.modal.modal-in:not(.modal-out)').length && app.params.modalStack && isModal) {\n                app.modalStack.push(function () {\n                    app.openModal(modal);\n                });\n                return;\n            }\n            // do nothing if this modal already shown\n            if (true === modal.data('f7-modal-shown')) {\n                return;\n            }\n            modal.data('f7-modal-shown', true);\n            modal.once('close', function() {\n               modal.removeData('f7-modal-shown');\n            });\n            var isPopover = modal.hasClass('popover');\n            var isPopup = modal.hasClass('popup');\n            var isLoginScreen = modal.hasClass('login-screen');\n            var isPickerModal = modal.hasClass('picker-modal');\n            if (isModal) {\n                modal.show();\n                modal.css({\n                    marginTop: - Math.round(modal.outerHeight() / 2) + 'px'\n                });\n            }\n        \n            var overlay;\n            if (!isLoginScreen && !isPickerModal) {\n                if ($('.modal-overlay').length === 0 && !isPopup) {\n                    $('body').append('<div class=\"modal-overlay\"></div>');\n                }\n                if ($('.popup-overlay').length === 0 && isPopup) {\n                    $('body').append('<div class=\"popup-overlay\"></div>');\n                }\n                overlay = isPopup ? $('.popup-overlay') : $('.modal-overlay');\n            }\n            if (app.params.material && isPickerModal) {\n                if (modal.hasClass('picker-calendar')) {\n                    if ($('.picker-modal-overlay').length === 0 && !isPopup) {\n                        $('body').append('<div class=\"picker-modal-overlay\"></div>');\n                    }\n                    overlay = $('.picker-modal-overlay');\n                }\n            }\n        \n            //Make sure that styles are applied, trigger relayout;\n            var clientLeft = modal[0].clientLeft;\n        \n            // Trugger open event\n            modal.trigger('open');\n        \n            // Picker modal body class\n            if (isPickerModal) {\n                $('body').addClass('with-picker-modal');\n            }\n        \n            // Init Pages and Navbars in modal\n            if (modal.find('.' + app.params.viewClass).length > 0) {\n                modal.find('.page').each(function () {\n                    app.initPageWithCallback(this);\n                });\n                modal.find('.navbar').each(function () {\n                    app.initNavbarWithCallback(this); \n                });\n            }\n        \n            // Classes for transition in\n            if (!isLoginScreen && !isPickerModal) overlay.addClass('modal-overlay-visible');\n            if (app.params.material && isPickerModal && overlay) overlay.addClass('modal-overlay-visible');\n            modal.removeClass('modal-out').addClass('modal-in').transitionEnd(function (e) {\n                if (modal.hasClass('modal-out')) modal.trigger('closed');\n                else modal.trigger('opened');\n            });\n            return true;\n        };\n        app.closeModal = function (modal) {\n            modal = $(modal || '.modal-in');\n            if (typeof modal !== 'undefined' && modal.length === 0) {\n                return;\n            }\n            var isModal = modal.hasClass('modal');\n            var isPopover = modal.hasClass('popover');\n            var isPopup = modal.hasClass('popup');\n            var isLoginScreen = modal.hasClass('login-screen');\n            var isPickerModal = modal.hasClass('picker-modal');\n        \n            var removeOnClose = modal.hasClass('remove-on-close');\n        \n            var overlay = isPopup ? $('.popup-overlay') : (isPickerModal && app.params.material ? $('.picker-modal-overlay') : $('.modal-overlay'));\n            if (isPopup){\n                if (modal.length === $('.popup.modal-in').length) {\n                    overlay.removeClass('modal-overlay-visible');\n                }\n            }\n            else if (overlay && overlay.length > 0) {\n                overlay.removeClass('modal-overlay-visible');\n            }\n        \n            modal.trigger('close');\n        \n            // Picker modal body class\n            if (isPickerModal) {\n                $('body').removeClass('with-picker-modal');\n                $('body').addClass('picker-modal-closing');\n            }\n        \n            if (!(isPopover && !app.params.material)) {\n                modal.removeClass('modal-in').addClass('modal-out').transitionEnd(function (e) {\n                    if (modal.hasClass('modal-out')) modal.trigger('closed');\n                    else modal.trigger('opened');\n        \n                    if (isPickerModal) {\n                        $('body').removeClass('picker-modal-closing');\n                    }\n                    if (isPopup || isLoginScreen || isPickerModal || isPopover) {\n                        modal.removeClass('modal-out').hide();\n                        if (removeOnClose && modal.length > 0) {\n                            modal.remove();\n                        }\n                    }\n                    else {\n                        modal.remove();\n                    }\n                });\n                if (isModal && app.params.modalStack) {\n                    app.modalStackClearQueue();\n                }\n            }\n            else {\n                modal.removeClass('modal-in modal-out').trigger('closed').hide();\n                if (removeOnClose) {\n                    modal.remove();\n                }\n            }\n            return true;\n        };\n        \n\n        /*======================================================\n        ************   Panels   ************\n        ======================================================*/\n        app.allowPanelOpen = true;\n        app.openPanel = function (panelPosition) {\n            if (!app.allowPanelOpen) return false;\n            var panel = $('.panel-' + panelPosition);\n            if (panel.length === 0 || panel.hasClass('active')) return false;\n            app.closePanel(); // Close if some panel is opened\n            app.allowPanelOpen = false;\n            var effect = panel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n            panel.css({display: 'block'}).addClass('active');\n            panel.trigger('open');\n            if (app.params.material) {\n                $('.panel-overlay').show();\n            }\n            if (panel.find('.' + app.params.viewClass).length > 0) {\n                if (app.sizeNavbars) app.sizeNavbars(panel.find('.' + app.params.viewClass)[0]);\n            }\n        \n            // Trigger reLayout\n            var clientLeft = panel[0].clientLeft;\n            \n            // Transition End;\n            var transitionEndTarget = effect === 'reveal' ? $('.' + app.params.viewsClass) : panel;\n            var openedTriggered = false;\n            \n            function panelTransitionEnd() {\n                transitionEndTarget.transitionEnd(function (e) {\n                    if ($(e.target).is(transitionEndTarget)) {\n                        if (panel.hasClass('active')) {\n                            panel.trigger('opened');\n                        }\n                        else {\n                            panel.trigger('closed');\n                        }\n                        if (app.params.material) $('.panel-overlay').css({display: ''});\n                        app.allowPanelOpen = true;\n                    }\n                    else panelTransitionEnd();\n                });\n            }\n            panelTransitionEnd();\n        \n            $('body').addClass('with-panel-' + panelPosition + '-' + effect);\n            return true;\n        };\n        app.closePanel = function () {\n            var activePanel = $('.panel.active');\n            if (activePanel.length === 0) return false;\n            var effect = activePanel.hasClass('panel-reveal') ? 'reveal' : 'cover';\n            var panelPosition = activePanel.hasClass('panel-left') ? 'left' : 'right';\n            activePanel.removeClass('active');\n            var transitionEndTarget = effect === 'reveal' ? $('.' + app.params.viewsClass) : activePanel;\n            activePanel.trigger('close');\n            app.allowPanelOpen = false;\n        \n            transitionEndTarget.transitionEnd(function () {\n                if (activePanel.hasClass('active')) return;\n                activePanel.css({display: ''});\n                activePanel.trigger('closed');\n                $('body').removeClass('panel-closing');\n                app.allowPanelOpen = true;\n            });\n        \n            $('body').addClass('panel-closing').removeClass('with-panel-' + panelPosition + '-' + effect);\n        };\n        /*======================================================\n        ************   Swipe panels   ************\n        ======================================================*/\n        app.initSwipePanels = function () {\n            var panel, side;\n            if (app.params.swipePanel) {\n                panel = $('.panel.panel-' + app.params.swipePanel);\n                side = app.params.swipePanel;\n                if (panel.length === 0) return;\n            }\n            else {\n                if (app.params.swipePanelOnlyClose) {\n                    if ($('.panel').length === 0) return;\n                }\n                else return;\n            }\n            \n            var panelOverlay = $('.panel-overlay');\n            var isTouched, isMoved, isScrolling, touchesStart = {}, touchStartTime, touchesDiff, translate, overlayOpacity, opened, panelWidth, effect, direction;\n            var views = $('.' + app.params.viewsClass);\n        \n            function handleTouchStart(e) {\n                if (!app.allowPanelOpen || (!app.params.swipePanel && !app.params.swipePanelOnlyClose) || isTouched) return;\n                if ($('.modal-in, .photo-browser-in').length > 0) return;\n                if (!(app.params.swipePanelCloseOpposite || app.params.swipePanelOnlyClose)) {\n                    if ($('.panel.active').length > 0 && !panel.hasClass('active')) return;\n                }\n                touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                if (app.params.swipePanelCloseOpposite || app.params.swipePanelOnlyClose) {\n                    if ($('.panel.active').length > 0) {\n                        side = $('.panel.active').hasClass('panel-left') ? 'left' : 'right';\n                    }\n                    else {\n                        if (app.params.swipePanelOnlyClose) return;\n                        side = app.params.swipePanel;\n                    }\n                    if (!side) return;\n                }\n                panel = $('.panel.panel-' + side);\n                opened = panel.hasClass('active');\n                if (app.params.swipePanelActiveArea && !opened) {\n                    if (side === 'left') {\n                        if (touchesStart.x > app.params.swipePanelActiveArea) return;\n                    }\n                    if (side === 'right') {\n                        if (touchesStart.x < window.innerWidth - app.params.swipePanelActiveArea) return;\n                    }\n                }\n                isMoved = false;\n                isTouched = true;\n                isScrolling = undefined;\n                \n                touchStartTime = (new Date()).getTime();\n                direction = undefined;\n            }\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                if (e.f7PreventPanelSwipe) return;\n                var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n                }\n                if (isScrolling) {\n                    isTouched = false;\n                    return;\n                }\n                if (!direction) {\n                    if (pageX > touchesStart.x) {\n                        direction = 'to-right';\n                    }\n                    else {\n                        direction = 'to-left';\n                    }\n        \n                    if (\n                        side === 'left' &&\n                        (\n                            direction === 'to-left' && !panel.hasClass('active')\n                        ) ||\n                        side === 'right' &&\n                        (\n                            direction === 'to-right' && !panel.hasClass('active')\n                        )\n                    )\n                    {\n                        isTouched = false;\n                        return;\n                    }\n                }\n        \n                if (app.params.swipePanelNoFollow) {\n                    var timeDiff = (new Date()).getTime() - touchStartTime;\n                    if (timeDiff < 300) {\n                        if (direction === 'to-left') {\n                            if (side === 'right') app.openPanel(side);\n                            if (side === 'left' && panel.hasClass('active')) app.closePanel();\n                        }\n                        if (direction === 'to-right') {\n                            if (side === 'left') app.openPanel(side);\n                            if (side === 'right' && panel.hasClass('active')) app.closePanel();\n                        }\n                    }\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n        \n                if (!isMoved) {\n                    effect = panel.hasClass('panel-cover') ? 'cover' : 'reveal';\n                    if (!opened) {\n                        panel.show();\n                        panelOverlay.show();\n                    }\n                    panelWidth = panel[0].offsetWidth;\n                    panel.transition(0);\n                    if (panel.find('.' + app.params.viewClass).length > 0) {\n                        if (app.sizeNavbars) app.sizeNavbars(panel.find('.' + app.params.viewClass)[0]);\n                    }\n                }\n        \n                isMoved = true;\n        \n                e.preventDefault();\n                var threshold = opened ? 0 : -app.params.swipePanelThreshold;\n                if (side === 'right') threshold = -threshold;\n                \n                touchesDiff = pageX - touchesStart.x + threshold;\n        \n                if (side === 'right') {\n                    translate = touchesDiff  - (opened ? panelWidth : 0);\n                    if (translate > 0) translate = 0;\n                    if (translate < -panelWidth) {\n                        translate = -panelWidth;\n                    }\n                }\n                else {\n                    translate = touchesDiff  + (opened ? panelWidth : 0);\n                    if (translate < 0) translate = 0;\n                    if (translate > panelWidth) {\n                        translate = panelWidth;\n                    }\n                }\n                if (effect === 'reveal') {\n                    views.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                    panelOverlay.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                    \n                    app.pluginHook('swipePanelSetTransform', views[0], panel[0], Math.abs(translate / panelWidth));\n                }\n                else {\n                    panel.transform('translate3d(' + translate + 'px,0,0)').transition(0);\n                    if (app.params.material) {\n                        panelOverlay.transition(0);\n                        overlayOpacity = Math.abs(translate/panelWidth);\n                        panelOverlay.css({opacity: overlayOpacity});\n                    }\n                    app.pluginHook('swipePanelSetTransform', views[0], panel[0], Math.abs(translate / panelWidth));\n                }\n            }\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n                isTouched = false;\n                isMoved = false;\n                var timeDiff = (new Date()).getTime() - touchStartTime;\n                var action;\n                var edge = (translate === 0 || Math.abs(translate) === panelWidth);\n        \n                if (!opened) {\n                    if (translate === 0) {\n                        action = 'reset';\n                    }\n                    else if (\n                        timeDiff < 300 && Math.abs(translate) > 0 ||\n                        timeDiff >= 300 && (Math.abs(translate) >= panelWidth / 2)\n                    ) {\n                        action = 'swap';\n                    }\n                    else {\n                        action = 'reset';\n                    }\n                }\n                else {\n                    if (translate === -panelWidth) {\n                        action = 'reset';\n                    }\n                    else if (\n                        timeDiff < 300 && Math.abs(translate) >= 0 ||\n                        timeDiff >= 300 && (Math.abs(translate) <= panelWidth / 2)\n                    ) {\n                        if (side === 'left' && translate === panelWidth) action = 'reset';\n                        else action = 'swap';\n                    }\n                    else {\n                        action = 'reset';\n                    }\n                }\n                if (action === 'swap') {\n                    app.allowPanelOpen = true;\n                    if (opened) {\n                        app.closePanel();\n                        if (edge) {\n                            panel.css({display: ''});\n                            $('body').removeClass('panel-closing');\n                        }\n                    }\n                    else {\n                        app.openPanel(side);\n                    }\n                    if (edge) app.allowPanelOpen = true;\n                }\n                if (action === 'reset') {\n                    if (opened) {\n                        app.allowPanelOpen = true;\n                        app.openPanel(side);\n                    }\n                    else {\n                        app.closePanel();\n                        if (edge) {\n                            app.allowPanelOpen = true;\n                            panel.css({display: ''});\n                        }\n                        else {\n                            var target = effect === 'reveal' ? views : panel;\n                            panel.trigger('close');\n                            $('body').addClass('panel-closing');\n                            target.transitionEnd(function () {\n                                panel.trigger('closed');\n                                panel.css({display: ''});\n                                $('body').removeClass('panel-closing');\n                                app.allowPanelOpen = true;\n                            });\n                        }\n                    }\n                }\n                if (effect === 'reveal') {\n                    views.transition('');\n                    views.transform('');\n                }\n                panel.transition('').transform('');\n                panelOverlay.css({display: ''}).transform('').transition('').css('opacity', '');\n            }\n            $(document).on(app.touchEvents.start, handleTouchStart);\n            $(document).on(app.touchEvents.move, handleTouchMove);\n            $(document).on(app.touchEvents.end, handleTouchEnd);\n        };\n        \n\n        /*======================================================\n        ************   Image Lazy Loading   ************\n        ************   Based on solution by Marc Godard, https://github.com/MarcGodard   ************\n        ======================================================*/\n        app.initImagesLazyLoad = function (pageContainer) {\n            pageContainer = $(pageContainer);\n        \n            // Lazy images\n            var lazyLoadImages;\n            if (pageContainer.hasClass('lazy')) {\n                lazyLoadImages = pageContainer;\n                pageContainer = lazyLoadImages.parents('.page');\n            }\n            else {\n                lazyLoadImages = pageContainer.find('.lazy');\n            }\n            if (lazyLoadImages.length === 0) return;\n        \n            // Scrollable page content\n            var pageContent;\n            if (pageContainer.hasClass('page-content'))  {\n                pageContent = pageContainer;\n                pageContainer = pageContainer.parents('.page');\n            }\n            else  {\n                pageContent = pageContainer.find('.page-content');\n            }\n            if (pageContent.length === 0) return;\n        \n            // Placeholder\n            var placeholderSrc = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==';\n            if (typeof app.params.imagesLazyLoadPlaceholder === 'string') {\n                placeholderSrc = app.params.imagesLazyLoadPlaceholder;\n            }\n            if (app.params.imagesLazyLoadPlaceholder !== false) lazyLoadImages.each(function(){\n                if ($(this).attr('data-src')) $(this).attr('src', placeholderSrc);\n            });\n        \n            // load image\n            var imagesSequence = [];\n            var imageIsLoading = false;\n            function loadImage(el) {\n                el = $(el);\n        \n                var bg = el.attr('data-background');\n                var src = bg ? bg : el.attr('data-src');\n                if (!src) return;\n        \n                function onLoad() {\n                    el.removeClass('lazy').addClass('lazy-loaded');\n                    if (bg) {\n                        el.css('background-image', 'url(' + src + ')');\n                    }\n                    else {\n                        el.attr('src', src);\n                    }\n        \n                    if (app.params.imagesLazyLoadSequential) {\n                        imageIsLoading = false;\n                        if (imagesSequence.length > 0) {\n                            loadImage(imagesSequence.shift());\n                        }\n                    }\n                }\n        \n                if (app.params.imagesLazyLoadSequential) {\n                    if (imageIsLoading) {\n                        if (imagesSequence.indexOf(el[0]) < 0) imagesSequence.push(el[0]);\n                        return;\n                    }\n                }\n        \n                // Loading flag\n                imageIsLoading = true;\n                \n                var image = new Image();\n                image.onload = onLoad;\n                image.onerror = onLoad;\n                image.src =src;\n            }\n            function lazyHandler() {\n                lazyLoadImages = pageContainer.find('.lazy');\n                lazyLoadImages.each(function(index, el) {\n                    el = $(el);\n                    if (el.parents('.tab:not(.active)').length > 0) {\n                        return;\n                    }\n                    if (isElementInViewport(el[0])) {\n                        loadImage(el);\n                    }\n                });\n            }\n        \n            function isElementInViewport (el) {\n                var rect = el.getBoundingClientRect();\n                var threshold = app.params.imagesLazyLoadThreshold || 0;\n                return (\n                    rect.top >= (0 - threshold) &&\n                    rect.left >= (0 - threshold) &&\n                    rect.top <= (window.innerHeight + threshold) &&\n                    rect.left <= (window.innerWidth + threshold)\n                );\n            }\n        \n            function attachEvents(destroy) {\n                var method = destroy ? 'off' : 'on';\n                lazyLoadImages[method]('lazy', lazyHandler);\n                lazyLoadImages.parents('.tab')[method]('show', lazyHandler);\n                pageContainer[method]('lazy', lazyHandler);\n                pageContent[method]('lazy', lazyHandler);\n                pageContent[method]('scroll', lazyHandler);\n                $(window)[method]('resize', lazyHandler);\n            }\n            function detachEvents() {\n                attachEvents(true);\n            }\n        \n            // Store detach function\n            pageContainer[0].f7DestroyImagesLazyLoad = detachEvents;\n        \n            // Attach events\n            attachEvents();\n        \n            // Destroy on page remove\n            if (pageContainer.hasClass('page')) {\n                pageContainer.once('pageBeforeRemove', detachEvents);\n            }\n        \n            // Run loader on page load/init\n            lazyHandler();\n        \n            // Run after page animation\n            pageContainer.once('pageAfterAnimation', lazyHandler);\n        };\n        app.destroyImagesLazyLoad = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            if (pageContainer.length > 0 && pageContainer[0].f7DestroyImagesLazyLoad) {\n                pageContainer[0].f7DestroyLazyLoad();\n            }\n        };\n        app.reinitImagesLazyLoad = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            if (pageContainer.length > 0) {\n                pageContainer.trigger('lazy');\n            }\n        };\n\n        /*======================================================\n        ************   Material Preloader   ************\n        ======================================================*/\n        app.initPageMaterialPreloader = function (pageContainer) {\n            $(pageContainer).find('.preloader').each(function () {\n                if ($(this).children('svg').length === 0) {\n                    $(this).html(app.params.materialPreloaderSvg);\n                }\n            });\n        };\n\n        /*======================================================\n        ************   Messages   ************\n        ======================================================*/\n        var Messages = function (container, params) {\n            var defaults = {\n                autoLayout: true,\n                newMessagesFirst: false,\n                messageTemplate: \n                    '{{#if day}}' +\n                    '<div class=\"messages-date\">{{day}} {{#if time}}, <span>{{time}}</span>{{/if}}</div>' +\n                    '{{/if}}' +\n                    '<div class=\"message message-{{type}} {{#if hasImage}}message-pic{{/if}} {{#if avatar}}message-with-avatar{{/if}} {{#if position}}message-appear-from-{{position}}{{/if}}\">' +\n                        '{{#if name}}<div class=\"message-name\">{{name}}</div>{{/if}}' +\n                        '<div class=\"message-text\">{{text}}{{#if date}}<div class=\"message-date\">{{date}}</div>{{/if}}</div>' +\n                        '{{#if avatar}}<div class=\"message-avatar\" style=\"background-image:url({{avatar}})\"></div>{{/if}}' +\n                        '{{#if label}}<div class=\"message-label\">{{label}}</div>{{/if}}' +\n                    '</div>'\n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined' || params[def] === null) {\n                    params[def] = defaults[def];\n                }\n            }\n        \n            // Instance\n            var m = this;\n        \n            // Params\n            m.params = params;\n        \n            // Container\n            m.container = $(container);\n            if (m.container.length === 0) return;\n        \n            // Autolayout\n            if (m.params.autoLayout) m.container.addClass('messages-auto-layout');\n        \n            // New messages first\n            if (m.params.newMessagesFirst) m.container.addClass('messages-new-first');\n        \n            // Is In Page\n            m.pageContainer = m.container.parents('.page').eq(0);\n            m.pageContent = m.pageContainer.find('.page-content');\n        \n            // Compiled template\n            m.template = Template7.compile(m.params.messageTemplate);\n        \n            // Auto Layout\n            m.layout = function () {\n                if (!m.container.hasClass('messages-auto-layout')) m.container.addClass('messages-auto-layout');\n                m.container.find('.message').each(function () {\n                    var message = $(this);\n                    if (message.find('.message-text img').length > 0) message.addClass('message-pic');\n                    if (message.find('.message-avatar').length > 0) message.addClass('message-with-avatar');\n                });\n                m.container.find('.message').each(function () {\n                    var message = $(this);\n                    var isSent = message.hasClass('message-sent');\n                    var next = message.next('.message-' + (isSent ? 'sent' : 'received'));\n                    var prev = message.prev('.message-' + (isSent ? 'sent' : 'received'));\n                    if (next.length === 0) {\n                        message.addClass('message-last message-with-tail');\n                    }\n                    else message.removeClass('message-last message-with-tail');\n        \n                    if (prev.length === 0) {\n                        message.addClass('message-first');\n                    }\n                    else message.removeClass('message-first');\n        \n                    if (prev.length > 0 && prev.find('.message-name').length > 0 && message.find('.message-name').length > 0) {\n                        if (prev.find('.message-name').text() !== message.find('.message-name').text()) {\n                            prev.addClass('message-last message-with-tail');\n                            message.addClass('message-first');\n                        }\n                    }\n                });\n                \n            };\n        \n            // Add Message\n            m.appendMessage = function (props, animate) {\n                return m.addMessage(props, 'append', animate);\n            };\n            m.prependMessage = function (props, animate) {\n                return m.addMessage(props, 'prepend', animate);\n            };\n            m.addMessage = function (props, method, animate) {\n                return m.addMessages([props], method, animate);\n            };\n            m.addMessages = function (newMessages, method, animate) {\n                if (typeof animate === 'undefined') {\n                    animate = true;\n                }\n                if (typeof method === 'undefined') {\n                    method = m.params.newMessagesFirst ? 'prepend' : 'append';\n                }\n                var newMessagesHTML = '', i;\n                for (i = 0; i < newMessages.length; i++) {\n                    var props = newMessages[i] || {};\n                    props.type = props.type || 'sent';\n                    if (!props.text) continue;\n                    props.hasImage = props.text.indexOf('<img') >= 0;\n                    if (animate) props.position = method === 'append' ? 'bottom' : 'top';\n        \n                    newMessagesHTML += m.template(props);\n                }\n                var heightBefore, scrollBefore;\n                if (method === 'prepend') {\n                    heightBefore = m.pageContent[0].scrollHeight;\n                    scrollBefore = m.pageContent[0].scrollTop;\n                }\n                m.container[method](newMessagesHTML);\n                if (m.params.autoLayout) m.layout();\n                if (method === 'prepend') {\n                    m.pageContent[0].scrollTop = scrollBefore + (m.pageContent[0].scrollHeight - heightBefore);\n                }\n                if ((method === 'append' && !m.params.newMessagesFirst) || (method === 'prepend' && m.params.newMessagesFirst)) {\n                    m.scrollMessages(animate ? undefined : 0);\n                }\n                var messages = m.container.find('.message');\n                if (newMessages.length === 1) {\n                    return method === 'append' ? messages[messages.length - 1] : messages[0];\n                }\n                else {\n                    var messagesToReturn = [];\n                    if (method === 'append') {\n                        for (i = messages.length - newMessages.length; i < messages.length; i++) {\n                            messagesToReturn.push(messages[i]);\n                        }\n                    }\n                    else {\n                        for (i = 0; i < newMessages.length; i++) {\n                            messagesToReturn.push(messages[i]);\n                        }   \n                    }\n                    return messagesToReturn;\n                }\n                \n            };\n            m.removeMessage = function (message) {\n                message = $(message);\n                if (message.length === 0) {\n                    return false;\n                }\n                else {\n                    message.remove();\n                    if (m.params.autoLayout) m.layout();\n                    return true;\n                }\n            };\n            m.removeMessages = function (messages) {\n                m.removeMessage(messages);\n            };\n            m.clean = function () {\n                m.container.html('');\n            };\n        \n            // Scroll\n            m.scrollMessages = function (duration, scrollTop) {\n                if (typeof duration === 'undefined') duration = 400;\n                var currentScroll = m.pageContent[0].scrollTop;\n                var newScroll;\n                if (typeof scrollTop !== 'undefined') newScroll = scrollTop;\n                else {\n                    newScroll = m.params.newMessagesFirst ? 0 : m.pageContent[0].scrollHeight - m.pageContent[0].offsetHeight;\n                    if (newScroll === currentScroll) return;\n                }\n                m.pageContent.scrollTop(newScroll, duration);\n            };\n        \n            // Init Destroy\n            m.init = function () {\n                if (m.params.messages) {\n                    m.addMessages(m.params.messages, undefined, false);\n                }\n                else {\n                    if (m.params.autoLayout) m.layout();    \n                    m.scrollMessages(0);\n                }\n                \n            };\n            m.destroy = function () {\n                m = null;\n            };\n        \n            // Init\n            m.init();\n        \n            m.container[0].f7Messages = m;\n            return m;\n        };\n        app.messages = function (container, params) {\n            return new Messages (container, params);\n        };\n        app.initPageMessages = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var messages = pageContainer.find('.messages');\n            if (messages.length === 0) return;\n            if (!messages.hasClass('messages-init')) {\n                return;\n            }\n            var m = app.messages(messages, messages.dataset());\n        \n            // Destroy on page remove\n            function pageBeforeRemove() {\n                m.destroy();\n                pageContainer.off('pageBeforeRemove', pageBeforeRemove);\n            }\n            if (pageContainer.hasClass('page')) {\n                pageContainer.on('pageBeforeRemove', pageBeforeRemove);\n            }\n        };\n        \n\n        /*===============================================================================\n        ************   Swipeout Actions (Swipe to delete)   ************\n        ===============================================================================*/\n        app.swipeoutOpenedEl = undefined;\n        app.allowSwipeout = true;\n        app.initSwipeout = function (swipeoutEl) {\n            var isTouched, isMoved, isScrolling, touchesStart = {}, touchStartTime, touchesDiff, swipeOutEl, swipeOutContent, actionsRight, actionsLeft, actionsLeftWidth, actionsRightWidth, translate, opened, openedActions, buttonsLeft, buttonsRight, direction, overswipeLeftButton, overswipeRightButton, overswipeLeft, overswipeRight, noFoldLeft, noFoldRight;\n            $(document).on(app.touchEvents.start, function (e) {\n                if (app.swipeoutOpenedEl) {\n                    var target = $(e.target);\n                    if (!(\n                        app.swipeoutOpenedEl.is(target[0]) ||\n                        target.parents('.swipeout').is(app.swipeoutOpenedEl) ||\n                        target.hasClass('modal-in') ||\n                        target.hasClass('modal-overlay') ||\n                        target.hasClass('actions-modal') || \n                        target.parents('.actions-modal.modal-in, .modal.modal-in').length > 0\n                        )) {\n                        app.swipeoutClose(app.swipeoutOpenedEl);\n                    }\n                }\n            });\n        \n            function handleTouchStart(e) {\n                if (!app.allowSwipeout) return;\n                isMoved = false;\n                isTouched = true;\n                isScrolling = undefined;\n                touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                touchStartTime = (new Date()).getTime();\n            }\n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n                }\n                if (isScrolling) {\n                    isTouched = false;\n                    return;\n                }\n        \n                if (!isMoved) {\n                    if ($('.list-block.sortable-opened').length > 0) return;\n                    /*jshint validthis:true */\n                    swipeOutEl = $(this);\n                    swipeOutContent = swipeOutEl.find('.swipeout-content');\n                    actionsRight = swipeOutEl.find('.swipeout-actions-right');\n                    actionsLeft = swipeOutEl.find('.swipeout-actions-left');\n                    actionsLeftWidth = actionsRightWidth = buttonsLeft = buttonsRight = overswipeRightButton = overswipeLeftButton = null;\n                    noFoldLeft = actionsLeft.hasClass('swipeout-actions-no-fold') || app.params.swipeoutActionsNoFold;\n                    noFoldRight = actionsRight.hasClass('swipeout-actions-no-fold') || app.params.swipeoutActionsNoFold;\n                    if (actionsLeft.length > 0) {\n                        actionsLeftWidth = actionsLeft.outerWidth();\n                        buttonsLeft = actionsLeft.children('a');\n                        overswipeLeftButton = actionsLeft.find('.swipeout-overswipe');\n                    }\n                    if (actionsRight.length > 0) {\n                        actionsRightWidth = actionsRight.outerWidth();\n                        buttonsRight = actionsRight.children('a');\n                        overswipeRightButton = actionsRight.find('.swipeout-overswipe');\n                    }\n                    opened = swipeOutEl.hasClass('swipeout-opened');\n                    if (opened) {\n                        openedActions = swipeOutEl.find('.swipeout-actions-left.swipeout-actions-opened').length > 0 ? 'left' : 'right';\n                    }\n                    swipeOutEl.removeClass('transitioning');\n                    if (!app.params.swipeoutNoFollow) {\n                        swipeOutEl.find('.swipeout-actions-opened').removeClass('swipeout-actions-opened');\n                        swipeOutEl.removeClass('swipeout-opened');\n                    }\n                }\n                isMoved = true;\n                e.preventDefault();\n                \n                touchesDiff = pageX - touchesStart.x;\n                translate = touchesDiff;\n        \n                if (opened) {\n                    if (openedActions === 'right') translate = translate - actionsRightWidth;\n                    else translate = translate + actionsLeftWidth;\n                }\n        \n                if (translate > 0 && actionsLeft.length === 0 || translate < 0 && actionsRight.length === 0) {\n                    if (!opened) {\n                        isTouched = isMoved = false;\n                        swipeOutContent.transform('');\n                        if (buttonsRight && buttonsRight.length > 0) {\n                            buttonsRight.transform('');\n                        }\n                        if (buttonsLeft && buttonsLeft.length > 0) {\n                            buttonsLeft.transform('');\n                        }\n                        return;\n                    }\n                    translate = 0;\n                }\n        \n                if (translate < 0) direction = 'to-left';\n                else if (translate > 0) direction = 'to-right';\n                else {\n                    if (direction) direction = direction;\n                    else direction = 'to-left';\n                }\n                \n                var i, buttonOffset, progress;\n                \n                e.f7PreventPanelSwipe = true;\n                if (app.params.swipeoutNoFollow) {\n                    if (opened) {\n                        if (openedActions === 'right' && touchesDiff > 0) {\n                            app.swipeoutClose(swipeOutEl);\n                        }\n                        if (openedActions === 'left' && touchesDiff < 0) {\n                            app.swipeoutClose(swipeOutEl);\n                        }\n                    }\n                    else {\n                        if (touchesDiff < 0 && actionsRight.length > 0) {\n                            app.swipeoutOpen(swipeOutEl, 'right');\n                        }\n                        if (touchesDiff > 0 && actionsLeft.length > 0) {\n                            app.swipeoutOpen(swipeOutEl, 'left');\n                        }\n                    }\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n                overswipeLeft = false;\n                overswipeRight = false;\n                var $button;\n                if (actionsRight.length > 0) {\n                    // Show right actions\n                    progress = translate / actionsRightWidth;\n                    if (translate < -actionsRightWidth) {\n                        translate = -actionsRightWidth - Math.pow(-translate - actionsRightWidth, 0.8);\n                        if (overswipeRightButton.length > 0) {\n                            overswipeRight = true;\n                        }\n                    }\n                    for (i = 0; i < buttonsRight.length; i++) {\n                        if (typeof buttonsRight[i]._buttonOffset === 'undefined') {\n                            buttonsRight[i]._buttonOffset = buttonsRight[i].offsetLeft;\n                        }\n                        buttonOffset = buttonsRight[i]._buttonOffset;\n                        $button = $(buttonsRight[i]);\n                        if (overswipeRightButton.length > 0 && $button.hasClass('swipeout-overswipe')) {\n                            $button.css({left: (overswipeRight ? -buttonOffset : 0) + 'px'});\n                            if (overswipeRight) {\n                                $button.addClass('swipeout-overswipe-active');\n                            }\n                            else {\n                                $button.removeClass('swipeout-overswipe-active');   \n                            }\n                        }\n                        $button.transform('translate3d(' + (translate - buttonOffset * (1 + Math.max(progress, -1))) + 'px,0,0)');\n                    }\n                }\n                if (actionsLeft.length > 0) {\n                    // Show left actions\n                    progress = translate / actionsLeftWidth;\n                    if (translate > actionsLeftWidth) {\n                        translate = actionsLeftWidth + Math.pow(translate - actionsLeftWidth, 0.8);\n                        if (overswipeLeftButton.length > 0) {\n                            overswipeLeft = true;\n                        }\n                    }\n                    for (i = 0; i < buttonsLeft.length; i++) {\n                        if (typeof buttonsLeft[i]._buttonOffset === 'undefined') {\n                            buttonsLeft[i]._buttonOffset = actionsLeftWidth - buttonsLeft[i].offsetLeft - buttonsLeft[i].offsetWidth;\n                        }\n                        buttonOffset = buttonsLeft[i]._buttonOffset;\n                        $button = $(buttonsLeft[i]);\n                        if (overswipeLeftButton.length > 0 && $button.hasClass('swipeout-overswipe')) {\n                            $button.css({left: (overswipeLeft ? buttonOffset : 0) + 'px'});\n                            if (overswipeLeft) {\n                                $button.addClass('swipeout-overswipe-active');\n                            }\n                            else {\n                                $button.removeClass('swipeout-overswipe-active');   \n                            }\n                        }\n                        if (buttonsLeft.length > 1) {\n                            $button.css('z-index', buttonsLeft.length - i); \n                        }\n                        $button.transform('translate3d(' + (translate + buttonOffset * (1 - Math.min(progress, 1))) + 'px,0,0)');\n                    }\n                }\n                swipeOutContent.transform('translate3d(' + translate + 'px,0,0)');\n            }\n            function handleTouchEnd(e) {\n                if (!isTouched || !isMoved) {\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n        \n                isTouched = false;\n                isMoved = false;\n                var timeDiff = (new Date()).getTime() - touchStartTime;\n                var action, actionsWidth, actions, buttons, i, noFold;\n                \n                noFold = direction === 'to-left' ? noFoldRight : noFoldLeft;\n                actions = direction === 'to-left' ? actionsRight : actionsLeft;\n                actionsWidth = direction === 'to-left' ? actionsRightWidth : actionsLeftWidth;\n        \n                if (\n                    timeDiff < 300 && (touchesDiff < -10 && direction === 'to-left' || touchesDiff > 10 && direction === 'to-right') ||\n                    timeDiff >= 300 && Math.abs(translate) > actionsWidth / 2\n                ) {\n                    action = 'open';\n                }\n                else {\n                    action = 'close';\n                }\n                if (timeDiff < 300) {\n                    if (Math.abs(translate) === 0) action = 'close';\n                    if (Math.abs(translate) === actionsWidth) action = 'open';\n                }\n                \n                if (action === 'open') {\n                    app.swipeoutOpenedEl = swipeOutEl;\n                    swipeOutEl.trigger('open');\n                    swipeOutEl.addClass('swipeout-opened transitioning');\n                    var newTranslate = direction === 'to-left' ? -actionsWidth : actionsWidth;\n                    swipeOutContent.transform('translate3d(' + newTranslate + 'px,0,0)');\n                    actions.addClass('swipeout-actions-opened');\n                    buttons = direction === 'to-left' ? buttonsRight : buttonsLeft;\n                    if (buttons) {\n                        for (i = 0; i < buttons.length; i++) {\n                            $(buttons[i]).transform('translate3d(' + newTranslate + 'px,0,0)');\n                        }\n                    }\n                    if (overswipeRight) {\n                        actionsRight.find('.swipeout-overswipe')[0].click();\n                    }\n                    if (overswipeLeft) {\n                        actionsLeft.find('.swipeout-overswipe')[0].click();\n                    }\n                }\n                else {\n                    swipeOutEl.trigger('close');\n                    app.swipeoutOpenedEl = undefined;\n                    swipeOutEl.addClass('transitioning').removeClass('swipeout-opened');\n                    swipeOutContent.transform('');\n                    actions.removeClass('swipeout-actions-opened');\n                }\n                \n                var buttonOffset;\n                if (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n                    for (i = 0; i < buttonsLeft.length; i++) {\n                        buttonOffset = buttonsLeft[i]._buttonOffset;\n                        if (typeof buttonOffset === 'undefined') {\n                            buttonsLeft[i]._buttonOffset = actionsLeftWidth - buttonsLeft[i].offsetLeft - buttonsLeft[i].offsetWidth;\n                        }\n                        $(buttonsLeft[i]).transform('translate3d(' + (buttonOffset) + 'px,0,0)');\n                    }\n                }\n                if (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n                    for (i = 0; i < buttonsRight.length; i++) {\n                        buttonOffset = buttonsRight[i]._buttonOffset;\n                        if (typeof buttonOffset === 'undefined') {\n                            buttonsRight[i]._buttonOffset = buttonsRight[i].offsetLeft;\n                        }\n                        $(buttonsRight[i]).transform('translate3d(' + (-buttonOffset) + 'px,0,0)');\n                    }\n                }\n                swipeOutContent.transitionEnd(function (e) {\n                    if (opened && action === 'open' || closed && action === 'close') return;\n                    swipeOutEl.trigger(action === 'open' ? 'opened' : 'closed');\n                    if (opened && action === 'close') {\n                        if (actionsRight.length > 0) {\n                            buttonsRight.transform('');\n                        }\n                        if (actionsLeft.length > 0) {\n                            buttonsLeft.transform('');\n                        }\n                    }\n                });\n            }\n            if (swipeoutEl) {\n                $(swipeoutEl).on(app.touchEvents.start, handleTouchStart);\n                $(swipeoutEl).on(app.touchEvents.move, handleTouchMove);\n                $(swipeoutEl).on(app.touchEvents.end, handleTouchEnd);\n            }\n            else {\n                $(document).on(app.touchEvents.start, '.list-block li.swipeout', handleTouchStart);\n                $(document).on(app.touchEvents.move, '.list-block li.swipeout', handleTouchMove);\n                $(document).on(app.touchEvents.end, '.list-block li.swipeout', handleTouchEnd);\n            }\n                \n        };\n        app.swipeoutOpen = function (el, dir, callback) {\n            el = $(el);\n            if (arguments.length === 2) {\n                if (typeof arguments[1] === 'function') {\n                    callback = dir;\n                }\n            }\n        \n            if (el.length === 0) return;\n            if (el.length > 1) el = $(el[0]);\n            if (!el.hasClass('swipeout') || el.hasClass('swipeout-opened')) return;\n            if (!dir) {\n                if (el.find('.swipeout-actions-right').length > 0) dir = 'right';\n                else dir = 'left';\n            }\n            var swipeOutActions = el.find('.swipeout-actions-' + dir);\n            if (swipeOutActions.length === 0) return;\n            var noFold = swipeOutActions.hasClass('swipeout-actions-no-fold') || app.params.swipeoutActionsNoFold;\n            el.trigger('open').addClass('swipeout-opened').removeClass('transitioning');\n            swipeOutActions.addClass('swipeout-actions-opened');\n            var buttons = swipeOutActions.children('a');\n            var swipeOutActionsWidth = swipeOutActions.outerWidth();\n            var translate = dir === 'right' ? -swipeOutActionsWidth : swipeOutActionsWidth;\n            var i;\n            if (buttons.length > 1) {\n                for (i = 0; i < buttons.length; i++) {\n                    if (dir === 'right') {\n                        $(buttons[i]).transform('translate3d(' + (- buttons[i].offsetLeft) + 'px,0,0)');\n                    }\n                    else {\n                        $(buttons[i]).css('z-index', buttons.length - i).transform('translate3d(' + (swipeOutActionsWidth - buttons[i].offsetWidth - buttons[i].offsetLeft) + 'px,0,0)');\n                    }\n                }\n                var clientLeft = buttons[1].clientLeft;\n            }\n            el.addClass('transitioning');\n            for (i = 0; i < buttons.length; i++) {\n                $(buttons[i]).transform('translate3d(' + (translate) + 'px,0,0)');\n            }\n            el.find('.swipeout-content').transform('translate3d(' + translate + 'px,0,0)').transitionEnd(function () {\n                el.trigger('opened');\n                if (callback) callback.call(el[0]);\n            });\n            app.swipeoutOpenedEl = el;\n        };\n        app.swipeoutClose = function (el, callback) {\n            el = $(el);\n            if (el.length === 0) return;\n            if (!el.hasClass('swipeout-opened')) return;\n            var dir = el.find('.swipeout-actions-opened').hasClass('swipeout-actions-right') ? 'right' : 'left';\n            var swipeOutActions = el.find('.swipeout-actions-opened').removeClass('swipeout-actions-opened');\n            var noFold = swipeOutActions.hasClass('swipeout-actions-no-fold') || app.params.swipeoutActionsNoFold;\n            var buttons = swipeOutActions.children('a');\n            var swipeOutActionsWidth = swipeOutActions.outerWidth();\n            app.allowSwipeout = false;\n            el.trigger('close');\n            el.removeClass('swipeout-opened').addClass('transitioning');\n        \n            var closeTO;\n            function onSwipeoutClose() {\n                app.allowSwipeout = true;\n                if (el.hasClass('swipeout-opened')) return;\n                el.removeClass('transitioning');\n                buttons.transform('');\n                el.trigger('closed');\n                if (callback) callback.call(el[0]);\n                if (closeTO) clearTimeout(closeTO);\n            }\n            el.find('.swipeout-content').transform('').transitionEnd(onSwipeoutClose);\n            closeTO = setTimeout(onSwipeoutClose, 500);\n            \n            for (var i = 0; i < buttons.length; i++) {\n                if (dir === 'right') {\n                    $(buttons[i]).transform('translate3d(' + (-buttons[i].offsetLeft) + 'px,0,0)');\n                }\n                else {\n                    $(buttons[i]).transform('translate3d(' + (swipeOutActionsWidth - buttons[i].offsetWidth - buttons[i].offsetLeft) + 'px,0,0)');\n                }\n                $(buttons[i]).css({left:0 + 'px'}).removeClass('swipeout-overswipe-active');\n            }\n            if (app.swipeoutOpenedEl && app.swipeoutOpenedEl[0] === el[0]) app.swipeoutOpenedEl = undefined;\n        };\n        app.swipeoutDelete = function (el, callback) {\n            el = $(el);\n            if (el.length === 0) return;\n            if (el.length > 1) el = $(el[0]);\n            app.swipeoutOpenedEl = undefined;\n            el.trigger('delete');\n            el.css({height: el.outerHeight() + 'px'});\n            var clientLeft = el[0].clientLeft;\n            el.css({height: 0 + 'px'}).addClass('deleting transitioning').transitionEnd(function () {\n                el.trigger('deleted');\n                if (callback) callback.call(el[0]);\n                if (el.parents('.virtual-list').length > 0) {\n                    var virtualList = el.parents('.virtual-list')[0].f7VirtualList;\n                    var virtualIndex = el[0].f7VirtualListIndex;\n                    if (virtualList && typeof virtualIndex !== 'undefined') virtualList.deleteItem(virtualIndex);\n                }\n                else {\n                    el.remove();\n                }\n            });\n            var translate = '-100%';\n            el.find('.swipeout-content').transform('translate3d(' + translate + ',0,0)');\n        };\n        \n\n        /*===============================================================================\n        ************   Sortable   ************\n        ===============================================================================*/\n        app.sortableToggle = function (sortableContainer) {\n            sortableContainer = $(sortableContainer);\n            if (sortableContainer.length === 0) sortableContainer = $('.list-block.sortable');\n            sortableContainer.toggleClass('sortable-opened');\n            if (sortableContainer.hasClass('sortable-opened')) {\n                sortableContainer.trigger('open');\n            }\n            else {\n                sortableContainer.trigger('close');\n            }\n            return sortableContainer;\n        };\n        app.sortableOpen = function (sortableContainer) {\n            sortableContainer = $(sortableContainer);\n            if (sortableContainer.length === 0) sortableContainer = $('.list-block.sortable');\n            sortableContainer.addClass('sortable-opened');\n            sortableContainer.trigger('open');\n            return sortableContainer;\n        };\n        app.sortableClose = function (sortableContainer) {\n            sortableContainer = $(sortableContainer);\n            if (sortableContainer.length === 0) sortableContainer = $('.list-block.sortable');\n            sortableContainer.removeClass('sortable-opened');\n            sortableContainer.trigger('close');\n            return sortableContainer;\n        };\n        app.initSortable = function () {\n            var isTouched, isMoved, touchStartY, touchesDiff, sortingEl, sortingElHeight, sortingItems, minTop, maxTop, insertAfter, insertBefore, sortableContainer;\n            \n            function handleTouchStart(e) {\n                isMoved = false;\n                isTouched = true;\n                touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                /*jshint validthis:true */\n                sortingEl = $(this).parent();\n                sortingItems = sortingEl.parent().find('li');\n                sortableContainer = sortingEl.parents('.sortable');\n                e.preventDefault();\n                app.allowPanelOpen = app.allowSwipeout = false;\n            }\n            function handleTouchMove(e) {\n                if (!isTouched || !sortingEl) return;\n                var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                if (!isMoved) {\n                    sortingEl.addClass('sorting');\n                    sortableContainer.addClass('sortable-sorting');\n                    minTop = sortingEl[0].offsetTop;\n                    maxTop = sortingEl.parent().height() - sortingEl[0].offsetTop - sortingEl.height();\n                    sortingElHeight = sortingEl[0].offsetHeight;\n                }\n                isMoved = true;\n        \n                e.preventDefault();\n                e.f7PreventPanelSwipe = true;\n                touchesDiff = pageY - touchStartY;\n                var translate = touchesDiff;\n                if (translate < -minTop) translate = -minTop;\n                if (translate > maxTop) translate = maxTop;\n                sortingEl.transform('translate3d(0,' + translate + 'px,0)');\n        \n                insertBefore = insertAfter = undefined;\n        \n                sortingItems.each(function () {\n                    var currentEl = $(this);\n                    if (currentEl[0] === sortingEl[0]) return;\n                    var currentElOffset = currentEl[0].offsetTop;\n                    var currentElHeight = currentEl.height();\n                    var sortingElOffset = sortingEl[0].offsetTop + translate;\n        \n                    if ((sortingElOffset >= currentElOffset - currentElHeight / 2) && sortingEl.index() < currentEl.index()) {\n                        currentEl.transform('translate3d(0, '+(-sortingElHeight)+'px,0)');\n                        insertAfter = currentEl;\n                        insertBefore = undefined;\n                    }\n                    else if ((sortingElOffset <= currentElOffset + currentElHeight / 2) && sortingEl.index() > currentEl.index()) {\n                        currentEl.transform('translate3d(0, '+(sortingElHeight)+'px,0)');\n                        insertAfter = undefined;\n                        if (!insertBefore) insertBefore = currentEl;\n                    }\n                    else {\n                        $(this).transform('translate3d(0, 0%,0)');\n                    }\n                });\n            }\n            function handleTouchEnd(e) {\n                app.allowPanelOpen = app.allowSwipeout = true;\n                if (!isTouched || !isMoved) {\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n                e.preventDefault();\n                sortingItems.transform('');\n                sortingEl.removeClass('sorting');\n                sortableContainer.removeClass('sortable-sorting');\n                var virtualList, oldIndex, newIndex;\n                if (insertAfter) {\n                    sortingEl.insertAfter(insertAfter);\n                    sortingEl.trigger('sort');\n                }\n                if (insertBefore) {\n                    sortingEl.insertBefore(insertBefore);\n                    sortingEl.trigger('sort');\n                }\n                if ((insertAfter || insertBefore) && sortableContainer.hasClass('virtual-list')) {\n                    virtualList = sortableContainer[0].f7VirtualList;\n                    oldIndex = sortingEl[0].f7VirtualListIndex;\n                    newIndex = insertBefore ? insertBefore[0].f7VirtualListIndex : insertAfter[0].f7VirtualListIndex;\n                    if (virtualList) virtualList.moveItem(oldIndex, newIndex);\n                }\n                insertAfter = insertBefore = undefined;\n                isTouched = false;\n                isMoved = false;\n            }\n            $(document).on(app.touchEvents.start, '.list-block.sortable .sortable-handler', handleTouchStart);\n            if (app.support.touch) {\n                $(document).on(app.touchEvents.move, '.list-block.sortable .sortable-handler', handleTouchMove);\n                $(document).on(app.touchEvents.end, '.list-block.sortable .sortable-handler', handleTouchEnd);\n            }\n            else {\n                $(document).on(app.touchEvents.move, handleTouchMove);\n                $(document).on(app.touchEvents.end, handleTouchEnd);\n            }\n                \n        };\n        \n\n        /*===============================================================================\n        ************   Smart Select   ************\n        ===============================================================================*/\n        app.initSmartSelects = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var selects;\n            if (pageContainer.is('.smart-select')) {\n                selects = pageContainer;\n            }\n            else {\n                selects = pageContainer.find('.smart-select');\n            }\n            if (selects.length === 0) return;\n        \n            selects.each(function () {\n                var smartSelect = $(this);\n        \n                var $select = smartSelect.find('select');\n                if ($select.length === 0) return;\n        \n                var select = $select[0];\n                if (select.length === 0) return;\n        \n                var valueText = [];\n                for (var i = 0; i < select.length; i++) {\n                    if (select[i].selected) valueText.push(select[i].textContent.trim());\n                }\n        \n                var itemAfter = smartSelect.find('.item-after');\n                if (itemAfter.length === 0) {\n                    smartSelect.find('.item-inner').append('<div class=\"item-after\">' + valueText.join(', ') + '</div>');\n                }\n                else {\n                    var selectedText = itemAfter.text();\n                    if (itemAfter.hasClass('smart-select-value')) {\n                        for (i = 0; i < select.length; i++) {\n                            select[i].selected = select[i].textContent.trim() === selectedText.trim();\n                        }\n                    } else {\n                        itemAfter.text(valueText.join(', '));\n                    }\n                }\n                \n            });\n            \n        };\n        app.smartSelectAddOption = function (select, option, index) {\n            select = $(select);\n            var smartSelect = select.parents('.smart-select');\n            if (typeof index === 'undefined') {\n                select.append(option);\n            }\n            else {\n                $(option).insertBefore(select.find('option').eq(index));\n            }\n            app.initSmartSelects(smartSelect);\n            var selectName = smartSelect.find('select').attr('name');\n            var opened = $('.page.smart-select-page[data-select-name=\"' + selectName + '\"]').length > 0;\n            if (opened) {\n                app.smartSelectOpen(smartSelect, true);\n            }\n        };\n        app.smartSelectOpen = function (smartSelect, reLayout) {\n            smartSelect = $(smartSelect);\n            if (smartSelect.length === 0) return;\n        \n            // Find related view\n            var view = smartSelect.parents('.' + app.params.viewClass);\n            if (view.length === 0) return;\n            view = view[0].f7View;\n        \n            // Parameters\n            var openIn = smartSelect.attr('data-open-in') || app.params.smartSelectOpenIn;\n            if (openIn === 'popup') {\n                if ($('.popup.smart-select-popup').length > 0) return;\n            }\n            else if (openIn === 'picker') {\n                if ($('.picker-modal.modal-in').length > 0 && !reLayout){\n                    if (smartSelect[0].f7SmartSelectPicker !== $('.picker-modal.modal-in:not(.modal-out)')[0]) app.closeModal($('.picker-modal.modal-in:not(.modal-out)'));\n                    else return;\n                }\n            }\n            else {\n                if (!view) return;\n            }\n        \n            var smartSelectData = smartSelect.dataset();\n            var pageTitle = smartSelectData.pageTitle || smartSelect.find('.item-title').text();\n            var backText = smartSelectData.backText || app.params.smartSelectBackText;\n            var closeText;\n            if (openIn === 'picker') {\n                closeText = smartSelectData.pickerCloseText || smartSelectData.backText || app.params.smartSelectPickerCloseText ;   \n            }\n            else {\n                closeText = smartSelectData.popupCloseText || smartSelectData.backText || app.params.smartSelectPopupCloseText ;      \n            }\n            var backOnSelect = smartSelectData.backOnSelect !== undefined ? smartSelectData.backOnSelect : app.params.smartSelectBackOnSelect;\n            var formTheme = smartSelectData.formTheme || app.params.smartSelectFormTheme;\n            var navbarTheme = smartSelectData.navbarTheme || app.params.smartSelectNavbarTheme;\n            var toolbarTheme = smartSelectData.toolbarTheme || app.params.smartSelectToolbarTheme;\n            var virtualList = smartSelectData.virtualList;\n            var virtualListHeight = smartSelectData.virtualListHeight;\n            var material = app.params.material;\n            var pickerHeight = smartSelectData.pickerHeight || app.params.smartSelectPickerHeight;\n        \n            // Collect all options/values\n            var select = smartSelect.find('select')[0];\n            var $select = $(select);\n            var $selectData = $select.dataset();\n            if (select.disabled || smartSelect.hasClass('disabled') || $select.hasClass('disabled')) {\n                return;\n            }\n            var values = [];\n            var id = (new Date()).getTime();\n            var inputType = select.multiple ? 'checkbox' : 'radio';\n            var inputName = inputType + '-' + id;\n            var maxLength = $select.attr('maxlength');\n            var selectName = select.name;\n            var option, optionHasMedia, optionImage, optionIcon, optionGroup, optionGroupLabel, optionPreviousGroup, optionIsLabel, previousGroup, optionColor, optionClassName, optionData;\n            for (var i = 0; i < select.length; i++) {\n                option = $(select[i]);\n                optionData = option.dataset();\n                optionImage = optionData.optionImage || $selectData.optionImage || smartSelectData.optionImage;\n                optionIcon = optionData.optionIcon || $selectData.optionIcon || smartSelectData.optionIcon;\n                optionHasMedia = optionImage || optionIcon || inputType === 'checkbox';\n                if (material) optionHasMedia = optionImage || optionIcon;\n                optionColor = optionData.optionColor;\n                optionClassName = optionData.optionClass;\n                if (option[0].disabled) optionClassName += ' disabled';\n                optionGroup = option.parent('optgroup')[0];\n                optionGroupLabel = optionGroup && optionGroup.label;\n                optionIsLabel = false;\n                if (optionGroup) {\n                    if (optionGroup !== previousGroup) {\n                        optionIsLabel = true;\n                        previousGroup = optionGroup;\n                        values.push({\n                            groupLabel: optionGroupLabel,\n                            isLabel: optionIsLabel\n                        });\n                    }\n                }\n                values.push({\n                    value: option[0].value,\n                    text: option[0].textContent.trim(),\n                    selected: option[0].selected,\n                    group: optionGroup,\n                    groupLabel: optionGroupLabel,\n                    image: optionImage,\n                    icon: optionIcon,\n                    color: optionColor,\n                    className: optionClassName,\n                    disabled: option[0].disabled,\n                    inputType: inputType,\n                    id: id,\n                    hasMedia: optionHasMedia,\n                    checkbox: inputType === 'checkbox',\n                    inputName: inputName,\n                    material: app.params.material\n                });\n            }\n        \n        \n            // Item template/HTML\n            if (!app._compiledTemplates.smartSelectItem) {\n                app._compiledTemplates.smartSelectItem = t7.compile(app.params.smartSelectItemTemplate || \n                    '{{#if isLabel}}' +\n                    '<li class=\"item-divider\">{{groupLabel}}</li>' +\n                    '{{else}}' +\n                    '<li{{#if className}} class=\"{{className}}\"{{/if}}>' +\n                        '<label class=\"label-{{inputType}} item-content\">' +\n                            '<input type=\"{{inputType}}\" name=\"{{inputName}}\" value=\"{{value}}\" {{#if selected}}checked{{/if}}>' +\n                            '{{#if material}}' +\n                                '{{#if hasMedia}}' +\n                                '<div class=\"item-media\">' +\n                                    '{{#if icon}}<i class=\"icon {{icon}}\"></i>{{/if}}' +\n                                    '{{#if image}}<img src=\"{{image}}\">{{/if}}' +\n                                '</div>' +\n                                '<div class=\"item-inner\">' +\n                                    '<div class=\"item-title{{#if color}} color-{{color}}{{/if}}\">{{text}}</div>' +\n                                '</div>' +\n                                '<div class=\"item-after\">' +\n                                    '<i class=\"icon icon-form-{{inputType}}\"></i>' +\n                                '</div>' +\n                                '{{else}}' +\n                                '<div class=\"item-media\">' +\n                                    '<i class=\"icon icon-form-{{inputType}}\"></i>' +\n                                '</div>' +\n                                '<div class=\"item-inner\">' +\n                                    '<div class=\"item-title{{#if color}} color-{{color}}{{/if}}\">{{text}}</div>' +\n                                '</div>' +\n                                '{{/if}}' +\n                            '{{else}}' +\n                                '{{#if hasMedia}}' +\n                                '<div class=\"item-media\">' +\n                                    '{{#if checkbox}}<i class=\"icon icon-form-checkbox\"></i>{{/if}}' +\n                                    '{{#if icon}}<i class=\"icon {{icon}}\"></i>{{/if}}' +\n                                    '{{#if image}}<img src=\"{{image}}\">{{/if}}' +\n                                '</div>' +\n                                '{{/if}}' +\n                                '<div class=\"item-inner\">' +\n                                    '<div class=\"item-title{{#if color}} color-{{color}}{{/if}}\">{{text}}</div>' +\n                                '</div>' +\n                            '{{/if}}' +\n                        '</label>' +\n                    '</li>' +\n                    '{{/if}}'\n                );\n            }\n            var smartSelectItemTemplate = app._compiledTemplates.smartSelectItem;\n            \n            var inputsHTML = '';\n            if (!virtualList) {\n                for (var j = 0; j < values.length; j++) {\n                    inputsHTML += smartSelectItemTemplate(values[j]);\n                }\n            }\n        \n            // Toolbar / Navbar\n            var toolbarHTML = '', navbarHTML;\n            var noNavbar = '', noToolbar = '', navbarLayout;\n        \n            if (openIn === 'picker') {\n                if (!app._compiledTemplates.smartSelectToolbar) {\n                    app._compiledTemplates.smartSelectToolbar = t7.compile(app.params.smartSelectToolbarTemplate || \n                        '<div class=\"toolbar {{#if toolbarTheme}}theme-{{toolbarTheme}}{{/if}}\">' +\n                          '<div class=\"toolbar-inner\">' +\n                            '<div class=\"left\"></div>' +\n                            '<div class=\"right\"><a href=\"#\" class=\"link close-picker\"><span>{{closeText}}</span></a></div>' +\n                        '</div>' +\n                      '</div>'\n                    );\n                }\n        \n                toolbarHTML = app._compiledTemplates.smartSelectToolbar({\n                    pageTitle: pageTitle,\n                    closeText: closeText,\n                    openIn: openIn,\n                    toolbarTheme: toolbarTheme,\n                    inPicker: openIn === 'picker'              \n                });\n            }\n            else {\n                // Navbar HTML\n                if (!app._compiledTemplates.smartSelectNavbar) {\n                    app._compiledTemplates.smartSelectNavbar = t7.compile(app.params.smartSelectNavbarTemplate || \n                        '<div class=\"navbar {{#if navbarTheme}}theme-{{navbarTheme}}{{/if}}\">' +\n                            '<div class=\"navbar-inner\">' +\n                                '{{leftTemplate}}' +\n                                '<div class=\"center sliding\">{{pageTitle}}</div>' +\n                            '</div>' +\n                        '</div>'\n                    );\n                }\n                navbarHTML = app._compiledTemplates.smartSelectNavbar({\n                    pageTitle: pageTitle,\n                    backText: backText,\n                    closeText: closeText,\n                    openIn: openIn,\n                    navbarTheme: navbarTheme,\n                    inPopup: openIn === 'popup',\n                    inPage: openIn === 'page',\n                    leftTemplate: openIn === 'popup' ? \n                        (app.params.smartSelectPopupCloseTemplate || (material ? '<div class=\"left\"><a href=\"#\" class=\"link close-popup icon-only\"><i class=\"icon icon-back\"></i></a></div>' : '<div class=\"left\"><a href=\"#\" class=\"link close-popup\"><i class=\"icon icon-back\"></i><span>{{closeText}}</span></a></div>')).replace(/{{closeText}}/g, closeText) :\n                        (app.params.smartSelectBackTemplate || (material ? '<div class=\"left\"><a href=\"#\" class=\"back link icon-only\"><i class=\"icon icon-back\"></i></a></div>' : '<div class=\"left sliding\"><a href=\"#\" class=\"back link\"><i class=\"icon icon-back\"></i><span>{{backText}}</span></a></div>')).replace(/{{backText}}/g, backText)\n                });\n                // Determine navbar layout type - static/fixed/through\n                if (openIn === 'page') {\n                    navbarLayout = 'static';\n                    if (smartSelect.parents('.navbar-through').length > 0) navbarLayout = 'through';\n                    if (smartSelect.parents('.navbar-fixed').length > 0) navbarLayout = 'fixed';\n                    noToolbar = smartSelect.parents('.page').hasClass('no-toolbar') ? 'no-toolbar' : '';\n                    noNavbar  = smartSelect.parents('.page').hasClass('no-navbar')  ? 'no-navbar'  : 'navbar-' + navbarLayout;\n                }\n                else {\n                    navbarLayout = 'fixed';\n                }\n            }\n                \n        \n            // Page Layout\n            var pageName = 'smart-select-' + inputName;\n        \n            var useSearchbar = typeof smartSelect.data('searchbar') === 'undefined' ? app.params.smartSelectSearchbar : (smartSelect.data('searchbar') === 'true' ? true : false);\n            var searchbarPlaceholder, searchbarCancel;\n                \n            if (useSearchbar) {\n                searchbarPlaceholder = smartSelect.data('searchbar-placeholder') || 'Search';\n                searchbarCancel = smartSelect.data('searchbar-cancel') || 'Cancel';\n            }\n        \n            var searchbarHTML =   '<form class=\"searchbar searchbar-init\" data-search-list=\".smart-select-list-' + id + '\" data-search-in=\".item-title\">' +\n                                    '<div class=\"searchbar-input\">' +\n                                        '<input type=\"search\" placeholder=\"' + searchbarPlaceholder + '\">' +\n                                        '<a href=\"#\" class=\"searchbar-clear\"></a>' +\n                                    '</div>' +\n                                    (material ? '' : '<a href=\"#\" class=\"searchbar-cancel\">' + searchbarCancel + '</a>') +\n                                  '</form>' +\n                                  '<div class=\"searchbar-overlay\"></div>';\n        \n            var pageHTML =\n                (openIn !== 'picker' && navbarLayout === 'through' ? navbarHTML : '') +\n                '<div class=\"pages\">' +\n                '  <div data-page=\"' + pageName + '\" data-select-name=\"' + selectName + '\" class=\"page smart-select-page ' + noNavbar + ' ' + noToolbar + '\">' +\n                     (openIn !== 'picker' && navbarLayout === 'fixed' ? navbarHTML : '') +\n                     (useSearchbar ? searchbarHTML : '') +\n                '    <div class=\"page-content\">' +\n                       (openIn !== 'picker' && navbarLayout === 'static' ? navbarHTML : '') +\n                '      <div class=\"list-block ' + (virtualList ? 'virtual-list' : '') + ' smart-select-list-' + id + ' ' + (formTheme ? 'theme-' + formTheme : '') + '\">' +\n                '        <ul>' +\n                            (virtualList ? '' : inputsHTML) +\n                '        </ul>' +\n                '      </div>' +\n                '    </div>' +\n                '  </div>' +\n                '</div>';\n        \n            // Define popup and picker\n            var popup, picker;\n        \n            // Scroll SS Picker To Input\n            function scrollToInput() {\n                var pageContent = smartSelect.parents('.page-content');\n                if (pageContent.length === 0) return;\n                var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                    paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                    pageHeight = pageContent[0].offsetHeight - paddingTop - picker.height(),\n                    pageScrollHeight = pageContent[0].scrollHeight - paddingTop - picker.height(),\n                    newPaddingBottom;\n                var inputTop = smartSelect.offset().top - paddingTop + smartSelect[0].offsetHeight;\n                if (inputTop > pageHeight) {\n                    var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                    if (scrollTop + pageHeight > pageScrollHeight) {\n                        newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                        if (pageHeight === pageScrollHeight) {\n                            newPaddingBottom = picker.height();\n                        }\n                        pageContent.css({'padding-bottom': (newPaddingBottom) + 'px'});\n                    }\n                    pageContent.scrollTop(scrollTop, 300);\n                }\n            }\n            // Close SS Picker on HTML Click\n            function closeOnHTMLClick(e) {\n                var close = true;\n                if (e.target === smartSelect[0] || $(e.target).parents(smartSelect[0]).length > 0) {\n                    close = false;\n                }\n                if ($(e.target).parents('.picker-modal').length > 0) {\n                    close = false;\n                }\n                if (close) {\n                    app.closeModal('.smart-select-picker.modal-in');   \n                }\n            }\n        \n            // Check max length\n            function checkMaxLength(container) {\n                if (select.selectedOptions.length >= maxLength) {\n                    container.find('input[type=\"checkbox\"]').each(function () {\n                        if (!this.checked) {\n                            $(this).parents('li').addClass('disabled');\n                        }\n                        else {\n                            $(this).parents('li').removeClass('disabled');   \n                        }\n                    });\n                }\n                else {\n                    container.find('.disabled').removeClass('disabled');\n                }\n            }\n            // Event Listeners on new page\n            function handleInputs(container) {\n                container = $(container);\n                if (virtualList) {\n                    var virtualListInstance = app.virtualList(container.find('.virtual-list'), {\n                        items: values,\n                        template: smartSelectItemTemplate,\n                        height: virtualListHeight || undefined,\n                        searchByItem: function (query, index, item) {\n                            if (item.text.toLowerCase().indexOf(query.trim().toLowerCase()) >=0 ) return true;\n                            return false;\n                        }\n                    });\n                    container.once(openIn === 'popup' || openIn === 'picker' ? 'closed': 'pageBeforeRemove', function () {\n                        if (virtualListInstance && virtualListInstance.destroy) virtualListInstance.destroy();\n                    });\n                }\n                if (maxLength) {\n                    checkMaxLength(container);\n                }\n                container.on('change', 'input[name=\"' + inputName + '\"]', function () {\n                    var input = this;\n                    var value = input.value;\n                    var optionText = [];\n                    if (input.type === 'checkbox') {\n                        var values = [];\n                        for (var i = 0; i < select.options.length; i++) {\n                            var option = select.options[i];\n                            if (option.value === value) {\n                                option.selected = input.checked;\n                            }\n                            if (option.selected) {\n                                optionText.push(option.textContent.trim());\n                            }\n                        }\n                        if (maxLength) {\n                            checkMaxLength(container);\n                        }\n                    }\n                    else {\n                        optionText = [smartSelect.find('option[value=\"' + value + '\"]').text()];\n                        select.value = value;\n                    }\n                        \n                    $select.trigger('change');\n                    smartSelect.find('.item-after').text(optionText.join(', '));\n                    if (backOnSelect && inputType === 'radio') {\n                        if (openIn === 'popup') app.closeModal(popup);\n                        else if (openIn === 'picker') app.closeModal(picker);\n                        else view.router.back();\n                    }\n                });\n            }\n            function pageInit(e) {\n                var page = e.detail.page;\n                if (page.name === pageName) {\n                    handleInputs(page.container);\n                }\n            }\n            if (openIn === 'popup') {\n                if (reLayout) {\n                    popup = $('.popup.smart-select-popup .view');\n                    popup.html(pageHTML);\n                }\n                else {\n                    popup = app.popup(\n                        '<div class=\"popup smart-select-popup smart-select-popup-' + inputName + '\">' +\n                            '<div class=\"view navbar-fixed\">' +\n                                pageHTML +\n                            '</div>' +\n                        '</div>'\n                        );\n                    popup = $(popup);\n                }\n                app.initPage(popup.find('.page'));\n                handleInputs(popup);\n            }\n            else if (openIn === 'picker') {\n                if (reLayout) {\n                    picker = $('.picker-modal.smart-select-picker .view');\n                    picker.html(pageHTML);\n                }\n                else {\n                    picker = app.pickerModal(\n                        '<div class=\"picker-modal smart-select-picker smart-select-picker-' + inputName + '\"' + (pickerHeight ? ' style=\"height:' + pickerHeight + '\"' : '') + '>' +\n                            toolbarHTML +\n                            '<div class=\"picker-modal-inner\">' +\n                                '<div class=\"view\">' +\n                                    pageHTML +\n                                '</div>' +\n                            '</div>' +\n                        '</div>'\n                        );\n                    picker = $(picker);\n        \n                    // Scroll To Input\n                    scrollToInput();\n        \n                    // Close On Click\n                    $('html').on('click', closeOnHTMLClick);\n        \n                    // On Close\n                    picker.once('close', function () {\n                        // Reset linked picker\n                        smartSelect[0].f7SmartSelectPicker = undefined;\n                        \n                        // Detach html click\n                        $('html').off('click', closeOnHTMLClick);    \n                        \n                        // Restore page padding bottom\n                        smartSelect.parents('.page-content').css({paddingBottom: ''});\n                    });\n        \n                    // Link Picker\n                    smartSelect[0].f7SmartSelectPicker = picker[0];\n                }\n        \n                // Init Page\n                app.initPage(picker.find('.page'));\n        \n                // Attach events\n                handleInputs(picker);\n            }\n            else {\n                $(document).once('pageInit', '.smart-select-page', pageInit);\n                view.router.load({\n                    content: pageHTML,\n                    reload: reLayout ? true : undefined\n                });\n            }\n        };\n        \n\n        /*===============================================================================\n        ************   Virtual List   ************\n        ===============================================================================*/\n        var VirtualList = function (listBlock, params) {\n            var defaults = {\n                cols: 1,\n                height: app.params.material ? 48 : 44,\n                cache: true,\n                dynamicHeightBufferSize: 1\n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined') {\n                    params[def] = defaults[def];\n                }\n            }\n        \n            // Preparation\n            var vl = this;\n            vl.listBlock = $(listBlock);\n            vl.params = params;\n            vl.items = params.items;\n            if (params.template) {\n                if (typeof params.template === 'string') vl.template = t7.compile(params.template);\n                else if (typeof params.template === 'function') vl.template = params.template;\n            }\n            vl.pageContent = vl.listBlock.parents('.page-content');\n        \n            // Bad scroll\n            var updatableScroll;\n            if (typeof vl.params.updatableScroll !== 'undefined') {\n                updatableScroll = vl.params.updatableScroll;\n            }\n            else {\n                updatableScroll = true;\n                if (app.device.ios && app.device.osVersion.split('.')[0] < 8) {\n                    updatableScroll = false;\n                }\n            }\n                \n            // Append <ul>\n            vl.ul = vl.params.ul ? $(vl.params.ul) : vl.listBlock.children('ul');\n            if (vl.ul.length === 0) {\n                vl.listBlock.append('<ul></ul>');\n                vl.ul = vl.listBlock.children('ul');\n            }\n        \n            // DOM cached items\n            vl.domCache = {};\n            vl.displayDomCache = {};\n        \n            // Temporary DOM Element\n            vl.tempDomElement = document.createElement('ul');\n        \n            // Last repain position\n            vl.lastRepaintY = null;\n        \n            // Fragment\n            vl.fragment = document.createDocumentFragment();\n        \n            // Filter\n            vl.filterItems = function (indexes, resetScrollTop) {\n                vl.filteredItems = [];\n                var firstIndex = indexes[0];\n                var lastIndex = indexes[indexes.length - 1];\n                for (var i = 0; i < indexes.length; i++) {\n                    vl.filteredItems.push(vl.items[indexes[i]]);\n                }\n                if (typeof resetScrollTop === 'undefined') resetScrollTop = true;\n                if (resetScrollTop) {\n                    vl.pageContent[0].scrollTop = 0;\n                }\n                vl.update();\n            };\n            vl.resetFilter = function () {\n                vl.filteredItems = null;\n                delete vl.filteredItems;\n                vl.update();\n            };\n        \n            var pageHeight, rowsPerScreen, rowsBefore, rowsAfter, rowsToRender, maxBufferHeight = 0, listHeight;\n            var dynamicHeight = typeof vl.params.height === 'function';\n        \n            // Set list size\n            vl.setListSize = function () {\n                var items = vl.filteredItems || vl.items;\n                pageHeight = vl.pageContent[0].offsetHeight;\n                if (dynamicHeight) {\n                    listHeight = 0;\n                    vl.heights = [];\n                    for (var i = 0; i < items.length; i++) {\n                        var itemHeight = vl.params.height(items[i]);\n                        listHeight += itemHeight;\n                        vl.heights.push(itemHeight);\n                    }\n                }\n                else {\n                    listHeight = items.length * vl.params.height / vl.params.cols;\n                    rowsPerScreen = Math.ceil(pageHeight / vl.params.height);\n                    rowsBefore = vl.params.rowsBefore || rowsPerScreen * 2;\n                    rowsAfter = vl.params.rowsAfter || rowsPerScreen;\n                    rowsToRender = (rowsPerScreen + rowsBefore + rowsAfter);\n                    maxBufferHeight = rowsBefore / 2 * vl.params.height;\n                }\n        \n                if (updatableScroll) {\n                    vl.ul.css({height: listHeight + 'px'});\n                }\n            };\n        \n            // Render items\n            vl.render = function (force, forceScrollTop) {\n                if (force) vl.lastRepaintY = null;\n        \n                var scrollTop = -(vl.listBlock[0].getBoundingClientRect().top - vl.pageContent[0].getBoundingClientRect().top);\n                \n                if (typeof forceScrollTop !== 'undefined') scrollTop = forceScrollTop;\n        \n                if (vl.lastRepaintY === null || Math.abs(scrollTop - vl.lastRepaintY) > maxBufferHeight || (!updatableScroll && (vl.pageContent[0].scrollTop + pageHeight >= vl.pageContent[0].scrollHeight))) {\n                    vl.lastRepaintY = scrollTop;\n                }\n                else {\n                    return;\n                }\n        \n                var items = vl.filteredItems || vl.items, \n                    fromIndex, toIndex, heightBeforeFirstItem = 0, heightBeforeLastItem = 0;\n                if (dynamicHeight) {\n                    var itemTop = 0, j, itemHeight; \n                    maxBufferHeight = pageHeight;\n                    \n                    for (j = 0; j < vl.heights.length; j++) {\n                        itemHeight = vl.heights[j];\n                        if (typeof fromIndex === 'undefined') {\n                            if (itemTop + itemHeight >= scrollTop - pageHeight * 2 * vl.params.dynamicHeightBufferSize) fromIndex = j;\n                            else heightBeforeFirstItem += itemHeight;\n                        }\n                        \n                        if (typeof toIndex === 'undefined') {\n                            if (itemTop + itemHeight >= scrollTop + pageHeight * 2 * vl.params.dynamicHeightBufferSize || j === vl.heights.length - 1) toIndex = j + 1;\n                            heightBeforeLastItem += itemHeight;\n                        }\n                        itemTop += itemHeight;\n                    }\n                    toIndex = Math.min(toIndex, items.length);\n                }\n                else {\n                    fromIndex = (parseInt(scrollTop / vl.params.height) - rowsBefore) * vl.params.cols;\n                    if (fromIndex < 0) {\n                        fromIndex = 0;\n                    }\n                    toIndex = Math.min(fromIndex + rowsToRender * vl.params.cols, items.length);\n                }\n        \n                var topPosition;\n                vl.reachEnd = false;\n                for (var i = fromIndex; i < toIndex; i++) {\n                    var item, index;\n                    // Define real item index\n                    index = vl.items.indexOf(items[i]);\n        \n                    if (i === fromIndex) vl.currentFromIndex = index;\n                    if (i === toIndex - 1) vl.currentToIndex = index;\n                    if (index === vl.items.length - 1) vl.reachEnd = true;\n                    \n                    // Find items\n                    if (vl.domCache[index]) {\n                        item = vl.domCache[index];\n                    }\n                    else {\n                        if (vl.template) {\n                            vl.tempDomElement.innerHTML = vl.template(items[i], {index: index});\n                        }\n                        else if (vl.params.renderItem) {\n                            vl.tempDomElement.innerHTML = vl.params.renderItem(index, items[i]);   \n                        }\n                        else {\n                            vl.tempDomElement.innerHTML = items[i];\n                        }\n                        item = vl.tempDomElement.childNodes[0];\n                        if (vl.params.cache) vl.domCache[index] = item;\n                    }\n                    item.f7VirtualListIndex = index;\n        \n                    // Set item top position\n                    if (i === fromIndex) {\n                        if (dynamicHeight) {\n                            topPosition = heightBeforeFirstItem;\n                        }\n                        else {\n                            topPosition = (i * vl.params.height / vl.params.cols);\n                        }\n                    }\n                    item.style.top = topPosition + 'px';\n                    \n                    // Before item insert\n                    if (vl.params.onItemBeforeInsert) vl.params.onItemBeforeInsert(vl, item);\n        \n                    // Append item to fragment\n                    vl.fragment.appendChild(item);\n        \n                \n                }\n        \n                // Update list height with not updatable scroll\n                if (!updatableScroll) {\n                    if (dynamicHeight) {\n                        vl.ul[0].style.height = heightBeforeLastItem + 'px';\n                    }\n                    else {\n                        vl.ul[0].style.height = i * vl.params.height / vl.params.cols + 'px';\n                    }\n                }\n                    \n        \n                // Update list html\n                if (vl.params.onBeforeClear) vl.params.onBeforeClear(vl, vl.fragment);\n                vl.ul[0].innerHTML = '';\n        \n                if (vl.params.onItemsBeforeInsert) vl.params.onItemsBeforeInsert(vl, vl.fragment);\n                vl.ul[0].appendChild(vl.fragment);\n                if (vl.params.onItemsAfterInsert) vl.params.onItemsAfterInsert(vl, vl.fragment);\n        \n                if (typeof forceScrollTop !== 'undefined' && force) {\n                    vl.pageContent.scrollTop(forceScrollTop, 0);\n                }\n            };\n        \n            vl.scrollToItem = function (index) {\n                if (index > vl.items.length) return false;\n        \n                var itemTop = 0, listTop;\n                if (dynamicHeight) {\n                    for (var i = 0; i < index; i++) {\n                        itemTop += vl.heights[i];\n                    }\n                }\n                else {\n                    itemTop = index * vl.params.height;\n                }\n                listTop = vl.listBlock[0].offsetTop;\n                vl.render(true, listTop + itemTop - parseInt(vl.pageContent.css('padding-top'), 10));\n                return true;\n            };\n        \n            // Handle scroll event\n            vl.handleScroll = function (e) {\n                vl.render();\n            };\n            // Handle resize event\n            vl.handleResize = function (e) {\n                vl.setListSize();\n                vl.render(true);\n            };\n        \n            vl.attachEvents = function (detach) {\n                var action = detach ? 'off' : 'on';\n                vl.pageContent[action]('scroll', vl.handleScroll);\n                vl.listBlock.parents('.tab').eq(0)[action]('show', vl.handleResize);\n                $(window)[action]('resize', vl.handleResize);\n            };\n        \n            // Init Virtual List\n            vl.init = function () {\n                vl.attachEvents();\n                vl.setListSize();\n                vl.render();\n            };\n        \n            // Append\n            vl.appendItems = function (items) {\n                for (var i = 0; i < items.length; i++) {\n                    vl.items.push(items[i]);\n                }\n                vl.update();\n            };\n            vl.appendItem = function (item) {\n                vl.appendItems([item]);\n            };\n            // Replace\n            vl.replaceAllItems = function (items) {\n                vl.items = items;\n                delete vl.filteredItems;\n                vl.domCache = {};\n                vl.update();\n            };\n            vl.replaceItem = function (index, item) {\n                vl.items[index] = item;\n                if (vl.params.cache) delete vl.domCache[index];\n                vl.update();\n            };\n            // Prepend\n            vl.prependItems = function (items) {\n                for (var i = items.length - 1; i >= 0; i--) {\n                    vl.items.unshift(items[i]);\n                }\n                if (vl.params.cache) {\n                    var newCache = {};\n                    for (var cached in vl.domCache) {\n                        newCache[parseInt(cached, 10) + items.length] = vl.domCache[cached];\n                    }\n                    vl.domCache = newCache;\n                }\n                vl.update();\n            };\n            vl.prependItem = function (item) {\n                vl.prependItems([item]);\n            };\n        \n            // Move\n            vl.moveItem = function (oldIndex, newIndex) {\n                if (oldIndex === newIndex) return;\n                // remove item from array\n                var item = vl.items.splice(oldIndex, 1)[0];\n                if (newIndex >= vl.items.length) {\n                    // Add item to the end\n                    vl.items.push(item);\n                    newIndex = vl.items.length - 1;\n                }\n                else {\n                    // Add item to new index\n                    vl.items.splice(newIndex, 0, item);\n                }\n                // Update cache\n                if (vl.params.cache) {\n                    var newCache = {};\n                    for (var cached in vl.domCache) {\n                        var cachedIndex = parseInt(cached, 10);\n                        var leftIndex = oldIndex < newIndex ? oldIndex : newIndex;\n                        var rightIndex = oldIndex < newIndex ? newIndex : oldIndex;\n                        var indexShift = oldIndex < newIndex ? -1 : 1;\n                        if (cachedIndex < leftIndex || cachedIndex > rightIndex) newCache[cachedIndex] = vl.domCache[cachedIndex];\n                        if (cachedIndex === leftIndex) newCache[rightIndex] = vl.domCache[cachedIndex];\n                        if (cachedIndex > leftIndex && cachedIndex <= rightIndex) newCache[cachedIndex + indexShift] = vl.domCache[cachedIndex];\n                    }\n                    vl.domCache = newCache;\n                }\n                vl.update();\n            };\n            // Insert before\n            vl.insertItemBefore = function (index, item) {\n                if (index === 0) {\n                    vl.prependItem(item);\n                    return;\n                }\n                if (index >= vl.items.length) {\n                    vl.appendItem(item);\n                    return;\n                }\n                vl.items.splice(index, 0, item);\n                // Update cache\n                if (vl.params.cache) {\n                    var newCache = {};\n                    for (var cached in vl.domCache) {\n                        var cachedIndex = parseInt(cached, 10);\n                        if (cachedIndex >= index) {\n                            newCache[cachedIndex + 1] = vl.domCache[cachedIndex];\n                        }\n                    }\n                    vl.domCache = newCache;\n                }\n                vl.update();\n            };\n            // Delete\n            vl.deleteItems = function (indexes) {\n                var prevIndex, indexShift = 0;\n                for (var i = 0; i < indexes.length; i++) {\n                    var index = indexes[i];\n                    if (typeof prevIndex !== 'undefined') {\n                        if (index > prevIndex) {\n                            indexShift = -i;\n                        }\n                    }\n                    index = index + indexShift;\n                    prevIndex = indexes[i];\n                    // Delete item\n                    var deletedItem = vl.items.splice(index, 1)[0];\n                    \n                    // Delete from filtered\n                    if (vl.filteredItems && vl.filteredItems.indexOf(deletedItem) >= 0) {\n                        vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem), 1);\n                    }\n                    // Update cache\n                    if (vl.params.cache) {\n                        var newCache = {};\n                        for (var cached in vl.domCache) {\n                            var cachedIndex = parseInt(cached, 10);\n                            if (cachedIndex === index) {\n                                delete vl.domCache[index];\n                            }\n                            else if (parseInt(cached, 10) > index) {\n                                newCache[cachedIndex - 1] = vl.domCache[cached];\n                            }\n                            else {\n                                newCache[cachedIndex] = vl.domCache[cached];   \n                            }\n                        }\n                        vl.domCache = newCache;\n                    }\n                }\n                vl.update();\n            };\n            vl.deleteAllItems = function () {\n                vl.items = [];\n                delete vl.filteredItems;\n                if (vl.params.cache) vl.domCache = {};\n                vl.update();\n            };\n            vl.deleteItem = function (index) {\n                vl.deleteItems([index]);\n            };\n        \n            // Clear cache\n            vl.clearCache = function () {\n                vl.domCache = {};\n            };\n        \n            // Update Virtual List\n            vl.update = function () {\n                vl.setListSize();\n                vl.render(true);\n            };\n        \n            // Destroy\n            vl.destroy = function () {\n                vl.attachEvents(true);\n                delete vl.items;\n                delete vl.domCache;\n            };\n        \n            // Init Virtual List\n            vl.init();\n        \n            // Store vl in container\n            vl.listBlock[0].f7VirtualList = vl;\n            return vl;\n        };\n        \n        // App Method\n        app.virtualList = function (listBlock, params) {\n            return new VirtualList(listBlock, params);\n        };\n        \n        app.reinitVirtualList = function (pageContainer) {\n            var page = $(pageContainer);\n            var vlists = page.find('.virtual-list');\n            if (vlists.length === 0) return;\n            for (var i = 0; i < vlists.length; i++) {\n                var vlistInstance = vlists[i].f7VirtualList;\n                if (vlistInstance) {\n                    vlistInstance.update();\n                }\n            }\n        };\n\n        /*======================================================\n        ************   Pull To Refresh   ************\n        ======================================================*/\n        app.initPullToRefresh = function (pageContainer) {\n            var eventsTarget = $(pageContainer);\n            if (!eventsTarget.hasClass('pull-to-refresh-content')) {\n                eventsTarget = eventsTarget.find('.pull-to-refresh-content');\n            }\n            if (!eventsTarget || eventsTarget.length === 0) return;\n        \n            var touchId, isTouched, isMoved, touchesStart = {}, isScrolling, touchesDiff, touchStartTime, container, refresh = false, useTranslate = false, startTranslate = 0, translate, scrollTop, wasScrolled, layer, triggerDistance, dynamicTriggerDistance, pullStarted;\n            var page = eventsTarget.hasClass('page') ? eventsTarget : eventsTarget.parents('.page');\n            var hasNavbar = false;\n            if (page.find('.navbar').length > 0 || page.parents('.navbar-fixed, .navbar-through').length > 0 || page.hasClass('navbar-fixed') || page.hasClass('navbar-through')) hasNavbar = true;\n            if (page.hasClass('no-navbar')) hasNavbar = false;\n            if (!hasNavbar) eventsTarget.addClass('pull-to-refresh-no-navbar');\n        \n            container = eventsTarget;\n        \n            // Define trigger distance\n            if (container.attr('data-ptr-distance')) {\n                dynamicTriggerDistance = true;\n            }\n            else {\n                triggerDistance = 44;   \n            }\n            \n            function handleTouchStart(e) {\n                if (isTouched) {\n                    if (app.device.os === 'android') {\n                        if ('targetTouches' in e && e.targetTouches.length > 1) return;\n                    }\n                    else return;\n                }\n                \n                /*jshint validthis:true */\n                container = $(this);\n                if (container.hasClass('refreshing')) {\n                    return;\n                }\n                \n                isMoved = false;\n                pullStarted = false;\n                isTouched = true;\n                isScrolling = undefined;\n                wasScrolled = undefined;\n                if (e.type === 'touchstart') touchId = e.targetTouches[0].identifier;\n                touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                touchStartTime = (new Date()).getTime();\n                \n            }\n            \n            function handleTouchMove(e) {\n                if (!isTouched) return;\n                var pageX, pageY, touch;\n                if (e.type === 'touchmove') {\n                    if (touchId && e.touches) {\n                        for (var i = 0; i < e.touches.length; i++) {\n                            if (e.touches[i].identifier === touchId) {\n                                touch = e.touches[i];\n                            }\n                        }\n                    }\n                    if (!touch) touch = e.targetTouches[0];\n                    pageX = touch.pageX;\n                    pageY = touch.pageY;\n                }\n                else {\n                    pageX = e.pageX;\n                    pageY = e.pageY;\n                }\n                if (!pageX || !pageY) return;\n                    \n        \n                if (typeof isScrolling === 'undefined') {\n                    isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n                }\n                if (!isScrolling) {\n                    isTouched = false;\n                    return;\n                }\n        \n                scrollTop = container[0].scrollTop;\n                if (typeof wasScrolled === 'undefined' && scrollTop !== 0) wasScrolled = true; \n        \n                if (!isMoved) {\n                    /*jshint validthis:true */\n                    container.removeClass('transitioning');\n                    if (scrollTop > container[0].offsetHeight) {\n                        isTouched = false;\n                        return;\n                    }\n                    if (dynamicTriggerDistance) {\n                        triggerDistance = container.attr('data-ptr-distance');\n                        if (triggerDistance.indexOf('%') >= 0) triggerDistance = container[0].offsetHeight * parseInt(triggerDistance, 10) / 100;\n                    }\n                    startTranslate = container.hasClass('refreshing') ? triggerDistance : 0;\n                    if (container[0].scrollHeight === container[0].offsetHeight || app.device.os !== 'ios') {\n                        useTranslate = true;\n                    }\n                    else {\n                        useTranslate = false;\n                    }\n                }\n                isMoved = true;\n                touchesDiff = pageY - touchesStart.y;\n                \n                if (touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0) {\n                    // iOS 8 fix\n                    if (app.device.os === 'ios' && parseInt(app.device.osVersion.split('.')[0], 10) > 7 && scrollTop === 0 && !wasScrolled) useTranslate = true;\n        \n                    if (useTranslate) {\n                        e.preventDefault();\n                        translate = (Math.pow(touchesDiff, 0.85) + startTranslate);\n                        container.transform('translate3d(0,' + translate + 'px,0)');\n                    }\n                    if ((useTranslate && Math.pow(touchesDiff, 0.85) > triggerDistance) || (!useTranslate && touchesDiff >= triggerDistance * 2)) {\n                        refresh = true;\n                        container.addClass('pull-up').removeClass('pull-down');\n                    }\n                    else {\n                        refresh = false;\n                        container.removeClass('pull-up').addClass('pull-down');\n                    }\n                    if (!pullStarted) {\n                        container.trigger('pullstart');\n                        pullStarted = true;\n                    }\n                    container.trigger('pullmove', {\n                        event: e,\n                        scrollTop: scrollTop,\n                        translate: translate,\n                        touchesDiff: touchesDiff\n                    });\n                }\n                else {\n                    pullStarted = false;\n                    container.removeClass('pull-up pull-down');\n                    refresh = false;\n                    return;\n                }\n            }\n            function handleTouchEnd(e) {\n                if (e.type === 'touchend' && e.changedTouches && e.changedTouches.length > 0 && touchId) {\n                    if (e.changedTouches[0].identifier !== touchId) return;\n                }\n                if (!isTouched || !isMoved) {\n                    isTouched = false;\n                    isMoved = false;\n                    return;\n                }\n                if (translate) {\n                    container.addClass('transitioning');\n                    translate = 0;\n                }\n                container.transform('');\n                if (refresh) {\n                    container.addClass('refreshing');\n                    container.trigger('refresh', {\n                        done: function () {\n                            app.pullToRefreshDone(container);\n                        }\n                    });\n                }\n                else {\n                    container.removeClass('pull-down');\n                }\n                isTouched = false;\n                isMoved = false;\n                if (pullStarted) container.trigger('pullend');\n            }\n        \n            // Attach Events\n            eventsTarget.on(app.touchEvents.start, handleTouchStart);\n            eventsTarget.on(app.touchEvents.move, handleTouchMove);\n            eventsTarget.on(app.touchEvents.end, handleTouchEnd);\n        \n            // Detach Events on page remove\n            if (page.length === 0) return;\n            function destroyPullToRefresh() {\n                eventsTarget.off(app.touchEvents.start, handleTouchStart);\n                eventsTarget.off(app.touchEvents.move, handleTouchMove);\n                eventsTarget.off(app.touchEvents.end, handleTouchEnd);\n            }\n            eventsTarget[0].f7DestroyPullToRefresh = destroyPullToRefresh;\n            function detachEvents() {\n                destroyPullToRefresh();\n                page.off('pageBeforeRemove', detachEvents);\n            }\n            page.on('pageBeforeRemove', detachEvents);\n        \n        };\n        \n        app.pullToRefreshDone = function (container) {\n            container = $(container);\n            if (container.length === 0) container = $('.pull-to-refresh-content.refreshing');\n            container.removeClass('refreshing').addClass('transitioning');\n            container.transitionEnd(function () {\n                container.removeClass('transitioning pull-up pull-down');\n                container.trigger('refreshdone');\n            });\n        };\n        app.pullToRefreshTrigger = function (container) {\n            container = $(container);\n            if (container.length === 0) container = $('.pull-to-refresh-content');\n            if (container.hasClass('refreshing')) return;\n            container.addClass('transitioning refreshing');\n            container.trigger('refresh', {\n                done: function () {\n                    app.pullToRefreshDone(container);\n                }\n            });\n        };\n        \n        app.destroyPullToRefresh = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var pullToRefreshContent = pageContainer.hasClass('pull-to-refresh-content') ? pageContainer : pageContainer.find('.pull-to-refresh-content');\n            if (pullToRefreshContent.length === 0) return;\n            if (pullToRefreshContent[0].f7DestroyPullToRefresh) pullToRefreshContent[0].f7DestroyPullToRefresh();\n        };\n        \n\n        /* ===============================================================================\n        ************   Infinite Scroll   ************\n        =============================================================================== */\n        function handleInfiniteScroll() {\n            /*jshint validthis:true */\n            var inf = $(this);\n            var scrollTop = inf[0].scrollTop;\n            var scrollHeight = inf[0].scrollHeight;\n            var height = inf[0].offsetHeight;\n            var distance = inf[0].getAttribute('data-distance');\n            var virtualListContainer = inf.find('.virtual-list');\n            var virtualList;\n            var onTop = inf.hasClass('infinite-scroll-top');\n            if (!distance) distance = 50;\n            if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n                distance = parseInt(distance, 10) / 100 * height;\n            }\n            if (distance > height) distance = height;\n            if (onTop) {\n                if (scrollTop < distance) {\n                    inf.trigger('infinite');\n                }\n            }\n            else {\n                if (scrollTop + height >= scrollHeight - distance) {\n                    if (virtualListContainer.length > 0) {\n                        virtualList = virtualListContainer[0].f7VirtualList;\n                        if (virtualList && !virtualList.reachEnd) return;\n                    }\n                    inf.trigger('infinite');\n                }\n            }\n                \n        }\n        app.attachInfiniteScroll = function (infiniteContent) {\n            $(infiniteContent).on('scroll', handleInfiniteScroll);\n        };\n        app.detachInfiniteScroll = function (infiniteContent) {\n            $(infiniteContent).off('scroll', handleInfiniteScroll);\n        };\n        \n        app.initInfiniteScroll = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var infiniteContent = pageContainer.find('.infinite-scroll');\n            if (infiniteContent.length === 0) return;\n            app.attachInfiniteScroll(infiniteContent);\n            function detachEvents() {\n                app.detachInfiniteScroll(infiniteContent);\n                pageContainer.off('pageBeforeRemove', detachEvents);\n            }\n            pageContainer.on('pageBeforeRemove', detachEvents);\n        };\n\n        /*=============================================================\n        ************   Hide/show Toolbar/Navbar on scroll   ************\n        =============================================================*/\n        app.initScrollToolbars = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var scrollContent = pageContainer.find('.page-content');\n            if (scrollContent.length === 0) return;\n            var hideNavbar = (app.params.hideNavbarOnPageScroll || scrollContent.hasClass('hide-navbar-on-scroll') || scrollContent.hasClass('hide-bars-on-scroll')) && !(scrollContent.hasClass('keep-navbar-on-scroll') || scrollContent.hasClass('keep-bars-on-scroll'));\n            var hideToolbar = (app.params.hideToolbarOnPageScroll || scrollContent.hasClass('hide-toolbar-on-scroll') || scrollContent.hasClass('hide-bars-on-scroll')) && !(scrollContent.hasClass('keep-toolbar-on-scroll') || scrollContent.hasClass('keep-bars-on-scroll'));\n            var hideTabbar = (app.params.hideTabbarOnPageScroll || scrollContent.hasClass('hide-tabbar-on-scroll')) && !(scrollContent.hasClass('keep-tabbar-on-scroll'));\n        \n            if (!(hideNavbar || hideToolbar || hideTabbar)) return;\n            \n            var viewContainer = scrollContent.parents('.' + app.params.viewClass);\n            if (viewContainer.length === 0) return;\n        \n            var navbar = viewContainer.find('.navbar'), \n                toolbar = viewContainer.find('.toolbar'), \n                tabbar;\n            if (hideTabbar) {\n                tabbar = viewContainer.find('.tabbar');\n                if (tabbar.length === 0) tabbar = viewContainer.parents('.' + app.params.viewsClass).find('.tabbar');\n            }\n        \n            var hasNavbar = navbar.length > 0,\n                hasToolbar = toolbar.length > 0,\n                hasTabbar = tabbar && tabbar.length > 0;\n        \n            var previousScroll, currentScroll;\n                previousScroll = currentScroll = scrollContent[0].scrollTop;\n        \n            var scrollHeight, offsetHeight, reachEnd, action, navbarHidden, toolbarHidden, tabbarHidden;\n        \n            var toolbarHeight = (hasToolbar && hideToolbar) ? toolbar[0].offsetHeight : 0;\n            var tabbarHeight = (hasTabbar && hideTabbar) ? tabbar[0].offsetHeight : 0;\n            var bottomBarHeight = tabbarHeight || toolbarHeight;\n        \n            function handleScroll(e) {\n                if (pageContainer.hasClass('page-on-left')) return;\n                currentScroll = scrollContent[0].scrollTop;\n                scrollHeight = scrollContent[0].scrollHeight;\n                offsetHeight = scrollContent[0].offsetHeight;\n                reachEnd = app.params.showBarsOnPageScrollEnd && (currentScroll + offsetHeight >= scrollHeight - bottomBarHeight);\n                navbarHidden = navbar.hasClass('navbar-hidden');\n                toolbarHidden = toolbar.hasClass('toolbar-hidden');\n                tabbarHidden = tabbar && tabbar.hasClass('toolbar-hidden');\n        \n                if (reachEnd) {\n                    action = 'show';\n                }\n                else if (previousScroll > currentScroll) {\n                    if (app.params.showBarsOnPageScrollTop || currentScroll <= 44) {\n                        action = 'show';\n                    }\n                    else {\n                        action = 'hide';\n                    }\n                }\n                else {\n                    if (currentScroll > 44) {\n                        action = 'hide';\n                    }\n                    else {\n                        action = 'show';\n                    }\n                }\n        \n                if (action === 'show') {\n                    if (hasNavbar && hideNavbar && navbarHidden) {\n                        app.showNavbar(navbar);\n                        pageContainer.removeClass('no-navbar-by-scroll'); \n                        navbarHidden = false;\n                    }\n                    if (hasToolbar && hideToolbar && toolbarHidden) {\n                        app.showToolbar(toolbar);\n                        pageContainer.removeClass('no-toolbar-by-scroll'); \n                        toolbarHidden = false;\n                    }\n                    if (hasTabbar && hideTabbar && tabbarHidden) {\n                        app.showToolbar(tabbar);\n                        pageContainer.removeClass('no-tabbar-by-scroll'); \n                        tabbarHidden = false;\n                    }\n                }\n                else {\n                    if (hasNavbar && hideNavbar && !navbarHidden) {\n                        app.hideNavbar(navbar);\n                        pageContainer.addClass('no-navbar-by-scroll'); \n                        navbarHidden = true;\n                    }\n                    if (hasToolbar && hideToolbar && !toolbarHidden) {\n                        app.hideToolbar(toolbar);\n                        pageContainer.addClass('no-toolbar-by-scroll'); \n                        toolbarHidden = true;\n                    }\n                    if (hasTabbar && hideTabbar && !tabbarHidden) {\n                        app.hideToolbar(tabbar);\n                        pageContainer.addClass('no-tabbar-by-scroll'); \n                        tabbarHidden = true;\n                    }\n                }\n                    \n                previousScroll = currentScroll;\n            }\n            scrollContent.on('scroll', handleScroll);\n            scrollContent[0].f7ScrollToolbarsHandler = handleScroll;\n        };\n        app.destroyScrollToolbars = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var scrollContent = pageContainer.find('.page-content');\n            if (scrollContent.length === 0) return;\n            var handler = scrollContent[0].f7ScrollToolbarsHandler;\n            if (!handler) return;\n            scrollContent.off('scroll', scrollContent[0].f7ScrollToolbarsHandler);\n        };\n\n        /*======================================================\n        ************   Material Preloader   ************\n        ======================================================*/\n        app.initPageMaterialTabbar = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var tabbar = $(pageContainer).find('.tabbar');\n        \n            if (tabbar.length > 0 && tabbar.find('.tab-link-highlight').length === 0) {\n                tabbar.find('.toolbar-inner').append('<span class=\"tab-link-highlight\"></span>');\n                var tabLinkWidth = 1 / tabbar.find('.tab-link').length * 100;\n                var highlightTranslate = (app.rtl ? - tabbar.find('.tab-link.active').index(): tabbar.find('.tab-link.active').index()) * 100;\n                tabbar.find('.tab-link-highlight')\n                    .css({width: tabLinkWidth + '%'})\n                    .transform('translate3d(' + highlightTranslate + '%,0,0)');\n            }\n        };\n\n        /* ===============================================================================\n        ************   Tabs   ************\n        =============================================================================== */\n        app.showTab = function (tab, tabLink, force) {\n            var newTab = $(tab);\n            if (arguments.length === 2) {\n                if (typeof tabLink === 'boolean') {\n                    force = tabLink;\n                }\n            }\n            if (newTab.length === 0) return false;\n            if (newTab.hasClass('active')) {\n                if (force) newTab.trigger('show');\n                return false;\n            }\n            var tabs = newTab.parent('.tabs');\n            if (tabs.length === 0) return false;\n        \n            // Return swipeouts in hidden tabs\n            app.allowSwipeout = true;\n        \n            // Animated tabs\n            var isAnimatedTabs = tabs.parent().hasClass('tabs-animated-wrap');\n            if (isAnimatedTabs) {\n                var tabTranslate = (app.rtl ? newTab.index() : -newTab.index()) * 100;\n                tabs.transform('translate3d(' + tabTranslate + '%,0,0)');\n            }\n        \n            // Remove active class from old tabs\n            var oldTab = tabs.children('.tab.active').removeClass('active');\n            // Add active class to new tab\n            newTab.addClass('active');\n            // Trigger 'show' event on new tab\n            newTab.trigger('show');\n        \n            // Update navbars in new tab\n            if (!isAnimatedTabs && newTab.find('.navbar').length > 0) {\n                // Find tab's view\n                var viewContainer;\n                if (newTab.hasClass(app.params.viewClass)) viewContainer = newTab[0];\n                else viewContainer = newTab.parents('.' + app.params.viewClass)[0];\n                app.sizeNavbars(viewContainer);\n            }\n        \n            // Find related link for new tab\n            if (tabLink) tabLink = $(tabLink);\n            else {\n                // Search by id\n                if (typeof tab === 'string') tabLink = $('.tab-link[href=\"' + tab + '\"]');\n                else tabLink = $('.tab-link[href=\"#' + newTab.attr('id') + '\"]');\n                // Search by data-tab\n                if (!tabLink || tabLink && tabLink.length === 0) {\n                    $('[data-tab]').each(function () {\n                        if (newTab.is($(this).attr('data-tab'))) tabLink = $(this);\n                    });\n                }\n            }\n            if (tabLink.length === 0) return;\n        \n            // Find related link for old tab\n            var oldTabLink;\n            if (oldTab && oldTab.length > 0) {\n                // Search by id\n                var oldTabId = oldTab.attr('id');\n                if (oldTabId) oldTabLink = $('.tab-link[href=\"#' + oldTabId + '\"]');\n                // Search by data-tab\n                if (!oldTabLink || oldTabLink && oldTabLink.length === 0) {\n                    $('[data-tab]').each(function () {\n                        if (oldTab.is($(this).attr('data-tab'))) oldTabLink = $(this);\n                    });\n                }\n            }\n            \n            // Update links' classes\n            if (tabLink && tabLink.length > 0) {\n                tabLink.addClass('active');\n                // Material Highlight\n                if (app.params.material) {\n                    var tabbar = tabLink.parents('.tabbar');\n                    if (tabbar.length > 0) {\n                        if (tabbar.find('.tab-link-highlight').length === 0) {\n                            tabbar.find('.toolbar-inner').append('<span class=\"tab-link-highlight\"></span>');\n                            var clientLeft = tabbar[0].clientLeft;\n                        }\n                        var tabLinkWidth = 1 / tabbar.find('.tab-link').length * 100;\n                        var highlightTranslate = (app.rtl ? - tabLink.index() : tabLink.index()) * 100;\n                        tabbar.find('.tab-link-highlight')\n                            .css({width: tabLinkWidth + '%'})\n                            .transform('translate3d(' + highlightTranslate + '%,0,0)');\n                    }\n                }\n            }\n            if (oldTabLink && oldTabLink.length > 0) oldTabLink.removeClass('active');\n            \n            return true;\n        };\n\n        /*===============================================================================\n        ************   Accordion   ************\n        ===============================================================================*/\n        app.accordionToggle = function (item) {\n            item = $(item);\n            if (item.length === 0) return;\n            if (item.hasClass('accordion-item-expanded')) app.accordionClose(item);\n            else app.accordionOpen(item);\n        };\n        app.accordionOpen = function (item) {\n            item = $(item);\n            var list = item.parents('.accordion-list').eq(0);\n            var content = item.children('.accordion-item-content');\n            if (content.length === 0) content = item.find('.accordion-item-content');\n            var expandedItem = list.length > 0 && item.parent().children('.accordion-item-expanded');\n            if (expandedItem.length > 0) {\n                app.accordionClose(expandedItem);\n            }\n            content.css('height', content[0].scrollHeight + 'px').transitionEnd(function () {\n                if (item.hasClass('accordion-item-expanded')) {\n                    content.transition(0);\n                    content.css('height', 'auto');\n                    var clientLeft = content[0].clientLeft;\n                    content.transition('');\n                    item.trigger('opened');\n                }\n                else {\n                    content.css('height', '');\n                    item.trigger('closed');\n                }\n            });\n            item.trigger('open');\n            item.addClass('accordion-item-expanded');\n        };\n        app.accordionClose = function (item) {\n            item = $(item);\n            var content = item.children('.accordion-item-content');\n            if (content.length === 0) content = item.find('.accordion-item-content');\n            item.removeClass('accordion-item-expanded');\n            content.transition(0);\n            content.css('height', content[0].scrollHeight + 'px');\n            // Relayout\n            var clientLeft = content[0].clientLeft;\n            // Close\n            content.transition('');\n            content.css('height', '').transitionEnd(function () {\n                if (item.hasClass('accordion-item-expanded')) {\n                    content.transition(0);\n                    content.css('height', 'auto');\n                    var clientLeft = content[0].clientLeft;\n                    content.transition('');\n                    item.trigger('opened');\n                }\n                else {\n                    content.css('height', '');\n                    item.trigger('closed');\n                }\n            });\n            item.trigger('close');\n        };\n\n        /*===============================================================================\n        ************   Fast Clicks   ************\n        ************   Inspired by https://github.com/ftlabs/fastclick   ************\n        ===============================================================================*/\n        app.initFastClicks = function () {\n            if (app.params.activeState) {\n                $('html').addClass('watch-active-state');\n            }\n            if (app.device.ios && app.device.webView) {\n                // Strange hack required for iOS 8 webview to work on inputs\n                window.addEventListener('touchstart', function () {});\n            }\n        \n            var touchStartX, touchStartY, touchStartTime, targetElement, trackClick, activeSelection, scrollParent, lastClickTime, isMoved, tapHoldFired, tapHoldTimeout;\n            var activableElement, activeTimeout, needsFastClick, needsFastClickTimeOut;\n            var rippleWave, rippleTarget, rippleTransform, rippleTimeout;\n            function findActivableElement(el) {\n                var target = $(el);\n                var parents = target.parents(app.params.activeStateElements);\n                var activable;\n                if (target.is(app.params.activeStateElements)) {\n                    activable = target;\n                }\n                if (parents.length > 0) {\n                    activable = activable ? activable.add(parents) : parents;\n                }\n                return activable ? activable : target;\n            }\n            function isInsideScrollableView(el) {\n                var pageContent = el.parents('.page-content, .panel');\n                \n                if (pageContent.length === 0) {\n                    return false;\n                }\n                \n                // This event handler covers the \"tap to stop scrolling\".\n                if (pageContent.prop('scrollHandlerSet') !== 'yes') {\n                    pageContent.on('scroll', function() {\n                      clearTimeout(activeTimeout);\n                      clearTimeout(rippleTimeout);\n                    });\n                    pageContent.prop('scrollHandlerSet', 'yes');\n                }\n                \n                return true;\n            }\n            function addActive() {\n                if (!activableElement) return;\n                activableElement.addClass('active-state');\n            }\n            function removeActive(el) {\n                if (!activableElement) return;\n                activableElement.removeClass('active-state');\n                activableElement = null;\n            }\n            function isFormElement(el) {\n                var nodes = ('input select textarea label').split(' ');\n                if (el.nodeName && nodes.indexOf(el.nodeName.toLowerCase()) >= 0) return true;\n                return false;\n            }\n            function androidNeedsBlur(el) {\n                var noBlur = ('button input textarea select').split(' ');\n                if (document.activeElement && el !== document.activeElement && document.activeElement !== document.body) {\n                    if (noBlur.indexOf(el.nodeName.toLowerCase()) >= 0) {\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                }\n                else {\n                    return false;\n                }\n            }\n            function targetNeedsFastClick(el) {\n                var $el = $(el);\n                if (el.nodeName.toLowerCase() === 'input' && el.type === 'file') return false;\n                if ($el.hasClass('no-fastclick') || $el.parents('.no-fastclick').length > 0) return false;\n                return true;\n            }\n            function targetNeedsFocus(el) {\n                if (document.activeElement === el) {\n                    return false;\n                }\n                var tag = el.nodeName.toLowerCase();\n                var skipInputs = ('button checkbox file image radio submit').split(' ');\n                if (el.disabled || el.readOnly) return false;\n                if (tag === 'textarea') return true;\n                if (tag === 'select') {\n                    if (app.device.android) return false;\n                    else return true;\n                }\n                if (tag === 'input' && skipInputs.indexOf(el.type) < 0) return true;\n            }\n            function targetNeedsPrevent(el) {\n                el = $(el);\n                var prevent = true;\n                if (el.is('label') || el.parents('label').length > 0) {\n                    if (app.device.android) {\n                        prevent = false;\n                    }\n                    else if (app.device.ios && el.is('input')) {\n                        prevent = true;\n                    }\n                    else prevent = false;\n                }\n                return prevent;\n            }\n        \n            // Mouse Handlers\n            function handleMouseDown (e) {\n                findActivableElement(e.target).addClass('active-state');\n                if ('which' in e && e.which === 3) {\n                    setTimeout(function () {\n                        $('.active-state').removeClass('active-state');\n                    }, 0);\n                }\n                if (app.params.material && app.params.materialRipple) {\n                    touchStartX = e.pageX;\n                    touchStartY = e.pageY;\n                    rippleTouchStart(e.target, e.pageX, e.pageY);\n                }\n            }\n            function handleMouseMove (e) {\n                $('.active-state').removeClass('active-state');\n                if (app.params.material && app.params.materialRipple) {\n                    rippleTouchMove();\n                }\n            }\n            function handleMouseUp (e) {\n                $('.active-state').removeClass('active-state');\n                if (app.params.material && app.params.materialRipple) {\n                    rippleTouchEnd();\n                }\n            }\n        \n            // Material Touch Ripple Effect\n            function findRippleElement(el) {\n                var needsRipple = app.params.materialRippleElements;\n                var $el = $(el);\n                if ($el.is(needsRipple)) {\n                    if ($el.hasClass('no-ripple')) {\n                        return false;\n                    }\n                    return $el;\n                }\n                else if ($el.parents(needsRipple).length > 0) {\n                    var rippleParent = $el.parents(needsRipple).eq(0);\n                    if (rippleParent.hasClass('no-ripple')) {\n                        return false;\n                    }\n                    return rippleParent;\n                }\n                else return false;\n            }\n            function createRipple(x, y, el) {\n                var box = el[0].getBoundingClientRect();\n                var center = {\n                    x: x - box.left,\n                    y: y - box.top\n                },\n                    height = box.height,\n                    width = box.width;\n                var diameter = Math.max(Math.pow((Math.pow(height, 2) + Math.pow(width, 2)), 0.5), 48);\n        \n                rippleWave = $(\n                    '<div class=\"ripple-wave\" style=\"width: ' + diameter + 'px; height: '+diameter+'px; margin-top:-'+diameter/2+'px; margin-left:-'+diameter/2+'px; left:'+center.x+'px; top:'+center.y+'px;\"></div>'\n                );\n                el.prepend(rippleWave);\n                var clientLeft = rippleWave[0].clientLeft;\n                rippleTransform = 'translate3d('+(-center.x + width/2)+'px, '+(-center.y + height/2)+'px, 0) scale(1)';\n                rippleWave.transform(rippleTransform);\n            }\n        \n            function removeRipple() {\n                if (!rippleWave) return;\n                rippleWave\n                    .addClass('ripple-wave-fill')\n                    .transform(rippleTransform.replace('scale(1)', 'scale(1.01)'))\n                    .transitionEnd(function () {\n                        var rippleWave = $(this)\n                            .addClass('ripple-wave-out')\n                            .transform(rippleTransform.replace('scale(1)', 'scale(1.01)'));\n                        setTimeout(function () {\n                            rippleWave.transitionEnd(function(){\n                                $(this).remove();\n                            });\n                        }, 0);\n                    });\n                rippleWave = rippleTarget = undefined;\n            }\n            function rippleTouchStart (el, x, y) {\n                rippleTarget = findRippleElement(el);\n                if (!rippleTarget || rippleTarget.length === 0) {\n                    rippleTarget = undefined;\n                    return;\n                }\n                if (!isInsideScrollableView(rippleTarget)) {\n                    createRipple(touchStartX, touchStartY, rippleTarget);\n                }\n                else {\n                    rippleTimeout = setTimeout(function () {\n                        createRipple(touchStartX, touchStartY, rippleTarget);\n                    }, 80);\n                }\n            }\n            function rippleTouchMove() {\n                clearTimeout(rippleTimeout);\n                removeRipple();\n            }\n            function rippleTouchEnd() {\n                if (rippleWave) {\n                    removeRipple();\n                }\n                else if (rippleTarget && !isMoved) {\n                    clearTimeout(rippleTimeout);\n                    createRipple(touchStartX, touchStartY, rippleTarget);\n                    setTimeout(removeRipple, 0);\n                }\n                else {\n                    removeRipple();   \n                }\n            }\n        \n            // Send Click\n            function sendClick(e) {\n                var touch = e.changedTouches[0];\n                var evt = document.createEvent('MouseEvents');\n                var eventType = 'click';\n                if (app.device.android && targetElement.nodeName.toLowerCase() === 'select') {\n                    eventType = 'mousedown';\n                }\n                evt.initMouseEvent(eventType, true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n                evt.forwardedTouchEvent = true;\n                targetElement.dispatchEvent(evt);\n            }\n        \n            // Touch Handlers\n            function handleTouchStart(e) {\n                isMoved = false;\n                tapHoldFired = false;\n                if (e.targetTouches.length > 1) {\n                    if (activableElement) removeActive();\n                    return true;\n                }\n                if (e.touches.length > 1 && activableElement) {\n                    removeActive();\n                }\n                if (app.params.tapHold) {\n                    if (tapHoldTimeout) clearTimeout(tapHoldTimeout);\n                    tapHoldTimeout = setTimeout(function () {\n                        tapHoldFired = true;\n                        e.preventDefault();\n                        $(e.target).trigger('taphold');\n                    }, app.params.tapHoldDelay);\n                }\n                if (needsFastClickTimeOut) clearTimeout(needsFastClickTimeOut);\n                needsFastClick = targetNeedsFastClick(e.target);\n        \n                if (!needsFastClick) {\n                    trackClick = false;\n                    return true;\n                }\n                if (app.device.ios) {\n                    var selection = window.getSelection();\n                    if (selection.rangeCount && selection.focusNode !== document.body && (!selection.isCollapsed || document.activeElement === selection.focusNode)) {\n                        activeSelection = true;\n                        return true;\n                    }\n                    else {\n                        activeSelection = false;\n                    }\n                }\n                if (app.device.android)  {\n                    if (androidNeedsBlur(e.target)) {\n                        document.activeElement.blur();\n                    }\n                }\n        \n                trackClick = true;\n                targetElement = e.target;\n                touchStartTime = (new Date()).getTime();\n                touchStartX = e.targetTouches[0].pageX;\n                touchStartY = e.targetTouches[0].pageY;\n        \n                // Detect scroll parent\n                if (app.device.ios) {\n                    scrollParent = undefined;\n                    $(targetElement).parents().each(function () {\n                        var parent = this;\n                        if (parent.scrollHeight > parent.offsetHeight && !scrollParent) {\n                            scrollParent = parent;\n                            scrollParent.f7ScrollTop = scrollParent.scrollTop;\n                        }\n                    });\n                }\n                if ((e.timeStamp - lastClickTime) < app.params.fastClicksDelayBetweenClicks) {\n                    e.preventDefault();\n                }\n                \n                if (app.params.activeState) {\n                    activableElement = findActivableElement(targetElement);\n                    // If it's inside a scrollable view, we don't trigger active-state yet,\n                    // because it can be a scroll instead. Based on the link:\n                    // http://labnote.beedesk.com/click-scroll-and-pseudo-active-on-mobile-webk\n                    if (!isInsideScrollableView(activableElement)) {\n                        addActive();\n                    } else {\n                        activeTimeout = setTimeout(addActive, 80);\n                    }\n                }\n                if (app.params.material && app.params.materialRipple) {\n                    rippleTouchStart(targetElement, touchStartX, touchStartY);\n                }\n            }\n            function handleTouchMove(e) {\n                if (!trackClick) return;\n                var _isMoved = false;\n                var distance = app.params.fastClicksDistanceThreshold;\n                if (distance) {\n                    var pageX = e.targetTouches[0].pageX;\n                    var pageY = e.targetTouches[0].pageY;\n                    if (Math.abs(pageX - touchStartX) > distance ||  Math.abs(pageY - touchStartY) > distance) {\n                        _isMoved = true;\n                    }\n                }\n                else {\n                    _isMoved = true;\n                }\n                if (_isMoved) {\n                    trackClick = false;\n                    targetElement = null;\n                    isMoved = true;\n                    if (app.params.tapHold) {\n                        clearTimeout(tapHoldTimeout);\n                    }\n        \t\t\tif (app.params.activeState) {\n        \t\t\t\tclearTimeout(activeTimeout);\n        \t\t\t\tremoveActive();\n        \t\t\t}\n                    if (app.params.material && app.params.materialRipple) {\n                        rippleTouchMove();\n                    }\n                }\n            }\n            function handleTouchEnd(e) {\n                clearTimeout(activeTimeout);\n                clearTimeout(tapHoldTimeout);\n        \n                if (!trackClick) {\n                    if (!activeSelection && needsFastClick) {\n                        if (!(app.device.android && !e.cancelable)) {\n                            e.preventDefault();\n                        }\n                    }\n                    return true;\n                }\n        \n                if (document.activeElement === e.target) {\n                    if (app.params.activeState) removeActive();\n                    if (app.params.material && app.params.materialRipple) {\n                        rippleTouchEnd();\n                    }\n                    return true;\n                }\n        \n                if (!activeSelection) {\n                    e.preventDefault();\n                }\n        \n                if ((e.timeStamp - lastClickTime) < app.params.fastClicksDelayBetweenClicks) {\n                    setTimeout(removeActive, 0);\n                    return true;\n                }\n        \n                lastClickTime = e.timeStamp;\n        \n                trackClick = false;\n        \n                if (app.device.ios && scrollParent) {\n                    if (scrollParent.scrollTop !== scrollParent.f7ScrollTop) {\n                        return false;\n                    }\n                }\n        \n                // Add active-state here because, in a very fast tap, the timeout didn't\n                // have the chance to execute. Removing active-state in a timeout gives \n                // the chance to the animation execute.\n                if (app.params.activeState) {\n                    addActive();\n                    setTimeout(removeActive, 0);\n                }\n                // Remove Ripple\n                if (app.params.material && app.params.materialRipple) {\n                    rippleTouchEnd();\n                }\n        \n                // Trigger focus when required\n                if (targetNeedsFocus(targetElement)) {\n                    if (app.device.ios && app.device.webView) {\n                        if ((event.timeStamp - touchStartTime) > 159) {\n                            targetElement = null;\n                            return false;\n                        }\n                        targetElement.focus();\n                        return false;\n                    }\n                    else {\n                        targetElement.focus();\n                    }\n                }\n        \n                // Blur active elements\n                if (document.activeElement && targetElement !== document.activeElement && document.activeElement !== document.body && targetElement.nodeName.toLowerCase() !== 'label') {\n                    document.activeElement.blur();\n                }\n        \n                // Send click\n                e.preventDefault();\n                sendClick(e);\n                return false;\n            }\n            function handleTouchCancel(e) {\n                trackClick = false;\n                targetElement = null;\n                \n                // Remove Active State\n                clearTimeout(activeTimeout);\n                clearTimeout(tapHoldTimeout);\n                if (app.params.activeState) {\n                    removeActive();\n                }\n                \n                // Remove Ripple\n                if (app.params.material && app.params.materialRipple) {\n                    rippleTouchEnd();\n                }\n            }\n        \n            function handleClick(e) {\n                var allowClick = false;\n                \n                if (trackClick) {\n                    targetElement = null;\n                    trackClick = false;\n                    return true;\n                }\n                if (e.target.type === 'submit' && e.detail === 0) {\n                    return true;\n                }\n                if (!targetElement) {\n                    if (!isFormElement(e.target)) {\n                        allowClick =  true;\n                    }\n                }\n                if (!needsFastClick) {\n                    allowClick = true;\n                }\n                if (document.activeElement === targetElement) {\n                    allowClick =  true;\n                }\n                if (e.forwardedTouchEvent) {\n                    allowClick =  true;\n                }\n                if (!e.cancelable) {\n                    allowClick =  true;\n                }\n                if (app.params.tapHold && app.params.tapHoldPreventClicks && tapHoldFired) {\n                    allowClick = false;\n                }\n                if (!allowClick) {\n                    e.stopImmediatePropagation();\n                    e.stopPropagation();\n                    if (targetElement) {\n                        if (targetNeedsPrevent(targetElement) || isMoved) {\n                            e.preventDefault();\n                        }\n                    }\n                    else {\n                        e.preventDefault();\n                    }\n                    targetElement = null;\n                }\n                needsFastClickTimeOut = setTimeout(function () {\n                    needsFastClick = false;\n                }, (app.device.ios || app.device.androidChrome ? 100 : 400));\n        \n                if (app.params.tapHold) {\n                    tapHoldTimeout = setTimeout(function () {\n                        tapHoldFired = false;\n                    }, (app.device.ios || app.device.androidChrome ? 100 : 400));\n                }\n                    \n                return allowClick;\n            }\n            if (app.support.touch) {\n                document.addEventListener('click', handleClick, true);\n                \n                document.addEventListener('touchstart', handleTouchStart);\n                document.addEventListener('touchmove', handleTouchMove);\n                document.addEventListener('touchend', handleTouchEnd);\n                document.addEventListener('touchcancel', handleTouchCancel);\n            }\n            else {\n                if (app.params.activeState) {\n                    document.addEventListener('mousedown', handleMouseDown);\n                    document.addEventListener('mousemove', handleMouseMove);\n                    document.addEventListener('mouseup', handleMouseUp);\n                }\n            }\n            if (app.params.material && app.params.materialRipple) {\n                document.addEventListener('contextmenu', function (e) {\n                    if (activableElement) removeActive();\n                    rippleTouchEnd();\n                });\n            }\n                \n        };\n        \n\n        /*===============================================================================\n        ************   Handle clicks and make them fast (on tap);   ************\n        ===============================================================================*/\n        app.initClickEvents = function () {\n            function handleScrollTop(e) {\n                /*jshint validthis:true */\n                var clicked = $(this);\n                var target = $(e.target);\n                var isLink = clicked[0].nodeName.toLowerCase() === 'a' ||\n                             clicked.parents('a').length > 0 ||\n                             target[0].nodeName.toLowerCase() === 'a' ||\n                             target.parents('a').length > 0;\n                             \n                if (isLink) return;\n                var pageContent, page;\n                if (app.params.scrollTopOnNavbarClick && clicked.is('.navbar .center')) {\n                    // Find active page\n                    var navbar = clicked.parents('.navbar');\n        \n                    // Static Layout\n                    pageContent = navbar.parents('.page-content');\n        \n                    if (pageContent.length === 0) {\n                        // Fixed Layout\n                        if (navbar.parents('.page').length > 0) {\n                            pageContent = navbar.parents('.page').find('.page-content');\n                        }\n                        // Through Layout\n                        if (pageContent.length === 0) {\n                            if (navbar.nextAll('.pages').length > 0) {\n                                pageContent = navbar.nextAll('.pages').find('.page:not(.page-on-left):not(.page-on-right):not(.cached)').find('.page-content');\n                            }\n                        }\n                    }\n                }\n                if (app.params.scrollTopOnStatusbarClick && clicked.is('.statusbar-overlay')) {\n                    if ($('.popup.modal-in').length > 0) {\n                        // Check for opened popup\n                        pageContent = $('.popup.modal-in').find('.page:not(.page-on-left):not(.page-on-right):not(.cached)').find('.page-content');\n                    }\n                    else if ($('.panel.active').length > 0) {\n                        // Check for opened panel\n                        pageContent = $('.panel.active').find('.page:not(.page-on-left):not(.page-on-right):not(.cached)').find('.page-content');\n                    }\n                    else if ($('.views > .view.active').length > 0) {\n                        // View in tab bar app layout\n                        pageContent = $('.views > .view.active').find('.page:not(.page-on-left):not(.page-on-right):not(.cached)').find('.page-content');\n                    }\n                    else {\n                        // Usual case\n                        pageContent = $('.views').find('.page:not(.page-on-left):not(.page-on-right):not(.cached)').find('.page-content');   \n                    }\n                }\n        \n                if (pageContent && pageContent.length > 0) {\n                    // Check for tab\n                    if (pageContent.hasClass('tab')) {\n                        pageContent = pageContent.parent('.tabs').children('.page-content.active');\n                    }\n                    if (pageContent.length > 0) pageContent.scrollTop(0, 300);\n                }\n            }\n            function handleClicks(e) {\n                /*jshint validthis:true */\n                var clicked = $(this);\n                var url = clicked.attr('href');\n                var isLink = clicked[0].nodeName.toLowerCase() === 'a';\n                \n                // Check if link is external \n                if (isLink) {\n                    if (clicked.is(app.params.externalLinks) || (url && url.indexOf('javascript:') >= 0)) {\n                        if(url && clicked.attr('target') === '_system') {\n                            e.preventDefault();\n                            window.open(url, '_system');\n                        }\n                        return;\n                    }\n                }\n        \n                // Collect Clicked data- attributes\n                var clickedData = clicked.dataset();\n        \n                // Smart Select\n                if (clicked.hasClass('smart-select')) {\n                    if (app.smartSelectOpen) app.smartSelectOpen(clicked);\n                }\n                \n                // Open Panel\n                if (clicked.hasClass('open-panel')) {\n                    if ($('.panel').length === 1) {\n                        if ($('.panel').hasClass('panel-left')) app.openPanel('left');\n                        else app.openPanel('right');\n                    }\n                    else {\n                        if (clickedData.panel === 'right') app.openPanel('right');\n                        else app.openPanel('left');\n                    }\n                }\n                // Close Panel\n                if (clicked.hasClass('close-panel')) {\n                    app.closePanel();\n                }\n        \n                if (clicked.hasClass('panel-overlay') && app.params.panelsCloseByOutside) {\n                    app.closePanel();\n                }\n                // Popover\n                if (clicked.hasClass('open-popover')) {\n                    var popover;\n                    if (clickedData.popover) {\n                        popover = clickedData.popover;\n                    }\n                    else popover = '.popover';\n                    app.popover(popover, clicked);\n                }\n                if (clicked.hasClass('close-popover')) {\n                    app.closeModal('.popover.modal-in');\n                }\n                // Popup\n                var popup;\n                if (clicked.hasClass('open-popup')) {\n                    if (clickedData.popup) {\n                        popup = clickedData.popup;\n                    }\n                    else popup = '.popup';\n                    app.popup(popup);\n                }\n                if (clicked.hasClass('close-popup')) {\n                    if (clickedData.popup) {\n                        popup = clickedData.popup;\n                    }\n                    else popup = '.popup.modal-in';\n                    app.closeModal(popup);\n                }\n                // Login Screen\n                var loginScreen;\n                if (clicked.hasClass('open-login-screen')) {\n                    if (clickedData.loginScreen) {\n                        loginScreen = clickedData.loginScreen;\n                    }\n                    else loginScreen = '.login-screen';\n                    app.loginScreen(loginScreen);\n                }\n                if (clicked.hasClass('close-login-screen')) {\n                    app.closeModal('.login-screen.modal-in');\n                }\n                // Close Modal\n                if (clicked.hasClass('modal-overlay')) {\n                    if ($('.modal.modal-in').length > 0 && app.params.modalCloseByOutside)\n                        app.closeModal('.modal.modal-in');\n                    if ($('.actions-modal.modal-in').length > 0 && app.params.actionsCloseByOutside)\n                        app.closeModal('.actions-modal.modal-in');\n                    \n                    if ($('.popover.modal-in').length > 0) app.closeModal('.popover.modal-in');\n                }\n                if (clicked.hasClass('popup-overlay')) {\n                    if ($('.popup.modal-in').length > 0 && app.params.popupCloseByOutside)\n                        app.closeModal('.popup.modal-in');\n                }\n                if (clicked.hasClass('picker-modal-overlay')) {\n                    if ($('.picker-modal.modal-in').length > 0)\n                        app.closeModal('.picker-modal.modal-in');\n                }\n        \n                // Picker\n                if (clicked.hasClass('close-picker')) {\n                    var pickerToClose = $('.picker-modal.modal-in');\n                    if (pickerToClose.length > 0) {\n                        app.closeModal(pickerToClose);\n                    }\n                    else {\n                        pickerToClose = $('.popover.modal-in .picker-modal');\n                        if (pickerToClose.length > 0) {\n                            app.closeModal(pickerToClose.parents('.popover'));\n                        }\n                    }\n                }\n                if (clicked.hasClass('open-picker')) {\n                    var pickerToOpen;\n                    if (clickedData.picker) {\n                        pickerToOpen = clickedData.picker;\n                    }\n                    else pickerToOpen = '.picker-modal';\n                    app.pickerModal(pickerToOpen, clicked);\n                }\n        \n                // Tabs\n                var isTabLink;\n                if (clicked.hasClass('tab-link')) {\n                    isTabLink = true;\n                    app.showTab(clickedData.tab || clicked.attr('href'), clicked);\n                }\n                // Swipeout Close\n                if (clicked.hasClass('swipeout-close')) {\n                    app.swipeoutClose(clicked.parents('.swipeout-opened'));\n                }\n                // Swipeout Delete\n                if (clicked.hasClass('swipeout-delete')) {\n                    if (clickedData.confirm) {\n                        var text = clickedData.confirm;\n                        var title = clickedData.confirmTitle;\n                        if (title) {\n                            app.confirm(text, title, function () {\n                                app.swipeoutDelete(clicked.parents('.swipeout'));\n                            }, function () {\n                                if (clickedData.closeOnCancel) app.swipeoutClose(clicked.parents('.swipeout'));\n                            });\n                        }\n                        else {\n                            app.confirm(text, function () {\n                                app.swipeoutDelete(clicked.parents('.swipeout'));\n                            }, function () {\n                                if (clickedData.closeOnCancel) app.swipeoutClose(clicked.parents('.swipeout'));\n                            });\n                        }\n                    }\n                    else {\n                        app.swipeoutDelete(clicked.parents('.swipeout'));\n                    }\n                        \n                }\n                // Sortable\n                if (clicked.hasClass('toggle-sortable')) {\n                    app.sortableToggle(clickedData.sortable);\n                }\n                if (clicked.hasClass('open-sortable')) {\n                    app.sortableOpen(clickedData.sortable);\n                }\n                if (clicked.hasClass('close-sortable')) {\n                    app.sortableClose(clickedData.sortable);\n                }\n                // Accordion\n                if (clicked.hasClass('accordion-item-toggle') || (clicked.hasClass('item-link') && clicked.parent().hasClass('accordion-item'))) {\n                    var accordionItem = clicked.parent('.accordion-item');\n                    if (accordionItem.length === 0) accordionItem = clicked.parents('.accordion-item');\n                    if (accordionItem.length === 0) accordionItem = clicked.parents('li');\n                    app.accordionToggle(accordionItem);\n                }\n        \n                // Load Page\n                if (app.params.ajaxLinks && !clicked.is(app.params.ajaxLinks) || !isLink || !app.params.router) {\n                    return;\n                }\n                if (isLink) {\n                    e.preventDefault();\n                }\n        \n                var validUrl = url && url.length > 0 && url !== '#' && !isTabLink;\n                var template = clickedData.template;\n                if (validUrl || clicked.hasClass('back') || template) {\n                    var view;\n                    if (clickedData.view) {\n                        view = $(clickedData.view)[0].f7View;\n                    }\n                    else {\n                        view = clicked.parents('.' + app.params.viewClass)[0] && clicked.parents('.' + app.params.viewClass)[0].f7View;\n                        if (view && view.params.linksView) {\n                            if (typeof view.params.linksView === 'string') view = $(view.params.linksView)[0].f7View;\n                            else if (view.params.linksView instanceof View) view = view.params.linksView;\n                        }\n                    }\n                    if (!view) {\n                        if (app.mainView) view = app.mainView;\n                    }\n                    if (!view) return;\n        \n                    var pageName;\n                    if (!template) {\n                        if (url.indexOf('#') === 0 && url !== '#')  {\n                            if (view.params.domCache) {\n                                pageName = url.split('#')[1];\n                                url = undefined;\n                            }\n                            else return;\n                        }\n                        if (url === '#' && !clicked.hasClass('back')) return;\n                    }\n                    else {\n                        url = undefined;\n                    }\n        \n                    var animatePages;\n                    if (typeof clickedData.animatePages !== 'undefined') {\n                        animatePages = clickedData.animatePages;\n                    }\n                    else {\n                        if (clicked.hasClass('with-animation')) animatePages = true;\n                        if (clicked.hasClass('no-animation')) animatePages = false;\n                    }\n                    \n                    var options = {\n                        animatePages: animatePages,\n                        ignoreCache: clickedData.ignoreCache,\n                        force: clickedData.force,\n                        reload: clickedData.reload,\n                        reloadPrevious: clickedData.reloadPrevious,\n                        pageName: pageName,\n                        pushState: clickedData.pushState,\n                        url: url\n                    };\n        \n                    if (app.params.template7Pages) {\n                        options.contextName = clickedData.contextName;\n                        var context = clickedData.context;\n                        if (context) {\n                            options.context = JSON.parse(context);\n                        }\n                    }\n                    if (template && template in t7.templates) {\n                        options.template = t7.templates[template];\n                    }\n        \n                    if (clicked.hasClass('back')) view.router.back(options);\n                    else view.router.load(options);\n                }\n            }\n            $(document).on('click', 'a, .open-panel, .close-panel, .panel-overlay, .modal-overlay, .popup-overlay, .swipeout-delete, .swipeout-close, .close-popup, .open-popup, .open-popover, .open-login-screen, .close-login-screen .smart-select, .toggle-sortable, .open-sortable, .close-sortable, .accordion-item-toggle, .close-picker, .picker-modal-overlay', handleClicks);\n            if (app.params.scrollTopOnNavbarClick || app.params.scrollTopOnStatusbarClick) {\n                $(document).on('click', '.statusbar-overlay, .navbar .center', handleScrollTop);\n            }\n        \n            // Prevent scrolling on overlays\n            function preventScrolling(e) {\n                e.preventDefault();\n            }\n            if (app.support.touch && !app.device.android) {\n                $(document).on((app.params.fastClicks ? 'touchstart' : 'touchmove'), '.panel-overlay, .modal-overlay, .preloader-indicator-overlay, .popup-overlay, .searchbar-overlay', preventScrolling);\n            }\n        };\n        \n\n        /*======================================================\n        ************   App Resize Actions   ************\n        ======================================================*/\n        // Prevent iPad horizontal body scrolling when soft keyboard is opened\n        function _fixIpadBodyScrolLeft() {\n            if (app.device.ipad) {\n                document.body.scrollLeft = 0;\n                setTimeout(function () {\n                    document.body.scrollLeft = 0;\n                }, 0);\n            }\n        }\n        app.initResize = function () {\n            $(window).on('resize', app.resize);\n            $(window).on('orientationchange', app.orientationchange);\n        };\n        app.resize = function () {\n            if (app.sizeNavbars) app.sizeNavbars();\n            _fixIpadBodyScrolLeft();\n            \n        };\n        app.orientationchange = function () {\n            if (app.device && app.device.minimalUi) {\n                if (window.orientation === 90 || window.orientation === -90) document.body.scrollTop = 0;\n            }\n            _fixIpadBodyScrolLeft();\n        };\n        \n\n        /*===============================================================================\n        ************   Store and parse forms data   ************\n        ===============================================================================*/\n        app.formsData = {};\n        app.formStoreData = function (formId, formJSON) {\n            // Store form data in app.formsData\n            app.formsData[formId] = formJSON;\n        \n            // Store form data in local storage also\n            app.ls['f7form-' + formId] = JSON.stringify(formJSON);\n        };\n        app.formDeleteData = function (formId) {\n            // Delete form data from app.formsData\n            if (app.formsData[formId]) {\n                app.formsData[formId] = '';\n                delete app.formsData[formId];\n            }\n        \n            // Delete form data from local storage also\n            if (app.ls['f7form-' + formId]) {\n                app.ls['f7form-' + formId] = '';\n                app.ls.removeItem('f7form-' + formId);\n            }\n        };\n        app.formGetData = function (formId) {\n            // First of all check in local storage\n            if (app.ls['f7form-' + formId]) {\n                return JSON.parse(app.ls['f7form-' + formId]);\n            }\n            // Try to get it from formsData obj\n            else if (app.formsData[formId]) return app.formsData[formId];\n        };\n        app.formToJSON = function (form) {\n            form = $(form);\n            if (form.length !== 1) return false;\n        \n            // Form data\n            var formData = {};\n        \n            // Skip input types\n            var skipTypes = ['submit', 'image', 'button', 'file'];\n            var skipNames = [];\n            form.find('input, select, textarea').each(function () {\n                var input = $(this);\n                var name = input.attr('name');\n                var type = input.attr('type');\n                var tag = this.nodeName.toLowerCase();\n                if (skipTypes.indexOf(type) >= 0) return;\n                if (skipNames.indexOf(name) >= 0 || !name) return;\n                if (tag === 'select' && input.prop('multiple')) {\n                    skipNames.push(name);\n                    formData[name] = [];\n                    form.find('select[name=\"' + name + '\"] option').each(function () {\n                        if (this.selected) formData[name].push(this.value);\n                    });\n                }\n                else {\n                    switch (type) {\n                        case 'checkbox' :\n                            skipNames.push(name);\n                            formData[name] = [];\n                            form.find('input[name=\"' + name + '\"]').each(function () {\n                                if (this.checked) formData[name].push(this.value);\n                            });\n                            break;\n                        case 'radio' :\n                            skipNames.push(name);\n                            form.find('input[name=\"' + name + '\"]').each(function () {\n                                if (this.checked) formData[name] = this.value;\n                            });\n                            break;\n                        default :\n                            formData[name] = input.val();\n                            break;\n                    }\n                }\n                    \n            });\n            form.trigger('formToJSON', {formData: formData});\n        \n            return formData;\n        };\n        app.formFromJSON = function (form, formData) {\n            form = $(form);\n            if (form.length !== 1) return false;\n        \n            // Skip input types\n            var skipTypes = ['submit', 'image', 'button', 'file'];\n            var skipNames = [];\n        \n            form.find('input, select, textarea').each(function () {\n                var input = $(this);\n                var name = input.attr('name');\n                var type = input.attr('type');\n                var tag = this.nodeName.toLowerCase();\n                if (!formData[name]) return;\n                if (skipTypes.indexOf(type) >= 0) return;\n                if (skipNames.indexOf(name) >= 0 || !name) return;\n                if (tag === 'select' && input.prop('multiple')) {\n                    skipNames.push(name);\n                    form.find('select[name=\"' + name + '\"] option').each(function () {\n                        if (formData[name].indexOf(this.value) >= 0) this.selected = true;\n                        else this.selected = false;\n                    });\n                }\n                else {\n                    switch (type) {\n                        case 'checkbox' :\n                            skipNames.push(name);\n                            form.find('input[name=\"' + name + '\"]').each(function () {\n                                if (formData[name].indexOf(this.value) >= 0) this.checked = true;\n                                else this.checked = false;\n                            });\n                            break;\n                        case 'radio' :\n                            skipNames.push(name);\n                            form.find('input[name=\"' + name + '\"]').each(function () {\n                                if (formData[name] === this.value) this.checked = true;\n                                else this.checked = false;\n                            });\n                            break;\n                        default :\n                            input.val(formData[name]);\n                            break;\n                    }\n                }\n                    \n            });\n            form.trigger('formFromJSON', {formData: formData});\n        };\n        app.initFormsStorage = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var forms = pageContainer.find('form.store-data');\n            if (forms.length === 0) return;\n            \n            // Parse forms data and fill form if there is such data\n            forms.each(function () {\n                var id = this.getAttribute('id');\n                if (!id) return;\n                var formData = app.formGetData(id);\n                if (formData) app.formFromJSON(this, formData);\n            });\n            // Update forms data on inputs change\n            function storeForm() {\n                /*jshint validthis:true */\n                var form = $(this);\n                var formId = form[0].id;\n                if (!formId) return;\n                var formJSON = app.formToJSON(form);\n                if (!formJSON) return;\n                app.formStoreData(formId, formJSON);\n                form.trigger('store', {data: formJSON});\n            }\n            forms.on('change submit', storeForm);\n        \n            // Detach Listeners\n            function pageBeforeRemove() {\n                forms.off('change submit', storeForm);\n                pageContainer.off('pageBeforeRemove', pageBeforeRemove);\n            }\n            pageContainer.on('pageBeforeRemove', pageBeforeRemove);\n        };\n\n        /*===============================================================================\n        ************   Ajax submit for forms   ************\n        ===============================================================================*/\n        // Ajax submit on forms\n        $(document).on('submit change', 'form.ajax-submit, form.ajax-submit-onchange', function (e) {\n            var form = $(this);\n            if (e.type === 'change' && !form.hasClass('ajax-submit-onchange')) return;\n            if (e.type === 'submit') e.preventDefault();\n            \n            var method = form.attr('method') || 'GET';\n            var contentType = form.prop('enctype') || form.attr('enctype');\n        \n            var url = form.attr('action');\n            if (!url) return;\n        \n            var data;\n            if (method === 'POST') data = new FormData(form[0]);\n            else data = $.serializeObject(app.formToJSON(form[0]));\n        \n            var xhr = $.ajax({\n                method: method,\n                url: url,\n                contentType: contentType,\n                data: data,\n                beforeSend: function (xhr) {\n                    form.trigger('beforeSubmit', {data:data, xhr: xhr});\n                },\n                error: function (xhr) {\n                    form.trigger('submitError', {data:data, xhr: xhr});  \n                },\n                success: function (data) {\n                    form.trigger('submitted', {data: data, xhr: xhr});\n                }\n            });\n        });\n        \n        \n\n        /*===============================================================================\n        ************   Resizable textarea   ************\n        ===============================================================================*/\n        app.resizeTextarea = function (textarea) {\n            textarea = $(textarea);\n            if (!textarea.hasClass('resizable')) {\n                return;\n            }\n            textarea.css({'height': ''});\n            var height = textarea[0].offsetHeight;\n            var diff = height - textarea[0].clientHeight;\n            var scrollHeight = textarea[0].scrollHeight;\n        \n            if (scrollHeight + diff > height) {\n                var newAreaHeight = scrollHeight + diff;\n                textarea.css('height', newAreaHeight + 'px');\n            }\n        };\n        app.resizableTextarea = function (textarea) {\n            textarea = $(textarea);\n            if (textarea.length === 0) return;\n            var textareaTimeout;\n            function handleTextarea() {\n                clearTimeout(textareaTimeout);\n                textareaTimeout = setTimeout(function () {\n                    app.resizeTextarea(textarea);\n                }, 0);\n            }\n            return textarea.on('change keydown keypress keyup paste cut', handleTextarea);\n        };\n        app.initPageResizableTextareas = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var textareas = pageContainer.find('textarea.resizable');\n            textareas.each(function () {\n                app.resizableTextarea(this);\n            });\n        };\n\n        /*======================================================\n        ************   Material Text Inputs   ************\n        ======================================================*/\n        app.initPageMaterialInputs = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var textareas = pageContainer.find('textarea.resizable');\n            pageContainer.find('.item-input').each(function () {\n                var itemInput = $(this);\n                var notInputs = ['checkbox', 'button', 'submit', 'range', 'radio', 'image'];\n                itemInput.find('input, select, textarea').each(function () {\n                    var input = $(this);\n                    if (notInputs.indexOf(input.attr('type')) < 0) {\n                        itemInput.addClass('item-input-field');\n                        if (input.val().trim() !== '') {\n                            input.parents('.item-input, .input-field').add(input.parents('.item-inner')).addClass('not-empty-state');\n                        }\n                    }\n                });\n                if (itemInput.parents('.input-item, .inputs-list').length > 0) return;\n                itemInput.parents('.list-block').eq(0).addClass('inputs-list');\n            });\n        };\n        /*======================================================\n        ************   Material Focus Inputs   ************\n        ======================================================*/\n        app.initMaterialWatchInputs = function () {\n            var notInputs = ['checkbox', 'button', 'submit', 'range', 'radio', 'image'];\n            function addFocusState(e) {\n                /*jshint validthis:true*/\n                var i = $(this);\n                var type = i.attr('type');\n                if (notInputs.indexOf(type) >= 0) return;\n                var els = i.add(i.parents('.item-input, .input-field')).add(i.parents('.item-inner').eq(0));\n                els.addClass('focus-state');\n            }\n            function removeFocusState(e) {\n                /*jshint validthis:true*/\n                var i = $(this), value = i.val();\n                var type = i.attr('type');\n                if (notInputs.indexOf(type) >= 0) return;\n                var els = i.add(i.parents('.item-input, .input-field')).add(i.parents('.item-inner').eq(0));\n                els.removeClass('focus-state');\n                if (value && value.trim() !== '') {\n                    els.addClass('not-empty-state');\n                }\n                else {\n                    els.removeClass('not-empty-state');\n                }\n            }\n            $(document).on('focus', '.item-input input, .item-input select, .item-input textarea, input, textarea, select', addFocusState, true);\n            $(document).on('blur', '.item-input input, .item-input select, .item-input textarea, input, textarea, select', removeFocusState, true);\n        };\n\n        /*======================================================\n        ************   Handle Browser's History   ************\n        ======================================================*/\n        app.pushStateQueue = [];\n        app.pushStateClearQueue = function () {\n            if (app.pushStateQueue.length === 0) return;\n            var queue = app.pushStateQueue.pop();\n            var animatePages;\n            if (app.params.pushStateNoAnimation === true) animatePages = false;\n            if (queue.action === 'back') {\n                app.router.back(queue.view, {animatePages: animatePages});\n            }\n            if (queue.action === 'loadPage') {\n                app.router.load(queue.view, {url: queue.stateUrl, animatePages: animatePages, pushState: false});\n            }\n            if (queue.action === 'loadContent') {\n                app.router.load(queue.view, {content: queue.stateContent, animatePages: animatePages, pushState: false});\n            }\n            if (queue.action === 'loadPageName') {\n                app.router.load(queue.view, {pageName: queue.statePageName, animatePages: animatePages, pushState: false});\n            }\n        };\n        \n        app.initPushState = function () {\n            var blockPopstate;\n            if (app.params.pushStatePreventOnLoad) {\n                blockPopstate = true;\n                $(window).on('load', function () {\n                    setTimeout(function () {\n                        blockPopstate = false;\n                    }, 0);\n                });\n            }\n                \n            function handlePopState(e) {\n                if (blockPopstate) return;\n                var mainView = app.mainView;\n                if (!mainView) return;\n                var state = e.state;\n                if (!state) {\n                    state = {\n                        viewIndex: app.views.indexOf(mainView),\n                        url : mainView.history[0]\n                    };\n                }\n                if (state.viewIndex < 0) return;\n                var view = app.views[state.viewIndex];\n                var stateUrl = state && state.url || undefined;\n                var stateContent = state && state.content || undefined;\n                var statePageName = state && state.pageName || undefined;\n                var animatePages;\n                \n                if (app.params.pushStateNoAnimation === true) animatePages = false;\n                \n                if (stateUrl !== view.url) {\n                    if (view.history.indexOf(stateUrl) >= 0) {\n                        // Go Back\n                        if (view.allowPageChange) {\n                            app.router.back(view, {url:undefined, animatePages: animatePages, pushState: false, preloadOnly:false});\n                        }\n                        else {\n                            app.pushStateQueue.push({\n                                action: 'back',\n                                view: view\n                            });\n                        }\n                    }\n                    else if (stateContent) {\n                        // Load Page\n                        if (view.allowPageChange) {\n                            app.router.load(view, {content:stateContent, animatePages: animatePages, pushState: false});\n                        }\n                        else {\n                            app.pushStateQueue.unshift({\n                                action: 'loadContent',\n                                stateContent: stateContent,\n                                view: view\n                            });\n                        }\n                        \n                    }\n                    else if (statePageName) {\n                        // Load Page by page name with Dom Cache\n                        if (view.allowPageChange) {\n                            app.router.load(view, {pageName:statePageName, animatePages: animatePages, pushState: false});\n                        }\n                        else {\n                            app.pushStateQueue.unshift({\n                                action: 'loadPageName',\n                                statePageName: statePageName,\n                                view: view\n                            });\n                        }\n                    }\n                    else  {\n                        // Load Page\n                        if (view.allowPageChange) {\n                            app.router.load(view, {url:stateUrl, animatePages: animatePages, pushState: false});\n                        }\n                        else {\n                            app.pushStateQueue.unshift({\n                                action: 'loadPage',\n                                stateUrl: stateUrl,\n                                view: view\n                            });\n                        }\n                    }\n                }\n            }\n            $(window).on('popstate', handlePopState);\n        };\n        \n\n        /*===========================\n        Framework7 Swiper Additions\n        ===========================*/\n        app.swiper = function (container, params) {\n            return new Swiper(container, params);\n        };\n        app.initPageSwiper = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var swipers = pageContainer.find('.swiper-init');\n            if (swipers.length === 0) return;\n            function destroySwiperOnRemove(slider) {\n                function destroySwiper() {\n                    slider.destroy();\n                    pageContainer.off('pageBeforeRemove', destroySwiper);\n                }\n                pageContainer.on('pageBeforeRemove', destroySwiper);\n            }\n            for (var i = 0; i < swipers.length; i++) {\n                var swiper = swipers.eq(i);\n                var params;\n                if (swiper.data('swiper')) {\n                    params = JSON.parse(swiper.data('swiper'));\n                }\n                else {\n                    params = swiper.dataset();\n                }\n                var _slider = app.swiper(swiper[0], params);\n                destroySwiperOnRemove(_slider);\n            }\n        };\n        app.reinitPageSwiper = function (pageContainer) {\n            pageContainer = $(pageContainer);\n            var sliders = pageContainer.find('.swiper-init');\n            if (sliders.length === 0) return;\n            for (var i = 0; i < sliders.length; i++) {\n                var sliderInstance = sliders[0].swiper;\n                if (sliderInstance) {\n                    sliderInstance.update(true);\n                }\n            }\n        };\n        \n\n        /*======================================================\n        ************   Photo Browser   ************\n        ======================================================*/\n        var PhotoBrowser = function (params) {\n            var pb = this, i;\n        \n            var defaults = {\n                photos : [],\n                initialSlide: 0,\n                spaceBetween: 20,\n                speed: 300,\n                zoom: true,\n                maxZoom: 3,\n                minZoom: 1,\n                exposition: true,\n                expositionHideCaptions: false,\n                type: 'standalone',\n                navbar: true,\n                toolbar: true,\n                theme: 'light',\n                swipeToClose: true,\n                backLinkText: 'Close',\n                ofText: 'of',\n                loop: false,\n                lazyLoading: false,\n                lazyLoadingInPrevNext: false,\n                lazyLoadingOnTransitionStart: false,\n                material: app.params.material,\n                materialPreloaderSvg: app.params.materialPreloaderSvg,\n                /*\n                Callbacks:\n                onLazyImageLoad(pb, slide, img)\n                onLazyImageReady(pb, slide, img)\n                onOpen(pb)\n                onClose(pb)\n                onTransitionStart(swiper)\n                onTransitionEnd(swiper)\n                onSlideChangeStart(swiper)\n                onSlideChangeEnd(swiper)\n                onTap(swiper, e)\n                onClick(swiper, e)\n                onDoubleTap(swiper, e)\n                onSwipeToClose(pb)\n                */\n            };\n            \n            params = params || {};\n            if (!params.backLinkText && app.params.material) defaults.backLinkText = '';\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined') {\n                    params[def] = defaults[def];\n                }\n            }\n        \n            pb.params = params;\n            pb.params.iconsColorClass = pb.params.iconsColor ? 'color-' + pb.params.iconsColor : (pb.params.theme === 'dark' ? 'color-white' : '');\n            pb.params.preloaderColorClass = pb.params.theme === 'dark' ? 'preloader-white' : '';\n        \n            // Templates\n            var photoTemplate = pb.params.photoTemplate || \n                '<div class=\"photo-browser-slide swiper-slide\">' +\n                    '<span class=\"photo-browser-zoom-container\">' +\n                        '<img src=\"{{js \"this.url || this\"}}\">' +\n                    '</span>' +\n                '</div>';\n            var photoLazyTemplate = pb.params.lazyPhotoTemplate ||\n                '<div class=\"photo-browser-slide photo-browser-slide-lazy swiper-slide\">' +\n                    '<div class=\"preloader {{@root.preloaderColorClass}}\">{{#if @root.material}}{{@root.materialPreloaderSvg}}{{/if}}</div>' +\n                    '<span class=\"photo-browser-zoom-container\">' +\n                        '<img data-src=\"{{js \"this.url || this\"}}\" class=\"swiper-lazy\">' +\n                    '</span>' +\n                '</div>';\n            var objectTemplate = pb.params.objectTemplate ||\n                '<div class=\"photo-browser-slide photo-browser-object-slide swiper-slide\">{{js \"this.html || this\"}}</div>';\n            var captionTemplate = pb.params.captionTemplate ||\n                '<div class=\"photo-browser-caption\" data-caption-index=\"{{@index}}\">' +\n                    '{{caption}}' +\n                '</div>';\n            var navbarTemplate = pb.params.navbarTemplate ||\n                '<div class=\"navbar\">' +\n                    '<div class=\"navbar-inner\">' +\n                        '<div class=\"left sliding\">' +\n                            '<a href=\"#\" class=\"link close-popup photo-browser-close-link {{#unless backLinkText}}icon-only{{/unless}} {{js \"this.type === \\'page\\' ? \\'back\\' : \\'\\'\"}}\">' +\n                                '<i class=\"icon icon-back {{iconsColorClass}}\"></i>' +\n                                '{{#if backLinkText}}<span>{{backLinkText}}</span>{{/if}}' +\n                            '</a>' +\n                        '</div>' +\n                        '<div class=\"center sliding\">' +\n                            '<span class=\"photo-browser-current\"></span> ' +\n                            '<span class=\"photo-browser-of\">{{ofText}}</span> ' +\n                            '<span class=\"photo-browser-total\"></span>' +\n                        '</div>' +\n                        '<div class=\"right\"></div>' +\n                    '</div>' +\n                '</div>';\n            var toolbarTemplate = pb.params.toolbarTemplate ||\n                '<div class=\"toolbar tabbar\">' +\n                    '<div class=\"toolbar-inner\">' +\n                        '<a href=\"#\" class=\"link photo-browser-prev\">' +\n                            '<i class=\"icon icon-prev {{iconsColorClass}}\"></i>' +\n                        '</a>' +\n                        '<a href=\"#\" class=\"link photo-browser-next\">' +\n                            '<i class=\"icon icon-next {{iconsColorClass}}\"></i>' +\n                        '</a>' +\n                    '</div>' +\n                '</div>';\n        \n            var htmlTemplate = t7.compile('<div class=\"photo-browser photo-browser-{{theme}}\">' +\n                    '<div class=\"view navbar-fixed toolbar-fixed\">' +\n                        '{{#unless material}}{{#if navbar}}' +\n                        navbarTemplate +\n                        '{{/if}}{{/unless}}' +\n                        '<div class=\"page no-toolbar {{#unless navbar}}no-navbar{{/unless}} toolbar-fixed navbar-fixed\" data-page=\"photo-browser-slides\">' +\n                            '{{#if material}}{{#if navbar}}' +\n                            navbarTemplate +\n                            '{{/if}}{{/if}}' +\n                            '{{#if toolbar}}' +\n                            toolbarTemplate +\n                            '{{/if}}' +\n                            '<div class=\"photo-browser-captions photo-browser-captions-{{js \"this.captionsTheme || this.theme\"}}\">' +\n                                '{{#each photos}}{{#if caption}}' +\n                                captionTemplate +\n                                '{{/if}}{{/each}}' +\n                            '</div>' +\n                            '<div class=\"photo-browser-swiper-container swiper-container\">' +\n                                '<div class=\"photo-browser-swiper-wrapper swiper-wrapper\">' +\n                                    '{{#each photos}}' +\n                                    '{{#js_compare \"this.html || ((typeof this === \\'string\\' || this instanceof String) && (this.indexOf(\\'<\\') >= 0 || this.indexOf(\\'>\\') >= 0))\"}}' +\n                                        objectTemplate +\n                                    '{{else}}' +\n                                        '{{#if @root.lazyLoading}}' +\n                                        photoLazyTemplate +\n                                        '{{else}}' +\n                                        photoTemplate +\n                                        '{{/if}}' +\n                                    '{{/js_compare}}' +\n                                    '{{/each}}' +\n                                '</div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>' +\n                '</div>')(pb.params);\n        \n            pb.activeIndex = pb.params.initialSlide;\n            pb.openIndex = pb.activeIndex;\n            pb.opened = false;\n        \n            pb.open = function (index) {\n                if (typeof index === 'undefined') index = pb.activeIndex;\n                index = parseInt(index, 10);\n                if (pb.opened && pb.swiper) {\n                    pb.swiper.slideTo(index);\n                    return;\n                }\n                pb.opened = true;\n                pb.openIndex = index;\n                if (pb.params.type === 'standalone') {\n                    $('body').append(htmlTemplate);\n                }\n                if (pb.params.type === 'popup') {\n                    pb.popup = app.popup('<div class=\"popup photo-browser-popup\">' + htmlTemplate + '</div>');\n                    $(pb.popup).on('closed', pb.onPopupClose);\n                }\n                if (pb.params.type === 'page') {\n                    $(document).on('pageBeforeInit', pb.onPageBeforeInit);\n                    $(document).on('pageBeforeRemove', pb.onPageBeforeRemove);\n                    if (!pb.params.view) pb.params.view = app.mainView;\n                    pb.params.view.loadContent(htmlTemplate);\n                    return;\n                }\n                pb.layout(pb.openIndex);\n                if (pb.params.onOpen) {\n                    pb.params.onOpen(pb);\n                }\n        \n            };\n            pb.close = function () {\n                pb.opened = false;\n                if (!pb.swiperContainer || pb.swiperContainer.length === 0) {\n                    return;\n                }\n                if (pb.params.onClose) {\n                    pb.params.onClose(pb);\n                }\n                // Detach events\n                pb.attachEvents(true);\n                // Delete from DOM\n                if (pb.params.type === 'standalone') {\n                    pb.container.removeClass('photo-browser-in').addClass('photo-browser-out').animationEnd(function () {\n                        pb.container.remove();\n                    });\n                }\n                // Destroy slider\n                pb.swiper.destroy();\n                // Delete references\n                pb.swiper = pb.swiperContainer = pb.swiperWrapper = pb.slides = gestureSlide = gestureImg = gestureImgWrap = undefined;\n            };\n        \n            pb.onPopupClose = function (e) {\n                pb.close();\n                $(pb.popup).off('pageBeforeInit', pb.onPopupClose);\n            };\n            pb.onPageBeforeInit = function (e) {\n                if (e.detail.page.name === 'photo-browser-slides') {\n                    pb.layout(pb.openIndex);\n                }\n                $(document).off('pageBeforeInit', pb.onPageBeforeInit);\n            };\n            pb.onPageBeforeRemove = function (e) {\n                if (e.detail.page.name === 'photo-browser-slides') {\n                    pb.close();\n                }\n                $(document).off('pageBeforeRemove', pb.onPageBeforeRemove);\n            };\n        \n            pb.onSliderTransitionStart = function (swiper) {\n                pb.activeIndex = swiper.activeIndex;\n        \n                var current = swiper.activeIndex + 1;\n                var total = swiper.slides.length;\n                if (pb.params.loop) {\n                    total = total - 2;\n                    current = current - swiper.loopedSlides;\n                    if (current < 1) current = total + current;\n                    if (current > total) current = current - total;\n                }\n                pb.container.find('.photo-browser-current').text(current);\n                pb.container.find('.photo-browser-total').text(total);\n        \n                $('.photo-browser-prev, .photo-browser-next').removeClass('photo-browser-link-inactive');\n                \n                if (swiper.isBeginning && !pb.params.loop) {\n                    $('.photo-browser-prev').addClass('photo-browser-link-inactive');\n                }\n                if (swiper.isEnd && !pb.params.loop) {\n                    $('.photo-browser-next').addClass('photo-browser-link-inactive');\n                }\n        \n                // Update captions\n                if (pb.captions.length > 0) {\n                    pb.captionsContainer.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n                    var captionIndex = pb.params.loop ? swiper.slides.eq(swiper.activeIndex).attr('data-swiper-slide-index') : pb.activeIndex;\n                    pb.captionsContainer.find('[data-caption-index=\"' + captionIndex + '\"]').addClass('photo-browser-caption-active');\n                }\n        \n        \n                // Stop Video\n                var previousSlideVideo = swiper.slides.eq(swiper.previousIndex).find('video');\n                if (previousSlideVideo.length > 0) {\n                    if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n                }\n                // Callback\n                if (pb.params.onTransitionStart) pb.params.onTransitionStart(swiper);\n            };\n            pb.onSliderTransitionEnd = function (swiper) {\n                // Reset zoom\n                if (pb.params.zoom && gestureSlide && swiper.previousIndex !== swiper.activeIndex) {\n                    gestureImg.transform('translate3d(0,0,0) scale(1)');\n                    gestureImgWrap.transform('translate3d(0,0,0)');\n                    gestureSlide = gestureImg = gestureImgWrap = undefined;\n                    scale = currentScale = 1;\n                }\n                if (pb.params.onTransitionEnd) pb.params.onTransitionEnd(swiper);\n            };\n            \n            pb.layout = function (index) {\n                if (pb.params.type === 'page') {\n                    pb.container = $('.photo-browser-swiper-container').parents('.view');\n                }\n                else {\n                    pb.container = $('.photo-browser');\n                }\n                if (pb.params.type === 'standalone') {\n                    pb.container.addClass('photo-browser-in');\n                    app.sizeNavbars(pb.container);\n                }\n                pb.swiperContainer = pb.container.find('.photo-browser-swiper-container');\n                pb.swiperWrapper = pb.container.find('.photo-browser-swiper-wrapper');\n                pb.slides = pb.container.find('.photo-browser-slide');\n                pb.captionsContainer = pb.container.find('.photo-browser-captions');\n                pb.captions = pb.container.find('.photo-browser-caption');\n                \n                var sliderSettings = {\n                    nextButton: pb.params.nextButton || '.photo-browser-next',\n                    prevButton: pb.params.prevButton || '.photo-browser-prev',\n                    indexButton: pb.params.indexButton,\n                    initialSlide: index,\n                    spaceBetween: pb.params.spaceBetween,\n                    speed: pb.params.speed,\n                    loop: pb.params.loop,\n                    lazyLoading: pb.params.lazyLoading,\n                    lazyLoadingInPrevNext: pb.params.lazyLoadingInPrevNext,\n                    lazyLoadingOnTransitionStart: pb.params.lazyLoadingOnTransitionStart,\n                    preloadImages: pb.params.lazyLoading ? false : true,\n                    onTap: function (swiper, e) {\n                        if (pb.params.onTap) pb.params.onTap(swiper, e);\n                    },\n                    onClick: function (swiper, e) {\n                        if (pb.params.exposition) pb.toggleExposition();\n                        if (pb.params.onClick) pb.params.onClick(swiper, e);\n                    },\n                    onDoubleTap: function (swiper, e) {\n                        pb.toggleZoom(e);\n                        if (pb.params.onDoubleTap) pb.params.onDoubleTap(swiper, e);\n                    },\n                    onTransitionStart: function (swiper) {\n                        pb.onSliderTransitionStart(swiper);\n                    },\n                    onTransitionEnd: function (swiper) {\n                        pb.onSliderTransitionEnd(swiper);  \n                    },\n                    onSlideChangeStart: pb.params.onSlideChangeStart,\n                    onSlideChangeEnd: pb.params.onSlideChangeEnd,\n                    onLazyImageLoad: function (swiper, slide, img) {\n                        if (pb.params.onLazyImageLoad) pb.params.onLazyImageLoad(pb, slide, img);\n                    },\n                    onLazyImageReady: function (swiper, slide, img) {\n                        $(slide).removeClass('photo-browser-slide-lazy');\n                        if (pb.params.onLazyImageReady) pb.params.onLazyImageReady(pb, slide, img);\n                    }\n                };\n        \n                if (pb.params.swipeToClose && pb.params.type !== 'page') {\n                    sliderSettings.onTouchStart = pb.swipeCloseTouchStart;\n                    sliderSettings.onTouchMoveOpposite = pb.swipeCloseTouchMove;\n                    sliderSettings.onTouchEnd = pb.swipeCloseTouchEnd;\n                }\n        \n                pb.swiper = app.swiper(pb.swiperContainer, sliderSettings);\n                if (index === 0) {\n                    pb.onSliderTransitionStart(pb.swiper);\n                }\n                pb.attachEvents();\n            };\n            pb.attachEvents = function (detach) {\n                var action = detach ? 'off' : 'on';\n                // Slide between photos\n        \n                if (pb.params.zoom) {\n                    var target = pb.params.loop ? pb.swiper.slides : pb.slides;\n                    // Scale image\n                    target[action]('gesturestart', pb.onSlideGestureStart);\n                    target[action]('gesturechange', pb.onSlideGestureChange);\n                    target[action]('gestureend', pb.onSlideGestureEnd);\n        \n                    // Move image\n                    target[action](app.touchEvents.start, pb.onSlideTouchStart);\n                    target[action](app.touchEvents.move, pb.onSlideTouchMove);\n                    target[action](app.touchEvents.end, pb.onSlideTouchEnd);\n                }\n                pb.container.find('.photo-browser-close-link')[action]('click', pb.close);\n            };\n        \n            var isTouched, isMoved, touchesStart = {}, touchesCurrent = {}, touchStartTime, isScrolling, animating = false, currentTranslate;\n            var allowClick = true;\n        \n            // Expose\n            pb.exposed = false;\n            pb.toggleExposition = function () {\n                if (pb.container) pb.container.toggleClass('photo-browser-exposed');\n                if (pb.params.expositionHideCaptions) pb.captionsContainer.toggleClass('photo-browser-captions-exposed');\n                pb.exposed = !pb.exposed;\n            };\n            pb.enableExposition = function () {\n                if (pb.container) pb.container.addClass('photo-browser-exposed');\n                if (pb.params.expositionHideCaptions) pb.captionsContainer.addClass('photo-browser-captions-exposed');\n                pb.exposed = true;\n            };\n            pb.disableExposition = function () {\n                if (pb.container) pb.container.removeClass('photo-browser-exposed');\n                if (pb.params.expositionHideCaptions) pb.captionsContainer.removeClass('photo-browser-captions-exposed');\n                pb.exposed = false;\n            };\n            \n            // Gestures\n            var gestureSlide, gestureImg, gestureImgWrap, scale = 1, currentScale = 1, isScaling = false;\n            pb.onSlideGestureStart = function (e) {\n                if (!gestureSlide || !gestureSlide.length) {\n                    gestureSlide = $(this);\n                    if (gestureSlide.length === 0) gestureSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n                    gestureImg = gestureSlide.find('img, svg, canvas');\n                    gestureImgWrap = gestureImg.parent('.photo-browser-zoom-container');\n                    if (gestureImgWrap.length === 0) {\n                        gestureImg = undefined;\n                        return;\n                    }\n                }\n                gestureImg.transition(0);\n                isScaling = true;\n            };\n            pb.onSlideGestureChange = function (e) {\n                if (!gestureImg || gestureImg.length === 0) return;\n                scale = e.scale * currentScale;\n                if (scale > pb.params.maxZoom) {\n                    scale = pb.params.maxZoom - 1 + Math.pow((scale - pb.params.maxZoom + 1), 0.5);\n                }\n                if (scale < pb.params.minZoom) {\n                    scale =  pb.params.minZoom + 1 - Math.pow((pb.params.minZoom - scale + 1), 0.5);\n                }\n                gestureImg.transform('translate3d(0,0,0) scale(' + scale + ')');\n            };\n            pb.onSlideGestureEnd = function (e) {\n                if (!gestureImg || gestureImg.length === 0) return;\n                scale = Math.max(Math.min(scale, pb.params.maxZoom), pb.params.minZoom);\n                gestureImg.transition(pb.params.speed).transform('translate3d(0,0,0) scale(' + scale + ')');\n                currentScale = scale;\n                isScaling = false;\n                if (scale === 1) gestureSlide = undefined;\n            };\n            pb.toggleZoom = function (e) {\n                if (!gestureSlide) {\n                    gestureSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n                    gestureImg = gestureSlide.find('img, svg, canvas');\n                    gestureImgWrap = gestureImg.parent('.photo-browser-zoom-container');\n                }\n                if (!gestureImg || gestureImg.length === 0) return;\n                \n                var touchX, touchY, offsetX, offsetY, diffX, diffY, translateX, translateY, imageWidth, imageHeight, scaledWidth, scaledHeight, translateMinX, translateMinY, translateMaxX, translateMaxY;\n        \n                if (typeof imageTouchesStart.x === 'undefined' && e) {\n                    touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n                    touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n                }\n                else {\n                    touchX = imageTouchesStart.x;\n                    touchY = imageTouchesStart.y;\n                }\n                \n                if (scale && scale !== 1) {\n                    // Zoom Out\n                    scale = currentScale = 1;\n                    gestureImgWrap.transition(300).transform('translate3d(0,0,0)');\n                    gestureImg.transition(300).transform('translate3d(0,0,0) scale(1)');\n                    gestureSlide = undefined;\n                }\n                else {\n                    // Zoom In\n                    scale = currentScale = pb.params.maxZoom;\n                    if (e) {\n                        offsetX = pb.container.offset().left;\n                        offsetY = pb.container.offset().top;\n                        diffX = offsetX + pb.container[0].offsetWidth/2 - touchX;\n                        diffY = offsetY + pb.container[0].offsetHeight/2 - touchY;\n        \n                        imageWidth = gestureImg[0].offsetWidth;\n                        imageHeight = gestureImg[0].offsetHeight;\n                        scaledWidth = imageWidth * scale;\n                        scaledHeight = imageHeight * scale;\n        \n                        translateMinX = Math.min((pb.swiper.width / 2 - scaledWidth / 2), 0);\n                        translateMinY = Math.min((pb.swiper.height / 2 - scaledHeight / 2), 0);\n                        translateMaxX = -translateMinX;\n                        translateMaxY = -translateMinY;\n        \n                        translateX = diffX * scale;\n                        translateY = diffY * scale;\n                        \n                        if (translateX < translateMinX) {\n                            translateX =  translateMinX;\n                        }\n                        if (translateX > translateMaxX) {\n                            translateX = translateMaxX;\n                        }\n                        \n                        if (translateY < translateMinY) {\n                            translateY =  translateMinY;\n                        }\n                        if (translateY > translateMaxY) {\n                            translateY = translateMaxY;\n                        }\n                    }\n                    else {\n                        translateX = 0;\n                        translateY = 0;\n                    }\n                    gestureImgWrap.transition(300).transform('translate3d(' + translateX + 'px, ' + translateY + 'px,0)');\n                    gestureImg.transition(300).transform('translate3d(0,0,0) scale(' + scale + ')');\n                }\n            };\n        \n            var imageIsTouched, imageIsMoved, imageCurrentX, imageCurrentY, imageMinX, imageMinY, imageMaxX, imageMaxY, imageWidth, imageHeight, imageTouchesStart = {}, imageTouchesCurrent = {}, imageStartX, imageStartY, velocityPrevPositionX, velocityPrevTime, velocityX, velocityPrevPositionY, velocityY;\n        \n            pb.onSlideTouchStart = function (e) {\n                if (!gestureImg || gestureImg.length === 0) return;\n                if (imageIsTouched) return;\n                if (app.device.os === 'android') e.preventDefault();\n                imageIsTouched = true;\n                imageTouchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                imageTouchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n            };\n            pb.onSlideTouchMove = function (e) {\n                if (!gestureImg || gestureImg.length === 0) return;\n                pb.swiper.allowClick = false;\n                if (!imageIsTouched || !gestureSlide) return;\n        \n                if (!imageIsMoved) {\n                    imageWidth = gestureImg[0].offsetWidth;\n                    imageHeight = gestureImg[0].offsetHeight;\n                    imageStartX = $.getTranslate(gestureImgWrap[0], 'x') || 0;\n                    imageStartY = $.getTranslate(gestureImgWrap[0], 'y') || 0;\n                    gestureImgWrap.transition(0);\n                }\n                // Define if we need image drag\n                var scaledWidth = imageWidth * scale;\n                var scaledHeight = imageHeight * scale;\n        \n                if (scaledWidth < pb.swiper.width && scaledHeight < pb.swiper.height) return;\n        \n                imageMinX = Math.min((pb.swiper.width / 2 - scaledWidth / 2), 0);\n                imageMaxX = -imageMinX;\n                imageMinY = Math.min((pb.swiper.height / 2 - scaledHeight / 2), 0);\n                imageMaxY = -imageMinY;\n                \n                imageTouchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                imageTouchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n        \n                if (!imageIsMoved && !isScaling) {\n                    if (\n                        (Math.floor(imageMinX) === Math.floor(imageStartX) && imageTouchesCurrent.x < imageTouchesStart.x) ||\n                        (Math.floor(imageMaxX) === Math.floor(imageStartX) && imageTouchesCurrent.x > imageTouchesStart.x)\n                        ) {\n                        imageIsTouched = false;\n                        return;\n                    }\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                imageIsMoved = true;\n                imageCurrentX = imageTouchesCurrent.x - imageTouchesStart.x + imageStartX;\n                imageCurrentY = imageTouchesCurrent.y - imageTouchesStart.y + imageStartY;\n                \n                if (imageCurrentX < imageMinX) {\n                    imageCurrentX =  imageMinX + 1 - Math.pow((imageMinX - imageCurrentX + 1), 0.8);\n                }\n                if (imageCurrentX > imageMaxX) {\n                    imageCurrentX = imageMaxX - 1 + Math.pow((imageCurrentX - imageMaxX + 1), 0.8);\n                }\n                \n                if (imageCurrentY < imageMinY) {\n                    imageCurrentY =  imageMinY + 1 - Math.pow((imageMinY - imageCurrentY + 1), 0.8);\n                }\n                if (imageCurrentY > imageMaxY) {\n                    imageCurrentY = imageMaxY - 1 + Math.pow((imageCurrentY - imageMaxY + 1), 0.8);\n                }\n        \n                //Velocity\n                if (!velocityPrevPositionX) velocityPrevPositionX = imageTouchesCurrent.x;\n                if (!velocityPrevPositionY) velocityPrevPositionY = imageTouchesCurrent.y;\n                if (!velocityPrevTime) velocityPrevTime = Date.now();\n                velocityX = (imageTouchesCurrent.x - velocityPrevPositionX) / (Date.now() - velocityPrevTime) / 2;\n                velocityY = (imageTouchesCurrent.y - velocityPrevPositionY) / (Date.now() - velocityPrevTime) / 2;\n                if (Math.abs(imageTouchesCurrent.x - velocityPrevPositionX) < 2) velocityX = 0;\n                if (Math.abs(imageTouchesCurrent.y - velocityPrevPositionY) < 2) velocityY = 0;\n                velocityPrevPositionX = imageTouchesCurrent.x;\n                velocityPrevPositionY = imageTouchesCurrent.y;\n                velocityPrevTime = Date.now();\n        \n                gestureImgWrap.transform('translate3d(' + imageCurrentX + 'px, ' + imageCurrentY + 'px,0)');\n            };\n            pb.onSlideTouchEnd = function (e) {\n                if (!gestureImg || gestureImg.length === 0) return;\n                if (!imageIsTouched || !imageIsMoved) {\n                    imageIsTouched = false;\n                    imageIsMoved = false;\n                    return;\n                }\n                imageIsTouched = false;\n                imageIsMoved = false;\n                var momentumDurationX = 300;\n                var momentumDurationY = 300;\n                var momentumDistanceX = velocityX * momentumDurationX;\n                var newPositionX = imageCurrentX + momentumDistanceX;\n                var momentumDistanceY = velocityY * momentumDurationY;\n                var newPositionY = imageCurrentY + momentumDistanceY;\n        \n                //Fix duration\n                if (velocityX !== 0) momentumDurationX = Math.abs((newPositionX - imageCurrentX) / velocityX);\n                if (velocityY !== 0) momentumDurationY = Math.abs((newPositionY - imageCurrentY) / velocityY);\n                var momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n        \n                imageCurrentX = newPositionX;\n                imageCurrentY = newPositionY;\n        \n                // Define if we need image drag\n                var scaledWidth = imageWidth * scale;\n                var scaledHeight = imageHeight * scale;\n                imageMinX = Math.min((pb.swiper.width / 2 - scaledWidth / 2), 0);\n                imageMaxX = -imageMinX;\n                imageMinY = Math.min((pb.swiper.height / 2 - scaledHeight / 2), 0);\n                imageMaxY = -imageMinY;\n                imageCurrentX = Math.max(Math.min(imageCurrentX, imageMaxX), imageMinX);\n                imageCurrentY = Math.max(Math.min(imageCurrentY, imageMaxY), imageMinY);\n        \n                gestureImgWrap.transition(momentumDuration).transform('translate3d(' + imageCurrentX + 'px, ' + imageCurrentY + 'px,0)');\n            };\n        \n            // Swipe Up To Close\n            var swipeToCloseIsTouched = false;\n            var allowSwipeToClose = true;\n            var swipeToCloseDiff, swipeToCloseStart, swipeToCloseCurrent, swipeToCloseStarted = false, swipeToCloseActiveSlide, swipeToCloseTimeStart;\n            pb.swipeCloseTouchStart = function (swiper, e) {\n                if (!allowSwipeToClose) return;\n                swipeToCloseIsTouched = true;\n            };\n            pb.swipeCloseTouchMove = function (swiper, e) {\n                if (!swipeToCloseIsTouched) return;\n                if (!swipeToCloseStarted) {\n                    swipeToCloseStarted = true;\n                    swipeToCloseStart = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                    swipeToCloseActiveSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n                    swipeToCloseTimeStart = (new Date()).getTime();\n                }\n                e.preventDefault();\n                swipeToCloseCurrent = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                swipeToCloseDiff = swipeToCloseStart - swipeToCloseCurrent;\n                var opacity = 1 - Math.abs(swipeToCloseDiff) / 300;\n                swipeToCloseActiveSlide.transform('translate3d(0,' + (-swipeToCloseDiff) + 'px,0)');\n                pb.swiper.container.css('opacity', opacity).transition(0);\n            };\n            pb.swipeCloseTouchEnd = function (swiper, e) {\n                swipeToCloseIsTouched = false;\n                if (!swipeToCloseStarted) {\n                    swipeToCloseStarted = false;\n                    return;\n                }\n                swipeToCloseStarted = false;\n                allowSwipeToClose = false;\n                var diff = Math.abs(swipeToCloseDiff);\n                var timeDiff = (new Date()).getTime() - swipeToCloseTimeStart;\n                if ((timeDiff < 300 && diff > 20) || (timeDiff >= 300 && diff > 100)) {\n                    setTimeout(function () {\n                        if (pb.params.type === 'standalone') {\n                            pb.close();\n                        }\n                        if (pb.params.type === 'popup') {\n                            app.closeModal(pb.popup);\n                        }\n                        if (pb.params.onSwipeToClose) {\n                            pb.params.onSwipeToClose(pb);\n                        }\n                        allowSwipeToClose = true;\n                    }, 0);\n                    return;\n                }\n                if (diff !== 0) {\n                    swipeToCloseActiveSlide.addClass('transitioning').transitionEnd(function () {\n                        allowSwipeToClose = true;\n                        swipeToCloseActiveSlide.removeClass('transitioning');\n                    });\n                }\n                else {\n                    allowSwipeToClose = true;\n                }\n                pb.swiper.container.css('opacity', '').transition('');\n                swipeToCloseActiveSlide.transform('');\n            };\n        \n            return pb;\n        };\n        \n        app.photoBrowser = function (params) {\n            return new PhotoBrowser(params);\n        };\n        \n\n        /*======================================================\n        ************   Picker   ************\n        ======================================================*/\n        var Picker = function (params) {\n            var p = this;\n            var defaults = {\n                updateValuesOnMomentum: false,\n                updateValuesOnTouchmove: true,\n                rotateEffect: false,\n                momentumRatio: 7,\n                freeMode: false,\n                // Common settings\n                closeByOutsideClick: true,\n                scrollToInput: true,\n                inputReadOnly: true,\n                convertToPopover: true,\n                onlyInPopover: false,\n                toolbar: true,\n                toolbarCloseText: 'Done',\n                toolbarTemplate: \n                    '<div class=\"toolbar\">' +\n                        '<div class=\"toolbar-inner\">' +\n                            '<div class=\"left\"></div>' +\n                            '<div class=\"right\">' +\n                                '<a href=\"#\" class=\"link close-picker\">{{closeText}}</a>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined') {\n                    params[def] = defaults[def];\n                }\n            }\n            p.params = params;\n            p.cols = [];\n            p.initialized = false;\n            \n            // Inline flag\n            p.inline = p.params.container ? true : false;\n        \n            // 3D Transforms origin bug, only on safari\n            var originBug = app.device.ios || (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') < 0) && !app.device.android;\n        \n            // Should be converted to popover\n            function isPopover() {\n                var toPopover = false;\n                if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n                if (!p.inline && p.params.input) {\n                    if (p.params.onlyInPopover) toPopover = true;\n                    else {\n                        if (app.device.ios) {\n                            toPopover = app.device.ipad ? true : false;\n                        }\n                        else {\n                            if ($(window).width() >= 768) toPopover = true;\n                        }\n                    }\n                } \n                return toPopover; \n            }\n            function inPopover() {\n                if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;\n                else return false;\n            }\n        \n            // Value\n            p.setValue = function (arrValues, transition) {\n                var valueIndex = 0;\n                if (p.cols.length === 0) {\n                    p.value = arrValues;\n                    p.updateValue(arrValues);\n                    return;\n                }\n                for (var i = 0; i < p.cols.length; i++) {\n                    if (p.cols[i] && !p.cols[i].divider) {\n                        p.cols[i].setValue(arrValues[valueIndex], transition);\n                        valueIndex++;\n                    }\n                }\n            };\n            p.updateValue = function (forceValues) {\n                var newValue = forceValues || [];\n                var newDisplayValue = [];\n                for (var i = 0; i < p.cols.length; i++) {\n                    if (!p.cols[i].divider) {\n                        newValue.push(p.cols[i].value);\n                        newDisplayValue.push(p.cols[i].displayValue);\n                    }\n                }\n                if (newValue.indexOf(undefined) >= 0) {\n                    return;\n                }\n                p.value = newValue;\n                p.displayValue = newDisplayValue;\n                if (p.params.onChange) {\n                    p.params.onChange(p, p.value, p.displayValue);\n                }\n                if (p.input && p.input.length > 0) {\n                    $(p.input).val(p.params.formatValue ? p.params.formatValue(p, p.value, p.displayValue) : p.value.join(' '));\n                    $(p.input).trigger('change');\n                }\n            };\n        \n            // Columns Handlers\n            p.initPickerCol = function (colElement, updateItems) {\n                var colContainer = $(colElement);\n                var colIndex = colContainer.index();\n                var col = p.cols[colIndex];\n                if (col.divider) return;\n                col.container = colContainer;\n                col.wrapper = col.container.find('.picker-items-col-wrapper');\n                col.items = col.wrapper.find('.picker-item');\n                \n                var i, j;\n                var wrapperHeight, itemHeight, itemsHeight, minTranslate, maxTranslate;\n                col.replaceValues = function (values, displayValues) {\n                    col.destroyEvents();\n                    col.values = values;\n                    col.displayValues = displayValues;\n                    var newItemsHTML = p.columnHTML(col, true);\n                    col.wrapper.html(newItemsHTML);\n                    col.items = col.wrapper.find('.picker-item');\n                    col.calcSize();\n                    col.setValue(col.values[0], 0, true);\n                    col.initEvents();\n                };\n                col.calcSize = function () {\n                    if (p.params.rotateEffect) {\n                        col.container.removeClass('picker-items-col-absolute');\n                        if (!col.width) col.container.css({width:''});\n                    }\n                    var colWidth, colHeight;\n                    colWidth = 0;\n                    colHeight = col.container[0].offsetHeight;\n                    wrapperHeight = col.wrapper[0].offsetHeight;\n                    itemHeight = col.items[0].offsetHeight;\n                    itemsHeight = itemHeight * col.items.length;\n                    minTranslate = colHeight / 2 - itemsHeight + itemHeight / 2;\n                    maxTranslate = colHeight / 2 - itemHeight / 2;    \n                    if (col.width) {\n                        colWidth = col.width;\n                        if (parseInt(colWidth, 10) === colWidth) colWidth = colWidth + 'px';\n                        col.container.css({width: colWidth});\n                    }\n                    if (p.params.rotateEffect) {\n                        if (!col.width) {\n                            col.items.each(function () {\n                                var item = $(this);\n                                item.css({width:'auto'});\n                                colWidth = Math.max(colWidth, item[0].offsetWidth);\n                                item.css({width:''});\n                            });\n                            col.container.css({width: (colWidth + 2) + 'px'});\n                        }\n                        col.container.addClass('picker-items-col-absolute');\n                    }\n                };\n                col.calcSize();\n                \n                col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)').transition(0);\n        \n        \n                var activeIndex = 0;\n                var animationFrameId;\n        \n                // Set Value Function\n                col.setValue = function (newValue, transition, valueCallbacks) {\n                    if (typeof transition === 'undefined') transition = '';\n                    var newActiveIndex = col.wrapper.find('.picker-item[data-picker-value=\"' + newValue + '\"]').index();\n                    if(typeof newActiveIndex === 'undefined' || newActiveIndex === -1) {\n                        return;\n                    }\n                    var newTranslate = -newActiveIndex * itemHeight + maxTranslate;\n                    // Update wrapper\n                    col.wrapper.transition(transition);\n                    col.wrapper.transform('translate3d(0,' + (newTranslate) + 'px,0)');\n                        \n                    // Watch items\n                    if (p.params.updateValuesOnMomentum && col.activeIndex && col.activeIndex !== newActiveIndex ) {\n                        $.cancelAnimationFrame(animationFrameId);\n                        col.wrapper.transitionEnd(function(){\n                            $.cancelAnimationFrame(animationFrameId);\n                        });\n                        updateDuringScroll();\n                    }\n        \n                    // Update items\n                    col.updateItems(newActiveIndex, newTranslate, transition, valueCallbacks);\n                };\n        \n                col.updateItems = function (activeIndex, translate, transition, valueCallbacks) {\n                    if (typeof translate === 'undefined') {\n                        translate = $.getTranslate(col.wrapper[0], 'y');\n                    }\n                    if(typeof activeIndex === 'undefined') activeIndex = -Math.round((translate - maxTranslate)/itemHeight);\n                    if (activeIndex < 0) activeIndex = 0;\n                    if (activeIndex >= col.items.length) activeIndex = col.items.length - 1;\n                    var previousActiveIndex = col.activeIndex;\n                    col.activeIndex = activeIndex;\n                    col.wrapper.find('.picker-selected').removeClass('picker-selected');\n        \n                    col.items.transition(transition);\n                    \n                    var selectedItem = col.items.eq(activeIndex).addClass('picker-selected').transform('');\n                        \n                    // Set 3D rotate effect\n                    if (p.params.rotateEffect) {\n                        var percentage = (translate - (Math.floor((translate - maxTranslate)/itemHeight) * itemHeight + maxTranslate)) / itemHeight;\n                        \n                        col.items.each(function () {\n                            var item = $(this);\n                            var itemOffsetTop = item.index() * itemHeight;\n                            var translateOffset = maxTranslate - translate;\n                            var itemOffset = itemOffsetTop - translateOffset;\n                            var percentage = itemOffset / itemHeight;\n        \n                            var itemsFit = Math.ceil(col.height / itemHeight / 2) + 1;\n                            \n                            var angle = (-18*percentage);\n                            if (angle > 180) angle = 180;\n                            if (angle < -180) angle = -180;\n                            // Far class\n                            if (Math.abs(percentage) > itemsFit) item.addClass('picker-item-far');\n                            else item.removeClass('picker-item-far');\n                            // Set transform\n                            item.transform('translate3d(0, ' + (-translate + maxTranslate) + 'px, ' + (originBug ? -110 : 0) + 'px) rotateX(' + angle + 'deg)');\n                        });\n                    }\n        \n                    if (valueCallbacks || typeof valueCallbacks === 'undefined') {\n                        // Update values\n                        col.value = selectedItem.attr('data-picker-value');\n                        col.displayValue = col.displayValues ? col.displayValues[activeIndex] : col.value;\n                        // On change callback\n                        if (previousActiveIndex !== activeIndex) {\n                            if (col.onChange) {\n                                col.onChange(p, col.value, col.displayValue);\n                            }\n                            p.updateValue();\n                        }\n                    }\n                };\n        \n                function updateDuringScroll() {\n                    animationFrameId = $.requestAnimationFrame(function () {\n                        col.updateItems(undefined, undefined, 0);\n                        updateDuringScroll();\n                    });\n                }\n        \n                // Update items on init\n                if (updateItems) col.updateItems(0, maxTranslate, 0);\n        \n                var allowItemClick = true;\n                var isTouched, isMoved, touchStartY, touchCurrentY, touchStartTime, touchEndTime, startTranslate, returnTo, currentTranslate, prevTranslate, velocityTranslate, velocityTime;\n                function handleTouchStart (e) {\n                    if (isMoved || isTouched) return;\n                    e.preventDefault();\n                    isTouched = true;\n                    touchStartY = touchCurrentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                    touchStartTime = (new Date()).getTime();\n                    \n                    allowItemClick = true;\n                    startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n                }\n                function handleTouchMove (e) {\n                    if (!isTouched) return;\n                    e.preventDefault();\n                    allowItemClick = false;\n                    touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                    if (!isMoved) {\n                        // First move\n                        $.cancelAnimationFrame(animationFrameId);\n                        isMoved = true;\n                        startTranslate = currentTranslate = $.getTranslate(col.wrapper[0], 'y');\n                        col.wrapper.transition(0);\n                    }\n                    e.preventDefault();\n        \n                    var diff = touchCurrentY - touchStartY;\n                    currentTranslate = startTranslate + diff;\n                    returnTo = undefined;\n        \n                    // Normalize translate\n                    if (currentTranslate < minTranslate) {\n                        currentTranslate = minTranslate - Math.pow(minTranslate - currentTranslate, 0.8);\n                        returnTo = 'min';\n                    }\n                    if (currentTranslate > maxTranslate) {\n                        currentTranslate = maxTranslate + Math.pow(currentTranslate - maxTranslate, 0.8);\n                        returnTo = 'max';\n                    }\n                    // Transform wrapper\n                    col.wrapper.transform('translate3d(0,' + currentTranslate + 'px,0)');\n        \n                    // Update items\n                    col.updateItems(undefined, currentTranslate, 0, p.params.updateValuesOnTouchmove);\n                    \n                    // Calc velocity\n                    velocityTranslate = currentTranslate - prevTranslate || currentTranslate;\n                    velocityTime = (new Date()).getTime();\n                    prevTranslate = currentTranslate;\n                }\n                function handleTouchEnd (e) {\n                    if (!isTouched || !isMoved) {\n                        isTouched = isMoved = false;\n                        return;\n                    }\n                    isTouched = isMoved = false;\n                    col.wrapper.transition('');\n                    if (returnTo) {\n                        if (returnTo === 'min') {\n                            col.wrapper.transform('translate3d(0,' + minTranslate + 'px,0)');\n                        }\n                        else col.wrapper.transform('translate3d(0,' + maxTranslate + 'px,0)');\n                    }\n                    touchEndTime = new Date().getTime();\n                    var velocity, newTranslate;\n                    if (touchEndTime - touchStartTime > 300) {\n                        newTranslate = currentTranslate;\n                    }\n                    else {\n                        velocity = Math.abs(velocityTranslate / (touchEndTime - velocityTime));\n                        newTranslate = currentTranslate + velocityTranslate * p.params.momentumRatio;\n                    }\n        \n                    newTranslate = Math.max(Math.min(newTranslate, maxTranslate), minTranslate);\n        \n                    // Active Index\n                    var activeIndex = -Math.floor((newTranslate - maxTranslate)/itemHeight);\n        \n                    // Normalize translate\n                    if (!p.params.freeMode) newTranslate = -activeIndex * itemHeight + maxTranslate;\n        \n                    // Transform wrapper\n                    col.wrapper.transform('translate3d(0,' + (parseInt(newTranslate,10)) + 'px,0)');\n        \n                    // Update items\n                    col.updateItems(activeIndex, newTranslate, '', true);\n        \n                    // Watch items\n                    if (p.params.updateValuesOnMomentum) {\n                        updateDuringScroll();\n                        col.wrapper.transitionEnd(function(){\n                            $.cancelAnimationFrame(animationFrameId);\n                        });\n                    }\n        \n                    // Allow click\n                    setTimeout(function () {\n                        allowItemClick = true;\n                    }, 100);\n                }\n        \n                function handleClick(e) {\n                    if (!allowItemClick) return;\n                    $.cancelAnimationFrame(animationFrameId);\n                    /*jshint validthis:true */\n                    var value = $(this).attr('data-picker-value');\n                    col.setValue(value);\n                }\n        \n                col.initEvents = function (detach) {\n                    var method = detach ? 'off' : 'on';\n                    col.container[method](app.touchEvents.start, handleTouchStart);\n                    col.container[method](app.touchEvents.move, handleTouchMove);\n                    col.container[method](app.touchEvents.end, handleTouchEnd);\n                    col.items[method]('click', handleClick);\n                };\n                col.destroyEvents = function () {\n                    col.initEvents(true);\n                };\n        \n                col.container[0].f7DestroyPickerCol = function () {\n                    col.destroyEvents();\n                };\n        \n                col.initEvents();\n        \n            };\n            p.destroyPickerCol = function (colContainer) {\n                colContainer = $(colContainer);\n                if ('f7DestroyPickerCol' in colContainer[0]) colContainer[0].f7DestroyPickerCol();\n            };\n            // Resize cols\n            function resizeCols() {\n                if (!p.opened) return;\n                for (var i = 0; i < p.cols.length; i++) {\n                    if (!p.cols[i].divider) {\n                        p.cols[i].calcSize();\n                        p.cols[i].setValue(p.cols[i].value, 0, false);\n                    }\n                }\n            }\n            $(window).on('resize', resizeCols);\n        \n            // HTML Layout\n            p.columnHTML = function (col, onlyItems) {\n                var columnItemsHTML = '';\n                var columnHTML = '';\n                if (col.divider) {\n                    columnHTML += '<div class=\"picker-items-col picker-items-col-divider ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\">' + col.content + '</div>';\n                }\n                else {\n                    for (var j = 0; j < col.values.length; j++) {\n                        columnItemsHTML += '<div class=\"picker-item\" data-picker-value=\"' + col.values[j] + '\">' + (col.displayValues ? col.displayValues[j] : col.values[j]) + '</div>';\n                    }\n                    columnHTML += '<div class=\"picker-items-col ' + (col.textAlign ? 'picker-items-col-' + col.textAlign : '') + ' ' + (col.cssClass || '') + '\"><div class=\"picker-items-col-wrapper\">' + columnItemsHTML + '</div></div>';\n                }\n                return onlyItems ? columnItemsHTML : columnHTML;\n            };\n            p.layout = function () {\n                var pickerHTML = '';\n                var pickerClass = '';\n                var i;\n                p.cols = [];\n                var colsHTML = '';\n                for (i = 0; i < p.params.cols.length; i++) {\n                    var col = p.params.cols[i];\n                    colsHTML += p.columnHTML(p.params.cols[i]);\n                    p.cols.push(col);\n                }\n                pickerClass = 'picker-modal picker-columns ' + (p.params.cssClass || '') + (p.params.rotateEffect ? ' picker-3d' : '');\n                pickerHTML =\n                    '<div class=\"' + (pickerClass) + '\">' +\n                        (p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '') +\n                        '<div class=\"picker-modal-inner picker-items\">' +\n                            colsHTML +\n                            '<div class=\"picker-center-highlight\"></div>' +\n                        '</div>' +\n                    '</div>';\n                    \n                p.pickerHTML = pickerHTML;    \n            };\n        \n            // Input Events\n            function openOnInput(e) {\n                e.preventDefault();\n                if (p.opened) return;\n                p.open();\n                if (p.params.scrollToInput && !isPopover()) {\n                    var pageContent = p.input.parents('.page-content');\n                    if (pageContent.length === 0) return;\n        \n                    var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                        paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                        pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                        pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                        newPaddingBottom;\n                    var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                    if (inputTop > pageHeight) {\n                        var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                        if (scrollTop + pageHeight > pageScrollHeight) {\n                            newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                            if (pageHeight === pageScrollHeight) {\n                                newPaddingBottom = p.container.height();\n                            }\n                            pageContent.css({'padding-bottom': (newPaddingBottom) + 'px'});\n                        }\n                        pageContent.scrollTop(scrollTop, 300);\n                    }\n                }\n            }\n            function closeOnHTMLClick(e) {\n                if (inPopover()) return;\n                if (p.input && p.input.length > 0) {\n                    if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n                }\n                else {\n                    if ($(e.target).parents('.picker-modal').length === 0) p.close();   \n                }\n            }\n        \n            if (p.params.input) {\n                p.input = $(p.params.input);\n                if (p.input.length > 0) {\n                    if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                    if (!p.inline) {\n                        p.input.on('click', openOnInput);    \n                    }\n                    if (p.params.inputReadOnly) {\n                        p.input.on('focus mousedown', function (e) {\n                            e.preventDefault();\n                        });\n                    }\n                }\n                    \n            }\n            \n            if (!p.inline && p.params.closeByOutsideClick) $('html').on('click', closeOnHTMLClick);\n        \n            // Open\n            function onPickerClose() {\n                p.opened = false;\n                if (p.input && p.input.length > 0) {\n                    p.input.parents('.page-content').css({'padding-bottom': ''});\n                    if (app.params.material) p.input.trigger('blur');\n                }\n                if (p.params.onClose) p.params.onClose(p);\n        \n                // Destroy events\n                p.container.find('.picker-items-col').each(function () {\n                    p.destroyPickerCol(this);\n                });\n            }\n        \n            p.opened = false;\n            p.open = function () {\n                var toPopover = isPopover();\n        \n                if (!p.opened) {\n        \n                    // Layout\n                    p.layout();\n        \n                    // Append\n                    if (toPopover) {\n                        p.pickerHTML = '<div class=\"popover popover-picker-columns\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                        p.popover = app.popover(p.pickerHTML, p.params.input, true);\n                        p.container = $(p.popover).find('.picker-modal');\n                        $(p.popover).on('close', function () {\n                            onPickerClose();\n                        });\n                    }\n                    else if (p.inline) {\n                        p.container = $(p.pickerHTML);\n                        p.container.addClass('picker-modal-inline');\n                        $(p.params.container).append(p.container);\n                    }\n                    else {\n                        p.container = $(app.pickerModal(p.pickerHTML));\n                        $(p.container)\n                        .on('close', function () {\n                            onPickerClose();\n                        });\n                    }\n        \n                    // Store picker instance\n                    p.container[0].f7Picker = p;\n        \n                    // Init Events\n                    p.container.find('.picker-items-col').each(function () {\n                        var updateItems = true;\n                        if ((!p.initialized && p.params.value) || (p.initialized && p.value)) updateItems = false;\n                        p.initPickerCol(this, updateItems);\n                    });\n                    \n                    // Set value\n                    if (!p.initialized) {\n                        if (p.value) p.setValue(p.value, 0);\n                        else if (p.params.value) {\n                            p.setValue(p.params.value, 0);\n                        }\n                    }\n                    else {\n                        if (p.value) p.setValue(p.value, 0);\n                    }\n        \n                    // Material Focus\n                    if (p.input && p.input.length > 0 && app.params.material) {\n                        p.input.trigger('focus');\n                    }\n                }\n        \n                // Set flag\n                p.opened = true;\n                p.initialized = true;\n        \n                if (p.params.onOpen) p.params.onOpen(p);\n            };\n        \n            // Close\n            p.close = function () {\n                if (!p.opened || p.inline) return;\n                if (inPopover()) {\n                    app.closeModal(p.popover);\n                    return;\n                }\n                else {\n                    app.closeModal(p.container);\n                    return;\n                }\n            };\n        \n            // Destroy\n            p.destroy = function () {\n                p.close();\n                if (p.params.input && p.input.length > 0) {\n                    p.input.off('click focus', openOnInput);\n                }\n                $('html').off('click', closeOnHTMLClick);\n                $(window).off('resize', resizeCols);\n            };\n        \n            if (p.inline) {\n                p.open();\n            }\n            else {\n                if (!p.initialized && p.params.value) p.setValue(p.params.value);\n            }\n        \n            return p;\n        };\n        app.picker = function (params) {\n            return new Picker(params);\n        };\n\n        /*======================================================\n        ************   Calendar   ************\n        ======================================================*/\n        var Calendar = function (params) {\n            var p = this;\n            var defaults = {\n                monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August' , 'September' , 'October', 'November', 'December'],\n                monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n                dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n                dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n                firstDay: 1, // First day of the week, Monday\n                weekendDays: [0, 6], // Sunday and Saturday\n                multiple: false,\n                dateFormat: 'yyyy-mm-dd',\n                direction: 'horizontal', // or 'vertical'\n                minDate: null,\n                maxDate: null,\n                disabled: null, // dates range of disabled days\n                events: null, // dates range of days with events\n                rangesClasses: null, //array with custom classes date ranges\n                touchMove: true,\n                animate: true,\n                closeOnSelect: false,\n                monthPicker: true,\n                monthPickerTemplate: \n                    '<div class=\"picker-calendar-month-picker\">' +\n                        '<a href=\"#\" class=\"link icon-only picker-calendar-prev-month\"><i class=\"icon icon-prev\"></i></a>' +\n                        '<span class=\"current-month-value\"></span>' +\n                        '<a href=\"#\" class=\"link icon-only picker-calendar-next-month\"><i class=\"icon icon-next\"></i></a>' +\n                    '</div>',\n                yearPicker: true,\n                yearPickerTemplate: \n                    '<div class=\"picker-calendar-year-picker\">' +\n                        '<a href=\"#\" class=\"link icon-only picker-calendar-prev-year\"><i class=\"icon icon-prev\"></i></a>' +\n                        '<span class=\"current-year-value\"></span>' +\n                        '<a href=\"#\" class=\"link icon-only picker-calendar-next-year\"><i class=\"icon icon-next\"></i></a>' +\n                    '</div>',\n                weekHeader: true,\n                // Common settings\n                closeByOutsideClick: true,\n                scrollToInput: true,\n                inputReadOnly: true,\n                convertToPopover: true,\n                onlyInPopover: false,\n                toolbar: true,\n                toolbarCloseText: 'Done',\n                headerPlaceholder: 'Select date',\n                header: app.params.material,\n                footer: app.params.material,\n                toolbarTemplate: \n                    '<div class=\"toolbar\">' +\n                        '<div class=\"toolbar-inner\">' +\n                            '{{monthPicker}}' +\n                            '{{yearPicker}}' +\n                        '</div>' +\n                    '</div>',\n                headerTemplate: \n                    '<div class=\"picker-header\">' +\n                        '<div class=\"picker-calendar-selected-date\">{{placeholder}}</div>' +\n                    '</div>',\n                footerTemplate: \n                    '<div class=\"picker-footer\">' +\n                        '<a href=\"#\" class=\"button close-picker\">{{closeText}}</a>' +\n                    '</div>',\n                \n                /* Callbacks\n                onMonthAdd\n                onChange\n                onOpen\n                onClose\n                onDayClick\n                onMonthYearChangeStart\n                onMonthYearChangeEnd\n                */\n            };\n            params = params || {};\n            for (var def in defaults) {\n                if (typeof params[def] === 'undefined') {\n                    params[def] = defaults[def];\n                }\n            }\n            p.params = params;\n            p.initialized = false;\n        \n            // Inline flag\n            p.inline = p.params.container ? true : false;\n        \n            // Is horizontal\n            p.isH = p.params.direction === 'horizontal';\n        \n            // RTL inverter\n            var inverter = p.isH ? (app.rtl ? -1 : 1) : 1;\n        \n            // Animating flag\n            p.animating = false;\n        \n            // Should be converted to popover\n            function isPopover() {\n                var toPopover = false;\n                if (!p.params.convertToPopover && !p.params.onlyInPopover) return toPopover;\n                if (!p.inline && p.params.input) {\n                    if (p.params.onlyInPopover) toPopover = true;\n                    else {\n                        if (app.device.ios) {\n                            toPopover = app.device.ipad ? true : false;\n                        }\n                        else {\n                            if ($(window).width() >= 768) toPopover = true;\n                        }\n                    }\n                } \n                return toPopover; \n            }\n            function inPopover() {\n                if (p.opened && p.container && p.container.length > 0 && p.container.parents('.popover').length > 0) return true;\n                else return false;\n            }\n        \n            // Format date\n            function formatDate(date) {\n                date = new Date(date);\n                var year = date.getFullYear();\n                var month = date.getMonth();\n                var month1 = month + 1;\n                var day = date.getDate();\n                var weekDay = date.getDay();\n        \n                return p.params.dateFormat\n                    .replace(/yyyy/g, year)\n                    .replace(/yy/g, (year + '').substring(2))\n                    .replace(/mm/g, month1 < 10 ? '0' + month1 : month1)\n                    .replace(/m(\\W+)/g, month1 + '$1')\n                    .replace(/MM/g, p.params.monthNames[month])\n                    .replace(/M(\\W+)/g, p.params.monthNamesShort[month] + '$1')\n                    .replace(/dd/g, day < 10 ? '0' + day : day)\n                    .replace(/d(\\W+)/g, day + '$1')\n                    .replace(/DD/g, p.params.dayNames[weekDay])\n                    .replace(/D(\\W+)/g, p.params.dayNamesShort[weekDay] + '$1');\n            }\n        \n        \n            // Value\n            p.addValue = function (value) {\n                if (p.params.multiple) {\n                    if (!p.value) p.value = [];\n                    var inValuesIndex;\n                    for (var i = 0; i < p.value.length; i++) {\n                        if (new Date(value).getTime() === new Date(p.value[i]).getTime()) {\n                            inValuesIndex = i;\n                        }\n                    }\n                    if (typeof inValuesIndex === 'undefined') {\n                        p.value.push(value);\n                    }\n                    else {\n                        p.value.splice(inValuesIndex, 1);\n                    }\n                    p.updateValue();\n                }\n                else {\n                    p.value = [value];\n                    p.updateValue();\n                }\n            };\n            p.setValue = function (arrValues) {\n                p.value = arrValues;\n                p.updateValue();\n            };\n            p.updateValue = function (onlyHeader) {\n                var i, inputValue;\n                if (p.container && p.container.length > 0) {\n                    p.wrapper.find('.picker-calendar-day-selected').removeClass('picker-calendar-day-selected');\n                    for (i = 0; i < p.value.length; i++) {\n                        var valueDate = new Date(p.value[i]);\n                        p.wrapper.find('.picker-calendar-day[data-date=\"' + valueDate.getFullYear() + '-' + valueDate.getMonth() + '-' + valueDate.getDate() + '\"]').addClass('picker-calendar-day-selected');\n                    }\n                }\n                    \n                if (p.params.onChange) {\n                    p.params.onChange(p, p.value);\n                }\n                if ((p.input && p.input.length > 0) || (app.params.material && p.params.header)) {\n                    if (p.params.formatValue) inputValue = p.params.formatValue(p, p.value);\n                    else {\n                        inputValue = [];\n                        for (i = 0; i < p.value.length; i++) {\n                            inputValue.push(formatDate(p.value[i]));\n                        }\n                        inputValue = inputValue.join(', ');\n                    } \n                    if (app.params.material && p.params.header && p.container && p.container.length > 0) {\n                        p.container.find('.picker-calendar-selected-date').text(inputValue);\n                    }\n                    if (p.input && p.input.length > 0 && !onlyHeader) {\n                        $(p.input).val(inputValue);\n                        $(p.input).trigger('change');\n                    }\n                        \n                }\n            };\n        \n            // Columns Handlers\n            p.initCalendarEvents = function () {\n                var col;\n                var allowItemClick = true;\n                var isTouched, isMoved, touchStartX, touchStartY, touchCurrentX, touchCurrentY, touchStartTime, touchEndTime, startTranslate, currentTranslate, wrapperWidth, wrapperHeight, percentage, touchesDiff, isScrolling;\n                function handleTouchStart (e) {\n                    if (isMoved || isTouched) return;\n                    // e.preventDefault();\n                    isTouched = true;\n                    touchStartX = touchCurrentY = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n                    touchStartY = touchCurrentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n                    touchStartTime = (new Date()).getTime();\n                    percentage = 0;\n                    allowItemClick = true;\n                    isScrolling = undefined;\n                    startTranslate = currentTranslate = p.monthsTranslate;\n                }\n                function handleTouchMove (e) {\n                    if (!isTouched) return;\n                    \n                    touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                    touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                    if (typeof isScrolling === 'undefined') {\n                        isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n                    }\n                    if (p.isH && isScrolling) {\n                        isTouched = false;\n                        return;\n                    }\n                    e.preventDefault();\n                    if (p.animating) {\n                        isTouched = false;\n                        return;   \n                    }\n                    allowItemClick = false;\n                    if (!isMoved) {\n                        // First move\n                        isMoved = true;\n                        wrapperWidth = p.wrapper[0].offsetWidth;\n                        wrapperHeight = p.wrapper[0].offsetHeight;\n                        p.wrapper.transition(0);\n                    }\n                    e.preventDefault();\n        \n                    touchesDiff = p.isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n                    percentage = touchesDiff/(p.isH ? wrapperWidth : wrapperHeight);\n                    currentTranslate = (p.monthsTranslate * inverter + percentage) * 100;\n        \n                    // Transform wrapper\n                    p.wrapper.transform('translate3d(' + (p.isH ? currentTranslate : 0) + '%, ' + (p.isH ? 0 : currentTranslate) + '%, 0)');\n        \n                }\n                function handleTouchEnd (e) {\n                    if (!isTouched || !isMoved) {\n                        isTouched = isMoved = false;\n                        return;\n                    }\n                    isTouched = isMoved = false;\n                    \n                    touchEndTime = new Date().getTime();\n                    if (touchEndTime - touchStartTime < 300) {\n                        if (Math.abs(touchesDiff) < 10) {\n                            p.resetMonth();\n                        }\n                        else if (touchesDiff >= 10) {\n                            if (app.rtl) p.nextMonth();\n                            else p.prevMonth();\n                        }\n                        else {\n                            if (app.rtl) p.prevMonth();\n                            else p.nextMonth();   \n                        }\n                    }\n                    else {\n                        if (percentage <= -0.5) {\n                            if (app.rtl) p.prevMonth();\n                            else p.nextMonth();\n                        }\n                        else if (percentage >= 0.5) {\n                            if (app.rtl) p.nextMonth();\n                            else p.prevMonth();\n                        }\n                        else {\n                            p.resetMonth();\n                        }\n                    }\n        \n                    // Allow click\n                    setTimeout(function () {\n                        allowItemClick = true;\n                    }, 100);\n                }\n        \n                function handleDayClick(e) {\n                    if (!allowItemClick) return;\n                    var day = $(e.target).parents('.picker-calendar-day');\n                    if (day.length === 0 && $(e.target).hasClass('picker-calendar-day')) {\n                        day = $(e.target);\n                    }\n                    if (day.length === 0) return;\n                    if (day.hasClass('picker-calendar-day-selected') && !p.params.multiple) return;\n                    if (day.hasClass('picker-calendar-day-disabled')) return;\n                    if (day.hasClass('picker-calendar-day-next')) p.nextMonth();\n                    if (day.hasClass('picker-calendar-day-prev')) p.prevMonth();\n                    var dateYear = day.attr('data-year');\n                    var dateMonth = day.attr('data-month');\n                    var dateDay = day.attr('data-day');\n                    if (p.params.onDayClick) {\n                        p.params.onDayClick(p, day[0], dateYear, dateMonth, dateDay);\n                    }\n                    p.addValue(new Date(dateYear, dateMonth, dateDay).getTime());\n                    if (p.params.closeOnSelect) p.close();\n                }\n        \n                p.container.find('.picker-calendar-prev-month').on('click', p.prevMonth);\n                p.container.find('.picker-calendar-next-month').on('click', p.nextMonth);\n                p.container.find('.picker-calendar-prev-year').on('click', p.prevYear);\n                p.container.find('.picker-calendar-next-year').on('click', p.nextYear);\n                p.wrapper.on('click', handleDayClick);\n                if (p.params.touchMove) {\n                    p.wrapper.on(app.touchEvents.start, handleTouchStart);\n                    p.wrapper.on(app.touchEvents.move, handleTouchMove);\n                    p.wrapper.on(app.touchEvents.end, handleTouchEnd);\n                }\n                    \n                p.container[0].f7DestroyCalendarEvents = function () {\n                    p.container.find('.picker-calendar-prev-month').off('click', p.prevMonth);\n                    p.container.find('.picker-calendar-next-month').off('click', p.nextMonth);\n                    p.container.find('.picker-calendar-prev-year').off('click', p.prevYear);\n                    p.container.find('.picker-calendar-next-year').off('click', p.nextYear);\n                    p.wrapper.off('click', handleDayClick);\n                    if (p.params.touchMove) {\n                        p.wrapper.off(app.touchEvents.start, handleTouchStart);\n                        p.wrapper.off(app.touchEvents.move, handleTouchMove);\n                        p.wrapper.off(app.touchEvents.end, handleTouchEnd);\n                    }\n                };\n                \n        \n            };\n            p.destroyCalendarEvents = function (colContainer) {\n                if ('f7DestroyCalendarEvents' in p.container[0]) p.container[0].f7DestroyCalendarEvents();\n            };\n        \n            // Scan Dates Range\n            p.dateInRange = function (dayDate, range) {\n                var match = false;\n                var i;\n                if (!range) return false;\n                if ($.isArray(range)) {\n                    for (i = 0; i < range.length; i ++) {\n                        if (dayDate === new Date(range[i]).getTime()) {\n                            match = true;\n                        }\n                    }\n                }\n                else if (range.from || range.to) {\n                    if (range.from && range.to) {\n                        if ((dayDate <= new Date(range.to).getTime()) && (dayDate >= new Date(range.from).getTime())) {\n                            match = true;   \n                        }\n                    }\n                    else if (range.from) {\n                        if (dayDate >= new Date(range.from).getTime()) {\n                            match = true;   \n                        }\n                    }\n                    else if (range.to) {\n                        if (dayDate <= new Date(range.to).getTime()) {\n                            match = true;   \n                        }\n                    }\n                }\n                else if (typeof range === 'function') {\n                    match = range(new Date(dayDate));\n                }\n                return match;\n            };\n            // Calendar Methods\n            p.daysInMonth = function (date) {\n                var d = new Date(date);\n                return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n            };\n            p.monthHTML = function (date, offset) {\n                date = new Date(date);\n                var year = date.getFullYear(),\n                    month = date.getMonth(),\n                    day = date.getDate();\n                if (offset === 'next') {\n                    if (month === 11) date = new Date(year + 1, 0);\n                    else date = new Date(year, month + 1, 1);\n                }\n                if (offset === 'prev') {\n                    if (month === 0) date = new Date(year - 1, 11);\n                    else date = new Date(year, month - 1, 1);\n                }\n                if (offset === 'next' || offset === 'prev') {\n                    month = date.getMonth();\n                    year = date.getFullYear();\n                }\n                var daysInPrevMonth = p.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000),\n                    daysInMonth = p.daysInMonth(date),\n                    firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n                if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n                \n                var dayDate, currentValues = [], i, j, k,\n                    rows = 6, cols = 7,\n                    monthHTML = '',\n                    dayIndex = 0 + (p.params.firstDay - 1),    \n                    today = new Date().setHours(0,0,0,0),\n                    minDate = p.params.minDate ? new Date(p.params.minDate).getTime() : null,\n                    maxDate = p.params.maxDate ? new Date(p.params.maxDate).getTime() : null,\n                    disabled,\n                    hasEvent;\n        \n                if (p.value && p.value.length) {\n                    for (i = 0; i < p.value.length; i++) {\n                        currentValues.push(new Date(p.value[i]).setHours(0,0,0,0));\n                    }\n                }\n                    \n                for (i = 1; i <= rows; i++) {\n                    var rowHTML = '';\n                    var row = i;\n                    for (j = 1; j <= cols; j++) {\n                        var col = j;\n                        dayIndex ++;\n                        var dayNumber = dayIndex - firstDayOfMonthIndex;\n                        var weekDayIndex = (col - 1 + p.params.firstDay > 6) ? (col - 1 - 7 + p.params.firstDay) : (col - 1 + p.params.firstDay);\n                        var addClass = '';\n                        if (dayNumber < 0) {\n                            dayNumber = daysInPrevMonth + dayNumber + 1;\n                            addClass += ' picker-calendar-day-prev';\n                            dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n                        }\n                        else {\n                            dayNumber = dayNumber + 1;\n                            if (dayNumber > daysInMonth) {\n                                dayNumber = dayNumber - daysInMonth;\n                                addClass += ' picker-calendar-day-next';\n                                dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n                            }\n                            else {\n                                dayDate = new Date(year, month, dayNumber).getTime();    \n                            }\n                        }\n                        // Today\n                        if (dayDate === today) addClass += ' picker-calendar-day-today';\n                        // Selected\n                        if (currentValues.indexOf(dayDate) >= 0) addClass += ' picker-calendar-day-selected';\n                        // Weekend\n                        if (p.params.weekendDays.indexOf(weekDayIndex) >= 0) {\n                            addClass += ' picker-calendar-day-weekend';\n                        }\n                        // Has Events\n                        hasEvent = false;\n                        if (p.params.events) {\n                            if (p.dateInRange(dayDate, p.params.events)) {\n                                hasEvent = true;\n                            }\n                        }\n                        if (hasEvent) {\n                            addClass += ' picker-calendar-day-has-events';\n                        }\n                        // Custom Ranges\n                        if (p.params.rangesClasses) {\n                            for (k = 0; k < p.params.rangesClasses.length; k++) {\n                                if (p.dateInRange(dayDate, p.params.rangesClasses[k].range)) {\n                                    addClass += ' ' + p.params.rangesClasses[k].cssClass;\n                                }\n                            }\n                        }\n                        // Disabled\n                        disabled = false;\n                        if ((minDate && dayDate < minDate) || (maxDate && dayDate > maxDate)) {\n                            disabled = true;   \n                        }\n                        if (p.params.disabled) {\n                            if (p.dateInRange(dayDate, p.params.disabled)) {\n                                disabled = true;\n                            }\n                        }\n                        if (disabled) {\n                            addClass += ' picker-calendar-day-disabled';   \n                        }\n                        \n        \n                        dayDate = new Date(dayDate);\n                        var dayYear = dayDate.getFullYear();\n                        var dayMonth = dayDate.getMonth();\n                        rowHTML += '<div data-year=\"' + dayYear + '\" data-month=\"' + dayMonth + '\" data-day=\"' + dayNumber + '\" class=\"picker-calendar-day' + (addClass) + '\" data-date=\"' + (dayYear + '-' + dayMonth + '-' + dayNumber) + '\"><span>'+dayNumber+'</span></div>';\n                    }\n                    monthHTML += '<div class=\"picker-calendar-row\">' + rowHTML + '</div>';\n                }\n                monthHTML = '<div class=\"picker-calendar-month\" data-year=\"' + year + '\" data-month=\"' + month + '\">' + monthHTML + '</div>';\n                return monthHTML;\n            };\n            p.animating = false;\n            p.updateCurrentMonthYear = function (dir) {\n                if (typeof dir === 'undefined') {\n                    p.currentMonth = parseInt(p.months.eq(1).attr('data-month'), 10);\n                    p.currentYear = parseInt(p.months.eq(1).attr('data-year'), 10);   \n                }\n                else {\n                    p.currentMonth = parseInt(p.months.eq(dir === 'next' ? (p.months.length - 1) : 0).attr('data-month'), 10);\n                    p.currentYear = parseInt(p.months.eq(dir === 'next' ? (p.months.length - 1) : 0).attr('data-year'), 10);\n                }\n                p.container.find('.current-month-value').text(p.params.monthNames[p.currentMonth]);\n                p.container.find('.current-year-value').text(p.currentYear);\n                    \n            };\n            p.onMonthChangeStart = function (dir) {\n                p.updateCurrentMonthYear(dir);\n                p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n                var currentIndex = dir === 'next' ? p.months.length - 1 : 0;\n        \n                p.months.eq(currentIndex).addClass('picker-calendar-month-current');\n                p.months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'picker-calendar-month-prev' : 'picker-calendar-month-next');\n        \n                if (p.params.onMonthYearChangeStart) {\n                    p.params.onMonthYearChangeStart(p, p.currentYear, p.currentMonth);\n                }\n            };\n            p.onMonthChangeEnd = function (dir, rebuildBoth) {\n                p.animating = false;\n                var nextMonthHTML, prevMonthHTML, newMonthHTML;\n                p.wrapper.find('.picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)').remove();\n                \n                if (typeof dir === 'undefined') {\n                    dir = 'next';\n                    rebuildBoth = true;\n                }\n                if (!rebuildBoth) {\n                    newMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), dir);\n                }\n                else {\n                    p.wrapper.find('.picker-calendar-month-next, .picker-calendar-month-prev').remove();\n                    prevMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'prev');\n                    nextMonthHTML = p.monthHTML(new Date(p.currentYear, p.currentMonth), 'next');\n                }\n                if (dir === 'next' || rebuildBoth) {\n                    p.wrapper.append(newMonthHTML || nextMonthHTML);\n                }\n                if (dir === 'prev' || rebuildBoth) {\n                    p.wrapper.prepend(newMonthHTML || prevMonthHTML);\n                }\n                p.months = p.wrapper.find('.picker-calendar-month');\n                p.setMonthsTranslate(p.monthsTranslate);\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n                }\n                if (p.params.onMonthYearChangeEnd) {\n                    p.params.onMonthYearChangeEnd(p, p.currentYear, p.currentMonth);\n                }\n            };\n            p.setMonthsTranslate = function (translate) {\n                translate = translate || p.monthsTranslate || 0;\n                if (typeof p.monthsTranslate === 'undefined') p.monthsTranslate = translate;\n                p.months.removeClass('picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next');\n                var prevMonthTranslate = -(translate + 1) * 100 * inverter;\n                var currentMonthTranslate = -translate * 100 * inverter;\n                var nextMonthTranslate = -(translate - 1) * 100 * inverter;\n                p.months.eq(0).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n                p.months.eq(1).transform('translate3d(' + (p.isH ? currentMonthTranslate : 0) + '%, ' + (p.isH ? 0 : currentMonthTranslate) + '%, 0)').addClass('picker-calendar-month-current');\n                p.months.eq(2).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n            };\n            p.nextMonth = function (transition) {\n                if (typeof transition === 'undefined' || typeof transition === 'object') {\n                    transition = '';\n                    if (!p.params.animate) transition = 0;\n                }\n                var nextMonth = parseInt(p.months.eq(p.months.length - 1).attr('data-month'), 10);\n                var nextYear = parseInt(p.months.eq(p.months.length - 1).attr('data-year'), 10);\n                var nextDate = new Date(nextYear, nextMonth);\n                var nextDateTime = nextDate.getTime();\n                var transitionEndCallback = p.animating ? false : true;\n                if (p.params.maxDate) {\n                    if (nextDateTime > new Date(p.params.maxDate).getTime()) {\n                        return p.resetMonth();\n                    }\n                }\n                p.monthsTranslate --;\n                if (nextMonth === p.currentMonth) {\n                    var nextMonthTranslate = -(p.monthsTranslate) * 100 * inverter;\n                    var nextMonthHTML = $(p.monthHTML(nextDateTime, 'next')).transform('translate3d(' + (p.isH ? nextMonthTranslate : 0) + '%, ' + (p.isH ? 0 : nextMonthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n                    p.wrapper.append(nextMonthHTML[0]);\n                    p.months = p.wrapper.find('.picker-calendar-month');\n                    if (p.params.onMonthAdd) {\n                        p.params.onMonthAdd(p, p.months.eq(p.months.length - 1)[0]);\n                    }\n                }\n                p.animating = true;\n                p.onMonthChangeStart('next');\n                var translate = (p.monthsTranslate * 100) * inverter;\n        \n                p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n                if (transitionEndCallback) {\n                    p.wrapper.transitionEnd(function () {\n                        p.onMonthChangeEnd('next');\n                    });\n                }\n                if (!p.params.animate) {\n                    p.onMonthChangeEnd('next');\n                }\n            };\n            p.prevMonth = function (transition) {\n                if (typeof transition === 'undefined' || typeof transition === 'object') {\n                    transition = '';\n                    if (!p.params.animate) transition = 0;\n                }\n                var prevMonth = parseInt(p.months.eq(0).attr('data-month'), 10);\n                var prevYear = parseInt(p.months.eq(0).attr('data-year'), 10);\n                var prevDate = new Date(prevYear, prevMonth + 1, -1);\n                var prevDateTime = prevDate.getTime();\n                var transitionEndCallback = p.animating ? false : true;\n                if (p.params.minDate) {\n                    if (prevDateTime < new Date(p.params.minDate).getTime()) {\n                        return p.resetMonth();\n                    }\n                }\n                p.monthsTranslate ++;\n                if (prevMonth === p.currentMonth) {\n                    var prevMonthTranslate = -(p.monthsTranslate) * 100 * inverter;\n                    var prevMonthHTML = $(p.monthHTML(prevDateTime, 'prev')).transform('translate3d(' + (p.isH ? prevMonthTranslate : 0) + '%, ' + (p.isH ? 0 : prevMonthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n                    p.wrapper.prepend(prevMonthHTML[0]);\n                    p.months = p.wrapper.find('.picker-calendar-month');\n                    if (p.params.onMonthAdd) {\n                        p.params.onMonthAdd(p, p.months.eq(0)[0]);\n                    }\n                }\n                p.animating = true;\n                p.onMonthChangeStart('prev');\n                var translate = (p.monthsTranslate * 100) * inverter;\n                p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n                if (transitionEndCallback) {\n                    p.wrapper.transitionEnd(function () {\n                        p.onMonthChangeEnd('prev');\n                    });\n                }\n                if (!p.params.animate) {\n                    p.onMonthChangeEnd('prev');\n                }\n            };\n            p.resetMonth = function (transition) {\n                if (typeof transition === 'undefined') transition = '';\n                var translate = (p.monthsTranslate * 100) * inverter;\n                p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? translate : 0) + '%, ' + (p.isH ? 0 : translate) + '%, 0)');\n            };\n            p.setYearMonth = function (year, month, transition) {\n                if (typeof year === 'undefined') year = p.currentYear;\n                if (typeof month === 'undefined') month = p.currentMonth;\n                if (typeof transition === 'undefined' || typeof transition === 'object') {\n                    transition = '';\n                    if (!p.params.animate) transition = 0;\n                }\n                var targetDate;\n                if (year < p.currentYear) {\n                    targetDate = new Date(year, month + 1, -1).getTime();\n                }\n                else {\n                    targetDate = new Date(year, month).getTime();\n                }\n                if (p.params.maxDate && targetDate > new Date(p.params.maxDate).getTime()) {\n                    return false;\n                }\n                if (p.params.minDate && targetDate < new Date(p.params.minDate).getTime()) {\n                    return false;\n                }\n                var currentDate = new Date(p.currentYear, p.currentMonth).getTime();\n                var dir = targetDate > currentDate ? 'next' : 'prev';\n                var newMonthHTML = p.monthHTML(new Date(year, month));\n                p.monthsTranslate = p.monthsTranslate || 0;\n                var prevTranslate = p.monthsTranslate;\n                var monthTranslate, wrapperTranslate;\n                var transitionEndCallback = p.animating ? false : true;\n                if (targetDate > currentDate) {\n                    // To next\n                    p.monthsTranslate --;\n                    if (!p.animating) p.months.eq(p.months.length - 1).remove();\n                    p.wrapper.append(newMonthHTML);\n                    p.months = p.wrapper.find('.picker-calendar-month');\n                    monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n                    p.months.eq(p.months.length - 1).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-next');\n                }\n                else {\n                    // To prev\n                    p.monthsTranslate ++;\n                    if (!p.animating) p.months.eq(0).remove();\n                    p.wrapper.prepend(newMonthHTML);\n                    p.months = p.wrapper.find('.picker-calendar-month');\n                    monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n                    p.months.eq(0).transform('translate3d(' + (p.isH ? monthTranslate : 0) + '%, ' + (p.isH ? 0 : monthTranslate) + '%, 0)').addClass('picker-calendar-month-prev');\n                }\n                if (p.params.onMonthAdd) {\n                    p.params.onMonthAdd(p, dir === 'next' ? p.months.eq(p.months.length - 1)[0] : p.months.eq(0)[0]);\n                }\n                p.animating = true;\n                p.onMonthChangeStart(dir);\n                wrapperTranslate = (p.monthsTranslate * 100) * inverter;\n                p.wrapper.transition(transition).transform('translate3d(' + (p.isH ? wrapperTranslate : 0) + '%, ' + (p.isH ? 0 : wrapperTranslate) + '%, 0)');\n                if (transitionEndCallback) {\n                   p.wrapper.transitionEnd(function () {\n                        p.onMonthChangeEnd(dir, true);\n                    }); \n                }\n                if (!p.params.animate) {\n                    p.onMonthChangeEnd(dir);\n                }\n            };\n            p.nextYear = function () {\n                p.setYearMonth(p.currentYear + 1);\n            };\n            p.prevYear = function () {\n                p.setYearMonth(p.currentYear - 1);\n            };\n            \n        \n            // HTML Layout\n            p.layout = function () {\n                var pickerHTML = '';\n                var pickerClass = '';\n                var i;\n                \n                var layoutDate = p.value && p.value.length ? p.value[0] : new Date().setHours(0,0,0,0);\n                var prevMonthHTML = p.monthHTML(layoutDate, 'prev');\n                var currentMonthHTML = p.monthHTML(layoutDate);\n                var nextMonthHTML = p.monthHTML(layoutDate, 'next');\n                var monthsHTML = '<div class=\"picker-calendar-months\"><div class=\"picker-calendar-months-wrapper\">' + (prevMonthHTML + currentMonthHTML + nextMonthHTML) + '</div></div>';\n                // Week days header\n                var weekHeaderHTML = '';\n                if (p.params.weekHeader) {\n                    for (i = 0; i < 7; i++) {\n                        var weekDayIndex = (i + p.params.firstDay > 6) ? (i - 7 + p.params.firstDay) : (i + p.params.firstDay);\n                        var dayName = p.params.dayNamesShort[weekDayIndex];\n                        weekHeaderHTML += '<div class=\"picker-calendar-week-day ' + ((p.params.weekendDays.indexOf(weekDayIndex) >= 0) ? 'picker-calendar-week-day-weekend' : '') + '\"> ' + dayName + '</div>';\n                        \n                    }\n                    weekHeaderHTML = '<div class=\"picker-calendar-week-days\">' + weekHeaderHTML + '</div>';\n                }\n                pickerClass = 'picker-modal picker-calendar ' + (p.params.cssClass || '');\n                var toolbarHTML = p.params.toolbar ? p.params.toolbarTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '';\n                if (p.params.toolbar) {\n                    toolbarHTML = p.params.toolbarTemplate\n                        .replace(/{{closeText}}/g, p.params.toolbarCloseText)\n                        .replace(/{{monthPicker}}/g, (p.params.monthPicker ? p.params.monthPickerTemplate : ''))\n                        .replace(/{{yearPicker}}/g, (p.params.yearPicker ? p.params.yearPickerTemplate : ''));\n                }\n                var headerHTML = p.params.header ? p.params.headerTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText).replace(/{{placeholder}}/g, p.params.headerPlaceholder) : '';\n                var footerHTML = p.params.footer ? p.params.footerTemplate.replace(/{{closeText}}/g, p.params.toolbarCloseText) : '';\n        \n                pickerHTML =\n                    '<div class=\"' + (pickerClass) + '\">' +\n                        headerHTML +\n                        footerHTML +\n                        toolbarHTML +\n                        '<div class=\"picker-modal-inner\">' +\n                            weekHeaderHTML +\n                            monthsHTML +\n                        '</div>' +\n                    '</div>';\n                    \n                    \n                p.pickerHTML = pickerHTML;    \n            };\n        \n            // Input Events\n            function openOnInput(e) {\n                e.preventDefault();\n                if (p.opened) return;\n                p.open();\n                if (p.params.scrollToInput && !isPopover() && !app.params.material) {\n                    var pageContent = p.input.parents('.page-content');\n                    if (pageContent.length === 0) return;\n        \n                    var paddingTop = parseInt(pageContent.css('padding-top'), 10),\n                        paddingBottom = parseInt(pageContent.css('padding-bottom'), 10),\n                        pageHeight = pageContent[0].offsetHeight - paddingTop - p.container.height(),\n                        pageScrollHeight = pageContent[0].scrollHeight - paddingTop - p.container.height(),\n                        newPaddingBottom;\n        \n                    var inputTop = p.input.offset().top - paddingTop + p.input[0].offsetHeight;\n                    if (inputTop > pageHeight) {\n                        var scrollTop = pageContent.scrollTop() + inputTop - pageHeight;\n                        if (scrollTop + pageHeight > pageScrollHeight) {\n                            newPaddingBottom = scrollTop + pageHeight - pageScrollHeight + paddingBottom;\n                            if (pageHeight === pageScrollHeight) {\n                                newPaddingBottom = p.container.height();\n                            }\n                            pageContent.css({'padding-bottom': (newPaddingBottom) + 'px'});\n                        }\n                        pageContent.scrollTop(scrollTop, 300);\n                    }\n                }\n            }\n            function closeOnHTMLClick(e) {\n                if (inPopover()) return;\n                if (p.input && p.input.length > 0) {\n                    if (e.target !== p.input[0] && $(e.target).parents('.picker-modal').length === 0) p.close();\n                }\n                else {\n                    if ($(e.target).parents('.picker-modal').length === 0) p.close();   \n                }\n            }\n        \n            if (p.params.input) {\n                p.input = $(p.params.input);\n                if (p.input.length > 0) {\n                    if (p.params.inputReadOnly) p.input.prop('readOnly', true);\n                    if (!p.inline) {\n                        p.input.on('click', openOnInput);    \n                    }\n                    if (p.params.inputReadOnly) {\n                        p.input.on('focus mousedown', function (e) {\n                            e.preventDefault();\n                        });\n                    }\n                }\n                    \n            }\n            \n            if (!p.inline && p.params.closeByOutsideClick) $('html').on('click', closeOnHTMLClick);\n        \n            // Open\n            function onPickerClose() {\n                p.opened = false;\n                if (p.input && p.input.length > 0) {\n                    p.input.parents('.page-content').css({'padding-bottom': ''});\n                    if (app.params.material) p.input.trigger('blur');\n                }\n                if (p.params.onClose) p.params.onClose(p);\n        \n                // Destroy events\n                p.destroyCalendarEvents();\n            }\n        \n            p.opened = false;\n            p.open = function () {\n                var toPopover = isPopover();\n                var updateValue = false;\n                if (!p.opened) {\n                    // Set date value\n                    if (!p.value) {\n                        if (p.params.value) {\n                            p.value = p.params.value;\n                            updateValue = true;\n                        }\n                    }\n        \n                    // Layout\n                    p.layout();\n        \n                    // Append\n                    if (toPopover) {\n                        p.pickerHTML = '<div class=\"popover popover-picker-calendar\"><div class=\"popover-inner\">' + p.pickerHTML + '</div></div>';\n                        p.popover = app.popover(p.pickerHTML, p.params.input, true);\n                        p.container = $(p.popover).find('.picker-modal');\n                        $(p.popover).on('close', function () {\n                            onPickerClose();\n                        });\n                    }\n                    else if (p.inline) {\n                        p.container = $(p.pickerHTML);\n                        p.container.addClass('picker-modal-inline');\n                        $(p.params.container).append(p.container);\n                    }\n                    else {\n                        p.container = $(app.pickerModal(p.pickerHTML));\n                        $(p.container)\n                        .on('close', function () {\n                            onPickerClose();\n                        });\n                    }\n        \n                    // Store calendar instance\n                    p.container[0].f7Calendar = p;\n                    p.wrapper = p.container.find('.picker-calendar-months-wrapper');\n        \n                    // Months\n                    p.months = p.wrapper.find('.picker-calendar-month');\n        \n                    // Update current month and year\n                    p.updateCurrentMonthYear();\n        \n                    // Set initial translate\n                    p.monthsTranslate = 0;\n                    p.setMonthsTranslate();\n        \n                    // Init events\n                    p.initCalendarEvents();\n        \n                    // Update input value\n                    if (updateValue) p.updateValue();\n                    else if (app.params.material && p.value) p.updateValue(true);\n        \n                    // Material Focus\n                    if (p.input && p.input.length > 0 && app.params.material) {\n                        p.input.trigger('focus');\n                    }\n                    \n                }\n        \n                // Set flag\n                p.opened = true;\n                p.initialized = true;\n                if (p.params.onMonthAdd) {\n                    p.months.each(function () {\n                        p.params.onMonthAdd(p, this);\n                    });\n                }\n                if (p.params.onOpen) p.params.onOpen(p);\n            };\n        \n            // Close\n            p.close = function () {\n                if (!p.opened || p.inline) return;\n                if (inPopover()) {\n                    app.closeModal(p.popover);\n                    return;\n                }\n                else {\n                    app.closeModal(p.container);\n                    return;\n                }\n            };\n        \n            // Destroy\n            p.destroy = function () {\n                p.close();\n                if (p.params.input && p.input.length > 0) {\n                    p.input.off('click focus', openOnInput);\n                }\n                $('html').off('click', closeOnHTMLClick);\n            };\n        \n            if (p.inline) {\n                p.open();\n            }\n            else {\n                if (!p.initialized && p.params.value) p.setValue(p.params.value);\n            }\n        \n            return p;\n        };\n        app.calendar = function (params) {\n            return new Calendar(params);\n        };\n        \n\n        /*======================================================\n        ************   Notifications   ************\n        ======================================================*/\n        var _tempNotificationElement;\n        app.addNotification = function (params) {\n            if (!params) return;\n            \n            if (typeof params.media === 'undefined') params.media = app.params.notificationMedia;\n            if (typeof params.title === 'undefined') params.title = app.params.notificationTitle;\n            if (typeof params.subtitle === 'undefined') params.subtitle = app.params.notificationSubtitle;\n            if (typeof params.closeIcon === 'undefined') params.closeIcon = app.params.notificationCloseIcon;\n            if (typeof params.hold === 'undefined') params.hold = app.params.notificationHold;\n            if (typeof params.closeOnClick === 'undefined') params.closeOnClick = app.params.notificationCloseOnClick;\n            if (typeof params.button === 'undefined') params.button = app.params.notificationCloseButtonText && {\n                text: app.params.notificationCloseButtonText,\n                close: true\n            };\n        \n            if (!_tempNotificationElement) _tempNotificationElement = document.createElement('div');\n        \n            params.material = app.params.material;\n        \n            var container = $('.notifications');\n            if (container.length === 0) {\n                $('body').append('<div class=\"notifications list-block' + (params.material ? '' : ' media-list') + '\"><ul></ul></div>');\n                container = $('.notifications');\n            }\n            var list = container.children('ul');\n            \n            var notificationTemplate = app.params.notificationTemplate || \n                '{{#if custom}}' +\n                '<li>{{custom}}</li>' +\n                '{{else}}' +\n                '<li class=\"notification-item notification-hidden\">' +\n                    '<div class=\"item-content\">' +\n                        '{{#if material}}' +\n                            '<div class=\"item-inner\">' +\n                                '<div class=\"item-title\">{{js \"this.message || this.title || this.subtitle\"}}</div>' +\n                                '{{#if ../button}}{{#button}}' +\n                                '<div class=\"item-after\">' +\n                                    '<a href=\"#\" class=\"button {{#if color}}color-{{color}}{{/if}} {{#js_compare \"this.close !== false\"}}close-notification{{/js_compare}}\">{{text}}</a>' +\n                                '</div>' +\n                                '{{/button}}{{/if}}' +\n                            '</div>' +\n                        '{{else}}' +\n                            '{{#if media}}' +\n                            '<div class=\"item-media\">{{media}}</div>' +\n                            '{{/if}}' +\n                            '<div class=\"item-inner\">' +\n                                '<div class=\"item-title-row\">' +\n                                    '{{#if title}}' +\n                                    '<div class=\"item-title\">{{title}}</div>' +\n                                    '{{/if}}' +\n                                    '{{#if closeIcon}}' +\n                                    '<div class=\"item-after\"><a href=\"#\" class=\"close-notification\"><span></span></a></div>' +\n                                    '{{/if}}' +\n                                '</div>' +\n                                '{{#if subtitle}}' +\n                                '<div class=\"item-subtitle\">{{subtitle}}</div>' +\n                                '{{/if}}' +\n                                '{{#if message}}' +\n                                '<div class=\"item-text\">{{message}}</div>' +\n                                '</div>' +\n                            '{{/if}}' +\n                        '{{/if}}' +\n                    '</div>' +\n                '</li>' +\n                '{{/if}}';\n            if (!app._compiledTemplates.notification) {\n                app._compiledTemplates.notification = t7.compile(notificationTemplate);\n            }\n            _tempNotificationElement.innerHTML = app._compiledTemplates.notification(params);\n        \n            var item = $(_tempNotificationElement).children();\n        \n            item.on('click', function (e) {\n                var close = false;\n                var target = $(e.target);\n                if (params.material && target.hasClass('button')) {\n                    if (params.button && params.button.onClick) params.button.onClick.call(target[0], e, item[0]);\n                }\n                if (target.is('.close-notification') || $(e.target).parents('.close-notification').length > 0) {\n                    close = true;\n                }\n                else {\n                    if (params.onClick) params.onClick(e, item[0]);\n                    if (params.closeOnClick) close = true;\n                }\n                if (close) app.closeNotification(item[0]);\n            });\n            if (params.onClose) {\n                item.data('f7NotificationOnClose', function () {\n                    params.onClose(item[0]);\n                });\n            }\n            if (params.additionalClass) {\n                item.addClass(params.additionalClass);\n            }\n            if (params.hold) {\n                setTimeout(function () {\n                    if (item.length > 0) app.closeNotification(item[0]);\n                }, params.hold);\n            }\n        \n            list[params.material ? 'append' : 'prepend'](item[0]);\n            container.show();\n            \n            var itemHeight = item.outerHeight(), clientLeft;\n            if (params.material) {\n                container.transform('translate3d(0, '+itemHeight+'px, 0)');\n                container.transition(0);\n        \n                clientLeft = item[0].clientLeft;\n        \n                container.transform('translate3d(0, 0, 0)');\n                container.transition('');\n            }\n            else {\n                item.css('marginTop', -itemHeight + 'px');\n                item.transition(0);\n        \n                clientLeft = item[0].clientLeft;\n        \n                item.transition('');\n                item.css('marginTop', '0px');\n            }\n        \n            container.transform('translate3d(0, 0,0)');\n            item.removeClass('notification-hidden');\n        \n            return item[0];\n        };\n        app.closeNotification = function (item) {\n            item = $(item);\n            if (item.length === 0) return;\n            if (item.hasClass('notification-item-removing')) return;\n            var container = $('.notifications');\n        \n            var itemHeight = item.outerHeight();\n            item.css('height', itemHeight + 'px').transition(0);\n            var clientLeft = item[0].clientLeft;\n        \n            item.css('height', '0px').transition('').addClass('notification-item-removing');\n            if (item.data('f7NotificationOnClose')) item.data('f7NotificationOnClose')();\n        \n            if (container.find('.notification-item:not(.notification-item-removing)').length === 0) {\n                container.transform('');\n            }\n        \n            item.addClass('notification-hidden').transitionEnd(function () {\n                item.remove();\n                if (container.find('.notification-item').length === 0) {\n                    container.hide();\n                }\n            });\n        };\n\n        /*===========================\n        Compile Template7 Templates On App Init\n        ===========================*/\n        app.initTemplate7Templates = function () {\n            if (!window.Template7) return;\n            Template7.templates = Template7.templates || app.params.templates || {};\n            Template7.data = Template7.data || app.params.template7Data || {};\n            Template7.cache = Template7.cache || {};\n        \n            app.templates = Template7.templates;\n            app.template7Data = Template7.data;\n            app.template7Cache = Template7.cache;\n        \n            // Precompile templates on app init\n            if (!app.params.precompileTemplates) return;\n            $('script[type=\"text/template7\"]').each(function () {\n                var id = $(this).attr('id');\n                if (!id) return;\n                Template7.templates[id] = Template7.compile($(this).html());\n            });\n        };\n        \n\n        /*=======================================\n        ************   Plugins API   ************\n        =======================================*/\n        var _plugins = [];\n        app.initPlugins = function () {\n            // Initialize plugins\n            for (var plugin in app.plugins) {\n                var p = app.plugins[plugin](app, app.params[plugin]);\n                if (p) _plugins.push(p);\n            }\n        };\n        // Plugin Hooks\n        app.pluginHook = function (hook) {\n            for (var i = 0; i < _plugins.length; i++) {\n                if (_plugins[i].hooks && hook in _plugins[i].hooks) {\n                    _plugins[i].hooks[hook](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n                }\n            }\n        };\n        // Prevented by plugin\n        app.pluginPrevent = function (action) {\n            var prevent = false;\n            for (var i = 0; i < _plugins.length; i++) {\n                if (_plugins[i].prevents && action in _plugins[i].prevents) {\n                    if (_plugins[i].prevents[action](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5])) prevent = true;\n                }\n            }\n            return prevent;\n        };\n        // Preprocess content by plugin\n        app.pluginProcess = function (process, data) {\n            var processed = data;\n            for (var i = 0; i < _plugins.length; i++) {\n                if (_plugins[i].preprocess && process in _plugins[i].preprocess) {\n                    processed = _plugins[i].preprocess[process](data, arguments[2], arguments[3], arguments[4], arguments[5], arguments[6]);\n                }\n            }\n            return processed;\n        };\n        \n        \n\n        /*======================================================\n        ************   App Init   ************\n        ======================================================*/\n        app.init = function () {\n            // Compile Template7 templates on app load\n            if (app.initTemplate7Templates) app.initTemplate7Templates();\n            \n            // Init Plugins\n            if (app.initPlugins) app.initPlugins();\n            \n            // Init Device\n            if (app.getDeviceInfo) app.getDeviceInfo();\n            \n            // Init Click events\n            if (app.initFastClicks && app.params.fastClicks) app.initFastClicks();\n            if (app.initClickEvents) app.initClickEvents();\n        \n            // Init each page callbacks\n            $('.page:not(.cached)').each(function () {\n                app.initPageWithCallback(this);\n            });\n        \n            // Init each navbar callbacks\n            $('.navbar:not(.cached)').each(function () {\n                app.initNavbarWithCallback(this); \n            });\n            \n            // Init resize events\n            if (app.initResize) app.initResize();\n        \n            // Init push state\n            if (app.initPushState && app.params.pushState) app.initPushState();\n        \n            // Init Live Swipeouts events\n            if (app.initSwipeout && app.params.swipeout) app.initSwipeout();\n        \n            // Init Live Sortable events\n            if (app.initSortable && app.params.sortable) app.initSortable();\n        \n            // Init Live Swipe Panels\n            if (app.initSwipePanels && (app.params.swipePanel || app.params.swipePanelOnlyClose)) app.initSwipePanels();\n            \n            // Init Material Inputs\n            if (app.params.material && app.initMaterialWatchInputs) app.initMaterialWatchInputs();\n            \n            // App Init callback\n            if (app.params.onAppInit) app.params.onAppInit();\n        \n            // Plugin app init hook\n            app.pluginHook('appInit');\n        };\n        if (app.params.init) app.init();\n        \n\n        //Return instance        \n        return app;\n    };\n    \n\n    /*===========================\n    Dom7 Library\n    ===========================*/\n    var Dom7 = (function () {\n        var Dom7 = function (arr) {\n            var _this = this, i = 0;\n            // Create array-like object\n            for (i = 0; i < arr.length; i++) {\n                _this[i] = arr[i];\n            }\n            _this.length = arr.length;\n            // Return collection with methods\n            return this;\n        };\n        var $ = function (selector, context) {\n            var arr = [], i = 0;\n            if (selector && !context) {\n                if (selector instanceof Dom7) {\n                    return selector;\n                }\n            }\n            if (selector) {\n                // String\n                if (typeof selector === 'string') {\n                    var els, tempParent, html = selector.trim();\n                    if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {\n                        var toCreate = 'div';\n                        if (html.indexOf('<li') === 0) toCreate = 'ul';\n                        if (html.indexOf('<tr') === 0) toCreate = 'tbody';\n                        if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) toCreate = 'tr';\n                        if (html.indexOf('<tbody') === 0) toCreate = 'table';\n                        if (html.indexOf('<option') === 0) toCreate = 'select';\n                        tempParent = document.createElement(toCreate);\n                        tempParent.innerHTML = selector;\n                        for (i = 0; i < tempParent.childNodes.length; i++) {\n                            arr.push(tempParent.childNodes[i]);\n                        }\n                    }\n                    else {\n                        if (!context && selector[0] === '#' && !selector.match(/[ .<>:~]/)) {\n                            // Pure ID selector\n                            els = [document.getElementById(selector.split('#')[1])];\n                        }\n                        else {\n                            // Other selectors\n                            els = (context || document).querySelectorAll(selector);\n                        }\n                        for (i = 0; i < els.length; i++) {\n                            if (els[i]) arr.push(els[i]);\n                        }\n                    }\n                }\n                // Node/element\n                else if (selector.nodeType || selector === window || selector === document) {\n                    arr.push(selector);\n                }\n                //Array of elements or instance of Dom\n                else if (selector.length > 0 && selector[0].nodeType) {\n                    for (i = 0; i < selector.length; i++) {\n                        arr.push(selector[i]);\n                    }\n                }\n            }\n            return new Dom7(arr);\n        };\n\n        Dom7.prototype = {\n            // Classes and attriutes\n            addClass: function (className) {\n                if (typeof className === 'undefined') {\n                    return this;\n                }\n                var classes = className.split(' ');\n                for (var i = 0; i < classes.length; i++) {\n                    for (var j = 0; j < this.length; j++) {\n                        if (typeof this[j].classList !== 'undefined') this[j].classList.add(classes[i]);\n                    }\n                }\n                return this;\n            },\n            removeClass: function (className) {\n                var classes = className.split(' ');\n                for (var i = 0; i < classes.length; i++) {\n                    for (var j = 0; j < this.length; j++) {\n                        if (typeof this[j].classList !== 'undefined') this[j].classList.remove(classes[i]);\n                    }\n                }\n                return this;\n            },\n            hasClass: function (className) {\n                if (!this[0]) return false;\n                else return this[0].classList.contains(className);\n            },\n            toggleClass: function (className) {\n                var classes = className.split(' ');\n                for (var i = 0; i < classes.length; i++) {\n                    for (var j = 0; j < this.length; j++) {\n                        if (typeof this[j].classList !== 'undefined') this[j].classList.toggle(classes[i]);\n                    }\n                }\n                return this;\n            },\n            attr: function (attrs, value) {\n                if (arguments.length === 1 && typeof attrs === 'string') {\n                    // Get attr\n                    if (this[0]) return this[0].getAttribute(attrs);\n                    else return undefined;\n                }\n                else {\n                    // Set attrs\n                    for (var i = 0; i < this.length; i++) {\n                        if (arguments.length === 2) {\n                            // String\n                            this[i].setAttribute(attrs, value);\n                        }\n                        else {\n                            // Object\n                            for (var attrName in attrs) {\n                                this[i][attrName] = attrs[attrName];\n                                this[i].setAttribute(attrName, attrs[attrName]);\n                            }\n                        }\n                    }\n                    return this;\n                }\n            },\n            removeAttr: function (attr) {\n                for (var i = 0; i < this.length; i++) {\n                    this[i].removeAttribute(attr);\n                }\n                return this;\n            },\n            prop: function (props, value) {\n                if (arguments.length === 1 && typeof props === 'string') {\n                    // Get prop\n                    if (this[0]) return this[0][props];\n                    else return undefined;\n                }\n                else {\n                    // Set props\n                    for (var i = 0; i < this.length; i++) {\n                        if (arguments.length === 2) {\n                            // String\n                            this[i][props] = value;\n                        }\n                        else {\n                            // Object\n                            for (var propName in props) {\n                                this[i][propName] = props[propName];\n                            }\n                        }\n                    }\n                    return this;\n                }\n            },\n            data: function (key, value) {\n                if (typeof value === 'undefined') {\n                    // Get value\n                    if (this[0]) {\n                        if (this[0].dom7ElementDataStorage && (key in this[0].dom7ElementDataStorage)) {\n                            return this[0].dom7ElementDataStorage[key];\n                        }\n                        else {\n                            var dataKey = this[0].getAttribute('data-' + key);    \n                            if (dataKey) {\n                                return dataKey;\n                            }\n                            else return undefined;\n                        }\n                    }\n                    else return undefined;\n                }\n                else {\n                    // Set value\n                    for (var i = 0; i < this.length; i++) {\n                        var el = this[i];\n                        if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};\n                        el.dom7ElementDataStorage[key] = value;\n                    }\n                    return this;\n                }\n            },\n            removeData: function(key) {\n                for (var i = 0; i < this.length; i++) {\n                    var el = this[i];\n                    if (el.dom7ElementDataStorage && el.dom7ElementDataStorage[key]) {\n                        el.dom7ElementDataStorage[key] = null;\n                        delete el.dom7ElementDataStorage[key];\n                    }\n                }\n            },\n            dataset: function () {\n                var el = this[0];\n                if (el) {\n                    var dataset = {};\n                    if (el.dataset) {\n                        for (var dataKey in el.dataset) {\n                            dataset[dataKey] = el.dataset[dataKey];\n                        }\n                    }\n                    else {\n                        for (var i = 0; i < el.attributes.length; i++) {\n                            var attr = el.attributes[i];\n                            if (attr.name.indexOf('data-') >= 0) {\n                                dataset[$.toCamelCase(attr.name.split('data-')[1])] = attr.value;\n                            }\n                        }\n                    }\n                    for (var key in dataset) {\n                        if (dataset[key] === 'false') dataset[key] = false;\n                        else if (dataset[key] === 'true') dataset[key] = true;\n                        else if (parseFloat(dataset[key]) === dataset[key] * 1) dataset[key] = dataset[key] * 1;\n                    }\n                    return dataset;\n                }\n                else return undefined;\n            },\n            val: function (value) {\n                if (typeof value === 'undefined') {\n                    if (this[0]) return this[0].value;\n                    else return undefined;\n                }\n                else {\n                    for (var i = 0; i < this.length; i++) {\n                        this[i].value = value;\n                    }\n                    return this;\n                }\n            },\n            // Transforms\n            transform : function (transform) {\n                for (var i = 0; i < this.length; i++) {\n                    var elStyle = this[i].style;\n                    elStyle.webkitTransform = elStyle.MsTransform = elStyle.msTransform = elStyle.MozTransform = elStyle.OTransform = elStyle.transform = transform;\n                }\n                return this;\n            },\n            transition: function (duration) {\n                if (typeof duration !== 'string') {\n                    duration = duration + 'ms';\n                }\n                for (var i = 0; i < this.length; i++) {\n                    var elStyle = this[i].style;\n                    elStyle.webkitTransitionDuration = elStyle.MsTransitionDuration = elStyle.msTransitionDuration = elStyle.MozTransitionDuration = elStyle.OTransitionDuration = elStyle.transitionDuration = duration;\n                }\n                return this;\n            },\n            //Events\n            on: function (eventName, targetSelector, listener, capture) {\n                function handleLiveEvent(e) {\n                    var target = e.target;\n                    if ($(target).is(targetSelector)) listener.call(target, e);\n                    else {\n                        var parents = $(target).parents();\n                        for (var k = 0; k < parents.length; k++) {\n                            if ($(parents[k]).is(targetSelector)) listener.call(parents[k], e);\n                        }\n                    }\n                }\n                var events = eventName.split(' ');\n                var i, j;\n                for (i = 0; i < this.length; i++) {\n                    if (typeof targetSelector === 'function' || targetSelector === false) {\n                        // Usual events\n                        if (typeof targetSelector === 'function') {\n                            listener = arguments[1];\n                            capture = arguments[2] || false;\n                        }\n                        for (j = 0; j < events.length; j++) {\n                            this[i].addEventListener(events[j], listener, capture);\n                        }\n                    }\n                    else {\n                        //Live events\n                        for (j = 0; j < events.length; j++) {\n                            if (!this[i].dom7LiveListeners) this[i].dom7LiveListeners = [];\n                            this[i].dom7LiveListeners.push({listener: listener, liveListener: handleLiveEvent});\n                            this[i].addEventListener(events[j], handleLiveEvent, capture);\n                        }\n                    }\n                }\n        \n                return this;\n            },\n            off: function (eventName, targetSelector, listener, capture) {\n                var events = eventName.split(' ');\n                for (var i = 0; i < events.length; i++) {\n                    for (var j = 0; j < this.length; j++) {\n                        if (typeof targetSelector === 'function' || targetSelector === false) {\n                            // Usual events\n                            if (typeof targetSelector === 'function') {\n                                listener = arguments[1];\n                                capture = arguments[2] || false;\n                            }\n                            this[j].removeEventListener(events[i], listener, capture);\n                        }\n                        else {\n                            // Live event\n                            if (this[j].dom7LiveListeners) {\n                                for (var k = 0; k < this[j].dom7LiveListeners.length; k++) {\n                                    if (this[j].dom7LiveListeners[k].listener === listener) {\n                                        this[j].removeEventListener(events[i], this[j].dom7LiveListeners[k].liveListener, capture);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                return this;\n            },\n            once: function (eventName, targetSelector, listener, capture) {\n                var dom = this;\n                if (typeof targetSelector === 'function') {\n                    listener = arguments[1];\n                    capture = arguments[2];\n                    targetSelector = false;\n                }\n                function proxy(e) {\n                    listener.call(e.target, e);\n                    dom.off(eventName, targetSelector, proxy, capture);\n                }\n                return dom.on(eventName, targetSelector, proxy, capture);\n            },\n            trigger: function (eventName, eventData) {\n                for (var i = 0; i < this.length; i++) {\n                    var evt;\n                    try {\n                        evt = new CustomEvent(eventName, {detail: eventData, bubbles: true, cancelable: true});\n                    }\n                    catch (e) {\n                        evt = document.createEvent('Event');\n                        evt.initEvent(eventName, true, true);\n                        evt.detail = eventData;\n                    }\n                    this[i].dispatchEvent(evt);\n                }\n                return this;\n            },\n            transitionEnd: function (callback) {\n                var events = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'],\n                    i, j, dom = this;\n                function fireCallBack(e) {\n                    /*jshint validthis:true */\n                    if (e.target !== this) return;\n                    callback.call(this, e);\n                    for (i = 0; i < events.length; i++) {\n                        dom.off(events[i], fireCallBack);\n                    }\n                }\n                if (callback) {\n                    for (i = 0; i < events.length; i++) {\n                        dom.on(events[i], fireCallBack);\n                    }\n                }\n                return this;\n            },\n            animationEnd: function (callback) {\n                var events = ['webkitAnimationEnd', 'OAnimationEnd', 'MSAnimationEnd', 'animationend'],\n                    i, j, dom = this;\n                function fireCallBack(e) {\n                    callback(e);\n                    for (i = 0; i < events.length; i++) {\n                        dom.off(events[i], fireCallBack);\n                    }\n                }\n                if (callback) {\n                    for (i = 0; i < events.length; i++) {\n                        dom.on(events[i], fireCallBack);\n                    }\n                }\n                return this;\n            },\n            // Sizing/Styles\n            width: function () {\n                if (this[0] === window) {\n                    return window.innerWidth;\n                }\n                else {\n                    if (this.length > 0) {\n                        return parseFloat(this.css('width'));\n                    }\n                    else {\n                        return null;\n                    }\n                }\n            },\n            outerWidth: function (includeMargins) {\n                if (this.length > 0) {\n                    if (includeMargins) {\n                        var styles = this.styles();\n                        return this[0].offsetWidth + parseFloat(styles.getPropertyValue('margin-right')) + parseFloat(styles.getPropertyValue('margin-left'));    \n                    }\n                    else\n                        return this[0].offsetWidth;\n                }\n                else return null;\n            },\n            height: function () {\n                if (this[0] === window) {\n                    return window.innerHeight;\n                }\n                else {\n                    if (this.length > 0) {\n                        return parseFloat(this.css('height'));\n                    }\n                    else {\n                        return null;\n                    }\n                }\n            },\n            outerHeight: function (includeMargins) {\n                if (this.length > 0) {\n                    if (includeMargins) {\n                        var styles = this.styles();\n                        return this[0].offsetHeight + parseFloat(styles.getPropertyValue('margin-top')) + parseFloat(styles.getPropertyValue('margin-bottom'));    \n                    }\n                    else\n                        return this[0].offsetHeight;\n                }\n                else return null;\n            },\n            offset: function () {\n                if (this.length > 0) {\n                    var el = this[0];\n                    var box = el.getBoundingClientRect();\n                    var body = document.body;\n                    var clientTop  = el.clientTop  || body.clientTop  || 0;\n                    var clientLeft = el.clientLeft || body.clientLeft || 0;\n                    var scrollTop  = window.pageYOffset || el.scrollTop;\n                    var scrollLeft = window.pageXOffset || el.scrollLeft;\n                    return {\n                        top: box.top  + scrollTop  - clientTop,\n                        left: box.left + scrollLeft - clientLeft\n                    };\n                }\n                else {\n                    return null;\n                }\n            },\n            hide: function () {\n                for (var i = 0; i < this.length; i++) {\n                    this[i].style.display = 'none';\n                }\n                return this;\n            },\n            show: function () {\n                for (var i = 0; i < this.length; i++) {\n                    this[i].style.display = 'block';\n                }\n                return this;\n            },\n            styles: function () {\n                var i, styles;\n                if (this[0]) return window.getComputedStyle(this[0], null);\n                else return undefined;\n            },\n            css: function (props, value) {\n                var i;\n                if (arguments.length === 1) {\n                    if (typeof props === 'string') {\n                        if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props);\n                    }\n                    else {\n                        for (i = 0; i < this.length; i++) {\n                            for (var prop in props) {\n                                this[i].style[prop] = props[prop];\n                            }\n                        }\n                        return this;\n                    }\n                }\n                if (arguments.length === 2 && typeof props === 'string') {\n                    for (i = 0; i < this.length; i++) {\n                        this[i].style[props] = value;\n                    }\n                    return this;\n                }\n                return this;\n            },\n        \n            //Dom manipulation\n            each: function (callback) {\n                for (var i = 0; i < this.length; i++) {\n                    callback.call(this[i], i, this[i]);\n                }\n                return this;\n            },\n            filter: function (callback) {\n                var matchedItems = [];\n                var dom = this;\n                for (var i = 0; i < dom.length; i++) {\n                    if (callback.call(dom[i], i, dom[i])) matchedItems.push(dom[i]);\n                }\n                return new Dom7(matchedItems);\n            },\n            html: function (html) {\n                if (typeof html === 'undefined') {\n                    return this[0] ? this[0].innerHTML : undefined;\n                }\n                else {\n                    for (var i = 0; i < this.length; i++) {\n                        this[i].innerHTML = html;\n                    }\n                    return this;\n                }\n            },\n            text: function (text) {\n                if (typeof text === 'undefined') {\n                    if (this[0]) {\n                        return this[0].textContent.trim();\n                    }\n                    else return null;\n                }\n                else {\n                    for (var i = 0; i < this.length; i++) {\n                        this[i].textContent = text;\n                    }\n                }\n            },\n            is: function (selector) {\n                if (!this[0] || typeof selector === 'undefined') return false;\n                var compareWith, i;\n                if (typeof selector === 'string') {\n                    var el = this[0];\n                    if (el === document) return selector === document;\n                    if (el === window) return selector === window;\n        \n                    if (el.matches) return el.matches(selector);\n                    else if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);\n                    else if (el.mozMatchesSelector) return el.mozMatchesSelector(selector);\n                    else if (el.msMatchesSelector) return el.msMatchesSelector(selector);\n                    else {\n                        compareWith = $(selector);\n                        for (i = 0; i < compareWith.length; i++) {\n                            if (compareWith[i] === this[0]) return true;\n                        }\n                        return false;\n                    }\n                }\n                else if (selector === document) return this[0] === document;\n                else if (selector === window) return this[0] === window;\n                else {\n                    if (selector.nodeType || selector instanceof Dom7) {\n                        compareWith = selector.nodeType ? [selector] : selector;\n                        for (i = 0; i < compareWith.length; i++) {\n                            if (compareWith[i] === this[0]) return true;\n                        }\n                        return false;\n                    }\n                    return false;\n                }\n        \n            },\n            indexOf: function (el) {\n                for (var i = 0; i < this.length; i++) {\n                    if (this[i] === el) return i;\n                }\n            },\n            index: function () {\n                if (this[0]) {\n                    var child = this[0];\n                    var i = 0;\n                    while ((child = child.previousSibling) !== null) {\n                        if (child.nodeType === 1) i++;\n                    }\n                    return i;\n                }\n                else return undefined;\n            },\n            eq: function (index) {\n                if (typeof index === 'undefined') return this;\n                var length = this.length;\n                var returnIndex;\n                if (index > length - 1) {\n                    return new Dom7([]);\n                }\n                if (index < 0) {\n                    returnIndex = length + index;\n                    if (returnIndex < 0) return new Dom7([]);\n                    else return new Dom7([this[returnIndex]]);\n                }\n                return new Dom7([this[index]]);\n            },\n            append: function (newChild) {\n                var i, j;\n                for (i = 0; i < this.length; i++) {\n                    if (typeof newChild === 'string') {\n                        var tempDiv = document.createElement('div');\n                        tempDiv.innerHTML = newChild;\n                        while (tempDiv.firstChild) {\n                            this[i].appendChild(tempDiv.firstChild);\n                        }\n                    }\n                    else if (newChild instanceof Dom7) {\n                        for (j = 0; j < newChild.length; j++) {\n                            this[i].appendChild(newChild[j]);\n                        }\n                    }\n                    else {\n                        this[i].appendChild(newChild);\n                    }\n                }\n                return this;\n            },\n            appendTo: function (parent) {\n                $(parent).append(this);\n                return this;\n            },\n            prepend: function (newChild) {\n                var i, j;\n                for (i = 0; i < this.length; i++) {\n                    if (typeof newChild === 'string') {\n                        var tempDiv = document.createElement('div');\n                        tempDiv.innerHTML = newChild;\n                        for (j = tempDiv.childNodes.length - 1; j >= 0; j--) {\n                            this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);\n                        }\n                        // this[i].insertAdjacentHTML('afterbegin', newChild);\n                    }\n                    else if (newChild instanceof Dom7) {\n                        for (j = 0; j < newChild.length; j++) {\n                            this[i].insertBefore(newChild[j], this[i].childNodes[0]);\n                        }\n                    }\n                    else {\n                        this[i].insertBefore(newChild, this[i].childNodes[0]);\n                    }\n                }\n                return this;\n            },\n            prependTo: function (parent) {\n                $(parent).prepend(this);\n                return this;\n            },\n            insertBefore: function (selector) {\n                var before = $(selector);\n                for (var i = 0; i < this.length; i++) {\n                    if (before.length === 1) {\n                        before[0].parentNode.insertBefore(this[i], before[0]);\n                    }\n                    else if (before.length > 1) {\n                        for (var j = 0; j < before.length; j++) {\n                            before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);\n                        }\n                    }\n                }\n            },\n            insertAfter: function (selector) {\n                var after = $(selector);\n                for (var i = 0; i < this.length; i++) {\n                    if (after.length === 1) {\n                        after[0].parentNode.insertBefore(this[i], after[0].nextSibling);\n                    }\n                    else if (after.length > 1) {\n                        for (var j = 0; j < after.length; j++) {\n                            after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);\n                        }\n                    }\n                }\n            },\n            next: function (selector) {\n                if (this.length > 0) {\n                    if (selector) {\n                        if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) return new Dom7([this[0].nextElementSibling]);\n                        else return new Dom7([]);\n                    }\n                    else {\n                        if (this[0].nextElementSibling) return new Dom7([this[0].nextElementSibling]);\n                        else return new Dom7([]);\n                    }\n                }\n                else return new Dom7([]);\n            },\n            nextAll: function (selector) {\n                var nextEls = [];\n                var el = this[0];\n                if (!el) return new Dom7([]);\n                while (el.nextElementSibling) {\n                    var next = el.nextElementSibling;\n                    if (selector) {\n                        if($(next).is(selector)) nextEls.push(next);\n                    }\n                    else nextEls.push(next);\n                    el = next;\n                }\n                return new Dom7(nextEls);\n            },\n            prev: function (selector) {\n                if (this.length > 0) {\n                    if (selector) {\n                        if (this[0].previousElementSibling && $(this[0].previousElementSibling).is(selector)) return new Dom7([this[0].previousElementSibling]);\n                        else return new Dom7([]);\n                    }\n                    else {\n                        if (this[0].previousElementSibling) return new Dom7([this[0].previousElementSibling]);\n                        else return new Dom7([]);\n                    }\n                }\n                else return new Dom7([]);\n            },\n            prevAll: function (selector) {\n                var prevEls = [];\n                var el = this[0];\n                if (!el) return new Dom7([]);\n                while (el.previousElementSibling) {\n                    var prev = el.previousElementSibling;\n                    if (selector) {\n                        if($(prev).is(selector)) prevEls.push(prev);\n                    }\n                    else prevEls.push(prev);\n                    el = prev;\n                }\n                return new Dom7(prevEls);\n            },\n            parent: function (selector) {\n                var parents = [];\n                for (var i = 0; i < this.length; i++) {\n                    if (selector) {\n                        if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);\n                    }\n                    else {\n                        parents.push(this[i].parentNode);\n                    }\n                }\n                return $($.unique(parents));\n            },\n            parents: function (selector) {\n                var parents = [];\n                for (var i = 0; i < this.length; i++) {\n                    var parent = this[i].parentNode;\n                    while (parent) {\n                        if (selector) {\n                            if ($(parent).is(selector)) parents.push(parent);\n                        }\n                        else {\n                            parents.push(parent);\n                        }\n                        parent = parent.parentNode;\n                    }\n                }\n                return $($.unique(parents));\n            },\n            find : function (selector) {\n                var foundElements = [];\n                for (var i = 0; i < this.length; i++) {\n                    var found = this[i].querySelectorAll(selector);\n                    for (var j = 0; j < found.length; j++) {\n                        foundElements.push(found[j]);\n                    }\n                }\n                return new Dom7(foundElements);\n            },\n            children: function (selector) {\n                var children = [];\n                for (var i = 0; i < this.length; i++) {\n                    var childNodes = this[i].childNodes;\n        \n                    for (var j = 0; j < childNodes.length; j++) {\n                        if (!selector) {\n                            if (childNodes[j].nodeType === 1) children.push(childNodes[j]);\n                        }\n                        else {\n                            if (childNodes[j].nodeType === 1 && $(childNodes[j]).is(selector)) children.push(childNodes[j]);\n                        }\n                    }\n                }\n                return new Dom7($.unique(children));\n            },\n            remove: function () {\n                for (var i = 0; i < this.length; i++) {\n                    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);\n                }\n                return this;\n            },\n            detach: function () {\n                return this.remove();\n            },\n            add: function () {\n                var dom = this;\n                var i, j;\n                for (i = 0; i < arguments.length; i++) {\n                    var toAdd = $(arguments[i]);\n                    for (j = 0; j < toAdd.length; j++) {\n                        dom[dom.length] = toAdd[j];\n                        dom.length++;\n                    }\n                }\n                return dom;\n            }\n        };\n        \n        // Shortcuts\n        (function () {\n            var shortcuts = ('click blur focus focusin focusout keyup keydown keypress submit change mousedown mousemove mouseup mouseenter mouseleave mouseout mouseover touchstart touchend touchmove resize scroll').split(' ');\n            var notTrigger = ('resize scroll').split(' ');\n            function createMethod(name) {\n                Dom7.prototype[name] = function (targetSelector, listener, capture) {\n                    var i;\n                    if (typeof targetSelector === 'undefined') {\n                        for (i = 0; i < this.length; i++) {\n                            if (notTrigger.indexOf(name) < 0) {\n                                if (name in this[i]) this[i][name]();\n                                else {\n                                    $(this[i]).trigger(name);\n                                }\n                            }\n                        }\n                        return this;\n                    }\n                    else {\n                        return this.on(name, targetSelector, listener, capture);\n                    }\n                };\n            }\n            for (var i = 0; i < shortcuts.length; i++) {\n                createMethod(shortcuts[i]);\n            }\n        })();\n        \n\n        // Global Ajax Setup\n        var globalAjaxOptions = {};\n        $.ajaxSetup = function (options) {\n            if (options.type) options.method = options.type;\n            $.each(options, function (optionName, optionValue) {\n                globalAjaxOptions[optionName]  = optionValue;\n            });\n        };\n        \n        // Ajax\n        var _jsonpRequests = 0;\n        $.ajax = function (options) {\n            var defaults = {\n                method: 'GET',\n                data: false,\n                async: true,\n                cache: true,\n                user: '',\n                password: '',\n                headers: {},\n                xhrFields: {},\n                statusCode: {},\n                processData: true,\n                dataType: 'text',\n                contentType: 'application/x-www-form-urlencoded',\n                timeout: 0\n            };\n            var callbacks = ['beforeSend', 'error', 'complete', 'success', 'statusCode'];\n        \n        \n            //For jQuery guys\n            if (options.type) options.method = options.type;\n        \n            // Merge global and defaults\n            $.each(globalAjaxOptions, function (globalOptionName, globalOptionValue) {\n                if (callbacks.indexOf(globalOptionName) < 0) defaults[globalOptionName] = globalOptionValue;\n            });\n        \n            // Function to run XHR callbacks and events\n            function fireAjaxCallback (eventName, eventData, callbackName) {\n                var a = arguments;\n                if (eventName) $(document).trigger(eventName, eventData);\n                if (callbackName) {\n                    // Global callback\n                    if (callbackName in globalAjaxOptions) globalAjaxOptions[callbackName](a[3], a[4], a[5], a[6]);\n                    // Options callback\n                    if (options[callbackName]) options[callbackName](a[3], a[4], a[5], a[6]);\n                }\n            }\n        \n            // Merge options and defaults\n            $.each(defaults, function (prop, defaultValue) {\n                if (!(prop in options)) options[prop] = defaultValue;\n            });\n        \n            // Default URL\n            if (!options.url) {\n                options.url = window.location.toString();\n            }\n            // Parameters Prefix\n            var paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?';\n        \n            // UC method\n            var _method = options.method.toUpperCase();\n            // Data to modify GET URL\n            if ((_method === 'GET' || _method === 'HEAD') && options.data) {\n                var stringData;\n                if (typeof options.data === 'string') {\n                    // Should be key=value string\n                    if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];\n                    else stringData = options.data;\n                }\n                else {\n                    // Should be key=value object\n                    stringData = $.serializeObject(options.data);\n                }\n                if (stringData.length) {\n                    options.url += paramsPrefix + stringData;\n                    if (paramsPrefix === '?') paramsPrefix = '&';\n                }\n            }\n            // JSONP\n            if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\n        \n                var callbackName = 'f7jsonp_' + Date.now() + (_jsonpRequests++);\n                var abortTimeout;\n                var callbackSplit = options.url.split('callback=');\n                var requestUrl = callbackSplit[0] + 'callback=' + callbackName;\n                if (callbackSplit[1].indexOf('&') >= 0) {\n                    var addVars = callbackSplit[1].split('&').filter(function (el) { return el.indexOf('=') > 0; }).join('&');\n                    if (addVars.length > 0) requestUrl += '&' + addVars;\n                }\n        \n                // Create script\n                var script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.onerror = function() {\n                    clearTimeout(abortTimeout);\n                    fireAjaxCallback(undefined, undefined, 'error', null, 'scripterror');\n                };\n                script.src = requestUrl;\n        \n                // Handler\n                window[callbackName] = function (data) {\n                    clearTimeout(abortTimeout);\n                    fireAjaxCallback(undefined, undefined, 'success', data);\n                    script.parentNode.removeChild(script);\n                    script = null;\n                    delete window[callbackName];\n                };\n                document.querySelector('head').appendChild(script);\n        \n                if (options.timeout > 0) {\n                    abortTimeout = setTimeout(function () {\n                        script.parentNode.removeChild(script);\n                        script = null;\n                        fireAjaxCallback(undefined, undefined, 'error', null, 'timeout');\n                    }, options.timeout);\n                }\n        \n                return;\n            }\n        \n            // Cache for GET/HEAD requests\n            if (_method === 'GET' || _method === 'HEAD') {\n                if (options.cache === false) {\n                    options.url += (paramsPrefix + '_nocache=' + Date.now());\n                }\n            }\n        \n            // Create XHR\n            var xhr = new XMLHttpRequest();\n        \n            // Save Request URL\n            xhr.requestUrl = options.url;\n            xhr.requestParameters = options;\n        \n            // Open XHR\n            xhr.open(_method, options.url, options.async, options.user, options.password);\n        \n            // Create POST Data\n            var postData = null;\n        \n            if ((_method === 'POST' || _method === 'PUT') && options.data) {\n                if (options.processData) {\n                    var postDataInstances = [ArrayBuffer, Blob, Document, FormData];\n                    // Post Data\n                    if (postDataInstances.indexOf(options.data.constructor) >= 0) {\n                        postData = options.data;\n                    }\n                    else {\n                        // POST Headers\n                        var boundary = '---------------------------' + Date.now().toString(16);\n        \n                        if (options.contentType === 'multipart\\/form-data') {\n                            xhr.setRequestHeader('Content-Type', 'multipart\\/form-data; boundary=' + boundary);\n                        }\n                        else {\n                            xhr.setRequestHeader('Content-Type', options.contentType);\n                        }\n                        postData = '';\n                        var _data = $.serializeObject(options.data);\n                        if (options.contentType === 'multipart\\/form-data') {\n                            boundary = '---------------------------' + Date.now().toString(16);\n                            _data = _data.split('&');\n                            var _newData = [];\n                            for (var i = 0; i < _data.length; i++) {\n                                _newData.push('Content-Disposition: form-data; name=\"' + _data[i].split('=')[0] + '\"\\r\\n\\r\\n' + _data[i].split('=')[1] + '\\r\\n');\n                            }\n                            postData = '--' + boundary + '\\r\\n' + _newData.join('--' + boundary + '\\r\\n') + '--' + boundary + '--\\r\\n';\n                        }\n                        else {\n                            postData = options.contentType === 'application/x-www-form-urlencoded' ? _data : _data.replace(/&/g, '\\r\\n');\n                        }\n                    }\n                }\n                else {\n                    postData = options.data;\n                }\n        \n            }\n        \n            // Additional headers\n            if (options.headers) {\n                $.each(options.headers, function (headerName, headerCallback) {\n                    xhr.setRequestHeader(headerName, headerCallback);\n                });\n            }\n        \n            // Check for crossDomain\n            if (typeof options.crossDomain === 'undefined') {\n                options.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\n            }\n        \n            if (!options.crossDomain) {\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n            }\n        \n            if (options.xhrFields) {\n                $.each(options.xhrFields, function (fieldName, fieldValue) {\n                    xhr[fieldName] = fieldValue;\n                });\n            }\n        \n            var xhrTimeout;\n            // Handle XHR\n            xhr.onload = function (e) {\n                if (xhrTimeout) clearTimeout(xhrTimeout);\n                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) {\n                    var responseData;\n                    if (options.dataType === 'json') {\n                        try {\n                            responseData = JSON.parse(xhr.responseText);\n                            fireAjaxCallback('ajaxSuccess', {xhr: xhr}, 'success', responseData, xhr.status, xhr);\n                        }\n                        catch (err) {\n                            fireAjaxCallback('ajaxError', {xhr: xhr, parseerror: true}, 'error', xhr, 'parseerror');\n                        }\n                    }\n                    else {\n                        responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n                        fireAjaxCallback('ajaxSuccess', {xhr: xhr}, 'success', responseData, xhr.status, xhr);\n                    }\n                }\n                else {\n                    fireAjaxCallback('ajaxError', {xhr: xhr}, 'error', xhr, xhr.status);\n                }\n                if (options.statusCode) {\n                    if (globalAjaxOptions.statusCode && globalAjaxOptions.statusCode[xhr.status]) globalAjaxOptions.statusCode[xhr.status](xhr);\n                    if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);\n                }\n                fireAjaxCallback('ajaxComplete', {xhr: xhr}, 'complete', xhr, xhr.status);\n            };\n        \n            xhr.onerror = function (e) {\n                if (xhrTimeout) clearTimeout(xhrTimeout);\n                fireAjaxCallback('ajaxError', {xhr: xhr}, 'error', xhr, xhr.status);\n            };\n        \n            // Ajax start callback\n            fireAjaxCallback('ajaxStart', {xhr: xhr}, 'start', xhr);\n            fireAjaxCallback(undefined, undefined, 'beforeSend', xhr);\n        \n        \n            // Send XHR\n            xhr.send(postData);\n        \n            // Timeout\n            if (options.timeout > 0) {\n                xhrTimeout = setTimeout(function () {\n                    xhr.abort();\n                    fireAjaxCallback('ajaxError', {xhr: xhr, timeout: true}, 'error', xhr, 'timeout');\n                    fireAjaxCallback('ajaxComplete', {xhr: xhr, timeout: true}, 'complete', xhr, 'timeout');\n                }, options.timeout);\n            }\n        \n            // Return XHR object\n            return xhr;\n        };\n        // Shrotcuts\n        (function () {\n            var methods = ('get post getJSON').split(' ');\n            function createMethod(method) {\n                $[method] = function (url, data, success) {\n                    return $.ajax({\n                        url: url,\n                        method: method === 'post' ? 'POST' : 'GET',\n                        data: typeof data === 'function' ? undefined : data,\n                        success: typeof data === 'function' ? data : success,\n                        dataType: method === 'getJSON' ? 'json' : undefined\n                    });\n                };\n            }\n            for (var i = 0; i < methods.length; i++) {\n                createMethod(methods[i]);\n            }\n        })();\n        \n\n        // DOM Library Utilites\n        $.parseUrlQuery = function (url) {\n            var query = {}, i, params, param;\n            if (url.indexOf('?') >= 0) url = url.split('?')[1];\n            else return query;\n            params = url.split('&');\n            for (i = 0; i < params.length; i++) {\n                param = params[i].split('=');\n                query[param[0]] = param[1];\n            }\n            return query;\n        };\n        $.isArray = function (arr) {\n            if (Object.prototype.toString.apply(arr) === '[object Array]') return true;\n            else return false;\n        };\n        $.each = function (obj, callback) {\n            if (typeof obj !== 'object') return;\n            if (!callback) return;\n            var i, prop;\n            if ($.isArray(obj) || obj instanceof Dom7) {\n                // Array\n                for (i = 0; i < obj.length; i++) {\n                    callback(i, obj[i]);\n                }\n            }\n            else {\n                // Object\n                for (prop in obj) {\n                    if (obj.hasOwnProperty(prop)) {\n                        callback(prop, obj[prop]);\n                    }\n                }\n            }\n        };\n        $.unique = function (arr) {\n            var unique = [];\n            for (var i = 0; i < arr.length; i++) {\n                if (unique.indexOf(arr[i]) === -1) unique.push(arr[i]);\n            }\n            return unique;\n        };\n        $.serializeObject = function (obj, parents) {\n            if (typeof obj === 'string') return obj;\n            var resultArray = [];\n            var separator = '&';\n            parents = parents || [];\n            function var_name(name) {\n                if (parents.length > 0) {\n                    var _parents = '';\n                    for (var j = 0; j < parents.length; j++) {\n                        if (j === 0) _parents += parents[j];\n                        else _parents += '[' + encodeURIComponent(parents[j]) + ']';\n                    }\n                    return _parents + '[' + encodeURIComponent(name) + ']';\n                }\n                else {\n                    return encodeURIComponent(name);\n                }\n            }\n            function var_value(value) {\n                return encodeURIComponent(value);\n            }\n            for (var prop in obj) {\n                if (obj.hasOwnProperty(prop)) {\n                    var toPush;\n                    if ($.isArray(obj[prop])) {\n                        toPush = [];\n                        for (var i = 0; i < obj[prop].length; i ++) {\n                            toPush.push(var_name(prop) + '[]=' + var_value(obj[prop][i]));\n                        }\n                        if (toPush.length > 0) resultArray.push(toPush.join(separator));\n                    }\n                    else if (typeof obj[prop] === 'object') {\n                        // Object, convert to named array\n                        var _newParents = parents.slice();\n                        _newParents.push(prop);\n                        toPush = $.serializeObject(obj[prop], _newParents);\n                        if (toPush !== '') resultArray.push(toPush);\n                    }\n                    else if (typeof obj[prop] !== 'undefined' && obj[prop] !== '') {\n                        // Should be string or plain value\n                        resultArray.push(var_name(prop) + '=' + var_value(obj[prop]));\n                    }\n                }\n            }\n            return resultArray.join(separator);\n        };\n        $.toCamelCase = function (string) {\n            return string.toLowerCase().replace(/-(.)/g, function(match, group1) {\n                return group1.toUpperCase();\n            });\n        };\n        $.dataset = function (el) {\n            return $(el).dataset();\n        };\n        $.getTranslate = function (el, axis) {\n            var matrix, curTransform, curStyle, transformMatrix;\n        \n            // automatic axis detection\n            if (typeof axis === 'undefined') {\n                axis = 'x';\n            }\n        \n            curStyle = window.getComputedStyle(el, null);\n            if (window.WebKitCSSMatrix) {\n                curTransform = curStyle.transform || curStyle.webkitTransform;\n                if (curTransform.split(',').length > 6) {\n                    curTransform = curTransform.split(', ').map(function(a){\n                        return a.replace(',','.');\n                    }).join(', ');\n                }\n                // Some old versions of Webkit choke when 'none' is passed; pass\n                // empty string instead in this case\n                transformMatrix = new WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);\n            }\n            else {\n                transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform  || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n                matrix = transformMatrix.toString().split(',');\n            }\n        \n            if (axis === 'x') {\n                //Latest Chrome and webkits Fix\n                if (window.WebKitCSSMatrix)\n                    curTransform = transformMatrix.m41;\n                //Crazy IE10 Matrix\n                else if (matrix.length === 16)\n                    curTransform = parseFloat(matrix[12]);\n                //Normal Browsers\n                else\n                    curTransform = parseFloat(matrix[4]);\n            }\n            if (axis === 'y') {\n                //Latest Chrome and webkits Fix\n                if (window.WebKitCSSMatrix)\n                    curTransform = transformMatrix.m42;\n                //Crazy IE10 Matrix\n                else if (matrix.length === 16)\n                    curTransform = parseFloat(matrix[13]);\n                //Normal Browsers\n                else\n                    curTransform = parseFloat(matrix[5]);\n            }\n            \n            return curTransform || 0;\n        };\n        \n        $.requestAnimationFrame = function (callback) {\n            if (window.requestAnimationFrame) return window.requestAnimationFrame(callback);\n            else if (window.webkitRequestAnimationFrame) return window.webkitRequestAnimationFrame(callback);\n            else if (window.mozRequestAnimationFrame) return window.mozRequestAnimationFrame(callback);\n            else {\n                return window.setTimeout(callback, 1000 / 60);\n            }\n        };\n        $.cancelAnimationFrame = function (id) {\n            if (window.cancelAnimationFrame) return window.cancelAnimationFrame(id);\n            else if (window.webkitCancelAnimationFrame) return window.webkitCancelAnimationFrame(id);\n            else if (window.mozCancelAnimationFrame) return window.mozCancelAnimationFrame(id);\n            else {\n                return window.clearTimeout(id);\n            }  \n        };\n        $.supportTouch = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\n        \n        // Link to prototype\n        $.fn = Dom7.prototype;\n        \n        // Plugins\n        $.fn.scrollTo = function (left, top, duration, easing, callback) {\n            if (arguments.length === 4 && typeof easing === 'function') {\n                callback = easing;\n                easing = undefined;\n            }\n            return this.each(function () {\n                var el = this;\n                var currentTop, currentLeft, maxTop, maxLeft, newTop, newLeft, scrollTop, scrollLeft;\n                var animateTop = top > 0 || top === 0;\n                var animateLeft = left > 0 || left === 0;\n                if (typeof easing === 'undefined') {\n                    easing = 'swing';\n                }\n                if (animateTop) {\n                    currentTop = el.scrollTop;\n                    if (!duration) {\n                        el.scrollTop = top;\n                    }\n                }\n                if (animateLeft) {\n                    currentLeft = el.scrollLeft;\n                    if (!duration) {\n                        el.scrollLeft = left;\n                    }\n                }\n                if (!duration) return;\n                if (animateTop) {\n                    maxTop = el.scrollHeight - el.offsetHeight;\n                    newTop = Math.max(Math.min(top, maxTop), 0);\n                }\n                if (animateLeft) {\n                    maxLeft = el.scrollWidth - el.offsetWidth;\n                    newLeft = Math.max(Math.min(left, maxLeft), 0);\n                }\n                var startTime = null;\n                if (animateTop && newTop === currentTop) animateTop = false;\n                if (animateLeft && newLeft === currentLeft) animateLeft = false;\n                function render(time) {\n                    if (time === undefined) {\n                        time = new Date().getTime();\n                    }\n                    if (startTime === null) {\n                        startTime = time;\n                    }\n                    var doneLeft, doneTop, done;\n                    var progress = Math.max(Math.min((time - startTime) / duration, 1), 0);\n                    var easeProgress = easing === 'linear' ? progress : (0.5 - Math.cos( progress * Math.PI ) / 2);\n                    if (animateTop) scrollTop = currentTop + (easeProgress * (newTop - currentTop));\n                    if (animateLeft) scrollLeft = currentLeft + (easeProgress * (newLeft - currentLeft));\n                    if (animateTop && newTop > currentTop && scrollTop >= newTop)  {\n                        el.scrollTop = newTop;\n                        done = true;\n                    }\n                    if (animateTop && newTop < currentTop && scrollTop <= newTop)  {\n                        el.scrollTop = newTop;\n                        done = true;\n                    }\n        \n                    if (animateLeft && newLeft > currentLeft && scrollLeft >= newLeft)  {\n                        el.scrollLeft = newLeft;\n                        done = true;\n                    }\n                    if (animateLeft && newLeft < currentLeft && scrollLeft <= newLeft)  {\n                        el.scrollLeft = newLeft;\n                        done = true;\n                    }\n        \n                    if (done) {\n                        if (callback) callback();\n                        return;\n                    }\n                    if (animateTop) el.scrollTop = scrollTop;\n                    if (animateLeft) el.scrollLeft = scrollLeft;\n                    $.requestAnimationFrame(render);\n                }\n                $.requestAnimationFrame(render);\n            });\n        };\n        $.fn.scrollTop = function (top, duration, easing, callback) {\n            if (arguments.length === 3 && typeof easing === 'function') {\n                callback = easing;\n                easing = undefined;\n            }\n            var dom = this;\n            if (typeof top === 'undefined') {\n                if (dom.length > 0) return dom[0].scrollTop;\n                else return null;\n            }\n            return dom.scrollTo(undefined, top, duration, easing, callback);\n        };\n        $.fn.scrollLeft = function (left, duration, easing, callback) {\n            if (arguments.length === 3 && typeof easing === 'function') {\n                callback = easing;\n                easing = undefined;\n            }\n            var dom = this;\n            if (typeof left === 'undefined') {\n                if (dom.length > 0) return dom[0].scrollLeft;\n                else return null;\n            }\n            return dom.scrollTo(left, undefined, duration, easing, callback);\n        };\n\n        return $;\n    })();\n    \n    // Export Dom7 to Framework7\n    Framework7.$ = Dom7;\n    \n    // Export to local scope\n    var $ = Dom7;\n    \n    // Export to Window\n    window.Dom7 = Dom7;\n    \n\n    /*===========================\n    Features Support Detection\n    ===========================*/\n    Framework7.prototype.support = (function () {\n        var support = {\n            touch: !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch)\n        };\n    \n        // Export object\n        return support;\n    })();\n    \n\n    /*===========================\n    Device/OS Detection\n    ===========================*/\n    Framework7.prototype.device = (function () {\n        var device = {};\n        var ua = navigator.userAgent;\n        var $ = Dom7;\n    \n        var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n        var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n        var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n        var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n    \n        device.ios = device.android = device.iphone = device.ipad = device.androidChrome = false;\n        \n        // Android\n        if (android) {\n            device.os = 'android';\n            device.osVersion = android[2];\n            device.android = true;\n            device.androidChrome = ua.toLowerCase().indexOf('chrome') >= 0;\n        }\n        if (ipad || iphone || ipod) {\n            device.os = 'ios';\n            device.ios = true;\n        }\n        // iOS\n        if (iphone && !ipod) {\n            device.osVersion = iphone[2].replace(/_/g, '.');\n            device.iphone = true;\n        }\n        if (ipad) {\n            device.osVersion = ipad[2].replace(/_/g, '.');\n            device.ipad = true;\n        }\n        if (ipod) {\n            device.osVersion = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n            device.iphone = true;\n        }\n        // iOS 8+ changed UA\n        if (device.ios && device.osVersion && ua.indexOf('Version/') >= 0) {\n            if (device.osVersion.split('.')[0] === '10') {\n                device.osVersion = ua.toLowerCase().split('version/')[1].split(' ')[0];\n            }\n        }\n    \n        // Webview\n        device.webView = (iphone || ipad || ipod) && ua.match(/.*AppleWebKit(?!.*Safari)/i);\n            \n        // Minimal UI\n        if (device.os && device.os === 'ios') {\n            var osVersionArr = device.osVersion.split('.');\n            device.minimalUi = !device.webView &&\n                                (ipod || iphone) &&\n                                (osVersionArr[0] * 1 === 7 ? osVersionArr[1] * 1 >= 1 : osVersionArr[0] * 1 > 7) &&\n                                $('meta[name=\"viewport\"]').length > 0 && $('meta[name=\"viewport\"]').attr('content').indexOf('minimal-ui') >= 0;\n        }\n    \n        // Check for status bar and fullscreen app mode\n        var windowWidth = $(window).width();\n        var windowHeight = $(window).height();\n        device.statusBar = false;\n        if (device.webView && (windowWidth * windowHeight === screen.width * screen.height)) {\n            device.statusBar = true;\n        }\n        else {\n            device.statusBar = false;\n        }\n    \n        // Classes\n        var classNames = [];\n    \n        // Pixel Ratio\n        device.pixelRatio = window.devicePixelRatio || 1;\n        classNames.push('pixel-ratio-' + Math.floor(device.pixelRatio));\n        if (device.pixelRatio >= 2) {\n            classNames.push('retina');\n        }\n    \n        // OS classes\n        if (device.os) {\n            classNames.push(device.os, device.os + '-' + device.osVersion.split('.')[0], device.os + '-' + device.osVersion.replace(/\\./g, '-'));\n            if (device.os === 'ios') {\n                var major = parseInt(device.osVersion.split('.')[0], 10);\n                for (var i = major - 1; i >= 6; i--) {\n                    classNames.push('ios-gt-' + i);\n                }\n            }\n            \n        }\n        // Status bar classes\n        if (device.statusBar) {\n            classNames.push('with-statusbar-overlay');\n        }\n        else {\n            $('html').removeClass('with-statusbar-overlay');\n        }\n    \n        // Add html classes\n        if (classNames.length > 0) $('html').addClass(classNames.join(' '));\n    \n        // Export object\n        return device;\n    })();\n    \n\n    /*===========================\n    Plugins prototype\n    ===========================*/\n    Framework7.prototype.plugins = {};\n    \n\n    /*===========================\n    Template7 Template engine\n    ===========================*/\n    window.Template7 = (function () {\n        function isArray(arr) {\n            return Object.prototype.toString.apply(arr) === '[object Array]';\n        }\n        function isObject(obj) {\n            return obj instanceof Object;\n        }\n        function isFunction(func) {\n            return typeof func === 'function';\n        }\n        var cache = {};\n        function helperToSlices(string) {\n            var helperParts = string.replace(/[{}#}]/g, '').split(' ');\n            var slices = [];\n            var shiftIndex, i, j;\n            for (i = 0; i < helperParts.length; i++) {\n                var part = helperParts[i];\n                if (i === 0) slices.push(part);\n                else {\n                    if (part.indexOf('\"') === 0) {\n                        // Plain String\n                        if (part.match(/\"/g).length === 2) {\n                            // One word string\n                            slices.push(part);\n                        }\n                        else {\n                            // Find closed Index\n                            shiftIndex = 0;\n                            for (j = i + 1; j < helperParts.length; j++) {\n                                part += ' ' + helperParts[j];\n                                if (helperParts[j].indexOf('\"') >= 0) {\n                                    shiftIndex = j;\n                                    slices.push(part);\n                                    break;\n                                }\n                            }\n                            if (shiftIndex) i = shiftIndex;\n                        }\n                    }\n                    else {\n                        if (part.indexOf('=') > 0) {\n                            // Hash\n                            var hashParts = part.split('=');\n                            var hashName = hashParts[0];\n                            var hashContent = hashParts[1];\n                            if (hashContent.match(/\"/g).length !== 2) {\n                                shiftIndex = 0;\n                                for (j = i + 1; j < helperParts.length; j++) {\n                                    hashContent += ' ' + helperParts[j];\n                                    if (helperParts[j].indexOf('\"') >= 0) {\n                                        shiftIndex = j;\n                                        break;\n                                    }\n                                }\n                                if (shiftIndex) i = shiftIndex;\n                            }\n                            var hash = [hashName, hashContent.replace(/\"/g,'')];\n                            slices.push(hash);\n                        }\n                        else {\n                            // Plain variable\n                            slices.push(part);\n                        }\n                    }\n                }\n            }\n            return slices;\n        }\n        function stringToBlocks(string) {\n            var blocks = [], i, j, k;\n            if (!string) return [];\n            var _blocks = string.split(/({{[^{^}]*}})/);\n            for (i = 0; i < _blocks.length; i++) {\n                var block = _blocks[i];\n                if (block === '') continue;\n                if (block.indexOf('{{') < 0) {\n                    blocks.push({\n                        type: 'plain',\n                        content: block\n                    });\n                }\n                else {\n                    if (block.indexOf('{/') >= 0) {\n                        continue;\n                    }\n                    if (block.indexOf('{#') < 0 && block.indexOf(' ') < 0 && block.indexOf('else') < 0) {\n                        // Simple variable\n                        blocks.push({\n                            type: 'variable',\n                            contextName: block.replace(/[{}]/g, '')\n                        });\n                        continue;\n                    }\n                    // Helpers\n                    var helperSlices = helperToSlices(block);\n                    var helperName = helperSlices[0];\n                    var isPartial = helperName === '>';\n                    var helperContext = [];\n                    var helperHash = {};\n                    for (j = 1; j < helperSlices.length; j++) {\n                        var slice = helperSlices[j];\n                        if (isArray(slice)) {\n                            // Hash\n                            helperHash[slice[0]] = slice[1] === 'false' ? false : slice[1];\n                        }\n                        else {\n                            helperContext.push(slice);\n                        }\n                    }\n                    \n                    if (block.indexOf('{#') >= 0) {\n                        // Condition/Helper\n                        var helperStartIndex = i;\n                        var helperContent = '';\n                        var elseContent = '';\n                        var toSkip = 0;\n                        var shiftIndex;\n                        var foundClosed = false, foundElse = false, foundClosedElse = false, depth = 0;\n                        for (j = i + 1; j < _blocks.length; j++) {\n                            if (_blocks[j].indexOf('{{#') >= 0) {\n                                depth ++;\n                            }\n                            if (_blocks[j].indexOf('{{/') >= 0) {\n                                depth --;\n                            }\n                            if (_blocks[j].indexOf('{{#' + helperName) >= 0) {\n                                helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                                toSkip ++;\n                            }\n                            else if (_blocks[j].indexOf('{{/' + helperName) >= 0) {\n                                if (toSkip > 0) {\n                                    toSkip--;\n                                    helperContent += _blocks[j];\n                                    if (foundElse) elseContent += _blocks[j];\n                                }\n                                else {\n                                    shiftIndex = j;\n                                    foundClosed = true;\n                                    break;\n                                }\n                            }\n                            else if (_blocks[j].indexOf('else') >= 0 && depth === 0) {\n                                foundElse = true;\n                            }\n                            else {\n                                if (!foundElse) helperContent += _blocks[j];\n                                if (foundElse) elseContent += _blocks[j];\n                            }\n    \n                        }\n                        if (foundClosed) {\n                            if (shiftIndex) i = shiftIndex;\n                            blocks.push({\n                                type: 'helper',\n                                helperName: helperName,\n                                contextName: helperContext,\n                                content: helperContent,\n                                inverseContent: elseContent,\n                                hash: helperHash\n                            });\n                        }\n                    }\n                    else if (block.indexOf(' ') > 0) {\n                        if (isPartial) {\n                            helperName = '_partial';\n                            if (helperContext[0]) helperContext[0] = '\"' + helperContext[0].replace(/\"|'/g, '') + '\"';\n                        }\n                        blocks.push({\n                            type: 'helper',\n                            helperName: helperName,\n                            contextName: helperContext,\n                            hash: helperHash\n                        });\n                    }\n                }\n            }\n            return blocks;\n        }\n        var Template7 = function (template) {\n            var t = this;\n            t.template = template;\n            \n            function getCompileFn(block, depth) {\n                if (block.content) return compile(block.content, depth);\n                else return function () {return ''; };\n            }\n            function getCompileInverse(block, depth) {\n                if (block.inverseContent) return compile(block.inverseContent, depth);\n                else return function () {return ''; };\n            }\n            function getCompileVar(name, ctx) {\n                var variable, parts, levelsUp = 0, initialCtx = ctx;\n                if (name.indexOf('../') === 0) {\n                    levelsUp = name.split('../').length - 1;\n                    var newDepth = ctx.split('_')[1] - levelsUp;\n                    ctx = 'ctx_' + (newDepth >= 1 ? newDepth : 1);\n                    parts = name.split('../')[levelsUp].split('.');\n                }\n                else if (name.indexOf('@global') === 0) {\n                    ctx = 'Template7.global';\n                    parts = name.split('@global.')[1].split('.');\n                }\n                else if (name.indexOf('@root') === 0) {\n                    ctx = 'root';\n                    parts = name.split('@root.')[1].split('.');\n                }\n                else {\n                    parts = name.split('.');\n                }\n                variable = ctx;\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    if (part.indexOf('@') === 0) {\n                        if (i > 0) {\n                            variable += '[(data && data.' + part.replace('@', '') + ')]';\n                        }\n                        else {\n                            variable = '(data && data.' + name.replace('@', '') + ')';\n                        }\n                    }\n                    else {\n                        if (isFinite(part)) {\n                            variable += '[' + part + ']';\n                        }\n                        else {\n                            if (part.indexOf('this') === 0) {\n                                variable = part.replace('this', ctx);\n                            }\n                            else {\n                                variable += '.' + part;       \n                            }\n                        }\n                    }\n                }\n    \n                return variable;\n            }\n            function getCompiledArguments(contextArray, ctx) {\n                var arr = [];\n                for (var i = 0; i < contextArray.length; i++) {\n                    if (contextArray[i].indexOf('\"') === 0) arr.push(contextArray[i]);\n                    else {\n                        arr.push(getCompileVar(contextArray[i], ctx));\n                    }\n                }\n    \n                return arr.join(', ');\n            }\n            function compile(template, depth) {\n                depth = depth || 1;\n                template = template || t.template;\n                if (typeof template !== 'string') {\n                    throw new Error('Template7: Template must be a string');\n                }\n                var blocks = stringToBlocks(template);\n                if (blocks.length === 0) {\n                    return function () { return ''; };\n                }\n                var ctx = 'ctx_' + depth;\n                var resultString = '';\n                if (depth === 1) {\n                    resultString += '(function (' + ctx + ', data, root) {\\n';\n                }\n                else {\n                    resultString += '(function (' + ctx + ', data) {\\n';\n                }\n                if (depth === 1) {\n                    resultString += 'function isArray(arr){return Object.prototype.toString.apply(arr) === \\'[object Array]\\';}\\n';\n                    resultString += 'function isFunction(func){return (typeof func === \\'function\\');}\\n';\n                    resultString += 'function c(val, ctx) {if (typeof val !== \"undefined\" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return \"\";}\\n';\n                    resultString += 'root = root || ctx_1 || {};\\n';\n                }\n                resultString += 'var r = \\'\\';\\n';\n                var i, j, context;\n                for (i = 0; i < blocks.length; i++) {\n                    var block = blocks[i];\n                    // Plain block\n                    if (block.type === 'plain') {\n                        resultString += 'r +=\\'' + (block.content).replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/'/g, '\\\\' + '\\'') + '\\';';\n                        continue;\n                    }\n                    var variable, compiledArguments;\n                    // Variable block\n                    if (block.type === 'variable') {\n                        variable = getCompileVar(block.contextName, ctx);\n                        resultString += 'r += c(' + variable + ', ' + ctx + ');';\n                    }\n                    // Helpers block\n                    if (block.type === 'helper') {\n                        if (block.helperName in t.helpers) {\n                            compiledArguments = getCompiledArguments(block.contextName, ctx);\n                            \n                            resultString += 'r += (Template7.helpers.' + block.helperName + ').call(' + ctx + ', ' + (compiledArguments && (compiledArguments + ', ')) +'{hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth + 1) + ', inverse: ' + getCompileInverse(block, depth + 1) + ', root: root});';\n                            \n                        }\n                        else {\n                            if (block.contextName.length > 0) {\n                                throw new Error('Template7: Missing helper: \"' + block.helperName + '\"');\n                            }\n                            else {\n                                variable = getCompileVar(block.helperName, ctx);\n                                resultString += 'if (' + variable + ') {';\n                                resultString += 'if (isArray(' + variable + ')) {';\n                                resultString += 'r += (Template7.helpers.each).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth+1) + ', inverse: ' + getCompileInverse(block, depth+1) + ', root: root});';\n                                resultString += '}else {';\n                                resultString += 'r += (Template7.helpers.with).call(' + ctx + ', ' + variable + ', {hash:' + JSON.stringify(block.hash) + ', data: data || {}, fn: ' + getCompileFn(block, depth+1) + ', inverse: ' + getCompileInverse(block, depth+1) + ', root: root});';\n                                resultString += '}}';\n                            }\n                        }\n                    }\n                }\n                resultString += '\\nreturn r;})';\n                return eval.call(window, resultString);\n            }\n            t.compile = function (template) {\n                if (!t.compiled) {\n                    t.compiled = compile(template);\n                }\n                return t.compiled;\n            };\n        };\n        Template7.prototype = {\n            options: {},\n            partials: {},\n            helpers: {\n                '_partial' : function (partialName, options) {\n                    var p = Template7.prototype.partials[partialName];\n                    if (!p || (p && !p.template)) return '';\n                    if (!p.compiled) {\n                        p.compiled = t7.compile(p.template);\n                    }\n                    var ctx = this;\n                    for (var hashName in options.hash) {\n                        ctx[hashName] = options.hash[hashName];\n                    }\n                    return p.compiled(ctx, options.data, options.root);\n                },\n                'escape': function (context, options) {\n                    if (typeof context !== 'string') {\n                        throw new Error('Template7: Passed context to \"escape\" helper should be a string');\n                    }\n                    return context\n                            .replace(/&/g, '&amp;')\n                            .replace(/</g, '&lt;')\n                            .replace(/>/g, '&gt;')\n                            .replace(/\"/g, '&quot;');\n                },\n                'if': function (context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (context) {\n                        return options.fn(this, options.data);\n                    }\n                    else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'unless': function (context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (!context) {\n                        return options.fn(this, options.data);\n                    }\n                    else {\n                        return options.inverse(this, options.data);\n                    }\n                },\n                'each': function (context, options) {\n                    var ret = '', i = 0;\n                    if (isFunction(context)) { context = context.call(this); }\n                    if (isArray(context)) {\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                        for (i = 0; i < context.length; i++) {\n                            ret += options.fn(context[i], {first: i === 0, last: i === context.length - 1, index: i});\n                        }\n                        if (options.hash.reverse) {\n                            context = context.reverse();\n                        }\n                    }\n                    else {\n                        for (var key in context) {\n                            i++;\n                            ret += options.fn(context[key], {key: key});\n                        }\n                    }\n                    if (i > 0) return ret;\n                    else return options.inverse(this);\n                },\n                'with': function (context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    return options.fn(context);\n                },\n                'join': function (context, options) {\n                    if (isFunction(context)) { context = context.call(this); }\n                    return context.join(options.hash.delimiter || options.hash.delimeter);\n                },\n                'js': function (expression, options) {\n                    var func;\n                    if (expression.indexOf('return')>=0) {\n                        func = '(function(){'+expression+'})';\n                    }\n                    else {\n                        func = '(function(){return ('+expression+')})';\n                    }\n                    return eval.call(this, func).call(this);\n                },\n                'js_compare': function (expression, options) {\n                    var func;\n                    if (expression.indexOf('return')>=0) {\n                        func = '(function(){'+expression+'})';\n                    }\n                    else {\n                        func = '(function(){return ('+expression+')})';\n                    }\n                    var condition = eval.call(this, func).call(this);\n                    if (condition) {\n                        return options.fn(this, options.data);\n                    }\n                    else {\n                        return options.inverse(this, options.data);   \n                    }\n                }\n            }\n        };\n        var t7 = function (template, data) {\n            if (arguments.length === 2) {\n                var instance = new Template7(template);\n                var rendered = instance.compile()(data);\n                instance = null;\n                return (rendered);\n            }\n            else return new Template7(template);\n        };\n        t7.registerHelper = function (name, fn) {\n            Template7.prototype.helpers[name] = fn;\n        };\n        t7.unregisterHelper = function (name) {\n            Template7.prototype.helpers[name] = undefined;  \n            delete Template7.prototype.helpers[name];\n        };\n        t7.registerPartial = function (name, template) {\n            Template7.prototype.partials[name] = {template: template};\n        };\n        t7.unregisterPartial = function (name, template) {\n            if (Template7.prototype.partials[name]) {\n                Template7.prototype.partials[name] = undefined;\n                delete Template7.prototype.partials[name];\n            }\n        };\n        \n        t7.compile = function (template, options) {\n            var instance = new Template7(template, options);\n            return instance.compile();\n        };\n        \n        t7.options = Template7.prototype.options;\n        t7.helpers = Template7.prototype.helpers;\n        t7.partials = Template7.prototype.partials;\n        return t7;\n    })();\n\n    /*===========================\n    Swiper\n    ===========================*/\n    window.Swiper = function (container, params) {\n        if (!(this instanceof Swiper)) return new Swiper(container, params);\n        var defaults = {\n            direction: 'horizontal',\n            touchEventsTarget: 'container',\n            initialSlide: 0,\n            speed: 300,\n            // autoplay\n            autoplay: false,\n            autoplayDisableOnInteraction: true,\n            // To support iOS's swipe-to-go-back gesture (when being used in-app, with UIWebView).\n            iOSEdgeSwipeDetection: false,\n            iOSEdgeSwipeThreshold: 20,\n            // Free mode\n            freeMode: false,\n            freeModeMomentum: true,\n            freeModeMomentumRatio: 1,\n            freeModeMomentumBounce: true,\n            freeModeMomentumBounceRatio: 1,\n            freeModeSticky: false,\n            freeModeMinimumVelocity: 0.02,\n            // Set wrapper width\n            setWrapperSize: false,\n            // Virtual Translate\n            virtualTranslate: false,\n            // Effects\n            effect: 'slide', // 'slide' or 'fade' or 'cube' or 'coverflow'\n            coverflow: {\n                rotate: 50,\n                stretch: 0,\n                depth: 100,\n                modifier: 1,\n                slideShadows : true\n            },\n            cube: {\n                slideShadows: true,\n                shadow: true,\n                shadowOffset: 20,\n                shadowScale: 0.94\n            },\n            fade: {\n                crossFade: false\n            },\n            // Parallax\n            parallax: false,\n            // Scrollbar\n            scrollbar: null,\n            scrollbarHide: true,\n            scrollbarDraggable: false,\n            scrollbarSnapOnRelease: false,\n            // Keyboard Mousewheel\n            keyboardControl: false,\n            mousewheelControl: false,\n            mousewheelReleaseOnEdges: false,\n            mousewheelInvert: false,\n            mousewheelForceToAxis: false,\n            mousewheelSensitivity: 1,\n            // Hash Navigation\n            hashnav: false,\n            // Slides grid\n            spaceBetween: 0,\n            slidesPerView: 1,\n            slidesPerColumn: 1,\n            slidesPerColumnFill: 'column',\n            slidesPerGroup: 1,\n            centeredSlides: false,\n            slidesOffsetBefore: 0, // in px\n            slidesOffsetAfter: 0, // in px\n            // Round length\n            roundLengths: false,\n            // Touches\n            touchRatio: 1,\n            touchAngle: 45,\n            simulateTouch: true,\n            shortSwipes: true,\n            longSwipes: true,\n            longSwipesRatio: 0.5,\n            longSwipesMs: 300,\n            followFinger: true,\n            onlyExternal: false,\n            threshold: 0,\n            touchMoveStopPropagation: true,\n            // Pagination\n            pagination: null,\n            paginationElement: 'span',\n            paginationClickable: false,\n            paginationHide: false,\n            paginationBulletRender: null,\n            // Resistance\n            resistance: true,\n            resistanceRatio: 0.85,\n            // Next/prev buttons\n            nextButton: null,\n            prevButton: null,\n            // Progress\n            watchSlidesProgress: false,\n            watchSlidesVisibility: false,\n            // Cursor\n            grabCursor: false,\n            // Clicks\n            preventClicks: true,\n            preventClicksPropagation: true,\n            slideToClickedSlide: false,\n            // Lazy Loading\n            lazyLoading: false,\n            lazyLoadingInPrevNext: false,\n            lazyLoadingOnTransitionStart: false,\n            // Images\n            preloadImages: true,\n            updateOnImagesReady: true,\n            // loop\n            loop: false,\n            loopAdditionalSlides: 0,\n            loopedSlides: null,\n            // Control\n            control: undefined,\n            controlInverse: false,\n            controlBy: 'slide', //or 'container'\n            // Swiping/no swiping\n            allowSwipeToPrev: true,\n            allowSwipeToNext: true,\n            swipeHandler: null, //'.swipe-handler',\n            noSwiping: true,\n            noSwipingClass: 'swiper-no-swiping',\n            // NS\n            slideClass: 'swiper-slide',\n            slideActiveClass: 'swiper-slide-active',\n            slideVisibleClass: 'swiper-slide-visible',\n            slideDuplicateClass: 'swiper-slide-duplicate',\n            slideNextClass: 'swiper-slide-next',\n            slidePrevClass: 'swiper-slide-prev',\n            wrapperClass: 'swiper-wrapper',\n            bulletClass: 'swiper-pagination-bullet',\n            bulletActiveClass: 'swiper-pagination-bullet-active',\n            buttonDisabledClass: 'swiper-button-disabled',\n            paginationHiddenClass: 'swiper-pagination-hidden',\n            // Observer\n            observer: false,\n            observeParents: false,\n            // Accessibility\n            a11y: false,\n            prevSlideMessage: 'Previous slide',\n            nextSlideMessage: 'Next slide',\n            firstSlideMessage: 'This is the first slide',\n            lastSlideMessage: 'This is the last slide',\n            paginationBulletMessage: 'Go to slide {{index}}',\n            // Callbacks\n            runCallbacksOnInit: true\n            /*\n            Callbacks:\n            onInit: function (swiper)\n            onDestroy: function (swiper)\n            onClick: function (swiper, e)\n            onTap: function (swiper, e)\n            onDoubleTap: function (swiper, e)\n            onSliderMove: function (swiper, e)\n            onSlideChangeStart: function (swiper)\n            onSlideChangeEnd: function (swiper)\n            onTransitionStart: function (swiper)\n            onTransitionEnd: function (swiper)\n            onImagesReady: function (swiper)\n            onProgress: function (swiper, progress)\n            onTouchStart: function (swiper, e)\n            onTouchMove: function (swiper, e)\n            onTouchMoveOpposite: function (swiper, e)\n            onTouchEnd: function (swiper, e)\n            onReachBeginning: function (swiper)\n            onReachEnd: function (swiper)\n            onSetTransition: function (swiper, duration)\n            onSetTranslate: function (swiper, translate)\n            onAutoplayStart: function (swiper)\n            onAutoplayStop: function (swiper),\n            onLazyImageLoad: function (swiper, slide, image)\n            onLazyImageReady: function (swiper, slide, image)\n            */\n        \n        };\n        var initialVirtualTranslate = params && params.virtualTranslate;\n        \n        params = params || {};\n        for (var def in defaults) {\n            if (typeof params[def] === 'undefined') {\n                params[def] = defaults[def];\n            }\n            else if (typeof params[def] === 'object') {\n                for (var deepDef in defaults[def]) {\n                    if (typeof params[def][deepDef] === 'undefined') {\n                        params[def][deepDef] = defaults[def][deepDef];\n                    }\n                }\n            }\n        }\n        \n        // Swiper\n        var s = this;\n        \n        // Params\n        s.params = params;\n        \n        // Classname\n        s.classNames = [];\n        /*=========================\n          Dom Library and plugins\n          ===========================*/\n        if (typeof $ !== 'undefined' && typeof Dom7 !== 'undefined'){\n            $ = Dom7;\n        }  \n        if (typeof $ === 'undefined') {\n            if (typeof Dom7 === 'undefined') {\n                $ = window.Dom7 || window.Zepto || window.jQuery;\n            }\n            else {\n                $ = Dom7;\n            }\n            if (!$) return;\n        }\n        // Export it to Swiper instance\n        s.$ = $;\n        \n        /*=========================\n          Preparation - Define Container, Wrapper and Pagination\n          ===========================*/\n        s.container = $(container);\n        if (s.container.length === 0) return;\n        if (s.container.length > 1) {\n            s.container.each(function () {\n                new Swiper(this, params);\n            });\n            return;\n        }\n        \n        // Save instance in container HTML Element and in data\n        s.container[0].swiper = s;\n        s.container.data('swiper', s);\n        \n        s.classNames.push('swiper-container-' + s.params.direction);\n        \n        if (s.params.freeMode) {\n            s.classNames.push('swiper-container-free-mode');\n        }\n        if (!s.support.flexbox) {\n            s.classNames.push('swiper-container-no-flexbox');\n            s.params.slidesPerColumn = 1;\n        }\n        // Enable slides progress when required\n        if (s.params.parallax || s.params.watchSlidesVisibility) {\n            s.params.watchSlidesProgress = true;\n        }\n        // Coverflow / 3D\n        if (['cube', 'coverflow'].indexOf(s.params.effect) >= 0) {\n            if (s.support.transforms3d) {\n                s.params.watchSlidesProgress = true;\n                s.classNames.push('swiper-container-3d');\n            }\n            else {\n                s.params.effect = 'slide';\n            }\n        }\n        if (s.params.effect !== 'slide') {\n            s.classNames.push('swiper-container-' + s.params.effect);\n        }\n        if (s.params.effect === 'cube') {\n            s.params.resistanceRatio = 0;\n            s.params.slidesPerView = 1;\n            s.params.slidesPerColumn = 1;\n            s.params.slidesPerGroup = 1;\n            s.params.centeredSlides = false;\n            s.params.spaceBetween = 0;\n            s.params.virtualTranslate = true;\n            s.params.setWrapperSize = false;\n        }\n        if (s.params.effect === 'fade') {\n            s.params.slidesPerView = 1;\n            s.params.slidesPerColumn = 1;\n            s.params.slidesPerGroup = 1;\n            s.params.watchSlidesProgress = true;\n            s.params.spaceBetween = 0;\n            if (typeof initialVirtualTranslate === 'undefined') {\n                s.params.virtualTranslate = true;\n            }\n        }\n        \n        // Grab Cursor\n        if (s.params.grabCursor && s.support.touch) {\n            s.params.grabCursor = false;\n        }\n        \n        // Wrapper\n        s.wrapper = s.container.children('.' + s.params.wrapperClass);\n        \n        // Pagination\n        if (s.params.pagination) {\n            s.paginationContainer = $(s.params.pagination);\n            if (s.params.paginationClickable) {\n                s.paginationContainer.addClass('swiper-pagination-clickable');\n            }\n        }\n        \n        // Is Horizontal\n        function isH() {\n            return s.params.direction === 'horizontal';\n        }\n        \n        // RTL\n        s.rtl = isH() && (s.container[0].dir.toLowerCase() === 'rtl' || s.container.css('direction') === 'rtl');\n        if (s.rtl) {\n            s.classNames.push('swiper-container-rtl');\n        }\n        \n        // Wrong RTL support\n        if (s.rtl) {\n            s.wrongRTL = s.wrapper.css('display') === '-webkit-box';\n        }\n        \n        // Columns\n        if (s.params.slidesPerColumn > 1) {\n            s.classNames.push('swiper-container-multirow');\n        }\n        \n        // Check for Android\n        if (s.device.android) {\n            s.classNames.push('swiper-container-android');\n        }\n        \n        // Add classes\n        s.container.addClass(s.classNames.join(' '));\n        \n        // Translate\n        s.translate = 0;\n        \n        // Progress\n        s.progress = 0;\n        \n        // Velocity\n        s.velocity = 0;\n        \n        /*=========================\n          Locks, unlocks\n          ===========================*/\n        s.lockSwipeToNext = function () {\n            s.params.allowSwipeToNext = false;\n        };\n        s.lockSwipeToPrev = function () {\n            s.params.allowSwipeToPrev = false;\n        };\n        s.lockSwipes = function () {\n            s.params.allowSwipeToNext = s.params.allowSwipeToPrev = false;\n        };\n        s.unlockSwipeToNext = function () {\n            s.params.allowSwipeToNext = true;\n        };\n        s.unlockSwipeToPrev = function () {\n            s.params.allowSwipeToPrev = true;\n        };\n        s.unlockSwipes = function () {\n            s.params.allowSwipeToNext = s.params.allowSwipeToPrev = true;\n        };\n        \n        /*=========================\n          Round helper\n          ===========================*/\n        function round(a) {\n            return Math.floor(a);\n        }  \n        /*=========================\n          Set grab cursor\n          ===========================*/\n        if (s.params.grabCursor) {\n            s.container[0].style.cursor = 'move';\n            s.container[0].style.cursor = '-webkit-grab';\n            s.container[0].style.cursor = '-moz-grab';\n            s.container[0].style.cursor = 'grab';\n        }\n        /*=========================\n          Update on Images Ready\n          ===========================*/\n        s.imagesToLoad = [];\n        s.imagesLoaded = 0;\n        \n        s.loadImage = function (imgElement, src, srcset, checkForComplete, callback) {\n            var image;\n            function onReady () {\n                if (callback) callback();\n            }\n            if (!imgElement.complete || !checkForComplete) {\n                if (src) {\n                    image = new window.Image();\n                    image.onload = onReady;\n                    image.onerror = onReady;\n                    if (srcset) {\n                        image.srcset = srcset;\n                    }\n                    if (src) {\n                        image.src = src;\n                    }\n                } else {\n                    onReady();\n                }\n        \n            } else {//image already loaded...\n                onReady();\n            }\n        };\n        s.preloadImages = function () {\n            s.imagesToLoad = s.container.find('img');\n            function _onReady() {\n                if (typeof s === 'undefined' || s === null) return;\n                if (s.imagesLoaded !== undefined) s.imagesLoaded++;\n                if (s.imagesLoaded === s.imagesToLoad.length) {\n                    if (s.params.updateOnImagesReady) s.update();\n                    s.emit('onImagesReady', s);\n                }\n            }\n            for (var i = 0; i < s.imagesToLoad.length; i++) {\n                s.loadImage(s.imagesToLoad[i], (s.imagesToLoad[i].currentSrc || s.imagesToLoad[i].getAttribute('src')), (s.imagesToLoad[i].srcset || s.imagesToLoad[i].getAttribute('srcset')), true, _onReady);\n            }\n        };\n        \n        /*=========================\n          Autoplay\n          ===========================*/\n        s.autoplayTimeoutId = undefined;\n        s.autoplaying = false;\n        s.autoplayPaused = false;\n        function autoplay() {\n            s.autoplayTimeoutId = setTimeout(function () {\n                if (s.params.loop) {\n                    s.fixLoop();\n                    s._slideNext();\n                }\n                else {\n                    if (!s.isEnd) {\n                        s._slideNext();\n                    }\n                    else {\n                        if (!params.autoplayStopOnLast) {\n                            s._slideTo(0);\n                        }\n                        else {\n                            s.stopAutoplay();\n                        }\n                    }\n                }\n            }, s.params.autoplay);\n        }\n        s.startAutoplay = function () {\n            if (typeof s.autoplayTimeoutId !== 'undefined') return false;\n            if (!s.params.autoplay) return false;\n            if (s.autoplaying) return false;\n            s.autoplaying = true;\n            s.emit('onAutoplayStart', s);\n            autoplay();\n        };\n        s.stopAutoplay = function (internal) {\n            if (!s.autoplayTimeoutId) return;\n            if (s.autoplayTimeoutId) clearTimeout(s.autoplayTimeoutId);\n            s.autoplaying = false;\n            s.autoplayTimeoutId = undefined;\n            s.emit('onAutoplayStop', s);\n        };\n        s.pauseAutoplay = function (speed) {\n            if (s.autoplayPaused) return;\n            if (s.autoplayTimeoutId) clearTimeout(s.autoplayTimeoutId);\n            s.autoplayPaused = true;\n            if (speed === 0) {\n                s.autoplayPaused = false;\n                autoplay();\n            }\n            else {\n                s.wrapper.transitionEnd(function () {\n                    if (!s) return;\n                    s.autoplayPaused = false;\n                    if (!s.autoplaying) {\n                        s.stopAutoplay();\n                    }\n                    else {\n                        autoplay();\n                    }\n                });\n            }\n        };\n        /*=========================\n          Min/Max Translate\n          ===========================*/\n        s.minTranslate = function () {\n            return (-s.snapGrid[0]);\n        };\n        s.maxTranslate = function () {\n            return (-s.snapGrid[s.snapGrid.length - 1]);\n        };\n        /*=========================\n          Slider/slides sizes\n          ===========================*/\n        s.updateContainerSize = function () {\n            var width, height;\n            if (typeof s.params.width !== 'undefined') {\n                width = s.params.width;\n            }\n            else {\n                width = s.container[0].clientWidth;\n            }\n            if (typeof s.params.height !== 'undefined') {\n                height = s.params.height;\n            }\n            else {\n                height = s.container[0].clientHeight;\n            }\n            if (width === 0 && isH() || height === 0 && !isH()) {\n                return;\n            }\n            \n            //Subtract paddings\n            width = width - parseInt(s.container.css('padding-left'), 10) - parseInt(s.container.css('padding-right'), 10);\n            height = height - parseInt(s.container.css('padding-top'), 10) - parseInt(s.container.css('padding-bottom'), 10);\n            \n            // Store values\n            s.width = width;\n            s.height = height;\n            s.size = isH() ? s.width : s.height;\n        };\n        \n        s.updateSlidesSize = function () {\n            s.slides = s.wrapper.children('.' + s.params.slideClass);\n            s.snapGrid = [];\n            s.slidesGrid = [];\n            s.slidesSizesGrid = [];\n        \n            var spaceBetween = s.params.spaceBetween,\n                slidePosition = -s.params.slidesOffsetBefore,\n                i,\n                prevSlideSize = 0,\n                index = 0;\n            if (typeof spaceBetween === 'string' && spaceBetween.indexOf('%') >= 0) {\n                spaceBetween = parseFloat(spaceBetween.replace('%', '')) / 100 * s.size;\n            }\n        \n            s.virtualSize = -spaceBetween;\n            // reset margins\n            if (s.rtl) s.slides.css({marginLeft: '', marginTop: ''});\n            else s.slides.css({marginRight: '', marginBottom: ''});\n        \n            var slidesNumberEvenToRows;\n            if (s.params.slidesPerColumn > 1) {\n                if (Math.floor(s.slides.length / s.params.slidesPerColumn) === s.slides.length / s.params.slidesPerColumn) {\n                    slidesNumberEvenToRows = s.slides.length;\n                }\n                else {\n                    slidesNumberEvenToRows = Math.ceil(s.slides.length / s.params.slidesPerColumn) * s.params.slidesPerColumn;\n                }\n                if (s.params.slidesPerView !== 'auto' && s.params.slidesPerColumnFill === 'row') {\n                    slidesNumberEvenToRows = Math.max(slidesNumberEvenToRows, s.params.slidesPerView * s.params.slidesPerColumn);\n                }\n            }\n        \n            // Calc slides\n            var slideSize;\n            var slidesPerColumn = s.params.slidesPerColumn;\n            var slidesPerRow = slidesNumberEvenToRows / slidesPerColumn;\n            var numFullColumns = slidesPerRow - (s.params.slidesPerColumn * slidesPerRow - s.slides.length);\n            for (i = 0; i < s.slides.length; i++) {\n                slideSize = 0;\n                var slide = s.slides.eq(i);\n                if (s.params.slidesPerColumn > 1) {\n                    // Set slides order\n                    var newSlideOrderIndex;\n                    var column, row;\n                    if (s.params.slidesPerColumnFill === 'column') {\n                        column = Math.floor(i / slidesPerColumn);\n                        row = i - column * slidesPerColumn;\n                        if (column > numFullColumns || (column === numFullColumns && row === slidesPerColumn-1)) {\n                            if (++row >= slidesPerColumn) {\n                                row = 0;\n                                column++;\n                            }\n                        }\n                        newSlideOrderIndex = column + row * slidesNumberEvenToRows / slidesPerColumn;\n                        slide\n                            .css({\n                                '-webkit-box-ordinal-group': newSlideOrderIndex,\n                                '-moz-box-ordinal-group': newSlideOrderIndex,\n                                '-ms-flex-order': newSlideOrderIndex,\n                                '-webkit-order': newSlideOrderIndex,\n                                'order': newSlideOrderIndex\n                            });\n                    }\n                    else {\n                        row = Math.floor(i / slidesPerRow);\n                        column = i - row * slidesPerRow;\n                    }\n                    slide\n                        .css({\n                            'margin-top': (row !== 0 && s.params.spaceBetween) && (s.params.spaceBetween + 'px')\n                        })\n                        .attr('data-swiper-column', column)\n                        .attr('data-swiper-row', row);\n        \n                }\n                if (slide.css('display') === 'none') continue;\n                if (s.params.slidesPerView === 'auto') {\n                    slideSize = isH() ? slide.outerWidth(true) : slide.outerHeight(true);\n                    if (s.params.roundLengths) slideSize = round(slideSize);\n                }\n                else {\n                    slideSize = (s.size - (s.params.slidesPerView - 1) * spaceBetween) / s.params.slidesPerView;\n                    if (s.params.roundLengths) slideSize = round(slideSize);\n        \n                    if (isH()) {\n                        s.slides[i].style.width = slideSize + 'px';\n                    }\n                    else {\n                        s.slides[i].style.height = slideSize + 'px';\n                    }\n                }\n                s.slides[i].swiperSlideSize = slideSize;\n                s.slidesSizesGrid.push(slideSize);\n        \n        \n                if (s.params.centeredSlides) {\n                    slidePosition = slidePosition + slideSize / 2 + prevSlideSize / 2 + spaceBetween;\n                    if (i === 0) slidePosition = slidePosition - s.size / 2 - spaceBetween;\n                    if (Math.abs(slidePosition) < 1 / 1000) slidePosition = 0;\n                    if ((index) % s.params.slidesPerGroup === 0) s.snapGrid.push(slidePosition);\n                    s.slidesGrid.push(slidePosition);\n                }\n                else {\n                    if ((index) % s.params.slidesPerGroup === 0) s.snapGrid.push(slidePosition);\n                    s.slidesGrid.push(slidePosition);\n                    slidePosition = slidePosition + slideSize + spaceBetween;\n                }\n        \n                s.virtualSize += slideSize + spaceBetween;\n        \n                prevSlideSize = slideSize;\n        \n                index ++;\n            }\n            s.virtualSize = Math.max(s.virtualSize, s.size) + s.params.slidesOffsetAfter;\n            var newSlidesGrid;\n        \n            if (\n                s.rtl && s.wrongRTL && (s.params.effect === 'slide' || s.params.effect === 'coverflow')) {\n                s.wrapper.css({width: s.virtualSize + s.params.spaceBetween + 'px'});\n            }\n            if (!s.support.flexbox || s.params.setWrapperSize) {\n                if (isH()) s.wrapper.css({width: s.virtualSize + s.params.spaceBetween + 'px'});\n                else s.wrapper.css({height: s.virtualSize + s.params.spaceBetween + 'px'});\n            }\n        \n            if (s.params.slidesPerColumn > 1) {\n                s.virtualSize = (slideSize + s.params.spaceBetween) * slidesNumberEvenToRows;\n                s.virtualSize = Math.ceil(s.virtualSize / s.params.slidesPerColumn) - s.params.spaceBetween;\n                s.wrapper.css({width: s.virtualSize + s.params.spaceBetween + 'px'});\n                if (s.params.centeredSlides) {\n                    newSlidesGrid = [];\n                    for (i = 0; i < s.snapGrid.length; i++) {\n                        if (s.snapGrid[i] < s.virtualSize + s.snapGrid[0]) newSlidesGrid.push(s.snapGrid[i]);\n                    }\n                    s.snapGrid = newSlidesGrid;\n                }\n            }\n        \n            // Remove last grid elements depending on width\n            if (!s.params.centeredSlides) {\n                newSlidesGrid = [];\n                for (i = 0; i < s.snapGrid.length; i++) {\n                    if (s.snapGrid[i] <= s.virtualSize - s.size) {\n                        newSlidesGrid.push(s.snapGrid[i]);\n                    }\n                }\n                s.snapGrid = newSlidesGrid;\n                if (Math.floor(s.virtualSize - s.size) > Math.floor(s.snapGrid[s.snapGrid.length - 1])) {\n                    s.snapGrid.push(s.virtualSize - s.size);\n                }\n            }\n            if (s.snapGrid.length === 0) s.snapGrid = [0];\n        \n            if (s.params.spaceBetween !== 0) {\n                if (isH()) {\n                    if (s.rtl) s.slides.css({marginLeft: spaceBetween + 'px'});\n                    else s.slides.css({marginRight: spaceBetween + 'px'});\n                }\n                else s.slides.css({marginBottom: spaceBetween + 'px'});\n            }\n            if (s.params.watchSlidesProgress) {\n                s.updateSlidesOffset();\n            }\n        };\n        s.updateSlidesOffset = function () {\n            for (var i = 0; i < s.slides.length; i++) {\n                s.slides[i].swiperSlideOffset = isH() ? s.slides[i].offsetLeft : s.slides[i].offsetTop;\n            }\n        };\n        \n        /*=========================\n          Slider/slides progress\n          ===========================*/\n        s.updateSlidesProgress = function (translate) {\n            if (typeof translate === 'undefined') {\n                translate = s.translate || 0;\n            }\n            if (s.slides.length === 0) return;\n            if (typeof s.slides[0].swiperSlideOffset === 'undefined') s.updateSlidesOffset();\n        \n            var offsetCenter = -translate;\n            if (s.rtl) offsetCenter = translate;\n        \n            // Visible Slides\n            var containerBox = s.container[0].getBoundingClientRect();\n            var sideBefore = isH() ? 'left' : 'top';\n            var sideAfter = isH() ? 'right' : 'bottom';\n            s.slides.removeClass(s.params.slideVisibleClass);\n            for (var i = 0; i < s.slides.length; i++) {\n                var slide = s.slides[i];\n                var slideProgress = (offsetCenter - slide.swiperSlideOffset) / (slide.swiperSlideSize + s.params.spaceBetween);\n                if (s.params.watchSlidesVisibility) {\n                    var slideBefore = -(offsetCenter - slide.swiperSlideOffset);\n                    var slideAfter = slideBefore + s.slidesSizesGrid[i];\n                    var isVisible =\n                        (slideBefore >= 0 && slideBefore < s.size) ||\n                        (slideAfter > 0 && slideAfter <= s.size) ||\n                        (slideBefore <= 0 && slideAfter >= s.size);\n                    if (isVisible) {\n                        s.slides.eq(i).addClass(s.params.slideVisibleClass);\n                    }\n                }\n                slide.progress = s.rtl ? -slideProgress : slideProgress;\n            }\n        };\n        s.updateProgress = function (translate) {\n            if (typeof translate === 'undefined') {\n                translate = s.translate || 0;\n            }\n            var translatesDiff = s.maxTranslate() - s.minTranslate();\n            if (translatesDiff === 0) {\n                s.progress = 0;\n                s.isBeginning = s.isEnd = true;\n            }\n            else {\n                s.progress = (translate - s.minTranslate()) / (translatesDiff);\n                s.isBeginning = s.progress <= 0;\n                s.isEnd = s.progress >= 1;\n            }\n            if (s.isBeginning) s.emit('onReachBeginning', s);\n            if (s.isEnd) s.emit('onReachEnd', s);\n        \n            if (s.params.watchSlidesProgress) s.updateSlidesProgress(translate);\n            s.emit('onProgress', s, s.progress);\n        };\n        s.updateActiveIndex = function () {\n            var translate = s.rtl ? s.translate : -s.translate;\n            var newActiveIndex, i, snapIndex;\n            for (i = 0; i < s.slidesGrid.length; i ++) {\n                if (typeof s.slidesGrid[i + 1] !== 'undefined') {\n                    if (translate >= s.slidesGrid[i] && translate < s.slidesGrid[i + 1] - (s.slidesGrid[i + 1] - s.slidesGrid[i]) / 2) {\n                        newActiveIndex = i;\n                    }\n                    else if (translate >= s.slidesGrid[i] && translate < s.slidesGrid[i + 1]) {\n                        newActiveIndex = i + 1;\n                    }\n                }\n                else {\n                    if (translate >= s.slidesGrid[i]) {\n                        newActiveIndex = i;\n                    }\n                }\n            }\n            // Normalize slideIndex\n            if (newActiveIndex < 0 || typeof newActiveIndex === 'undefined') newActiveIndex = 0;\n            // for (i = 0; i < s.slidesGrid.length; i++) {\n                // if (- translate >= s.slidesGrid[i]) {\n                    // newActiveIndex = i;\n                // }\n            // }\n            snapIndex = Math.floor(newActiveIndex / s.params.slidesPerGroup);\n            if (snapIndex >= s.snapGrid.length) snapIndex = s.snapGrid.length - 1;\n        \n            if (newActiveIndex === s.activeIndex) {\n                return;\n            }\n            s.snapIndex = snapIndex;\n            s.previousIndex = s.activeIndex;\n            s.activeIndex = newActiveIndex;\n            s.updateClasses();\n        };\n        \n        /*=========================\n          Classes\n          ===========================*/\n        s.updateClasses = function () {\n            s.slides.removeClass(s.params.slideActiveClass + ' ' + s.params.slideNextClass + ' ' + s.params.slidePrevClass);\n            var activeSlide = s.slides.eq(s.activeIndex);\n            // Active classes\n            activeSlide.addClass(s.params.slideActiveClass);\n            activeSlide.next('.' + s.params.slideClass).addClass(s.params.slideNextClass);\n            activeSlide.prev('.' + s.params.slideClass).addClass(s.params.slidePrevClass);\n        \n            // Pagination\n            if (s.bullets && s.bullets.length > 0) {\n                s.bullets.removeClass(s.params.bulletActiveClass);\n                var bulletIndex;\n                if (s.params.loop) {\n                    bulletIndex = Math.ceil(s.activeIndex - s.loopedSlides)/s.params.slidesPerGroup;\n                    if (bulletIndex > s.slides.length - 1 - s.loopedSlides * 2) {\n                        bulletIndex = bulletIndex - (s.slides.length - s.loopedSlides * 2);\n                    }\n                    if (bulletIndex > s.bullets.length - 1) bulletIndex = bulletIndex - s.bullets.length;\n                }\n                else {\n                    if (typeof s.snapIndex !== 'undefined') {\n                        bulletIndex = s.snapIndex;\n                    }\n                    else {\n                        bulletIndex = s.activeIndex || 0;\n                    }\n                }\n                if (s.paginationContainer.length > 1) {\n                    s.bullets.each(function () {\n                        if ($(this).index() === bulletIndex) $(this).addClass(s.params.bulletActiveClass);\n                    });\n                }\n                else {\n                    s.bullets.eq(bulletIndex).addClass(s.params.bulletActiveClass);\n                }\n            }\n        \n            // Next/active buttons\n            if (!s.params.loop) {\n                if (s.params.prevButton) {\n                    if (s.isBeginning) {\n                        $(s.params.prevButton).addClass(s.params.buttonDisabledClass);\n                        if (s.params.a11y && s.a11y) s.a11y.disable($(s.params.prevButton));\n                    }\n                    else {\n                        $(s.params.prevButton).removeClass(s.params.buttonDisabledClass);\n                        if (s.params.a11y && s.a11y) s.a11y.enable($(s.params.prevButton));\n                    }\n                }\n                if (s.params.nextButton) {\n                    if (s.isEnd) {\n                        $(s.params.nextButton).addClass(s.params.buttonDisabledClass);\n                        if (s.params.a11y && s.a11y) s.a11y.disable($(s.params.nextButton));\n                    }\n                    else {\n                        $(s.params.nextButton).removeClass(s.params.buttonDisabledClass);\n                        if (s.params.a11y && s.a11y) s.a11y.enable($(s.params.nextButton));\n                    }\n                }\n            }\n        };\n        \n        /*=========================\n          Pagination\n          ===========================*/\n        s.updatePagination = function () {\n            if (!s.params.pagination) return;\n            if (s.paginationContainer && s.paginationContainer.length > 0) {\n                var bulletsHTML = '';\n                var numberOfBullets = s.params.loop ? Math.ceil((s.slides.length - s.loopedSlides * 2) / s.params.slidesPerGroup) : s.snapGrid.length;\n                for (var i = 0; i < numberOfBullets; i++) {\n                    if (s.params.paginationBulletRender) {\n                        bulletsHTML += s.params.paginationBulletRender(i, s.params.bulletClass);\n                    }\n                    else {\n                        bulletsHTML += '<' + s.params.paginationElement+' class=\"' + s.params.bulletClass + '\"></' + s.params.paginationElement + '>';\n                    }\n                }\n                s.paginationContainer.html(bulletsHTML);\n                s.bullets = s.paginationContainer.find('.' + s.params.bulletClass);\n                if (s.params.paginationClickable && s.params.a11y && s.a11y) {\n                    s.a11y.initPagination();\n                }\n            }\n        };\n        /*=========================\n          Common update method\n          ===========================*/\n        s.update = function (updateTranslate) {\n            s.updateContainerSize();\n            s.updateSlidesSize();\n            s.updateProgress();\n            s.updatePagination();\n            s.updateClasses();\n            if (s.params.scrollbar && s.scrollbar) {\n                s.scrollbar.set();\n            }\n            function forceSetTranslate() {\n                newTranslate = Math.min(Math.max(s.translate, s.maxTranslate()), s.minTranslate());\n                s.setWrapperTranslate(newTranslate);\n                s.updateActiveIndex();\n                s.updateClasses();\n            }\n            if (updateTranslate) {\n                var translated, newTranslate;\n                if (s.controller && s.controller.spline) {\n                    s.controller.spline = undefined;\n                }\n                if (s.params.freeMode) {\n                    forceSetTranslate();\n                }\n                else {\n                    if ((s.params.slidesPerView === 'auto' || s.params.slidesPerView > 1) && s.isEnd && !s.params.centeredSlides) {\n                        translated = s.slideTo(s.slides.length - 1, 0, false, true);\n                    }\n                    else {\n                        translated = s.slideTo(s.activeIndex, 0, false, true);\n                    }\n                    if (!translated) {\n                        forceSetTranslate();\n                    }\n                }\n        \n            }\n        };\n        \n        /*=========================\n          Resize Handler\n          ===========================*/\n        s.onResize = function (forceUpdatePagination) {\n            // Disable locks on resize\n            var allowSwipeToPrev = s.params.allowSwipeToPrev;\n            var allowSwipeToNext = s.params.allowSwipeToNext;\n            s.params.allowSwipeToPrev = s.params.allowSwipeToNext = true;\n        \n            s.updateContainerSize();\n            s.updateSlidesSize();\n            if (s.params.slidesPerView === 'auto' || s.params.freeMode || forceUpdatePagination) s.updatePagination();\n            if (s.params.scrollbar && s.scrollbar) {\n                s.scrollbar.set();\n            }\n            if (s.controller && s.controller.spline) {\n                s.controller.spline = undefined;\n            }\n            if (s.params.freeMode) {\n                var newTranslate = Math.min(Math.max(s.translate, s.maxTranslate()), s.minTranslate());\n                s.setWrapperTranslate(newTranslate);\n                s.updateActiveIndex();\n                s.updateClasses();\n            }\n            else {\n                s.updateClasses();\n                if ((s.params.slidesPerView === 'auto' || s.params.slidesPerView > 1) && s.isEnd && !s.params.centeredSlides) {\n                    s.slideTo(s.slides.length - 1, 0, false, true);\n                }\n                else {\n                    s.slideTo(s.activeIndex, 0, false, true);\n                }\n            }\n            // Return locks after resize\n            s.params.allowSwipeToPrev = allowSwipeToPrev;\n            s.params.allowSwipeToNext = allowSwipeToNext;\n        };\n        \n        /*=========================\n          Events\n          ===========================*/\n        \n        //Define Touch Events\n        var desktopEvents = ['mousedown', 'mousemove', 'mouseup'];\n        if (window.navigator.pointerEnabled) desktopEvents = ['pointerdown', 'pointermove', 'pointerup'];\n        else if (window.navigator.msPointerEnabled) desktopEvents = ['MSPointerDown', 'MSPointerMove', 'MSPointerUp'];\n        s.touchEvents = {\n            start : s.support.touch || !s.params.simulateTouch  ? 'touchstart' : desktopEvents[0],\n            move : s.support.touch || !s.params.simulateTouch ? 'touchmove' : desktopEvents[1],\n            end : s.support.touch || !s.params.simulateTouch ? 'touchend' : desktopEvents[2]\n        };\n        \n        \n        // WP8 Touch Events Fix\n        if (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) {\n            (s.params.touchEventsTarget === 'container' ? s.container : s.wrapper).addClass('swiper-wp8-' + s.params.direction);\n        }\n        \n        // Attach/detach events\n        s.initEvents = function (detach) {\n            var actionDom = detach ? 'off' : 'on';\n            var action = detach ? 'removeEventListener' : 'addEventListener';\n            var touchEventsTarget = s.params.touchEventsTarget === 'container' ? s.container[0] : s.wrapper[0];\n            var target = s.support.touch ? touchEventsTarget : document;\n        \n            var moveCapture = s.params.nested ? true : false;\n        \n            //Touch Events\n            if (s.browser.ie) {\n                touchEventsTarget[action](s.touchEvents.start, s.onTouchStart, false);\n                target[action](s.touchEvents.move, s.onTouchMove, moveCapture);\n                target[action](s.touchEvents.end, s.onTouchEnd, false);\n            }\n            else {\n                if (s.support.touch) {\n                    touchEventsTarget[action](s.touchEvents.start, s.onTouchStart, false);\n                    touchEventsTarget[action](s.touchEvents.move, s.onTouchMove, moveCapture);\n                    touchEventsTarget[action](s.touchEvents.end, s.onTouchEnd, false);\n                }\n                if (params.simulateTouch && !s.device.ios && !s.device.android) {\n                    touchEventsTarget[action]('mousedown', s.onTouchStart, false);\n                    document[action]('mousemove', s.onTouchMove, moveCapture);\n                    document[action]('mouseup', s.onTouchEnd, false);\n                }\n            }\n            window[action]('resize', s.onResize);\n        \n            // Next, Prev, Index\n            if (s.params.nextButton) {\n                $(s.params.nextButton)[actionDom]('click', s.onClickNext);\n                if (s.params.a11y && s.a11y) $(s.params.nextButton)[actionDom]('keydown', s.a11y.onEnterKey);\n            }\n            if (s.params.prevButton) {\n                $(s.params.prevButton)[actionDom]('click', s.onClickPrev);\n                if (s.params.a11y && s.a11y) $(s.params.prevButton)[actionDom]('keydown', s.a11y.onEnterKey);\n            }\n            if (s.params.pagination && s.params.paginationClickable) {\n                $(s.paginationContainer)[actionDom]('click', '.' + s.params.bulletClass, s.onClickIndex);\n                if (s.params.a11y && s.a11y) $(s.paginationContainer)[actionDom]('keydown', '.' + s.params.bulletClass, s.a11y.onEnterKey);\n            }\n        \n            // Prevent Links Clicks\n            if (s.params.preventClicks || s.params.preventClicksPropagation) touchEventsTarget[action]('click', s.preventClicks, true);\n        };\n        s.attachEvents = function (detach) {\n            s.initEvents();\n        };\n        s.detachEvents = function () {\n            s.initEvents(true);\n        };\n        \n        /*=========================\n          Handle Clicks\n          ===========================*/\n        // Prevent Clicks\n        s.allowClick = true;\n        s.preventClicks = function (e) {\n            if (!s.allowClick) {\n                if (s.params.preventClicks) e.preventDefault();\n                if (s.params.preventClicksPropagation && s.animating) {\n                    e.stopPropagation();\n                    e.stopImmediatePropagation();\n                }\n            }\n        };\n        // Clicks\n        s.onClickNext = function (e) {\n            e.preventDefault();\n            if (s.isEnd && !s.params.loop) return;\n            s.slideNext();\n        };\n        s.onClickPrev = function (e) {\n            e.preventDefault();\n            if (s.isBeginning && !s.params.loop) return;\n            s.slidePrev();\n        };\n        s.onClickIndex = function (e) {\n            e.preventDefault();\n            var index = $(this).index() * s.params.slidesPerGroup;\n            if (s.params.loop) index = index + s.loopedSlides;\n            s.slideTo(index);\n        };\n        \n        /*=========================\n          Handle Touches\n          ===========================*/\n        function findElementInEvent(e, selector) {\n            var el = $(e.target);\n            if (!el.is(selector)) {\n                if (typeof selector === 'string') {\n                    el = el.parents(selector);\n                }\n                else if (selector.nodeType) {\n                    var found;\n                    el.parents().each(function (index, _el) {\n                        if (_el === selector) found = selector;\n                    });\n                    if (!found) return undefined;\n                    else return selector;\n                }\n            }\n            if (el.length === 0) {\n                return undefined;\n            }\n            return el[0];\n        }\n        s.updateClickedSlide = function (e) {\n            var slide = findElementInEvent(e, '.' + s.params.slideClass);\n            var slideFound = false;\n            if (slide) {\n                for (var i = 0; i < s.slides.length; i++) {\n                    if (s.slides[i] === slide) slideFound = true;\n                }\n            }\n        \n            if (slide && slideFound) {\n                s.clickedSlide = slide;\n                s.clickedIndex = $(slide).index();\n            }\n            else {\n                s.clickedSlide = undefined;\n                s.clickedIndex = undefined;\n                return;\n            }\n            if (s.params.slideToClickedSlide && s.clickedIndex !== undefined && s.clickedIndex !== s.activeIndex) {\n                var slideToIndex = s.clickedIndex,\n                    realIndex,\n                    duplicatedSlides;\n                if (s.params.loop) {\n                    if (s.animating) return;\n                    realIndex = $(s.clickedSlide).attr('data-swiper-slide-index');\n                    if (s.params.centeredSlides) {\n                        if ((slideToIndex < s.loopedSlides - s.params.slidesPerView/2) || (slideToIndex > s.slides.length - s.loopedSlides + s.params.slidesPerView/2)) {\n                            s.fixLoop();\n                            slideToIndex = s.wrapper.children('.' + s.params.slideClass + '[data-swiper-slide-index=\"' + realIndex + '\"]:not(.swiper-slide-duplicate)').eq(0).index();\n                            setTimeout(function () {\n                                s.slideTo(slideToIndex);\n                            }, 0);\n                        }\n                        else {\n                            s.slideTo(slideToIndex);\n                        }\n                    }\n                    else {\n                        if (slideToIndex > s.slides.length - s.params.slidesPerView) {\n                            s.fixLoop();\n                            slideToIndex = s.wrapper.children('.' + s.params.slideClass + '[data-swiper-slide-index=\"' + realIndex + '\"]:not(.swiper-slide-duplicate)').eq(0).index();\n                            setTimeout(function () {\n                                s.slideTo(slideToIndex);\n                            }, 0);\n                        }\n                        else {\n                            s.slideTo(slideToIndex);\n                        }\n                    }\n                        \n                }\n                else {\n                    s.slideTo(slideToIndex);\n                }\n            }\n        };\n        \n        var isTouched,\n            isMoved,\n            touchStartTime,\n            isScrolling,\n            currentTranslate,\n            startTranslate,\n            allowThresholdMove,\n            // Form elements to match\n            formElements = 'input, select, textarea, button',\n            // Last click time\n            lastClickTime = Date.now(), clickTimeout,\n            //Velocities\n            velocities = [],\n            allowMomentumBounce;\n        \n        // Animating Flag\n        s.animating = false;\n        \n        // Touches information\n        s.touches = {\n            startX: 0,\n            startY: 0,\n            currentX: 0,\n            currentY: 0,\n            diff: 0\n        };\n        \n        // Touch handlers\n        var isTouchEvent, startMoving;\n        s.onTouchStart = function (e) {\n            if (e.originalEvent) e = e.originalEvent;\n            isTouchEvent = e.type === 'touchstart';\n            if (!isTouchEvent && 'which' in e && e.which === 3) return;\n            if (s.params.noSwiping && findElementInEvent(e, '.' + s.params.noSwipingClass)) {\n                s.allowClick = true;\n                return;\n            }\n            if (s.params.swipeHandler) {\n                if (!findElementInEvent(e, s.params.swipeHandler)) return;\n            }\n        \n            var startX = s.touches.currentX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n            var startY = s.touches.currentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n            \n            // Do NOT start if iOS edge swipe is detected. Otherwise iOS app (UIWebView) cannot swipe-to-go-back anymore\n            if(s.device.ios && s.params.iOSEdgeSwipeDetection && startX <= s.params.iOSEdgeSwipeThreshold) {\n                return;\n            }\n        \n            isTouched = true;\n            isMoved = false;\n            isScrolling = undefined;\n            startMoving = undefined;\n            s.touches.startX = startX;\n            s.touches.startY = startY;\n            touchStartTime = Date.now();\n            s.allowClick = true;\n            s.updateContainerSize();\n            s.swipeDirection = undefined;\n            if (s.params.threshold > 0) allowThresholdMove = false;\n            if (e.type !== 'touchstart') {\n                var preventDefault = true;\n                if ($(e.target).is(formElements)) preventDefault = false;\n                if (document.activeElement && $(document.activeElement).is(formElements)) {\n                    document.activeElement.blur();\n                }\n                if (preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            s.emit('onTouchStart', s, e);\n        };\n        \n        s.onTouchMove = function (e) {\n            if (e.originalEvent) e = e.originalEvent;\n            if (isTouchEvent && e.type === 'mousemove') return;\n            if (e.preventedByNestedSwiper) return;\n            if (s.params.onlyExternal) {\n                // isMoved = true;\n                s.allowClick = false;\n                if (isTouched) {\n                    s.touches.startX = s.touches.currentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n                    s.touches.startY = s.touches.currentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n                    touchStartTime = Date.now();\n                }\n                return;\n            }\n            if (isTouchEvent && document.activeElement) {\n                if (e.target === document.activeElement && $(e.target).is(formElements)) {\n                    isMoved = true;\n                    s.allowClick = false;\n                    return;\n                }\n            }\n        \n            s.emit('onTouchMove', s, e);\n        \n            if (e.targetTouches && e.targetTouches.length > 1) return;\n        \n            s.touches.currentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n            s.touches.currentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n        \n            if (typeof isScrolling === 'undefined') {\n                var touchAngle = Math.atan2(Math.abs(s.touches.currentY - s.touches.startY), Math.abs(s.touches.currentX - s.touches.startX)) * 180 / Math.PI;\n                isScrolling = isH() ? touchAngle > s.params.touchAngle : (90 - touchAngle > s.params.touchAngle);\n            }\n            if (isScrolling) {\n                s.emit('onTouchMoveOpposite', s, e);\n            }\n            if (typeof startMoving === 'undefined' && s.browser.ieTouch) {\n                if (s.touches.currentX !== s.touches.startX || s.touches.currentY !== s.touches.startY) {\n                    startMoving = true;\n                }\n            }\n            if (!isTouched) return;\n            if (isScrolling)  {\n                isTouched = false;\n                return;\n            }\n            if (!startMoving && s.browser.ieTouch) {\n                return;\n            }\n            s.allowClick = false;\n            s.emit('onSliderMove', s, e);\n            e.preventDefault();\n            if (s.params.touchMoveStopPropagation && !s.params.nested) {\n                e.stopPropagation();\n            }\n        \n            if (!isMoved) {\n                if (params.loop) {\n                    s.fixLoop();\n                }\n                startTranslate = s.getWrapperTranslate();\n                s.setWrapperTransition(0);\n                if (s.animating) {\n                    s.wrapper.trigger('webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd');\n                }\n                if (s.params.autoplay && s.autoplaying) {\n                    if (s.params.autoplayDisableOnInteraction) {\n                        s.stopAutoplay();\n                    }\n                    else {\n                        s.pauseAutoplay();\n                    }\n                }\n                allowMomentumBounce = false;\n                //Grab Cursor\n                if (s.params.grabCursor) {\n                    s.container[0].style.cursor = 'move';\n                    s.container[0].style.cursor = '-webkit-grabbing';\n                    s.container[0].style.cursor = '-moz-grabbin';\n                    s.container[0].style.cursor = 'grabbing';\n                }\n            }\n            isMoved = true;\n        \n            var diff = s.touches.diff = isH() ? s.touches.currentX - s.touches.startX : s.touches.currentY - s.touches.startY;\n            \n            diff = diff * s.params.touchRatio;\n            if (s.rtl) diff = -diff;\n        \n            s.swipeDirection = diff > 0 ? 'prev' : 'next';\n            currentTranslate = diff + startTranslate;\n        \n            var disableParentSwiper = true;\n            if ((diff > 0 && currentTranslate > s.minTranslate())) {\n                disableParentSwiper = false;\n                if (s.params.resistance) currentTranslate = s.minTranslate() - 1 + Math.pow(-s.minTranslate() + startTranslate + diff, s.params.resistanceRatio);\n            }\n            else if (diff < 0 && currentTranslate < s.maxTranslate()) {\n                disableParentSwiper = false;\n                if (s.params.resistance) currentTranslate = s.maxTranslate() + 1 - Math.pow(s.maxTranslate() - startTranslate - diff, s.params.resistanceRatio);\n            }\n        \n            if (disableParentSwiper) {\n                e.preventedByNestedSwiper = true;\n            }\n        \n            // Directions locks\n            if (!s.params.allowSwipeToNext && s.swipeDirection === 'next' && currentTranslate < startTranslate) {\n                currentTranslate = startTranslate;\n            }\n            if (!s.params.allowSwipeToPrev && s.swipeDirection === 'prev' && currentTranslate > startTranslate) {\n                currentTranslate = startTranslate;\n            }\n        \n            if (!s.params.followFinger) return;\n        \n            // Threshold\n            if (s.params.threshold > 0) {\n                if (Math.abs(diff) > s.params.threshold || allowThresholdMove) {\n                    if (!allowThresholdMove) {\n                        allowThresholdMove = true;\n                        s.touches.startX = s.touches.currentX;\n                        s.touches.startY = s.touches.currentY;\n                        currentTranslate = startTranslate;\n                        s.touches.diff = isH() ? s.touches.currentX - s.touches.startX : s.touches.currentY - s.touches.startY;\n                        return;\n                    }\n                }\n                else {\n                    currentTranslate = startTranslate;\n                    return;\n                }\n            }\n            // Update active index in free mode\n            if (s.params.freeMode || s.params.watchSlidesProgress) {\n                s.updateActiveIndex();\n            }\n            if (s.params.freeMode) {\n                //Velocity\n                if (velocities.length === 0) {\n                    velocities.push({\n                        position: s.touches[isH() ? 'startX' : 'startY'],\n                        time: touchStartTime\n                    });\n                }\n                velocities.push({\n                    position: s.touches[isH() ? 'currentX' : 'currentY'],\n                    time: (new window.Date()).getTime()\n                });\n            }\n            // Update progress\n            s.updateProgress(currentTranslate);\n            // Update translate\n            s.setWrapperTranslate(currentTranslate);\n        };\n        s.onTouchEnd = function (e) {\n            if (e.originalEvent) e = e.originalEvent;\n            s.emit('onTouchEnd', s, e);\n            if (!isTouched) return;\n            //Return Grab Cursor\n            if (s.params.grabCursor && isMoved && isTouched) {\n                s.container[0].style.cursor = 'move';\n                s.container[0].style.cursor = '-webkit-grab';\n                s.container[0].style.cursor = '-moz-grab';\n                s.container[0].style.cursor = 'grab';\n            }\n        \n            // Time diff\n            var touchEndTime = Date.now();\n            var timeDiff = touchEndTime - touchStartTime;\n        \n            // Tap, doubleTap, Click\n            if (s.allowClick) {\n                s.updateClickedSlide(e);\n                s.emit('onTap', s, e);\n                if (timeDiff < 300 && (touchEndTime - lastClickTime) > 300) {\n                    if (clickTimeout) clearTimeout(clickTimeout);\n                    clickTimeout = setTimeout(function () {\n                        if (!s) return;\n                        if (s.params.paginationHide && s.paginationContainer.length > 0 && !$(e.target).hasClass(s.params.bulletClass)) {\n                            s.paginationContainer.toggleClass(s.params.paginationHiddenClass);\n                        }\n                        s.emit('onClick', s, e);\n                    }, 300);\n        \n                }\n                if (timeDiff < 300 && (touchEndTime - lastClickTime) < 300) {\n                    if (clickTimeout) clearTimeout(clickTimeout);\n                    s.emit('onDoubleTap', s, e);\n                }\n            }\n        \n            lastClickTime = Date.now();\n            setTimeout(function () {\n                if (s) s.allowClick = true;\n            }, 0);\n        \n            if (!isTouched || !isMoved || !s.swipeDirection || s.touches.diff === 0 || currentTranslate === startTranslate) {\n                isTouched = isMoved = false;\n                return;\n            }\n            isTouched = isMoved = false;\n        \n            var currentPos;\n            if (s.params.followFinger) {\n                currentPos = s.rtl ? s.translate : -s.translate;\n            }\n            else {\n                currentPos = -currentTranslate;\n            }\n            if (s.params.freeMode) {\n                if (currentPos < -s.minTranslate()) {\n                    s.slideTo(s.activeIndex);\n                    return;\n                }\n                else if (currentPos > -s.maxTranslate()) {\n                    if (s.slides.length < s.snapGrid.length) {\n                        s.slideTo(s.snapGrid.length - 1);\n                    }\n                    else {\n                        s.slideTo(s.slides.length - 1);\n                    }\n                    return;\n                }\n        \n                if (s.params.freeModeMomentum) {\n                    if (velocities.length > 1) {\n                        var lastMoveEvent = velocities.pop(), velocityEvent = velocities.pop();\n        \n                        var distance = lastMoveEvent.position - velocityEvent.position;\n                        var time = lastMoveEvent.time - velocityEvent.time;\n                        s.velocity = distance / time;\n                        s.velocity = s.velocity / 2;\n                        if (Math.abs(s.velocity) < s.params.freeModeMinimumVelocity) {\n                            s.velocity = 0;\n                        }\n                        // this implies that the user stopped moving a finger then released.\n                        // There would be no events with distance zero, so the last event is stale.\n                        if (time > 150 || (new window.Date().getTime() - lastMoveEvent.time) > 300) {\n                            s.velocity = 0;\n                        }\n                    } else {\n                        s.velocity = 0;\n                    }\n        \n                    velocities.length = 0;\n                    var momentumDuration = 1000 * s.params.freeModeMomentumRatio;\n                    var momentumDistance = s.velocity * momentumDuration;\n        \n                    var newPosition = s.translate + momentumDistance;\n                    if (s.rtl) newPosition = - newPosition;\n                    var doBounce = false;\n                    var afterBouncePosition;\n                    var bounceAmount = Math.abs(s.velocity) * 20 * s.params.freeModeMomentumBounceRatio;\n                    if (newPosition < s.maxTranslate()) {\n                        if (s.params.freeModeMomentumBounce) {\n                            if (newPosition + s.maxTranslate() < -bounceAmount) {\n                                newPosition = s.maxTranslate() - bounceAmount;\n                            }\n                            afterBouncePosition = s.maxTranslate();\n                            doBounce = true;\n                            allowMomentumBounce = true;\n                        }\n                        else {\n                            newPosition = s.maxTranslate();\n                        }\n                    }\n                    else if (newPosition > s.minTranslate()) {\n                        if (s.params.freeModeMomentumBounce) {\n                            if (newPosition - s.minTranslate() > bounceAmount) {\n                                newPosition = s.minTranslate() + bounceAmount;\n                            }\n                            afterBouncePosition = s.minTranslate();\n                            doBounce = true;\n                            allowMomentumBounce = true;\n                        }\n                        else {\n                            newPosition = s.minTranslate();\n                        }\n                    }\n                    else if (s.params.freeModeSticky) {\n                        var j = 0,\n                            nextSlide;\n                        for (j = 0; j < s.snapGrid.length; j += 1) {\n                            if (s.snapGrid[j] > -newPosition) {\n                                nextSlide = j;\n                                break;\n                            }\n        \n                        }\n                        if (Math.abs(s.snapGrid[nextSlide] - newPosition) < Math.abs(s.snapGrid[nextSlide - 1] - newPosition) || s.swipeDirection === 'next') {\n                            newPosition = s.snapGrid[nextSlide];\n                        } else {\n                            newPosition = s.snapGrid[nextSlide - 1];\n                        }\n                        if (!s.rtl) newPosition = - newPosition;\n                    }\n                    //Fix duration\n                    if (s.velocity !== 0) {\n                        if (s.rtl) {\n                            momentumDuration = Math.abs((-newPosition - s.translate) / s.velocity);\n                        }\n                        else {\n                            momentumDuration = Math.abs((newPosition - s.translate) / s.velocity);\n                        }\n                    }\n                    else if (s.params.freeModeSticky) {\n                        s.slideReset();\n                        return;\n                    }\n        \n                    if (s.params.freeModeMomentumBounce && doBounce) {\n                        s.updateProgress(afterBouncePosition);\n                        s.setWrapperTransition(momentumDuration);\n                        s.setWrapperTranslate(newPosition);\n                        s.onTransitionStart();\n                        s.animating = true;\n                        s.wrapper.transitionEnd(function () {\n                            if (!s || !allowMomentumBounce) return;\n                            s.emit('onMomentumBounce', s);\n        \n                            s.setWrapperTransition(s.params.speed);\n                            s.setWrapperTranslate(afterBouncePosition);\n                            s.wrapper.transitionEnd(function () {\n                                if (!s) return;\n                                s.onTransitionEnd();\n                            });\n                        });\n                    } else if (s.velocity) {\n                        s.updateProgress(newPosition);\n                        s.setWrapperTransition(momentumDuration);\n                        s.setWrapperTranslate(newPosition);\n                        s.onTransitionStart();\n                        if (!s.animating) {\n                            s.animating = true;\n                            s.wrapper.transitionEnd(function () {\n                                if (!s) return;\n                                s.onTransitionEnd();\n                            });\n                        }\n        \n                    } else {\n                        s.updateProgress(newPosition);\n                    }\n        \n                    s.updateActiveIndex();\n                }\n                if (!s.params.freeModeMomentum || timeDiff >= s.params.longSwipesMs) {\n                    s.updateProgress();\n                    s.updateActiveIndex();\n                }\n                return;\n            }\n        \n            // Find current slide\n            var i, stopIndex = 0, groupSize = s.slidesSizesGrid[0];\n            for (i = 0; i < s.slidesGrid.length; i += s.params.slidesPerGroup) {\n                if (typeof s.slidesGrid[i + s.params.slidesPerGroup] !== 'undefined') {\n                    if (currentPos >= s.slidesGrid[i] && currentPos < s.slidesGrid[i + s.params.slidesPerGroup]) {\n                        stopIndex = i;\n                        groupSize = s.slidesGrid[i + s.params.slidesPerGroup] - s.slidesGrid[i];\n                    }\n                }\n                else {\n                    if (currentPos >= s.slidesGrid[i]) {\n                        stopIndex = i;\n                        groupSize = s.slidesGrid[s.slidesGrid.length - 1] - s.slidesGrid[s.slidesGrid.length - 2];\n                    }\n                }\n            }\n        \n            // Find current slide size\n            var ratio = (currentPos - s.slidesGrid[stopIndex]) / groupSize;\n        \n            if (timeDiff > s.params.longSwipesMs) {\n                // Long touches\n                if (!s.params.longSwipes) {\n                    s.slideTo(s.activeIndex);\n                    return;\n                }\n                if (s.swipeDirection === 'next') {\n                    if (ratio >= s.params.longSwipesRatio) s.slideTo(stopIndex + s.params.slidesPerGroup);\n                    else s.slideTo(stopIndex);\n        \n                }\n                if (s.swipeDirection === 'prev') {\n                    if (ratio > (1 - s.params.longSwipesRatio)) s.slideTo(stopIndex + s.params.slidesPerGroup);\n                    else s.slideTo(stopIndex);\n                }\n            }\n            else {\n                // Short swipes\n                if (!s.params.shortSwipes) {\n                    s.slideTo(s.activeIndex);\n                    return;\n                }\n                if (s.swipeDirection === 'next') {\n                    s.slideTo(stopIndex + s.params.slidesPerGroup);\n        \n                }\n                if (s.swipeDirection === 'prev') {\n                    s.slideTo(stopIndex);\n                }\n            }\n        };\n        /*=========================\n          Transitions\n          ===========================*/\n        s._slideTo = function (slideIndex, speed) {\n            return s.slideTo(slideIndex, speed, true, true);\n        };\n        s.slideTo = function (slideIndex, speed, runCallbacks, internal) {\n            if (typeof runCallbacks === 'undefined') runCallbacks = true;\n            if (typeof slideIndex === 'undefined') slideIndex = 0;\n            if (slideIndex < 0) slideIndex = 0;\n            s.snapIndex = Math.floor(slideIndex / s.params.slidesPerGroup);\n            if (s.snapIndex >= s.snapGrid.length) s.snapIndex = s.snapGrid.length - 1;\n        \n            var translate = - s.snapGrid[s.snapIndex];\n        \n            // Stop autoplay\n            if (s.params.autoplay && s.autoplaying) {\n                if (internal || !s.params.autoplayDisableOnInteraction) {\n                    s.pauseAutoplay(speed);\n                }\n                else {\n                    s.stopAutoplay();\n                }\n            }\n            // Update progress\n            s.updateProgress(translate);\n        \n            // Normalize slideIndex\n            for (var i = 0; i < s.slidesGrid.length; i++) {\n                if (- Math.floor(translate * 100) >= Math.floor(s.slidesGrid[i] * 100)) {\n                    slideIndex = i;\n                }\n            }\n        \n            // Directions locks\n            if (!s.params.allowSwipeToNext && translate < s.translate && translate < s.minTranslate()) {\n                return false;\n            }\n            if (!s.params.allowSwipeToPrev && translate > s.translate && translate > s.maxTranslate()) {\n                if ((s.activeIndex || 0) !== slideIndex ) return false;\n            }\n        \n            // Update Index\n            if (typeof speed === 'undefined') speed = s.params.speed;\n            s.previousIndex = s.activeIndex || 0;\n            s.activeIndex = slideIndex;\n        \n            if (translate === s.translate) {\n                s.updateClasses();\n                return false;\n            }\n            s.updateClasses();\n            s.onTransitionStart(runCallbacks);\n            var translateX = isH() ? translate : 0, translateY = isH() ? 0 : translate;\n            if (speed === 0) {\n                s.setWrapperTransition(0);\n                s.setWrapperTranslate(translate);\n                s.onTransitionEnd(runCallbacks);\n            }\n            else {\n                s.setWrapperTransition(speed);\n                s.setWrapperTranslate(translate);\n                if (!s.animating) {\n                    s.animating = true;\n                    s.wrapper.transitionEnd(function () {\n                        if (!s) return;\n                        s.onTransitionEnd(runCallbacks);\n                    });\n                }\n        \n            }\n        \n            return true;\n        };\n        \n        s.onTransitionStart = function (runCallbacks) {\n            if (typeof runCallbacks === 'undefined') runCallbacks = true;\n            if (s.lazy) s.lazy.onTransitionStart();\n            if (runCallbacks) {\n                s.emit('onTransitionStart', s);\n                if (s.activeIndex !== s.previousIndex) {\n                    s.emit('onSlideChangeStart', s);\n                }\n            }\n        };\n        s.onTransitionEnd = function (runCallbacks) {\n            s.animating = false;\n            s.setWrapperTransition(0);\n            if (typeof runCallbacks === 'undefined') runCallbacks = true;\n            if (s.lazy) s.lazy.onTransitionEnd();\n            if (runCallbacks) {\n                s.emit('onTransitionEnd', s);\n                if (s.activeIndex !== s.previousIndex) {\n                    s.emit('onSlideChangeEnd', s);\n                }\n            }\n            if (s.params.hashnav && s.hashnav) {\n                s.hashnav.setHash();\n            }\n        \n        };\n        s.slideNext = function (runCallbacks, speed, internal) {\n            if (s.params.loop) {\n                if (s.animating) return false;\n                s.fixLoop();\n                var clientLeft = s.container[0].clientLeft;\n                return s.slideTo(s.activeIndex + s.params.slidesPerGroup, speed, runCallbacks, internal);\n            }\n            else return s.slideTo(s.activeIndex + s.params.slidesPerGroup, speed, runCallbacks, internal);\n        };\n        s._slideNext = function (speed) {\n            return s.slideNext(true, speed, true);\n        };\n        s.slidePrev = function (runCallbacks, speed, internal) {\n            if (s.params.loop) {\n                if (s.animating) return false;\n                s.fixLoop();\n                var clientLeft = s.container[0].clientLeft;\n                return s.slideTo(s.activeIndex - 1, speed, runCallbacks, internal);\n            }\n            else return s.slideTo(s.activeIndex - 1, speed, runCallbacks, internal);\n        };\n        s._slidePrev = function (speed) {\n            return s.slidePrev(true, speed, true);\n        };\n        s.slideReset = function (runCallbacks, speed, internal) {\n            return s.slideTo(s.activeIndex, speed, runCallbacks);\n        };\n        \n        /*=========================\n          Translate/transition helpers\n          ===========================*/\n        s.setWrapperTransition = function (duration, byController) {\n            s.wrapper.transition(duration);\n            if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {\n                s.effects[s.params.effect].setTransition(duration);\n            }\n            if (s.params.parallax && s.parallax) {\n                s.parallax.setTransition(duration);\n            }\n            if (s.params.scrollbar && s.scrollbar) {\n                s.scrollbar.setTransition(duration);\n            }\n            if (s.params.control && s.controller) {\n                s.controller.setTransition(duration, byController);\n            }\n            s.emit('onSetTransition', s, duration);\n        };\n        s.setWrapperTranslate = function (translate, updateActiveIndex, byController) {\n            var x = 0, y = 0, z = 0;\n            if (isH()) {\n                x = s.rtl ? -translate : translate;\n            }\n            else {\n                y = translate;\n            }\n        \n            if (s.params.roundLengths) {\n                x = round(x);\n                y = round(y);\n            }\n        \n            if (!s.params.virtualTranslate) {\n                if (s.support.transforms3d) s.wrapper.transform('translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px)');\n                else s.wrapper.transform('translate(' + x + 'px, ' + y + 'px)');\n            }\n        \n            s.translate = isH() ? x : y;\n        \n            if (updateActiveIndex) s.updateActiveIndex();\n            if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {\n                s.effects[s.params.effect].setTranslate(s.translate);\n            }\n            if (s.params.parallax && s.parallax) {\n                s.parallax.setTranslate(s.translate);\n            }\n            if (s.params.scrollbar && s.scrollbar) {\n                s.scrollbar.setTranslate(s.translate);\n            }\n            if (s.params.control && s.controller) {\n                s.controller.setTranslate(s.translate, byController);\n            }\n            s.emit('onSetTranslate', s, s.translate);\n        };\n        \n        s.getTranslate = function (el, axis) {\n            var matrix, curTransform, curStyle, transformMatrix;\n        \n            // automatic axis detection\n            if (typeof axis === 'undefined') {\n                axis = 'x';\n            }\n        \n            if (s.params.virtualTranslate) {\n                return s.rtl ? -s.translate : s.translate;\n            }\n        \n            curStyle = window.getComputedStyle(el, null);\n            if (window.WebKitCSSMatrix) {\n                curTransform = curStyle.transform || curStyle.webkitTransform;\n                if (curTransform.split(',').length > 6) {\n                    curTransform = curTransform.split(', ').map(function(a){\n                        return a.replace(',','.');\n                    }).join(', ');\n                }\n                // Some old versions of Webkit choke when 'none' is passed; pass\n                // empty string instead in this case\n                transformMatrix = new window.WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);\n            }\n            else {\n                transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform  || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');\n                matrix = transformMatrix.toString().split(',');\n            }\n        \n            if (axis === 'x') {\n                //Latest Chrome and webkits Fix\n                if (window.WebKitCSSMatrix)\n                    curTransform = transformMatrix.m41;\n                //Crazy IE10 Matrix\n                else if (matrix.length === 16)\n                    curTransform = parseFloat(matrix[12]);\n                //Normal Browsers\n                else\n                    curTransform = parseFloat(matrix[4]);\n            }\n            if (axis === 'y') {\n                //Latest Chrome and webkits Fix\n                if (window.WebKitCSSMatrix)\n                    curTransform = transformMatrix.m42;\n                //Crazy IE10 Matrix\n                else if (matrix.length === 16)\n                    curTransform = parseFloat(matrix[13]);\n                //Normal Browsers\n                else\n                    curTransform = parseFloat(matrix[5]);\n            }\n            if (s.rtl && curTransform) curTransform = -curTransform;\n            return curTransform || 0;\n        };\n        s.getWrapperTranslate = function (axis) {\n            if (typeof axis === 'undefined') {\n                axis = isH() ? 'x' : 'y';\n            }\n            return s.getTranslate(s.wrapper[0], axis);\n        };\n        \n        /*=========================\n          Observer\n          ===========================*/\n        s.observers = [];\n        function initObserver(target, options) {\n            options = options || {};\n            // create an observer instance\n            var ObserverFunc = window.MutationObserver || window.WebkitMutationObserver;\n            var observer = new ObserverFunc(function (mutations) {\n                mutations.forEach(function (mutation) {\n                    s.onResize(true);\n                    s.emit('onObserverUpdate', s, mutation);\n                });\n            });\n        \n            observer.observe(target, {\n                attributes: typeof options.attributes === 'undefined' ? true : options.attributes,\n                childList: typeof options.childList === 'undefined' ? true : options.childList,\n                characterData: typeof options.characterData === 'undefined' ? true : options.characterData\n            });\n        \n            s.observers.push(observer);\n        }\n        s.initObservers = function () {\n            if (s.params.observeParents) {\n                var containerParents = s.container.parents();\n                for (var i = 0; i < containerParents.length; i++) {\n                    initObserver(containerParents[i]);\n                }\n            }\n        \n            // Observe container\n            initObserver(s.container[0], {childList: false});\n        \n            // Observe wrapper\n            initObserver(s.wrapper[0], {attributes: false});\n        };\n        s.disconnectObservers = function () {\n            for (var i = 0; i < s.observers.length; i++) {\n                s.observers[i].disconnect();\n            }\n            s.observers = [];\n        };\n        /*=========================\n          Loop\n          ===========================*/\n        // Create looped slides\n        s.createLoop = function () {\n            // Remove duplicated slides\n            s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass).remove();\n        \n            var slides = s.wrapper.children('.' + s.params.slideClass);\n        \n            if(s.params.slidesPerView === 'auto' && !s.params.loopedSlides) s.params.loopedSlides = slides.length;\n        \n            s.loopedSlides = parseInt(s.params.loopedSlides || s.params.slidesPerView, 10);\n            s.loopedSlides = s.loopedSlides + s.params.loopAdditionalSlides;\n            if (s.loopedSlides > slides.length) {\n                s.loopedSlides = slides.length;\n            }\n        \n            var prependSlides = [], appendSlides = [], i;\n            slides.each(function (index, el) {\n                var slide = $(this);\n                if (index < s.loopedSlides) appendSlides.push(el);\n                if (index < slides.length && index >= slides.length - s.loopedSlides) prependSlides.push(el);\n                slide.attr('data-swiper-slide-index', index);\n            });\n            for (i = 0; i < appendSlides.length; i++) {\n                s.wrapper.append($(appendSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));\n            }\n            for (i = prependSlides.length - 1; i >= 0; i--) {\n                s.wrapper.prepend($(prependSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));\n            }\n        };\n        s.destroyLoop = function () {\n            s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass).remove();\n            s.slides.removeAttr('data-swiper-slide-index');\n        };\n        s.fixLoop = function () {\n            var newIndex;\n            //Fix For Negative Oversliding\n            if (s.activeIndex < s.loopedSlides) {\n                newIndex = s.slides.length - s.loopedSlides * 3 + s.activeIndex;\n                newIndex = newIndex + s.loopedSlides;\n                s.slideTo(newIndex, 0, false, true);\n            }\n            //Fix For Positive Oversliding\n            else if ((s.params.slidesPerView === 'auto' && s.activeIndex >= s.loopedSlides * 2) || (s.activeIndex > s.slides.length - s.params.slidesPerView * 2)) {\n                newIndex = -s.slides.length + s.activeIndex + s.loopedSlides;\n                newIndex = newIndex + s.loopedSlides;\n                s.slideTo(newIndex, 0, false, true);\n            }\n        };\n        /*=========================\n          Append/Prepend/Remove Slides\n          ===========================*/\n        s.appendSlide = function (slides) {\n            if (s.params.loop) {\n                s.destroyLoop();\n            }\n            if (typeof slides === 'object' && slides.length) {\n                for (var i = 0; i < slides.length; i++) {\n                    if (slides[i]) s.wrapper.append(slides[i]);\n                }\n            }\n            else {\n                s.wrapper.append(slides);\n            }\n            if (s.params.loop) {\n                s.createLoop();\n            }\n            if (!(s.params.observer && s.support.observer)) {\n                s.update(true);\n            }\n        };\n        s.prependSlide = function (slides) {\n            if (s.params.loop) {\n                s.destroyLoop();\n            }\n            var newActiveIndex = s.activeIndex + 1;\n            if (typeof slides === 'object' && slides.length) {\n                for (var i = 0; i < slides.length; i++) {\n                    if (slides[i]) s.wrapper.prepend(slides[i]);\n                }\n                newActiveIndex = s.activeIndex + slides.length;\n            }\n            else {\n                s.wrapper.prepend(slides);\n            }\n            if (s.params.loop) {\n                s.createLoop();\n            }\n            if (!(s.params.observer && s.support.observer)) {\n                s.update(true);\n            }\n            s.slideTo(newActiveIndex, 0, false);\n        };\n        s.removeSlide = function (slidesIndexes) {\n            if (s.params.loop) {\n                s.destroyLoop();\n                s.slides = s.wrapper.children('.' + s.params.slideClass);\n            }\n            var newActiveIndex = s.activeIndex,\n                indexToRemove;\n            if (typeof slidesIndexes === 'object' && slidesIndexes.length) {\n                for (var i = 0; i < slidesIndexes.length; i++) {\n                    indexToRemove = slidesIndexes[i];\n                    if (s.slides[indexToRemove]) s.slides.eq(indexToRemove).remove();\n                    if (indexToRemove < newActiveIndex) newActiveIndex--;\n                }\n                newActiveIndex = Math.max(newActiveIndex, 0);\n            }\n            else {\n                indexToRemove = slidesIndexes;\n                if (s.slides[indexToRemove]) s.slides.eq(indexToRemove).remove();\n                if (indexToRemove < newActiveIndex) newActiveIndex--;\n                newActiveIndex = Math.max(newActiveIndex, 0);\n            }\n        \n            if (s.params.loop) {\n                s.createLoop();\n            }\n        \n            if (!(s.params.observer && s.support.observer)) {\n                s.update(true);\n            }\n            if (s.params.loop) {\n                s.slideTo(newActiveIndex + s.loopedSlides, 0, false);\n            }\n            else {\n                s.slideTo(newActiveIndex, 0, false);\n            }\n        \n        };\n        s.removeAllSlides = function () {\n            var slidesIndexes = [];\n            for (var i = 0; i < s.slides.length; i++) {\n                slidesIndexes.push(i);\n            }\n            s.removeSlide(slidesIndexes);\n        };\n        \n    \n        /*=========================\n          Effects\n          ===========================*/\n        s.effects = {\n            fade: {\n                setTranslate: function () {\n                    for (var i = 0; i < s.slides.length; i++) {\n                        var slide = s.slides.eq(i);\n                        var offset = slide[0].swiperSlideOffset;\n                        var tx = -offset;\n                        if (!s.params.virtualTranslate) tx = tx - s.translate;\n                        var ty = 0;\n                        if (!isH()) {\n                            ty = tx;\n                            tx = 0;\n                        }\n                        var slideOpacity = s.params.fade.crossFade ?\n                                Math.max(1 - Math.abs(slide[0].progress), 0) :\n                                1 + Math.min(Math.max(slide[0].progress, -1), 0);\n                        slide\n                            .css({\n                                opacity: slideOpacity\n                            })\n                            .transform('translate3d(' + tx + 'px, ' + ty + 'px, 0px)');\n        \n                    }\n        \n                },\n                setTransition: function (duration) {\n                    s.slides.transition(duration);\n                    if (s.params.virtualTranslate && duration !== 0) {\n                        var eventTriggered = false;\n                        s.slides.transitionEnd(function () {\n                            if (eventTriggered) return;\n                            if (!s) return;\n                            eventTriggered = true;\n                            s.animating = false;\n                            var triggerEvents = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'];\n                            for (var i = 0; i < triggerEvents.length; i++) {\n                                s.wrapper.trigger(triggerEvents[i]);\n                            }\n                        });\n                    }\n                }\n            },\n            cube: {\n                setTranslate: function () {\n                    var wrapperRotate = 0, cubeShadow;\n                    if (s.params.cube.shadow) {\n                        if (isH()) {\n                            cubeShadow = s.wrapper.find('.swiper-cube-shadow');\n                            if (cubeShadow.length === 0) {\n                                cubeShadow = $('<div class=\"swiper-cube-shadow\"></div>');\n                                s.wrapper.append(cubeShadow);\n                            }\n                            cubeShadow.css({height: s.width + 'px'});\n                        }\n                        else {\n                            cubeShadow = s.container.find('.swiper-cube-shadow');\n                            if (cubeShadow.length === 0) {\n                                cubeShadow = $('<div class=\"swiper-cube-shadow\"></div>');\n                                s.container.append(cubeShadow);\n                            }\n                        }\n                    }\n                    for (var i = 0; i < s.slides.length; i++) {\n                        var slide = s.slides.eq(i);\n                        var slideAngle = i * 90;\n                        var round = Math.floor(slideAngle / 360);\n                        if (s.rtl) {\n                            slideAngle = -slideAngle;\n                            round = Math.floor(-slideAngle / 360);\n                        }\n                        var progress = Math.max(Math.min(slide[0].progress, 1), -1);\n                        var tx = 0, ty = 0, tz = 0;\n                        if (i % 4 === 0) {\n                            tx = - round * 4 * s.size;\n                            tz = 0;\n                        }\n                        else if ((i - 1) % 4 === 0) {\n                            tx = 0;\n                            tz = - round * 4 * s.size;\n                        }\n                        else if ((i - 2) % 4 === 0) {\n                            tx = s.size + round * 4 * s.size;\n                            tz = s.size;\n                        }\n                        else if ((i - 3) % 4 === 0) {\n                            tx = - s.size;\n                            tz = 3 * s.size + s.size * 4 * round;\n                        }\n                        if (s.rtl) {\n                            tx = -tx;\n                        }\n                        \n                        if (!isH()) {\n                            ty = tx;\n                            tx = 0;\n                        }\n                        \n                        var transform = 'rotateX(' + (isH() ? 0 : -slideAngle) + 'deg) rotateY(' + (isH() ? slideAngle : 0) + 'deg) translate3d(' + tx + 'px, ' + ty + 'px, ' + tz + 'px)';\n                        if (progress <= 1 && progress > -1) {\n                            wrapperRotate = i * 90 + progress * 90;\n                            if (s.rtl) wrapperRotate = -i * 90 - progress * 90;\n                        }\n                        slide.transform(transform);\n                        if (s.params.cube.slideShadows) {\n                            //Set shadows\n                            var shadowBefore = isH() ? slide.find('.swiper-slide-shadow-left') : slide.find('.swiper-slide-shadow-top');\n                            var shadowAfter = isH() ? slide.find('.swiper-slide-shadow-right') : slide.find('.swiper-slide-shadow-bottom');\n                            if (shadowBefore.length === 0) {\n                                shadowBefore = $('<div class=\"swiper-slide-shadow-' + (isH() ? 'left' : 'top') + '\"></div>');\n                                slide.append(shadowBefore);\n                            }\n                            if (shadowAfter.length === 0) {\n                                shadowAfter = $('<div class=\"swiper-slide-shadow-' + (isH() ? 'right' : 'bottom') + '\"></div>');\n                                slide.append(shadowAfter);\n                            }\n                            var shadowOpacity = slide[0].progress;\n                            if (shadowBefore.length) shadowBefore[0].style.opacity = -slide[0].progress;\n                            if (shadowAfter.length) shadowAfter[0].style.opacity = slide[0].progress;\n                        }\n                    }\n                    s.wrapper.css({\n                        '-webkit-transform-origin': '50% 50% -' + (s.size / 2) + 'px',\n                        '-moz-transform-origin': '50% 50% -' + (s.size / 2) + 'px',\n                        '-ms-transform-origin': '50% 50% -' + (s.size / 2) + 'px',\n                        'transform-origin': '50% 50% -' + (s.size / 2) + 'px'\n                    });\n                        \n                    if (s.params.cube.shadow) {\n                        if (isH()) {\n                            cubeShadow.transform('translate3d(0px, ' + (s.width / 2 + s.params.cube.shadowOffset) + 'px, ' + (-s.width / 2) + 'px) rotateX(90deg) rotateZ(0deg) scale(' + (s.params.cube.shadowScale) + ')');\n                        }\n                        else {\n                            var shadowAngle = Math.abs(wrapperRotate) - Math.floor(Math.abs(wrapperRotate) / 90) * 90;\n                            var multiplier = 1.5 - (Math.sin(shadowAngle * 2 * Math.PI / 360) / 2 + Math.cos(shadowAngle * 2 * Math.PI / 360) / 2);\n                            var scale1 = s.params.cube.shadowScale,\n                                scale2 = s.params.cube.shadowScale / multiplier,\n                                offset = s.params.cube.shadowOffset;\n                            cubeShadow.transform('scale3d(' + scale1 + ', 1, ' + scale2 + ') translate3d(0px, ' + (s.height / 2 + offset) + 'px, ' + (-s.height / 2 / scale2) + 'px) rotateX(-90deg)');\n                        }\n                    }\n                    var zFactor = (s.isSafari || s.isUiWebView) ? (-s.size / 2) : 0;\n                    s.wrapper.transform('translate3d(0px,0,' + zFactor + 'px) rotateX(' + (isH() ? 0 : wrapperRotate) + 'deg) rotateY(' + (isH() ? -wrapperRotate : 0) + 'deg)');\n                },\n                setTransition: function (duration) {\n                    s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);\n                    if (s.params.cube.shadow && !isH()) {\n                        s.container.find('.swiper-cube-shadow').transition(duration);\n                    }\n                }\n            },\n            coverflow: {\n                setTranslate: function () {\n                    var transform = s.translate;\n                    var center = isH() ? -transform + s.width / 2 : -transform + s.height / 2;\n                    var rotate = isH() ? s.params.coverflow.rotate: -s.params.coverflow.rotate;\n                    var translate = s.params.coverflow.depth;\n                    //Each slide offset from center\n                    for (var i = 0, length = s.slides.length; i < length; i++) {\n                        var slide = s.slides.eq(i);\n                        var slideSize = s.slidesSizesGrid[i];\n                        var slideOffset = slide[0].swiperSlideOffset;\n                        var offsetMultiplier = (center - slideOffset - slideSize / 2) / slideSize * s.params.coverflow.modifier;\n        \n                        var rotateY = isH() ? rotate * offsetMultiplier : 0;\n                        var rotateX = isH() ? 0 : rotate * offsetMultiplier;\n                        // var rotateZ = 0\n                        var translateZ = -translate * Math.abs(offsetMultiplier);\n        \n                        var translateY = isH() ? 0 : s.params.coverflow.stretch * (offsetMultiplier);\n                        var translateX = isH() ? s.params.coverflow.stretch * (offsetMultiplier) : 0;\n        \n                        //Fix for ultra small values\n                        if (Math.abs(translateX) < 0.001) translateX = 0;\n                        if (Math.abs(translateY) < 0.001) translateY = 0;\n                        if (Math.abs(translateZ) < 0.001) translateZ = 0;\n                        if (Math.abs(rotateY) < 0.001) rotateY = 0;\n                        if (Math.abs(rotateX) < 0.001) rotateX = 0;\n        \n                        var slideTransform = 'translate3d(' + translateX + 'px,' + translateY + 'px,' + translateZ + 'px)  rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg)';\n        \n                        slide.transform(slideTransform);\n                        slide[0].style.zIndex = -Math.abs(Math.round(offsetMultiplier)) + 1;\n                        if (s.params.coverflow.slideShadows) {\n                            //Set shadows\n                            var shadowBefore = isH() ? slide.find('.swiper-slide-shadow-left') : slide.find('.swiper-slide-shadow-top');\n                            var shadowAfter = isH() ? slide.find('.swiper-slide-shadow-right') : slide.find('.swiper-slide-shadow-bottom');\n                            if (shadowBefore.length === 0) {\n                                shadowBefore = $('<div class=\"swiper-slide-shadow-' + (isH() ? 'left' : 'top') + '\"></div>');\n                                slide.append(shadowBefore);\n                            }\n                            if (shadowAfter.length === 0) {\n                                shadowAfter = $('<div class=\"swiper-slide-shadow-' + (isH() ? 'right' : 'bottom') + '\"></div>');\n                                slide.append(shadowAfter);\n                            }\n                            if (shadowBefore.length) shadowBefore[0].style.opacity = offsetMultiplier > 0 ? offsetMultiplier : 0;\n                            if (shadowAfter.length) shadowAfter[0].style.opacity = (-offsetMultiplier) > 0 ? -offsetMultiplier : 0;\n                        }\n                    }\n        \n                    //Set correct perspective for IE10\n                    if (s.browser.ie) {\n                        var ws = s.wrapper[0].style;\n                        ws.perspectiveOrigin = center + 'px 50%';\n                    }\n                },\n                setTransition: function (duration) {\n                    s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);\n                }\n            }\n        };\n    \n        /*=========================\n          Images Lazy Loading\n          ===========================*/\n        s.lazy = {\n            initialImageLoaded: false,\n            loadImageInSlide: function (index, loadInDuplicate) {\n                if (typeof index === 'undefined') return;\n                if (typeof loadInDuplicate === 'undefined') loadInDuplicate = true;\n                if (s.slides.length === 0) return;\n                \n                var slide = s.slides.eq(index);\n                var img = slide.find('.swiper-lazy:not(.swiper-lazy-loaded):not(.swiper-lazy-loading)');\n                if (slide.hasClass('swiper-lazy') && !slide.hasClass('swiper-lazy-loaded') && !slide.hasClass('swiper-lazy-loading')) {\n                    img = img.add(slide[0]);\n                }\n                if (img.length === 0) return;\n        \n                img.each(function () {\n                    var _img = $(this);\n                    _img.addClass('swiper-lazy-loading');\n                    var background = _img.attr('data-background');\n                    var src = _img.attr('data-src'),\n                        srcset = _img.attr('data-srcset');\n                    s.loadImage(_img[0], (src || background), srcset, false, function () {\n                        if (background) {\n                            _img.css('background-image', 'url(' + background + ')');\n                            _img.removeAttr('data-background');\n                        }\n                        else {\n                            if (srcset) {\n                                _img.attr('srcset', srcset);\n                                _img.removeAttr('data-srcset');    \n                            }\n                            if (src) {\n                                _img.attr('src', src);    \n                                _img.removeAttr('data-src');\n                            }\n                            \n                        }\n                            \n                        _img.addClass('swiper-lazy-loaded').removeClass('swiper-lazy-loading');\n                        slide.find('.swiper-lazy-preloader, .preloader').remove();\n                        if (s.params.loop && loadInDuplicate) {\n                            var slideOriginalIndex = slide.attr('data-swiper-slide-index');\n                            if (slide.hasClass(s.params.slideDuplicateClass)) {\n                                var originalSlide = s.wrapper.children('[data-swiper-slide-index=\"' + slideOriginalIndex + '\"]:not(.' + s.params.slideDuplicateClass + ')');\n                                s.lazy.loadImageInSlide(originalSlide.index(), false);\n                            }\n                            else {\n                                var duplicatedSlide = s.wrapper.children('.' + s.params.slideDuplicateClass + '[data-swiper-slide-index=\"' + slideOriginalIndex + '\"]');\n                                s.lazy.loadImageInSlide(duplicatedSlide.index(), false);\n                            }\n                        }\n                        s.emit('onLazyImageReady', s, slide[0], _img[0]);\n                    });\n                    \n                    s.emit('onLazyImageLoad', s, slide[0], _img[0]);\n                });\n                    \n            },\n            load: function () {\n                var i;\n                if (s.params.watchSlidesVisibility) {\n                    s.wrapper.children('.' + s.params.slideVisibleClass).each(function () {\n                        s.lazy.loadImageInSlide($(this).index());\n                    });\n                }\n                else {\n                    if (s.params.slidesPerView > 1) {\n                        for (i = s.activeIndex; i < s.activeIndex + s.params.slidesPerView ; i++) {\n                            if (s.slides[i]) s.lazy.loadImageInSlide(i);\n                        }\n                    }\n                    else {\n                        s.lazy.loadImageInSlide(s.activeIndex);    \n                    }\n                }\n                if (s.params.lazyLoadingInPrevNext) {\n                    if (s.params.slidesPerView > 1) {\n                        // Next Slides\n                        for (i = s.activeIndex + s.params.slidesPerView; i < s.activeIndex + s.params.slidesPerView + s.params.slidesPerView; i++) {\n                            if (s.slides[i]) s.lazy.loadImageInSlide(i);\n                        }\n                        // Prev Slides\n                        for (i = s.activeIndex - s.params.slidesPerView; i < s.activeIndex ; i++) {\n                            if (s.slides[i]) s.lazy.loadImageInSlide(i);\n                        }\n                    }\n                    else {\n                        var nextSlide = s.wrapper.children('.' + s.params.slideNextClass);\n                        if (nextSlide.length > 0) s.lazy.loadImageInSlide(nextSlide.index());\n        \n                        var prevSlide = s.wrapper.children('.' + s.params.slidePrevClass);\n                        if (prevSlide.length > 0) s.lazy.loadImageInSlide(prevSlide.index());\n                    }\n                }\n            },\n            onTransitionStart: function () {\n                if (s.params.lazyLoading) {\n                    if (s.params.lazyLoadingOnTransitionStart || (!s.params.lazyLoadingOnTransitionStart && !s.lazy.initialImageLoaded)) {\n                        s.lazy.load();\n                    }\n                }\n            },\n            onTransitionEnd: function () {\n                if (s.params.lazyLoading && !s.params.lazyLoadingOnTransitionStart) {\n                    s.lazy.load();\n                }\n            }\n        };\n        \n    \n        /*=========================\n          Scrollbar\n          ===========================*/\n        s.scrollbar = {\n            isTouched: false,\n            setDragPosition: function (e) {\n                var sb = s.scrollbar;\n                var x = 0, y = 0;\n                var translate;\n                var pointerPosition = isH() ? \n                    ((e.type === 'touchstart' || e.type === 'touchmove') ? e.targetTouches[0].pageX : e.pageX || e.clientX) :\n                    ((e.type === 'touchstart' || e.type === 'touchmove') ? e.targetTouches[0].pageY : e.pageY || e.clientY) ;\n                var position = (pointerPosition) - sb.track.offset()[isH() ? 'left' : 'top'] - sb.dragSize / 2;\n                var positionMin = -s.minTranslate() * sb.moveDivider;\n                var positionMax = -s.maxTranslate() * sb.moveDivider;\n                if (position < positionMin) {\n                    position = positionMin;\n                }\n                else if (position > positionMax) {\n                    position = positionMax;\n                }\n                position = -position / sb.moveDivider;\n                s.updateProgress(position);\n                s.setWrapperTranslate(position, true);\n            },\n            dragStart: function (e) {\n                var sb = s.scrollbar;\n                sb.isTouched = true;\n                e.preventDefault();\n                e.stopPropagation();\n        \n                sb.setDragPosition(e);\n                clearTimeout(sb.dragTimeout);\n        \n                sb.track.transition(0);\n                if (s.params.scrollbarHide) {\n                    sb.track.css('opacity', 1);\n                }\n                s.wrapper.transition(100);\n                sb.drag.transition(100);\n                s.emit('onScrollbarDragStart', s);\n            },\n            dragMove: function (e) {\n                var sb = s.scrollbar;\n                if (!sb.isTouched) return;\n                if (e.preventDefault) e.preventDefault();\n                else e.returnValue = false;\n                sb.setDragPosition(e);\n                s.wrapper.transition(0);\n                sb.track.transition(0);\n                sb.drag.transition(0);\n                s.emit('onScrollbarDragMove', s);\n            },\n            dragEnd: function (e) {\n                var sb = s.scrollbar;\n                if (!sb.isTouched) return;\n                sb.isTouched = false;\n                if (s.params.scrollbarHide) {\n                    clearTimeout(sb.dragTimeout);\n                    sb.dragTimeout = setTimeout(function () {\n                        sb.track.css('opacity', 0);\n                        sb.track.transition(400);\n                    }, 1000);\n        \n                }\n                s.emit('onScrollbarDragEnd', s);\n                if (s.params.scrollbarSnapOnRelease) {\n                    s.slideReset();\n                }\n            },\n            enableDraggable: function () {\n                var sb = s.scrollbar;\n                var target = s.support.touch ? sb.track : document;\n                $(sb.track).on(s.touchEvents.start, sb.dragStart);\n                $(target).on(s.touchEvents.move, sb.dragMove);\n                $(target).on(s.touchEvents.end, sb.dragEnd);\n            },\n            disableDraggable: function () {\n                var sb = s.scrollbar;\n                var target = s.support.touch ? sb.track : document;\n                $(sb.track).off(s.touchEvents.start, sb.dragStart);\n                $(target).off(s.touchEvents.move, sb.dragMove);\n                $(target).off(s.touchEvents.end, sb.dragEnd);\n            },\n            set: function () {\n                if (!s.params.scrollbar) return;\n                var sb = s.scrollbar;\n                sb.track = $(s.params.scrollbar);\n                sb.drag = sb.track.find('.swiper-scrollbar-drag');\n                if (sb.drag.length === 0) {\n                    sb.drag = $('<div class=\"swiper-scrollbar-drag\"></div>');\n                    sb.track.append(sb.drag);\n                }\n                sb.drag[0].style.width = '';\n                sb.drag[0].style.height = '';\n                sb.trackSize = isH() ? sb.track[0].offsetWidth : sb.track[0].offsetHeight;\n                \n                sb.divider = s.size / s.virtualSize;\n                sb.moveDivider = sb.divider * (sb.trackSize / s.size);\n                sb.dragSize = sb.trackSize * sb.divider;\n        \n                if (isH()) {\n                    sb.drag[0].style.width = sb.dragSize + 'px';\n                }\n                else {\n                    sb.drag[0].style.height = sb.dragSize + 'px';\n                }\n        \n                if (sb.divider >= 1) {\n                    sb.track[0].style.display = 'none';\n                }\n                else {\n                    sb.track[0].style.display = '';\n                }\n                if (s.params.scrollbarHide) {\n                    sb.track[0].style.opacity = 0;\n                }\n            },\n            setTranslate: function () {\n                if (!s.params.scrollbar) return;\n                var diff;\n                var sb = s.scrollbar;\n                var translate = s.translate || 0;\n                var newPos;\n                \n                var newSize = sb.dragSize;\n                newPos = (sb.trackSize - sb.dragSize) * s.progress;\n                if (s.rtl && isH()) {\n                    newPos = -newPos;\n                    if (newPos > 0) {\n                        newSize = sb.dragSize - newPos;\n                        newPos = 0;\n                    }\n                    else if (-newPos + sb.dragSize > sb.trackSize) {\n                        newSize = sb.trackSize + newPos;\n                    }\n                }\n                else {\n                    if (newPos < 0) {\n                        newSize = sb.dragSize + newPos;\n                        newPos = 0;\n                    }\n                    else if (newPos + sb.dragSize > sb.trackSize) {\n                        newSize = sb.trackSize - newPos;\n                    }\n                }\n                if (isH()) {\n                    if (s.support.transforms3d) {\n                        sb.drag.transform('translate3d(' + (newPos) + 'px, 0, 0)');\n                    }\n                    else {\n                        sb.drag.transform('translateX(' + (newPos) + 'px)');   \n                    }\n                    sb.drag[0].style.width = newSize + 'px';\n                }\n                else {\n                    if (s.support.transforms3d) {\n                        sb.drag.transform('translate3d(0px, ' + (newPos) + 'px, 0)');\n                    }\n                    else {\n                        sb.drag.transform('translateY(' + (newPos) + 'px)');   \n                    }\n                    sb.drag[0].style.height = newSize + 'px';\n                }\n                if (s.params.scrollbarHide) {\n                    clearTimeout(sb.timeout);\n                    sb.track[0].style.opacity = 1;\n                    sb.timeout = setTimeout(function () {\n                        sb.track[0].style.opacity = 0;\n                        sb.track.transition(400);\n                    }, 1000);\n                }\n            },\n            setTransition: function (duration) {\n                if (!s.params.scrollbar) return;\n                s.scrollbar.drag.transition(duration);\n            }\n        };\n    \n        /*=========================\n          Controller\n          ===========================*/\n        s.controller = {\n            LinearSpline: function (x, y) {\n                this.x = x;\n                this.y = y;\n                this.lastIndex = x.length - 1;\n                // Given an x value (x2), return the expected y2 value:\n                // (x1,y1) is the known point before given value,\n                // (x3,y3) is the known point after given value.\n                var i1, i3;\n                var l = this.x.length;\n        \n                this.interpolate = function (x2) {\n                    if (!x2) return 0;\n        \n                    // Get the indexes of x1 and x3 (the array indexes before and after given x2):\n                    i3 = binarySearch(this.x, x2);\n                    i1 = i3 - 1;\n        \n                    // We have our indexes i1 & i3, so we can calculate already:\n                    // y2 := ((x2−x1) × (y3−y1)) ÷ (x3−x1) + y1\n                    return ((x2 - this.x[i1]) * (this.y[i3] - this.y[i1])) / (this.x[i3] - this.x[i1]) + this.y[i1];\n                };\n        \n                var binarySearch = (function() {\n                    var maxIndex, minIndex, guess;\n                    return function(array, val) {\n                        minIndex = -1;\n                        maxIndex = array.length;\n                        while (maxIndex - minIndex > 1)\n                            if (array[guess = maxIndex + minIndex >> 1] <= val) {\n                                minIndex = guess;\n                            } else {\n                                maxIndex = guess;\n                            }\n                        return maxIndex;\n                    };\n                })();\n            },\n            //xxx: for now i will just save one spline function to to \n            getInterpolateFunction: function(c){\n                if(!s.controller.spline) s.controller.spline = s.params.loop ? \n                    new s.controller.LinearSpline(s.slidesGrid, c.slidesGrid) :\n                    new s.controller.LinearSpline(s.snapGrid, c.snapGrid);\n            },\n            setTranslate: function (translate, byController) {\n               var controlled = s.params.control;\n               var multiplier, controlledTranslate;\n               function setControlledTranslate(c) {\n                    // this will create an Interpolate function based on the snapGrids\n                    // x is the Grid of the scrolled scroller and y will be the controlled scroller\n                    // it makes sense to create this only once and recall it for the interpolation\n                    // the function does a lot of value caching for performance \n                    translate = c.rtl && c.params.direction === 'horizontal' ? -s.translate : s.translate;\n                    if (s.params.controlBy === 'slide') {\n                        s.controller.getInterpolateFunction(c);\n                        // i am not sure why the values have to be multiplicated this way, tried to invert the snapGrid\n                        // but it did not work out\n                        controlledTranslate = -s.controller.spline.interpolate(-translate);\n                    }\n                        \n                    if(!controlledTranslate || s.params.controlBy === 'container'){\n                        multiplier = (c.maxTranslate() - c.minTranslate()) / (s.maxTranslate() - s.minTranslate());\n                        controlledTranslate = (translate - s.minTranslate()) * multiplier + c.minTranslate();\n                    }\n                   \n                    if (s.params.controlInverse) {\n                        controlledTranslate = c.maxTranslate() - controlledTranslate;\n                    }\n                    c.updateProgress(controlledTranslate);\n                    c.setWrapperTranslate(controlledTranslate, false, s);\n                    c.updateActiveIndex();\n               }\n               if (s.isArray(controlled)) {\n                   for (var i = 0; i < controlled.length; i++) {\n                       if (controlled[i] !== byController && controlled[i] instanceof Swiper) {\n                           setControlledTranslate(controlled[i]);\n                       }\n                   }\n               }\n               else if (controlled instanceof Swiper && byController !== controlled) {\n        \n                   setControlledTranslate(controlled);\n               }\n            },\n            setTransition: function (duration, byController) {\n                var controlled = s.params.control;\n                var i;\n                function setControlledTransition(c) {\n                    c.setWrapperTransition(duration, s);\n                    if (duration !== 0) {\n                        c.onTransitionStart();\n                        c.wrapper.transitionEnd(function(){\n                            if (!controlled) return;\n                            if (c.params.loop && s.params.controlBy === 'slide') {\n                                c.fixLoop();\n                            }\n                            c.onTransitionEnd();\n                            \n                        });\n                    }\n                }\n                if (s.isArray(controlled)) {\n                    for (i = 0; i < controlled.length; i++) {\n                        if (controlled[i] !== byController && controlled[i] instanceof Swiper) {\n                            setControlledTransition(controlled[i]);\n                        }\n                    }\n                }\n                else if (controlled instanceof Swiper && byController !== controlled) {\n                    setControlledTransition(controlled);\n                }\n            }\n        };\n    \n        /*=========================\n          Parallax\n          ===========================*/\n        function setParallaxTransform(el, progress) {\n            el = $(el);\n            var p, pX, pY;\n            \n            p = el.attr('data-swiper-parallax') || '0';\n            pX = el.attr('data-swiper-parallax-x');\n            pY = el.attr('data-swiper-parallax-y');\n            if (pX || pY) {\n                pX = pX || '0';\n                pY = pY || '0';\n            }\n            else {\n                if (isH()) {\n                    pX = p;\n                    pY = '0';\n                }\n                else {\n                    pY = p;\n                    pX = '0';\n                }\n            }\n            if ((pX).indexOf('%') >= 0) {\n                pX = parseInt(pX, 10) * progress + '%';\n            }\n            else {\n                pX = pX * progress + 'px' ;\n            }\n            if ((pY).indexOf('%') >= 0) {\n                pY = parseInt(pY, 10) * progress + '%';\n            }\n            else {\n                pY = pY * progress + 'px' ;\n            }\n            el.transform('translate3d(' + pX + ', ' + pY + ',0px)');\n        }   \n        s.parallax = {\n            setTranslate: function () {\n                s.container.children('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){\n                    setParallaxTransform(this, s.progress);\n                    \n                });\n                s.slides.each(function () {\n                    var slide = $(this);\n                    slide.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function () {\n                        var progress = Math.min(Math.max(slide[0].progress, -1), 1);\n                        setParallaxTransform(this, progress);\n                    });\n                });\n            },\n            setTransition: function (duration) {\n                if (typeof duration === 'undefined') duration = s.params.speed;\n                s.container.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){\n                    var el = $(this);\n                    var parallaxDuration = parseInt(el.attr('data-swiper-parallax-duration'), 10) || duration;\n                    if (duration === 0) parallaxDuration = 0;\n                    el.transition(parallaxDuration);\n                });\n            }\n        };\n        \n    \n        /*=========================\n          Plugins API. Collect all and init all plugins\n          ===========================*/\n        s._plugins = [];\n        for (var plugin in s.plugins) {\n            var p = s.plugins[plugin](s, s.params[plugin]);\n            if (p) s._plugins.push(p);\n        }\n        // Method to call all plugins event/method\n        s.callPlugins = function (eventName) {\n            for (var i = 0; i < s._plugins.length; i++) {\n                if (eventName in s._plugins[i]) {\n                    s._plugins[i][eventName](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n                }\n            }\n        };\n    \n        /*=========================\n          Events/Callbacks/Plugins Emitter\n          ===========================*/\n        function normalizeEventName (eventName) {\n            if (eventName.indexOf('on') !== 0) {\n                if (eventName[0] !== eventName[0].toUpperCase()) {\n                    eventName = 'on' + eventName[0].toUpperCase() + eventName.substring(1);\n                }\n                else {\n                    eventName = 'on' + eventName;\n                }\n            }\n            return eventName;\n        }\n        s.emitterEventListeners = {\n        \n        };\n        s.emit = function (eventName) {\n            // Trigger callbacks\n            if (s.params[eventName]) {\n                s.params[eventName](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n            }\n            var i;\n            // Trigger events\n            if (s.emitterEventListeners[eventName]) {\n                for (i = 0; i < s.emitterEventListeners[eventName].length; i++) {\n                    s.emitterEventListeners[eventName][i](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n                }\n            }\n            // Trigger plugins\n            if (s.callPlugins) s.callPlugins(eventName, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);\n        };\n        s.on = function (eventName, handler) {\n            eventName = normalizeEventName(eventName);\n            if (!s.emitterEventListeners[eventName]) s.emitterEventListeners[eventName] = [];\n            s.emitterEventListeners[eventName].push(handler);\n            return s;\n        };\n        s.off = function (eventName, handler) {\n            var i;\n            eventName = normalizeEventName(eventName);\n            if (typeof handler === 'undefined') {\n                // Remove all handlers for such event\n                s.emitterEventListeners[eventName] = [];\n                return s;\n            }\n            if (!s.emitterEventListeners[eventName] || s.emitterEventListeners[eventName].length === 0) return;\n            for (i = 0; i < s.emitterEventListeners[eventName].length; i++) {\n                if(s.emitterEventListeners[eventName][i] === handler) s.emitterEventListeners[eventName].splice(i, 1);\n            }\n            return s;\n        };\n        s.once = function (eventName, handler) {\n            eventName = normalizeEventName(eventName);\n            var _handler = function () {\n                handler(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);\n                s.off(eventName, _handler);\n            };\n            s.on(eventName, _handler);\n            return s;\n        };\n    \n        // Accessibility tools\n        s.a11y = {\n            makeFocusable: function ($el) {\n                $el.attr('tabIndex', '0');\n                return $el;\n            },\n            addRole: function ($el, role) {\n                $el.attr('role', role);\n                return $el;\n            },\n        \n            addLabel: function ($el, label) {\n                $el.attr('aria-label', label);\n                return $el;\n            },\n        \n            disable: function ($el) {\n                $el.attr('aria-disabled', true);\n                return $el;\n            },\n        \n            enable: function ($el) {\n                $el.attr('aria-disabled', false);\n                return $el;\n            },\n        \n            onEnterKey: function (event) {\n                if (event.keyCode !== 13) return;\n                if ($(event.target).is(s.params.nextButton)) {\n                    s.onClickNext(event);\n                    if (s.isEnd) {\n                        s.a11y.notify(s.params.lastSlideMessage);\n                    }\n                    else {\n                        s.a11y.notify(s.params.nextSlideMessage);\n                    }\n                }\n                else if ($(event.target).is(s.params.prevButton)) {\n                    s.onClickPrev(event);\n                    if (s.isBeginning) {\n                        s.a11y.notify(s.params.firstSlideMessage);\n                    }\n                    else {\n                        s.a11y.notify(s.params.prevSlideMessage);\n                    }\n                }\n                if ($(event.target).is('.' + s.params.bulletClass)) {\n                    $(event.target)[0].click();\n                }\n            },\n        \n            liveRegion: $('<span class=\"swiper-notification\" aria-live=\"assertive\" aria-atomic=\"true\"></span>'),\n        \n            notify: function (message) {\n                var notification = s.a11y.liveRegion;\n                if (notification.length === 0) return;\n                notification.html('');\n                notification.html(message);\n            },\n            init: function () {\n                // Setup accessibility\n                if (s.params.nextButton) {\n                    var nextButton = $(s.params.nextButton);\n                    s.a11y.makeFocusable(nextButton);\n                    s.a11y.addRole(nextButton, 'button');\n                    s.a11y.addLabel(nextButton, s.params.nextSlideMessage);\n                }\n                if (s.params.prevButton) {\n                    var prevButton = $(s.params.prevButton);\n                    s.a11y.makeFocusable(prevButton);\n                    s.a11y.addRole(prevButton, 'button');\n                    s.a11y.addLabel(prevButton, s.params.prevSlideMessage);\n                }\n        \n                $(s.container).append(s.a11y.liveRegion);\n            },\n            initPagination: function () {\n                if (s.params.pagination && s.params.paginationClickable && s.bullets && s.bullets.length) {\n                    s.bullets.each(function () {\n                        var bullet = $(this);\n                        s.a11y.makeFocusable(bullet);\n                        s.a11y.addRole(bullet, 'button');\n                        s.a11y.addLabel(bullet, s.params.paginationBulletMessage.replace(/{{index}}/, bullet.index() + 1));\n                    });\n                }\n            },\n            destroy: function () {\n                if (s.a11y.liveRegion && s.a11y.liveRegion.length > 0) s.a11y.liveRegion.remove();\n            }\n        };\n        \n    \n        /*=========================\n          Init/Destroy\n          ===========================*/\n        s.init = function () {\n            if (s.params.loop) s.createLoop();\n            s.updateContainerSize();\n            s.updateSlidesSize();\n            s.updatePagination();\n            if (s.params.scrollbar && s.scrollbar) {\n                s.scrollbar.set();\n                if (s.params.scrollbarDraggable) {\n                    s.scrollbar.enableDraggable();\n                }\n            }\n            if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {\n                if (!s.params.loop) s.updateProgress();\n                s.effects[s.params.effect].setTranslate();\n            }\n            if (s.params.loop) {\n                s.slideTo(s.params.initialSlide + s.loopedSlides, 0, s.params.runCallbacksOnInit);\n            }\n            else {\n                s.slideTo(s.params.initialSlide, 0, s.params.runCallbacksOnInit);\n                if (s.params.initialSlide === 0) {\n                    if (s.parallax && s.params.parallax) s.parallax.setTranslate();\n                    if (s.lazy && s.params.lazyLoading) {\n                        s.lazy.load();\n                        s.lazy.initialImageLoaded = true;\n                    }\n                }\n            }\n            s.attachEvents();\n            if (s.params.observer && s.support.observer) {\n                s.initObservers();\n            }\n            if (s.params.preloadImages && !s.params.lazyLoading) {\n                s.preloadImages();\n            }\n            if (s.params.autoplay) {\n                s.startAutoplay();\n            }\n            if (s.params.keyboardControl) {\n                if (s.enableKeyboardControl) s.enableKeyboardControl();\n            }\n            if (s.params.mousewheelControl) {\n                if (s.enableMousewheelControl) s.enableMousewheelControl();\n            }\n            if (s.params.hashnav) {\n                if (s.hashnav) s.hashnav.init();\n            }\n            if (s.params.a11y && s.a11y) s.a11y.init();\n            s.emit('onInit', s);\n        };\n        \n        // Cleanup dynamic styles\n        s.cleanupStyles = function () {\n            // Container\n            s.container.removeClass(s.classNames.join(' ')).removeAttr('style');\n        \n            // Wrapper\n            s.wrapper.removeAttr('style');\n        \n            // Slides\n            if (s.slides && s.slides.length) {\n                s.slides\n                    .removeClass([\n                      s.params.slideVisibleClass,\n                      s.params.slideActiveClass,\n                      s.params.slideNextClass,\n                      s.params.slidePrevClass\n                    ].join(' '))\n                    .removeAttr('style')\n                    .removeAttr('data-swiper-column')\n                    .removeAttr('data-swiper-row');\n            }\n        \n            // Pagination/Bullets\n            if (s.paginationContainer && s.paginationContainer.length) {\n                s.paginationContainer.removeClass(s.params.paginationHiddenClass);\n            }\n            if (s.bullets && s.bullets.length) {\n                s.bullets.removeClass(s.params.bulletActiveClass);\n            }\n        \n            // Buttons\n            if (s.params.prevButton) $(s.params.prevButton).removeClass(s.params.buttonDisabledClass);\n            if (s.params.nextButton) $(s.params.nextButton).removeClass(s.params.buttonDisabledClass);\n        \n            // Scrollbar\n            if (s.params.scrollbar && s.scrollbar) {\n                if (s.scrollbar.track && s.scrollbar.track.length) s.scrollbar.track.removeAttr('style');\n                if (s.scrollbar.drag && s.scrollbar.drag.length) s.scrollbar.drag.removeAttr('style');\n            }\n        };\n        \n        // Destroy\n        s.destroy = function (deleteInstance, cleanupStyles) {\n            // Detach evebts\n            s.detachEvents();\n            // Stop autoplay\n            s.stopAutoplay();\n            // Disable draggable\n            if (s.params.scrollbar && s.scrollbar) {\n                if (s.params.scrollbarDraggable) {\n                    s.scrollbar.disableDraggable();\n                }\n            }\n            // Destroy loop\n            if (s.params.loop) {\n                s.destroyLoop();\n            }\n            // Cleanup styles\n            if (cleanupStyles) {\n                s.cleanupStyles();\n            }\n            // Disconnect observer\n            s.disconnectObservers();\n            // Disable keyboard/mousewheel\n            if (s.params.keyboardControl) {\n                if (s.disableKeyboardControl) s.disableKeyboardControl();\n            }\n            if (s.params.mousewheelControl) {\n                if (s.disableMousewheelControl) s.disableMousewheelControl();\n            }\n            // Disable a11y\n            if (s.params.a11y && s.a11y) s.a11y.destroy();\n            // Destroy callback\n            s.emit('onDestroy');\n            // Delete instance\n            if (deleteInstance !== false) s = null;\n        };\n        \n        s.init();\n        \n    \n    \n        // Return swiper instance\n        return s;\n    };\n    \n    /*==================================================\n        Prototype\n    ====================================================*/\n    Swiper.prototype = {\n        isSafari: (function () {\n            var ua = navigator.userAgent.toLowerCase();\n            return (ua.indexOf('safari') >= 0 && ua.indexOf('chrome') < 0 && ua.indexOf('android') < 0);\n        })(),\n        isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),\n        isArray: function (arr) {\n            return Object.prototype.toString.apply(arr) === '[object Array]';\n        },\n        /*==================================================\n        Browser\n        ====================================================*/\n        browser: {\n            ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,\n            ieTouch: (window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1) || (window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1)\n        },\n        /*==================================================\n        Devices\n        ====================================================*/\n        device: (function () {\n            var ua = navigator.userAgent;\n            var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n            var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n            var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n            var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n            return {\n                ios: ipad || iphone || ipod,\n                android: android\n            };\n        })(),\n        /*==================================================\n        Feature Detection\n        ====================================================*/\n        support: {\n            touch : (window.Modernizr && Modernizr.touch === true) || (function () {\n                return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\n            })(),\n    \n            transforms3d : (window.Modernizr && Modernizr.csstransforms3d === true) || (function () {\n                var div = document.createElement('div').style;\n                return ('webkitPerspective' in div || 'MozPerspective' in div || 'OPerspective' in div || 'MsPerspective' in div || 'perspective' in div);\n            })(),\n    \n            flexbox: (function () {\n                var div = document.createElement('div').style;\n                var styles = ('alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient').split(' ');\n                for (var i = 0; i < styles.length; i++) {\n                    if (styles[i] in div) return true;\n                }\n            })(),\n    \n            observer: (function () {\n                return ('MutationObserver' in window || 'WebkitMutationObserver' in window);\n            })()\n        },\n        /*==================================================\n        Plugins\n        ====================================================*/\n        plugins: {}\n    };\n    \n\n})();\n\n//# sourceMappingURL=framework7.js.map\n"},{"id":3,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\bower_components\\framework7\\dist\\css\\framework7.ios.css","name":"./bower_components/framework7/dist/css/framework7.ios.css","index":3,"index2":1,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"framework7.ios.css","loc":"2:0-29"}],"source":"// removed by extract-text-webpack-plugin"},{"id":4,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\bower_components\\framework7\\dist\\css\\framework7.ios.colors.css","name":"./bower_components/framework7/dist/css/framework7.ios.colors.css","index":4,"index2":2,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"framework7.ios.colors.css","loc":"3:0-36"}],"source":"// removed by extract-text-webpack-plugin"},{"id":5,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\iconfont.css","name":"./src/styles/css/iconfont.css","index":5,"index2":3,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/iconfont.css","loc":"5:0-37"}],"source":"// removed by extract-text-webpack-plugin"},{"id":6,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\commond.css","name":"./src/styles/css/commond.css","index":6,"index2":4,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/commond.css","loc":"6:0-36"}],"source":"// removed by extract-text-webpack-plugin"},{"id":7,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\recommend.css","name":"./src/styles/css/recommend.css","index":7,"index2":5,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/recommend.css","loc":"7:0-38"}],"source":"// removed by extract-text-webpack-plugin"},{"id":8,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\seek.css","name":"./src/styles/css/seek.css","index":8,"index2":6,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/seek.css","loc":"8:0-33"}],"source":"// removed by extract-text-webpack-plugin"},{"id":9,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\my.css","name":"./src/styles/css/my.css","index":9,"index2":7,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/my.css","loc":"9:0-31"}],"source":"// removed by extract-text-webpack-plugin"},{"id":10,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\daixi-my.css","name":"./src/styles/css/daixi-my.css","index":10,"index2":8,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/daixi-my.css","loc":"10:0-37"}],"source":"// removed by extract-text-webpack-plugin"},{"id":11,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\daixi-activity.css","name":"./src/styles/css/daixi-activity.css","index":11,"index2":9,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/daixi-activity.css","loc":"11:0-43"}],"source":"// removed by extract-text-webpack-plugin"},{"id":12,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\myinfo.css","name":"./src/styles/css/myinfo.css","index":12,"index2":10,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/myinfo.css","loc":"12:0-35"}],"source":"// removed by extract-text-webpack-plugin"},{"id":13,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\search.css","name":"./src/styles/css/search.css","index":13,"index2":11,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/search.css","loc":"13:0-35"}],"source":"// removed by extract-text-webpack-plugin"},{"id":14,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\items.css","name":"./src/styles/css/items.css","index":14,"index2":12,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/items.css","loc":"14:0-34"}],"source":"// removed by extract-text-webpack-plugin"},{"id":15,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\tym-activity.css","name":"./src/styles/css/tym-activity.css","index":15,"index2":13,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/tym-activity.css","loc":"16:0-41"}],"source":"// removed by extract-text-webpack-plugin"},{"id":16,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\activity-detail.css","name":"./src/styles/css/activity-detail.css","index":16,"index2":14,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/activity-detail.css","loc":"17:0-44"}],"source":"// removed by extract-text-webpack-plugin"},{"id":17,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\tym-wallet.css","name":"./src/styles/css/tym-wallet.css","index":17,"index2":15,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/tym-wallet.css","loc":"18:0-39"}],"source":"// removed by extract-text-webpack-plugin"},{"id":18,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\launch-act-info.css","name":"./src/styles/css/launch-act-info.css","index":18,"index2":16,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/launch-act-info.css","loc":"19:0-44"}],"source":"// removed by extract-text-webpack-plugin"},{"id":19,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\launch-act.css","name":"./src/styles/css/launch-act.css","index":19,"index2":17,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/launch-act.css","loc":"22:0-39"}],"source":"// removed by extract-text-webpack-plugin"},{"id":20,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\extract-text-webpack-plugin\\loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\style-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\css-loader\\index.js!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\css\\activity.css","name":"./src/styles/css/activity.css","index":20,"index2":18,"size":41,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"../styles/css/activity.css","loc":"23:0-37"}],"source":"// removed by extract-text-webpack-plugin"},{"id":21,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\appFunc.js","name":"./src/modules/utils/appFunc.js","index":21,"index2":21,"size":38646,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"./utils/appFunc","loc":"25:14-40"},{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./utils/appFunc","loc":"8:14-40"},{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":27,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommendView.js","module":"./src/modules/recommend/recommendView.js","moduleName":"./src/modules/recommend/recommendView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:14-41"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":30,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","module":"./src/modules/item/item.js","moduleName":"./src/modules/item/item.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":37,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\role\\role.js","module":"./src/modules/role/role.js","moduleName":"./src/modules/role/role.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":40,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","module":"./src/modules/accLogin/accLogin.js","moduleName":"./src/modules/accLogin/accLogin.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":42,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","module":"./src/modules/mobLogin/mobLogin.js","moduleName":"./src/modules/mobLogin/mobLogin.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":53,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","module":"./src/modules/shop/addRetinueShop.js","moduleName":"./src/modules/shop/addRetinueShop.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":64,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","module":"./src/modules/shop/dotManage.js","moduleName":"./src/modules/shop/dotManage.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":65,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","module":"./src/modules/shop/dotManageView.js","moduleName":"./src/modules/shop/dotManageView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":69,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","module":"./src/modules/myPraise/myPraiseView.js","moduleName":"./src/modules/myPraise/myPraiseView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"6:14-41"},{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"3:14-41"},{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":80,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","module":"./src/modules/order/orderView.js","moduleName":"./src/modules/order/orderView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:14-41"},{"moduleId":88,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","module":"./src/modules/search/seekSearch.js","moduleName":"./src/modules/search/seekSearch.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":89,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","module":"./src/modules/search/seekSearchView.js","moduleName":"./src/modules/search/seekSearchView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"6:14-41"},{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":93,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","module":"./src/modules/seek/seekView.js","moduleName":"./src/modules/seek/seekView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:14-41"},{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":99,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\myView.js","module":"./src/modules/my/myView.js","moduleName":"./src/modules/my/myView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":104,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","module":"./src/modules/modifyPhone/modifyPhone.js","moduleName":"./src/modules/modifyPhone/modifyPhone.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":106,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","module":"./src/modules/myInfo/addRetinue.js","moduleName":"./src/modules/myInfo/addRetinue.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":111,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","module":"./src/modules/createAct/activityView.js","moduleName":"./src/modules/createAct/activityView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"3:12-39"},{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":127,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\ViewController.js","module":"./src/modules/app/ViewController.js","moduleName":"./src/modules/app/ViewController.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":129,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","module":"./src/modules/createAct/participantCtrl.js","moduleName":"./src/modules/createAct/participantCtrl.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"3:12-39"},{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":145,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","module":"./src/modules/my/payPasswd.js","moduleName":"./src/modules/my/payPasswd.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"9:12-39"},{"moduleId":158,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seekFresh\\seekFresh.js","module":"./src/modules/seekFresh/seekFresh.js","moduleName":"./src/modules/seekFresh/seekFresh.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"2:12-39"},{"moduleId":159,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\device.js","module":"./src/modules/app/device.js","moduleName":"./src/modules/app/device.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"},{"moduleId":160,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\tmmSdk.js","module":"./src/modules/app/tmmSdk.js","moduleName":"./src/modules/app/tmmSdk.js","type":"cjs require","userRequest":"../utils/appFunc","loc":"1:14-41"}],"source":"/**\r\n * @name appFunc\r\n * @description 工具类函数\r\n * \r\n * @author Moore Mo\r\n * @dateTime 2015-10-24T01:10:56+0800\r\n */\r\nrequire('framework7');\r\nvar httpService = require('../services/httpService');\r\n\r\nvar appFunc = {\r\n\r\n    isPhone: function(str) {\r\n        var reg = /^1[34578][0-9]{9}$/;\r\n        return reg.test(str);\r\n    },\r\n\r\n    isEmail: function(str) {\r\n        var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n        return reg.test(str);\r\n    },\r\n\r\n    isUndefine: function(str) {\r\n        return str == undefined;\r\n    },\r\n\r\n    validatePassword: function(str) {\r\n        var reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]+$/;\r\n        return reg.test(str);\r\n    },\r\n\r\n    validateVerifyCodeHash: function(value, hash) {\r\n        for (var i = value.length - 1, h = 0; i >= 0; --i) {\r\n            h += value.toLowerCase().charCodeAt(i);\r\n        }\r\n        return h == hash;\r\n    },\r\n\r\n    renderTpl: function(markup, renderData) {\r\n        var compiledTemplate = Template7.compile(markup);\r\n        return compiledTemplate(renderData);\r\n    },\r\n\r\n    getPageNameInUrl: function(url) {\r\n        url = url || '';\r\n        var arr = url.split('.');\r\n        return arr[0];\r\n    },\r\n\r\n    isObjectEmpty: function(obj) {\r\n        for (var prop in obj) {\r\n            if (obj.hasOwnProperty(prop))\r\n                return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n    isArrayEmpty: function(arr) {\r\n        var flag = true;\r\n        for (index in arr) {　　\r\n            if (!this.isObjectEmpty(arr[index])) {\r\n                flag = false;\r\n            }\r\n        }\r\n        return flag;\r\n    },\r\n\r\n    replacePhone: function(phone) {\r\n        return phone.slice(0, 3) + '****' + phone.slice(-4);\r\n    },\r\n\r\n    clearLocalUserInfo: function() {\r\n        localStorage.removeItem('TmmUserInfo');\r\n    },\r\n    setLocalUserInfo: function(userInfo) {\r\n        localStorage.setItem('TmmUserInfo', JSON.stringify(userInfo));\r\n    },\r\n    getLocalUserInfo: function() {\r\n        return localStorage.getItem('TmmUserInfo');\r\n    },\r\n    /**\r\n     * @method removeCachedPage\r\n     * @description 移除缓存中重复的页面\r\n     * \r\n     * @param    {String} parentId 父容器的id\r\n     * @param    {String} pageName 页面的名称，即data-page属性的值\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-10-27T15:47:36+0800\r\n     */\r\n    removeCachedPage: function(parentId, pageName) {\r\n        // 目前遇到的情况，暂时只需要删除一个\r\n        var cachedPage = $$('#' + parentId).find('.page[data-page=\"' + pageName + '\"]');\r\n        if (cachedPage.length) {\r\n            cachedPage[0].remove();\r\n        }\r\n    },\r\n    /**\r\n     * @method removeCachedPageNavbar\r\n     * @description 移除缓存中重复的页面的导航栏\r\n     * \r\n     * @param    {String} parentId 父容器的id\r\n     * @param    {String} navbarId 页面导航的id\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-17T15:16:15+0800\r\n     */\r\n    removeCachedPageNavbar: function(parentId, navbarId) {\r\n        // 目前遇到的情况，暂时只需要删除一个\r\n        var cachedNavbar = $$('#' + parentId).find('#' + navbarId);\r\n        if (cachedNavbar.length) {\r\n            cachedNavbar[0].remove();\r\n        }\r\n    },\r\n\r\n    hideToolbar: function() {\r\n        tmmApp.hideToolbar('.toolbar');\r\n    },\r\n\r\n    showToolbar: function() {\r\n        tmmApp.showToolbar('.toolbar');\r\n    },\r\n\r\n    hideNavbar: function() {\r\n        tmmApp.hideNavbar('.navbar');\r\n    },\r\n\r\n    showNavbar: function() {\r\n        tmmApp.showNavbar('.navbar');\r\n    },\r\n    monthNames: function() {\r\n        return ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'];\r\n    },\r\n    dayNames: function() {\r\n        return ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\r\n    },\r\n    dayNamesShort: function() {\r\n        return ['日', '一', '二', '三', '四', '五', '六'];\r\n    },\r\n    dateFormt: function(year, month, day) {\r\n        var month = parseInt(month, 10) + 1;\r\n        if (month < 10) {\r\n            month = '0' + month\r\n        }\r\n        if (day < 10) {\r\n            day = '0' + day\r\n        }\r\n        return year + '-' + month + '-' + day;\r\n    },\r\n    dateFormtDot: function(year, month, day, type) {\r\n        var month = parseInt(month, 10) + 1;\r\n        if (month < 10) {\r\n            month = '0' + month\r\n        }\r\n        if (day < 10) {\r\n            day = '0' + day\r\n        }\r\n        if (type == 1) {\r\n            return year + '.' + month + '.' + day;\r\n        } else if (type == 2) {\r\n            return '-' + month + '.' + day;\r\n        } else if (type == 3) {\r\n            return '-' + year + '.' + month + '.' + day;\r\n        }\r\n        return '';\r\n    },\r\n    hotelDay: function(arr) {\r\n        var a = new Date(arr[0]).getTime();\r\n        var b = new Date(arr[1]).getTime();\r\n        var c = 60 * 60 * 24 * 1000;\r\n        var res = (b - a) / c;\r\n        return res;\r\n    },\r\n    timeFormat: function(ms) {\r\n\r\n        ms = ms * 1000;\r\n\r\n        var d_second, d_minutes, d_hours, d_days;\r\n        var timeNow = new Date().getTime();\r\n        var d = (timeNow - ms) / 1000;\r\n        d_days = Math.round(d / (24 * 60 * 60));\r\n        d_hours = Math.round(d / (60 * 60));\r\n        d_minutes = Math.round(d / 60);\r\n        d_second = Math.round(d);\r\n        if (d_days > 0 && d_days < 2) {\r\n            return d_days + i18n.global.day_ago;\r\n        } else if (d_days <= 0 && d_hours > 0) {\r\n            return d_hours + i18n.global.hour_ago;\r\n        } else if (d_hours <= 0 && d_minutes > 0) {\r\n            return d_minutes + i18n.global.minute_ago;\r\n        } else if (d_minutes <= 0 && d_second >= 0) {\r\n            return i18n.global.just_now;\r\n        } else {\r\n            var s = new Date();\r\n            s.setTime(ms);\r\n            return (s.getFullYear() + '-' + f(s.getMonth() + 1) + '-' + f(s.getDate()) + ' ' + f(s.getHours()) + ':' + f(s.getMinutes()));\r\n        }\r\n\r\n        function f(n) {\r\n            if (n < 10)\r\n                return '0' + n;\r\n            else\r\n                return n;\r\n        }\r\n    },\r\n\r\n    getCharLength: function(str) {\r\n        var iLength = 0;\r\n        for (var i = 0; i < str.length; i++) {\r\n            if (str.charCodeAt(i) > 255) {\r\n                iLength += 2;\r\n            } else {\r\n                iLength += 1;\r\n            }\r\n        }\r\n        return iLength;\r\n    },\r\n\r\n    matchUrl: function(string) {\r\n        var reg = /((http|ftp|https):\\/\\/)?[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&;:\\/~\\+#]*[\\w\\-\\@?^=%&;\\/~\\+#])?/g;\r\n\r\n        string = string.replace(reg, function(a) {\r\n            if (a.indexOf('http') !== -1 || a.indexOf('ftp') !== -1) {\r\n                return '<a href=\\\"#\\\" onclick=\\\"event.stopPropagation();window.open(\\'' + a + '\\',\\'_blank\\')\\\">' + a + '</a>';\r\n            } else {\r\n                return '<a href=\\\"#\\\" onclick=\\\"event.stopPropagation();window.open(\\'http://' + a + '\\',\\'_blank\\')\\\">' + a + '</a>';\r\n            }\r\n        });\r\n        return string;\r\n    },\r\n\r\n    showFromError: function(obj) {\r\n        if (obj) {\r\n            for (msgName in obj) {\r\n                return obj[msgName][0];\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * 浅拷贝\r\n     * @param  {[type]} newObj [description]\r\n     * @param  {[type]} oldObj [description]\r\n     * @return {[type]}        [description]\r\n     */\r\n    extend: function() {\r\n        var prop,i,\r\n            len = arguments.length;\r\n\r\n        for (i=0; i<len-1; i++) {\r\n            for (prop in arguments[i+1]) {\r\n                arguments[0][prop] = arguments[i+1][prop];\r\n            }\r\n        }\r\n        return arguments[0];\r\n    },\r\n\r\n    // extend: function(o1,o2) {\r\n    //     for (var x in ox)\r\n    // },\r\n\r\n    /**\r\n     * 主页跳到觅鲜页面\r\n     * @return {[type]} [description]\r\n     */\r\n    goSeekFresh: function() {\r\n        var url = 'https://wap.koudaitong.com/v2/showcase/feature?alias=129wsjuci';\r\n        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n                bridge.callHandler('ObjcCallback', {\r\n                    'youzan_1': url\r\n                }, function(response) {})\r\n            });\r\n        } else if (tmmApp.device.android) {\r\n            window.jsObj.jumpActivity(url, 0);\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 详情页面跳到觅鲜页面（老版本）\r\n     */\r\n    goSeekFreshDetail: function(url) {\r\n        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n                bridge.callHandler('ObjcCallback', {\r\n                    'youzan_2': url\r\n                }, function(response) {})\r\n            });\r\n        } else if (tmmApp.device.android) {\r\n            window.jsObj.jumpActivity(url, 1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 详情页面跳到觅鲜页面（新版本）\r\n     */\r\n    goSeekFreshDetail2: function(title, description, thumb_url, webpageUrl) {\r\n        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n                bridge.callHandler('ObjcCallback', {\r\n                    \"youzan_3\": {\r\n                        \"title\": title,\r\n                        \"description\": description,\r\n                        \"thumb_url\": thumb_url,\r\n                        \"webpageUrl\": webpageUrl\r\n                    }\r\n                }, function(response) {})\r\n            });\r\n        } else if (tmmApp.device.android) {\r\n            window.jsObj.jumpActivity(webpageUrl, 2, title, thumb_url, webpageUrl, description);\r\n        }\r\n    },\r\n    /**\r\n     * @method freshLoginCallback\r\n     * @description 进入有赞中的觅鲜页面，登录成功后回调\r\n     * \r\n     * @param    {[type]}                 phone [description]\r\n     * @return   {[type]}                       [description]\r\n     * @author Moore Mo\r\n     * @datetime 2015-12-15T16:50:12+0800\r\n     */\r\n    freshLoginCallback: function(phone) {\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        'appLoginName': phone\r\n                    }, function(response) {\r\n\r\n                    })\r\n                });\r\n            } else if (tmmApp.device.android) {\r\n                // android\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 退出觅鲜页面\r\n     */\r\n    exitSeekFresh: function() {\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        'youzan_exit': ''\r\n                    }, function(response) {})\r\n                });\r\n            } else if (tmmApp.device.android) {\r\n                window.jsObj.hindJumpActivity();\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n    /**\r\n     * @method showMap\r\n     * @description 显示地址导航\r\n     * \r\n     * @param    {String}    city    城市\r\n     * @param    {String}    address 详情地址\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-11-16T14:16:17+0800\r\n     */\r\n    showMap: function(city, address, lng, lat) {\r\n\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        'navi': address\r\n                    }, function(response) {})\r\n                });\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        'navi_loc': {\r\n                            'lng': lng + '',\r\n                            'lat': lat + '',\r\n                            'address': address,\r\n                            'city': city\r\n                        }\r\n                    }, function(response) {})\r\n                });\r\n\r\n            } else if (tmmApp.device.android) { // android\r\n                window.jsObj.jumpMap(city, address);\r\n                window.jsObj.jumpMaps(lng + '', lat + '', address, city);\r\n            }\r\n        } catch (e) {}\r\n    },\r\n    /**\r\n     * 分享信息\r\n     * @param  {[type]} title       [description]\r\n     * @param  {[type]} description [description]\r\n     * @param  {[type]} thumb_url   [description]\r\n     * @param  {[type]} webpageUrl  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    shareMsg: function(title, description, thumb_url, webpageUrl) {\r\n        console.log(title, description, thumb_url, webpageUrl)\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        \"wx_share\": {\r\n                            \"title\": title,\r\n                            \"description\": description,\r\n                            \"thumb_url\": thumb_url,\r\n                            \"webpageUrl\": webpageUrl\r\n                        }\r\n                    }, function(response) {})\r\n                });\r\n            } else if (tmmApp.device.android) {\r\n                window.jsObj.showShare(title, '', description, thumb_url, webpageUrl, '', '');\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    callPhone: function(str) {\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        \"phone\": str\r\n                    }, function(response) {})\r\n                });\r\n            } else if (tmmApp.device.android) {\r\n                window.jsObj.callPhone(str);\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 申请退款\r\n     * @return {[type]} [description]\r\n     */\r\n    orderRefund: function() {\r\n        tmmApp.modal({\r\n            text: '请拨打电话：400-019-7090 申请退款',\r\n            title: '',\r\n            buttons: [{\r\n                text: '取消',\r\n                onClick: function() {}\r\n            }, {\r\n                text: '立即拨打',\r\n                bold: true,\r\n                onClick: function() {\r\n                    try {\r\n                        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                            connectWebViewJavascriptBridge(function(bridge) {\r\n                                bridge.callHandler('ObjcCallback', {\r\n                                    \"phone\": '4000197090'\r\n                                }, function(response) {})\r\n                            });\r\n                        } else if (tmmApp.device.android) {\r\n                            window.jsObj.callPhone('4000197090');\r\n                        }\r\n                    } catch (e) {\r\n\r\n                    }\r\n                }\r\n            }]\r\n        });\r\n    },\r\n    /**\r\n     * 打电话\r\n     * @return {[type]} [description]\r\n     */\r\n    activityRefund: function() {\r\n        tmmApp.modal({\r\n            text: '请拨打电话：400-019-7090 取消觅趣',\r\n            title: '',\r\n            buttons: [{\r\n                text: '取消',\r\n                onClick: function() {}\r\n            }, {\r\n                text: '立即拨打',\r\n                bold: true,\r\n                onClick: function() {\r\n                    try {\r\n                        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                            connectWebViewJavascriptBridge(function(bridge) {\r\n                                bridge.callHandler('ObjcCallback', {\r\n                                    \"phone\": '4000197090'\r\n                                }, function(response) {})\r\n                            });\r\n                        } else if (tmmApp.device.android) {\r\n                            window.jsObj.callPhone('4000197090');\r\n                        }\r\n                    } catch (e) {\r\n\r\n                    }\r\n                }\r\n            }]\r\n        });\r\n    },\r\n\r\n    dotCallService: function(phoneNum, callPhone) {\r\n        tmmApp.modal({\r\n            text: '请拨打电话：' + phoneNum,\r\n            title: '',\r\n            buttons: [{\r\n                text: '取消',\r\n                onClick: function() {}\r\n            }, {\r\n                text: '立即拨打',\r\n                bold: true,\r\n                onClick: function() {\r\n                    try {\r\n                        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                            connectWebViewJavascriptBridge(function(bridge) {\r\n                                bridge.callHandler('ObjcCallback', {\r\n                                    \"phone\": callPhone\r\n                                }, function(response) {})\r\n                            });\r\n                        } else if (tmmApp.device.android) {\r\n                            window.jsObj.callPhone(callPhone);\r\n                        }\r\n                    } catch (e) {\r\n\r\n                    }\r\n                }\r\n            }]\r\n        });\r\n    },\r\n\r\n    detailCallService: function(phoneNum, callPhone) {\r\n        tmmApp.modal({\r\n            text: '请拨打电话：' + phoneNum,\r\n            title: '',\r\n            buttons: [{\r\n                text: '取消',\r\n                onClick: function() {\r\n                    $$(\".tmm-banner-detail\").css(\"z-index\", '11000');\r\n                    $$(\".closeDeleteModal\").css(\"z-index\", '13000');\r\n                    $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n                    if ($$('body').find(\".modal-overlay\").hasClass('tmm-banner-detail-show-color')) {\r\n                        $$('body').find(\".tmm-banner-detail-show-color\").addClass('tmm-banner-detail-show');\r\n                    }\r\n                }\r\n            }, {\r\n                text: '立即拨打',\r\n                bold: true,\r\n                onClick: function() {\r\n                    try {\r\n                        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n                            connectWebViewJavascriptBridge(function(bridge) {\r\n                                bridge.callHandler('ObjcCallback', {\r\n                                    \"phone\": callPhone\r\n                                }, function(response) {})\r\n                            });\r\n                        } else if (tmmApp.device.android) {\r\n                            window.jsObj.callPhone(callPhone);\r\n                        }\r\n                    } catch (e) {\r\n\r\n                    }\r\n                    $$(\".tmm-banner-detail\").css(\"z-index\", '11000');\r\n                    $$(\".closeDeleteModal\").css(\"z-index\", '13000');\r\n                    $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n                    if ($$('body').find(\".modal-overlay\").hasClass('tmm-banner-detail-show-color')) {\r\n                        $$('body').find(\".tmm-banner-detail-show-color\").addClass('tmm-banner-detail-show');\r\n                    }\r\n                }\r\n            }]\r\n        });\r\n    },\r\n    /**\r\n     * @method closePickerModal\r\n     * @description 关闭日历控件\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-28T14:35:17+0800\r\n     */\r\n    closePickerModal: function() {\r\n        tmmApp.closeModal('.picker-modal.modal-in');\r\n    },\r\n    /**\r\n     * 显示提示消息\r\n     * @param  {[type]} title [消息值]\r\n     * @return {[type]}       [description]\r\n     */\r\n    showToast: function(title) {\r\n        return tmmApp.modal({\r\n            title: title || app.params.modalPreloaderTitle,\r\n            cssClass: 'toast-modal'\r\n        });\r\n    },\r\n    /**\r\n     * 关闭提示消息\r\n     * @return {[type]} [description]\r\n     */\r\n    hideToast: function() {\r\n        tmmApp.closeModal('.modal.modal-in');\r\n    },\r\n    /**\r\n     * @method autoToast\r\n     * @description Toast消息提示，特定的时间后自动消失\r\n     * \r\n     * @param    {String}  title         提示内容\r\n     * @param    {String}  cssClassName  指定的class\r\n     * @param    {Number}  msec          几秒后消失\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-25T17:47:52+0800\r\n     */\r\n    autoToast: function(title, cssClassName, msec) {\r\n        msec = msec || 1000;\r\n        tmmApp.modal({\r\n            title: title || app.params.modalPreloaderTitle,\r\n            cssClass: cssClassName || 'toast-modal-bottom'\r\n        });\r\n        setTimeout(function() {\r\n            tmmApp.closeModal('.modal.modal-in');\r\n        }, msec);\r\n    },\r\n    /**\r\n     * [showToast description]\r\n     * @description 显示提示消息\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-25T16:05:54+0800\r\n     */\r\n    showToastBootom: function(title) {\r\n        return tmmApp.modal({\r\n            title: title || app.params.modalPreloaderTitle,\r\n            cssClass: 'toast-modal-bottom'\r\n        });\r\n    },\r\n    /**\r\n     * @name gotoTop\r\n     * @description 回到顶部\r\n     * [gotoTop description]\r\n     * @param    {String} view 所操作的页面\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-02T11:05:21+0800\r\n     */\r\n    gotoTop: function(view) {\r\n\r\n        $$('.' + view + '-page-content').scrollTop(0, 500);\r\n    },\r\n\r\n    filterTool: function(oriArr, fn, context) {\r\n        var arr = [];\r\n        if (Array.isArray(oriArr)) {\r\n            for (var i = 0, length = oriArr.length; i < length; i++) {\r\n                fn.call(context, oriArr[i], i, oriArr) && arr.push(oriArr[i]);\r\n            }\r\n        } else {\r\n            arr = {};\r\n\r\n            for (var attr in oriArr) {\r\n                fn.call(context, oriArr[attr], attr, oriArr) && (arr[attr] = oriArr[attr]);\r\n            }\r\n        }\r\n\r\n        return arr;\r\n    },\r\n\r\n    // 获取设备的经纬度\r\n    getDeviceLocation: function(success, error) {\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n\r\n                connectWebViewJavascriptBridge(function(bridge) {\r\n                    bridge.callHandler('ObjcCallback', {\r\n                        \"getLoc\": ''\r\n                    }, function(response) {\r\n                        // alert(response.longitude + '|' + response.latitude + '|' + response.city);\r\n                        if (response === false || response === \"false\") {\r\n                            error();\r\n                        } else {\r\n                            window.device.location = {\r\n                                \"lng\": response.longitude,\r\n                                \"lat\": response.latitude,\r\n                                \"city\": response.city\r\n                            }\r\n                            success(window.device.location);\r\n                        }\r\n                    })\r\n                });\r\n            } else if (tmmApp.device.android) {\r\n                window.jsObj.getAddress();\r\n\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    toFormatNum: function(num) {\r\n        var num = (num || 0).toString(),\r\n            result = \"\";\r\n\r\n        while (num.length > 4) {\r\n            result = ' ' + num.slice(-4) + result;\r\n            num = num.slice(0, num.length - 4);\r\n        }\r\n        if (num) {\r\n            result = num + result;\r\n        }\r\n        return result;\r\n    },\r\n    /**\r\n     * @method showNumberKeyboard\r\n     * @description 调用原生数字键盘\r\n     * @param {Number} status 值为0'不可以调起键盘'或1'可以调起键盘'\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-25T18:13:38+0800\r\n     */\r\n    showNumberKeyboard: function(status) {\r\n        try {\r\n            status = parseInt(status, 10);\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n\r\n            } else if (tmmApp.device.android) { // android\r\n                window.jsObj.controlNumKeyBord(status);\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n    /**\r\n     * @method exitRemoveAllCookie\r\n     * @description 退出登录时，调用android消除cookie\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2015-12-29T15:11:17+0800\r\n     */\r\n    exitRemoveAllCookie: function() {\r\n        try {\r\n            if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n\r\n            } else if (tmmApp.device.android) {\r\n                window.jsObj.removeAllCookie();\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 虚拟键盘\r\n     * @param  {[type]} obj [description]\r\n     * @return {[type]}     [description]\r\n     */\r\n    keyboard: function(obj) {\r\n        var items = [],\r\n            oSpan,\r\n            oDiv = document.createElement('div');\r\n\r\n        oDiv.className = 'keyboard';\r\n        for (var i = 0; i < 12; i++) {\r\n            oSpan = document.createElement('span');\r\n            oSpan.index = i;\r\n            items.push(oSpan);\r\n            oSpan.className = 'keyboard-item';\r\n            oDiv.appendChild(oSpan);\r\n        };\r\n\r\n        obj.appendChild(oDiv);\r\n\r\n        setTimeout(function() {\r\n            oDiv.style.transform = 'translate3d(0, 0, 0)';\r\n            oDiv.style.webkitTransform = 'translate3d(0, 0, 0)';\r\n        }, 0);\r\n\r\n        // 获取哪个键盘按钮点击(1-12)\r\n        function getTap(fn) {\r\n            oDiv.addEventListener('click', function(e) {\r\n                fn(e.target.index + 1);\r\n            });\r\n        }\r\n\r\n        // 注销键盘\r\n        function cancel() {\r\n            oDiv.style.transform = 'translate3d(0, 100%, 0)';\r\n            oDiv.style.webkitTransform = 'translate3d(0, 100%, 0)';\r\n            setTimeout(function() {\r\n                obj.removeChild(oDiv);\r\n            }, 250);\r\n        }\r\n\r\n        return {\r\n            cancel: cancel,\r\n            getTap: getTap\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 支付方式选择\r\n     * @param  {[type]} id    订单ID\r\n     * @param  {[type]} money 订单价格\r\n     * @param  {[type]} sfn   支付宝成功回调函数\r\n     * @param  {[type]} efn   支付宝失败回调函数\r\n     * @param  {[type]} ffn   钱包成功回调函数(用来刷新页面)\r\n     * @return {[type]}       [description]\r\n     */\r\n    payOrder: function(id, money, sfn, efn, ffn) {\r\n        var mask = createEle('div', 'modal-mask'),\r\n            box = createEle('div', 'pay-order-choice'),\r\n            oTit = createEle('div', 'pay-tit'),\r\n            oTitClose = createEle('i', 'icon ticon-close'),\r\n            oTitSpan = createEle('span', '', '选择付款方式'),\r\n            oWrap = createEle('div', 'pay-wrap'),\r\n            oPayWallet = createEle('div', 'pay-item'),\r\n            oPayZhifubao = createEle('div', 'pay-item'),\r\n            oPayWeixin = createEle('div', 'pay-item'),\r\n            oPayPrice = createEle('div', 'pay-price', '支付'),\r\n            oPrice = createEle('div', 'pric-num', '￥' + money),\r\n            oBtn = createEle('div', 'zhifubao-button', '确认'),\r\n            oWxBtn = createEle('div', 'wx-button', '确认'),\r\n            passwd = '',\r\n            sendFlag = true,\r\n            isWallet = false,\r\n            keyboard = null;\r\n\r\n        oTit.appendChild(oTitClose);\r\n        oTit.appendChild(oTitSpan);\r\n        oPayPrice.appendChild(oPrice);\r\n        box.appendChild(oTit);\r\n        box.appendChild(oWrap);\r\n\r\n        oPayZhifubao.innerHTML = '<i class=\"zifubao\"></i>支付宝<i class=\"icon ticon-arrow-right\"></i>';\r\n        // 添加微信支付 by Moore Mo\r\n        oPayWeixin.innerHTML = '<i class=\"wx\"></i>微信支付<i class=\"icon ticon-arrow-right\"></i>';\r\n\r\n        tmmApp.showIndicator();\r\n        // 获取钱包余额\r\n        httpService.getBurseInfo(function(data) {\r\n            tmmApp.hideIndicator();\r\n            if (data.status == 1) {\r\n                isWallet = Number(data.data.money) > Number(money);\r\n                popupModel(data.data.money);\r\n            }\r\n        }, function(data) {\r\n\r\n        });\r\n\r\n        // 弹出模态窗口\r\n        function popupModel(balance) {\r\n            if (isWallet) {\r\n\r\n                oPayWallet.innerHTML = '<i class=\"icon ticon-qianbao\"></i>钱包（余额' + balance + '元）<i class=\"icon ticon-arrow-right\"></i>';\r\n                oPayWallet.addEventListener('click', payUseWallet);\r\n            } else {\r\n                oPayWallet.className = 'pay-item disabled';\r\n                oPayWallet.innerHTML = '<i class=\"icon ticon-qianbao\"></i>钱包（余额不足）<i class=\"icon ticon-arrow-right\"></i>'\r\n            }\r\n            oTitClose.addEventListener('click', closeModel);\r\n            oPayZhifubao.addEventListener('click', payUseZhifubao);\r\n            // 微信支付按钮绑定事件 by Moore Mo\r\n            oPayWeixin.addEventListener('click', payUseWx);\r\n\r\n            document.body.appendChild(mask);\r\n            document.body.appendChild(box);\r\n            mask.style.opacity = 1;\r\n\r\n            payUseZhifubao();\r\n        }\r\n\r\n        // 支付宝付款窗口\r\n        function payUseZhifubao() {\r\n            oTitSpan.innerHTML = '支付宝支付';\r\n            oWrap.innerHTML = '';\r\n            oWrap.appendChild(oPayPrice);\r\n            oWrap.appendChild(oPayZhifubao);\r\n            oWrap.appendChild(oBtn);\r\n\r\n\r\n            oPayZhifubao.removeEventListener('click', payUseZhifubao);\r\n            oPayZhifubao.addEventListener('click', back2Pay);\r\n            oBtn.addEventListener('click', payZhifubao);\r\n        }\r\n\r\n        // 微信支付窗口 by Moore Mo\r\n        function payUseWx() {\r\n            oTitSpan.innerHTML = '微信支付';\r\n            oWrap.innerHTML = '';\r\n            oWrap.appendChild(oPayPrice);\r\n            oWrap.appendChild(oPayWeixin);\r\n            oWrap.appendChild(oWxBtn);\r\n\r\n            oPayWeixin.removeEventListener('click', payUseWx);\r\n            oPayWeixin.addEventListener('click', back2Pay);\r\n            oWxBtn.addEventListener('click', payWx);\r\n        }\r\n\r\n        // 返回选择支付页面\r\n        function back2Pay() {\r\n            oTitSpan.innerHTML = '选择付款方式';\r\n            oWrap.innerHTML = '';\r\n            oWrap.appendChild(oPayWallet);\r\n            oWrap.appendChild(oPayZhifubao);\r\n            // 目前只有微信环境里才支持微信支付\r\n            if (appFunc.isWeixin()) {\r\n                //oWrap.appendChild(oPayWeixin);\r\n            }\r\n            if (keyboard) keyboard.cancel();\r\n            keyboard = null;\r\n            box.className = 'pay-order-choice';\r\n            if (isWallet) {\r\n                oPayWallet.removeEventListener('click', back2Pay);\r\n                oPayWallet.addEventListener('click', payUseWallet);\r\n            }\r\n            oPayZhifubao.removeEventListener('click', back2Pay);\r\n            oPayZhifubao.addEventListener('click', payUseZhifubao);\r\n            // 微信支付绑定事件 by Moore Mo\r\n            oPayWeixin.removeEventListener('click', back2Pay);\r\n            oPayWeixin.addEventListener('click', payUseWx);\r\n        }\r\n\r\n        // 关闭模态窗口\r\n        function closeModel() {\r\n            document.body.removeChild(box);\r\n            mask.style.opacity = 0;\r\n            setTimeout(function() {\r\n                document.body.removeChild(mask);\r\n            }, 400);\r\n            if (keyboard) keyboard.cancel();\r\n            keyboard = null;\r\n        }\r\n\r\n        // 支付宝支付窗口\r\n        function payZhifubao() {\r\n            var token = {\r\n                \"id\": id,\r\n                \"pay_type\": \"1\"\r\n            }\r\n\r\n            httpService.orderPay(token, sfn, efn);\r\n            closeModel();\r\n        }\r\n\r\n        // 发送微信支付请示 by Moore Mo\r\n        function payWx() {\r\n            var token = {\r\n                \"id\": id,\r\n                \"pay_type\": \"2\"\r\n            }\r\n\r\n            httpService.orderPay(token, sfn, efn);\r\n            closeModel();\r\n        }\r\n\r\n        // 钱包支付窗口\r\n        function payUseWallet() {\r\n\r\n            var oPasswd = createEle('div', 'passwd-wrap'),\r\n                oPayItem,\r\n                aPayItems = [],\r\n                i = 0;\r\n            passwd = '';\r\n            oTitSpan.innerHTML = '请输入支付密码';\r\n\r\n\r\n            oPayWallet.removeEventListener('click', payUseWallet);\r\n            oPayWallet.addEventListener('click', back2Pay);\r\n\r\n            oPrice.innerHTML = '￥' + money;\r\n            for (; i < 6; i++) {\r\n                oPayItem = createEle('div', 'passwd-item');\r\n                oPayItem.index = i;\r\n                aPayItems.push(oPayItem)\r\n                oPasswd.appendChild(oPayItem);\r\n            }\r\n\r\n            oPayPrice.appendChild(oPrice);\r\n            oWrap.innerHTML = '';\r\n            oWrap.appendChild(oPayPrice);\r\n            oWrap.appendChild(oPayWallet);\r\n            oWrap.appendChild(oPasswd);\r\n            box.className = 'pay-order-choice pay-wallet';\r\n\r\n            keyboard = appFunc.keyboard(document.body);\r\n            keyboard.getTap(function(index) {\r\n                passwd2box(index, aPayItems);\r\n            })\r\n        }\r\n\r\n        // 展示密码到窗口\r\n        function passwd2box(index, items) {\r\n            if (passwd.length < 6) {\r\n                if (index == 11) {\r\n                    passwd += 0;\r\n                } else if (index == 12) {\r\n\r\n                    passwd = passwd.substr(0, passwd.length - 1);\r\n\r\n                } else if (index == 10) {\r\n\r\n                } else {\r\n                    passwd += index;\r\n                }\r\n\r\n                for (var i = 0; i < items.length; i++) {\r\n                    if (i < passwd.length) {\r\n                        items[i].className = 'passwd-item input';\r\n                    } else {\r\n                        items[i].className = 'passwd-item';\r\n                    }\r\n                };\r\n\r\n            } else {\r\n                if (index == 12) {\r\n                    passwd = passwd.substr(0, passwd.length - 1);\r\n                    for (var i = 0; i < items.length; i++) {\r\n                        if (i < passwd.length) {\r\n                            items[i].className = 'passwd-item input';\r\n                        } else {\r\n                            items[i].className = 'passwd-item';\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            if (passwd.length == 6) {\r\n                if (sendFlag) {\r\n                    sendPasswd(passwd, items);\r\n                    sendFlag = false;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n        // 创建元素\r\n        function createEle(tag, name, txt) {\r\n            var ele = document.createElement(tag);\r\n            if (name) ele.className = name;\r\n            if (txt) ele.innerHTML = txt;\r\n            return ele;\r\n        }\r\n\r\n        // 发送支付密码\r\n        function sendPasswd(pass, items) {\r\n\r\n            tmmApp.showIndicator();\r\n            var token = {\r\n                \"Password\": {\r\n                    \"_pwd\": pass\r\n                }\r\n            }\r\n\r\n            httpService.sendPayPasswd(token, id, function(data) {\r\n                tmmApp.hideIndicator();\r\n                var msg = '';\r\n\r\n                if (data.status == 1) {\r\n                    if (data.data.value == 1) {\r\n                        if (data.data.status.value == 1) {\r\n                            // 支付成功\r\n                            msg = data.data.status.info;\r\n                            tmmApp.alert(msg, function() {\r\n                                closeModel()\r\n                                if (ffn) ffn(data);\r\n                            });\r\n\r\n                            return;\r\n                        } else {\r\n                            msg = data.data.status.info;\r\n                        }\r\n                    } else {\r\n                        msg = data.data.name;\r\n                    }\r\n                } else {\r\n                    msg = '支付失败';\r\n                }\r\n                passwd = '';\r\n                passwd2box(10, items);\r\n                tmmApp.alert(msg);\r\n                sendFlag = true;\r\n            }, function(data) {\r\n                tmmApp.hideIndicator();\r\n                tmmApp.alert('网络错误');\r\n                sendFlag = true;\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 固定div高度\r\n     * @param  {[type]} ele    元素对象\r\n     * @param  {[type]} h 元素锁定高度\r\n     * @return {[type]}        如果超出返回真实高度，没有返回0\r\n     */\r\n    lockHeight: function(ele, h) {\r\n        ele.style.height = 'auto';\r\n        var height = parseInt(window.getComputedStyle(ele).height);\r\n\r\n        if (height > h) {\r\n            ele.style.height = h + 'px';\r\n            return height;\r\n        } else {\r\n            return 0;\r\n        }\r\n\r\n    },\r\n    /**\r\n     * 转换高度\r\n     * @param  {[type]} ele  元素\r\n     * @return {[type]}      [description]\r\n     */\r\n    transitionHeight: function(ele, h) {\r\n        var height = window.getComputedStyle(ele).height;\r\n        if (h) {\r\n            ele.style.height = h;\r\n        } else {\r\n            ele.style.height = \"auto\";\r\n        }\r\n    },\r\n    /**\r\n     * @method isWeixin\r\n     * @description 判断是否是微信环境\r\n     * \r\n     * @return   {Boolean}\r\n     * \r\n     * @author Moore Mo\r\n     * @datetime 2016-02-24T15:03:32+0800\r\n     */\r\n    isWeixin: function() {\r\n        var ua = navigator.userAgent.toLowerCase();\r\n        if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    mergeLineDay: function(list) {\r\n        var result = {},\r\n            dayArray = ['第一天','第二天','第三天','第四天','第五天','第六天','第七天','第八天','第九天','第十天'],\r\n            tmpNum, x;\r\n         \r\n        for (x in list) {\r\n\r\n            tmpNum = Math.ceil((x*1+1) / 2);\r\n\r\n            if (tmpNum in result) {\r\n                result[tmpNum].dot_list = result[tmpNum].dot_list.concat(list[x].dot_list);\r\n            } else {\r\n                result[tmpNum] = list[x];\r\n            }\r\n            result[tmpNum].descript_day = dayArray[tmpNum - 1];\r\n\r\n        }\r\n\r\n        return result;\r\n        \r\n    },\r\n\r\n    mergeLineOrder: function(obj) {\r\n        var result = {},\r\n            dayArray = ['第一天','第二天','第三天','第四天','第五天','第六天','第七天','第八天','第九天','第十天'],\r\n            tmpNum, x;\r\n\r\n        for (x in obj) {\r\n\r\n            tmpNum = Math.ceil((x*1+1) / 2);\r\n\r\n            if (tmpNum in result) {\r\n                result[tmpNum].dot_list = result[tmpNum].dot_list.concat(obj[x].dot_list);\r\n            } else {\r\n                result[tmpNum] = obj[x];\r\n            }\r\n            result[tmpNum].descript_day = dayArray[tmpNum - 1];\r\n\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    \r\n\r\n    bindEvents: function(bindings) {\r\n        for (var i in bindings) {\r\n            if (bindings[i].selector) {\r\n                $$(bindings[i].element)\r\n                    .off(bindings[i].event, bindings[i].selector, bindings[i].handler);\r\n                $$(bindings[i].element)\r\n                    .on(bindings[i].event, bindings[i].selector, bindings[i].handler);\r\n            } else {\r\n                $$(bindings[i].element)\r\n                    .off(bindings[i].event, bindings[i].handler);\r\n                $$(bindings[i].element)\r\n                    .on(bindings[i].event, bindings[i].handler);\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = appFunc;\r\n"},{"id":22,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\services\\httpService.js","name":"./src/modules/services/httpService.js","index":22,"index2":20,"size":78223,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\appFunc.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":21,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\appFunc.js","module":"./src/modules/utils/appFunc.js","moduleName":"./src/modules/utils/appFunc.js","type":"cjs require","userRequest":"../services/httpService","loc":"9:18-52"},{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":30,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","module":"./src/modules/item/item.js","moduleName":"./src/modules/item/item.js","type":"cjs require","userRequest":"../services/httpService","loc":"8:18-52"},{"moduleId":37,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\role\\role.js","module":"./src/modules/role/role.js","moduleName":"./src/modules/role/role.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":40,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","module":"./src/modules/accLogin/accLogin.js","moduleName":"./src/modules/accLogin/accLogin.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":42,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","module":"./src/modules/mobLogin/mobLogin.js","moduleName":"./src/modules/mobLogin/mobLogin.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":53,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","module":"./src/modules/shop/addRetinueShop.js","moduleName":"./src/modules/shop/addRetinueShop.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"../services/httpService","loc":"8:18-52"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":64,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","module":"./src/modules/shop/dotManage.js","moduleName":"./src/modules/shop/dotManage.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"../services/httpService","loc":"8:18-52"},{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":88,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","module":"./src/modules/search/seekSearch.js","moduleName":"./src/modules/search/seekSearch.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../services/httpService","loc":"4:16-50"},{"moduleId":104,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","module":"./src/modules/modifyPhone/modifyPhone.js","moduleName":"./src/modules/modifyPhone/modifyPhone.js","type":"cjs require","userRequest":"../services/httpService","loc":"3:16-50"},{"moduleId":106,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","module":"./src/modules/myInfo/addRetinue.js","moduleName":"./src/modules/myInfo/addRetinue.js","type":"cjs require","userRequest":"../services/httpService","loc":"4:16-50"},{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"../services/httpService","loc":"4:16-50"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../services/httpService","loc":"8:18-52"},{"moduleId":111,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","module":"./src/modules/createAct/activityView.js","moduleName":"./src/modules/createAct/activityView.js","type":"cjs require","userRequest":"../services/httpService","loc":"2:16-50"},{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"../services/httpService","loc":"6:16-50"},{"moduleId":127,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\ViewController.js","module":"./src/modules/app/ViewController.js","moduleName":"./src/modules/app/ViewController.js","type":"cjs require","userRequest":"../services/httpService","loc":"2:16-50"},{"moduleId":129,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","module":"./src/modules/createAct/participantCtrl.js","moduleName":"./src/modules/createAct/participantCtrl.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"../services/httpService","loc":"10:16-50"},{"moduleId":145,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","module":"./src/modules/my/payPasswd.js","moduleName":"./src/modules/my/payPasswd.js","type":"cjs require","userRequest":"../services/httpService","loc":"2:16-50"},{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"../services/httpService","loc":"10:16-50"},{"moduleId":158,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seekFresh\\seekFresh.js","module":"./src/modules/seekFresh/seekFresh.js","moduleName":"./src/modules/seekFresh/seekFresh.js","type":"cjs require","userRequest":"../services/httpService","loc":"1:18-52"},{"moduleId":159,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\device.js","module":"./src/modules/app/device.js","moduleName":"./src/modules/app/device.js","type":"cjs require","userRequest":"../services/httpService","loc":"2:18-52"},{"moduleId":160,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\tmmSdk.js","module":"./src/modules/app/tmmSdk.js","moduleName":"./src/modules/app/tmmSdk.js","type":"cjs require","userRequest":"../services/httpService","loc":"2:16-50"}],"source":"/**\r\n * @name httpService\r\n * @description 封装相关api请求的服务函数模块\r\n *\r\n * @author Moore Mo\r\n * @datetime 2015-10-24T01:15:42+0800\r\n */\r\nrequire('framework7');\r\nvar log = require('../utils/log');\r\n/**\r\n * 远程接口地址\r\n * @type {String}\r\n */\r\n// 测试服上\r\n // var apiServerHost = 'http://test2.365tmm.net';\r\n// var apiServerHost = 'http://localhost/tmm';\r\n// var apiServerHost = 'http://172.16.1.158/tm';\r\n// 正式服上\r\nvar apiServerHost = 'https://m.365tmm.com';\r\n\r\nvar httpService = {\r\n  apiUrl: apiServerHost,\r\n  apiLineListIndex : apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=thrand&page=1&is_area=is_area',\r\n  apiLineList: apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=thrand&page=1',\r\n\r\n  apiPopularityList: apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=thrand&page=1&order_brow=order_brow&is_area=is_area',\r\n  apiDistanceLineList: apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=thrand&is_area=is_area',\r\n\r\n  apiJoinActAA: apiServerHost + '/index.php?r=api/order/index&type=actives_tour',\r\n  apiJoinActA: apiServerHost + '/index.php?r=api/attend/index',\r\n\r\n  apiSubmitOrderForA: apiServerHost + '/index.php?r=api/attend/order',\r\n  apiUpdateMainName: apiServerHost+ '/index.php?r=api/attend/name', // 觅趣订单修改主要联系人名字\r\n\r\n  apiIndexPage: apiServerHost + '/index.php?r=api/shops/selected',\r\n\r\n  apiAcclogin: apiServerHost + '/index.php?r=api/login/index',\r\n  get: function(link,successCb,errorCb){\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: link,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  post: function(link, data, successCb, errorConfirm) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      data = JSON.stringify(data);\r\n      \r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: link,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          log.info('post---', dataRes);\r\n          dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('post---', dataRes);\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: link + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @method verifycode\r\n   * @description 获取验证码接口\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：scrf 表单检验码 dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:17:15+0800\r\n   */\r\n  verifycode: function(successCb, errorCb) {\r\n    // 获取成功后回调\r\n    var callback = function(dataRes, statusCode) {\r\n      var scrf = dataRes.data.csrf.TMM_CSRF;\r\n      // 再次请求，获取图片验证码的链接\r\n      $$.ajax({\r\n        method: 'GET',\r\n        url: apiServerHost + dataRes.data.verifyCode,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          \r\n          var dataRes = JSON.parse(dataRes);\r\n          \r\n          log.info('verifycode---callback---', dataRes);\r\n\r\n          successCb(scrf, dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('verifycode---callback---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n    // 请求拿取验证码连接\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/login/index' + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        console.log(dataRes)\r\n        log.info('verifycode---', dataRes);\r\n\r\n        if (dataRes.status == 1) {\r\n          // 成功后，回调获取图片验证码的链接\r\n          callback(dataRes, statusCode);\r\n        } else {\r\n          //errorCb(dataRes, statusCode);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('verifycode---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  verifycodeSms: function(successCb, errorCb) {\r\n    // 获取成功后回调\r\n    var callback = function(dataRes, statusCode) {\r\n      var scrf = dataRes.data.csrf.TMM_CSRF;\r\n      // 再次请求，获取图片验证码的链接\r\n      $$.ajax({\r\n        method: 'GET',\r\n        url: apiServerHost + dataRes.data.verifyCode,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          \r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('verifycode---callback---', dataRes);\r\n\r\n          successCb(scrf, dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('verifycode---callback---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n    // 请求拿取验证码连接\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/login/captcha_sms' + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        console.log(dataRes)\r\n        log.info('verifycode---', dataRes);\r\n\r\n        if (dataRes.status == 1) {\r\n          // 成功后，回调获取图片验证码的链接\r\n          callback(dataRes, statusCode);\r\n        } else {\r\n          //errorCb(dataRes, statusCode);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('verifycode---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method login\r\n   * @description 登录接口\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:22:07+0800\r\n   */\r\n  login: function(data, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'POST',\r\n      url: apiServerHost + '/index.php?r=api/login/index',\r\n      data: data,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('login---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('login---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method logout\r\n   * @description 退出登录接口\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:24:27+0800\r\n   */\r\n  logout: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/login/out',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('logout---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('logout---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method login_captcha_sms\r\n   * @description 登录时，获取手机短信验证码接口\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:24:42+0800\r\n   */\r\n  api_login_captcha_sms: apiServerHost + '/index.php?r=api/login/captcha_sms',\r\n  login_captcha_sms: function(data, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'POST',\r\n      url: apiServerHost + '/index.php?r=api/login/captcha_sms',\r\n      data: data,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('login_captcha_sms---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('login_captcha_sms---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method login_sms\r\n   * @description 手机短信登录接口\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:26:12+0800\r\n   */\r\n  api_login_sms: apiServerHost + '/index.php?r=api/login/login_sms',\r\n  login_sms: function(data, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'POST',\r\n      url: apiServerHost + '/index.php?r=api/login/login_sms',\r\n      data: data,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('login_sms---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('login_sms---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getUserInfo\r\n   * @description 获取用户信息\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T11:13:48+0800\r\n   */\r\n  getUserInfo: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/user/view',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getUserInfo---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getBurseInfo\r\n   * @description 获取我的钱包\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:10:02+0800\r\n   */\r\n  getBurseInfo: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/account/my_burse',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getBurseInfo---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getBurseInfo---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method updateUserInfo\r\n   * @description 更新用户信息（昵称，性别）\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T17:30:08+0800\r\n   */\r\n  updateUserInfo: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      log.info(\"nihao\", data);\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/user/update',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('updateUserInfo---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('updateUserInfo---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/user/update&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('updateUserInfo---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getCashInfo\r\n   * @description 获取提现申请记录\r\n   *\r\n   * @param    {String}   url 请求的链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:13:13+0800\r\n   */\r\n  getCashInfo: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/cash/index&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getCashInfo---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getCashInfo---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method cashVerifyPrice\r\n   * @description 用户提现时判断是否金额正确\r\n   *\r\n   * @param    {Object}   data      提交的数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:17:08+0800\r\n   */\r\n  cashVerifyPrice: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/Cash/cash_verify_price',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('cashVerifyPrice---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('cashVerifyPrice---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/Cash/cash_verify_price&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('cashVerifyPrice---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n\r\n  },\r\n  /**\r\n   * @method cashBefore\r\n   * @description 用户提现时判断是否有未处理的提现申请\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:17:08+0800\r\n   */\r\n  cashBefore: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/cash/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('cashBefore---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('cashBefore---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method captchaCash\r\n   * @description 用户提现，获取短信验证码\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:21:30+0800\r\n   */\r\n  captchaCash: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/cash/captcha_cash',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('captchaCash---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('captchaCash---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method createCash\r\n   * @description 用户提现\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-06T15:19:49+0800\r\n   */\r\n  createCash: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/cash/create',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('createCash---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('createCash---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/cash/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('createCash---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n\r\n\r\n  },\r\n  /**\r\n   * @method getBankList\r\n   * @description 获取银行信息列表\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:11:15+0800\r\n   */\r\n  getBankList: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/bank_index',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getBankList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getBankList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method captchaBankCardSms\r\n   * @description 用户绑定银行账户，获取短信验证码\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:14:48+0800\r\n   */\r\n  captchaBankCardSms: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/user/captcha_bank_sms',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('captchaBankCardSms---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('captchaBankCardSms---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method createBankCard\r\n   * @description 用户绑定银行帐户和更换银行帐户\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:17:55+0800\r\n   */\r\n  createBankCard: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/bankCard/create',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('createBankCard---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('createBankCard---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('createBankCard---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method createBankCard\r\n   * @description 用户绑定银行账户，验证短信验证码\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2016-01-04T16:18:08+0800\r\n   */\r\n  bankcardSms: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/bankCard/bankcard_sms',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('bankcardSms---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('bankcardSms---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/bankcard_sms&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('bankcardSms---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method updateBankCard\r\n   * @description 用户更新绑定的银行账户\r\n   *\r\n   * @param    {Integer}  id   银行卡id\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:21:28+0800\r\n   */\r\n  updateBankCard: function(id, data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/bankCard/update&id=' + id,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('updateBankCard---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('updateBankCard---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/update&csrf=csrf&id=' + id,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('updateBankCard---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method bankCardView\r\n   * @description 查看绑定的银行卡\r\n   *\r\n   * @param    {Integer}  id         银行卡id\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:26:33+0800\r\n   */\r\n  bankCardView: function(id, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/view&id' + id,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('bankCardView---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('bankCardView---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method bankCardList\r\n   * @description 查看绑定的银行卡列表\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:26:33+0800\r\n   */\r\n  bankCardList: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/bankCard/view_list',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('bankCardList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('bankCardList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method accountLogList\r\n   * @description 交易记录列表\r\n   * @param    {String}   url       分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-21T14:07:02+0800\r\n   */\r\n  accountLogList: function(url, successCb, errorCb) {\r\n    url = url || apiServerHost + '/index.php?r=api/accountLog/index&page=1'\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('accountLogList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('accountLogList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getRecommendList\r\n   * @description 获取收入列表接口\r\n   *\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:27:39+0800\r\n   */\r\n  getRecommendList: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/shops/selected',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getRecommendList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getRecommendList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getRecommendListToPage\r\n   * @description 获取收入列表接口（根据分页链接）\r\n   *\r\n   * @param    String} url 分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:27:39+0800\r\n   */\r\n  getRecommendListToPage: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/selected&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getRecommendListToPage---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getRecommendListToPage---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getOrderDetail\r\n   * @description 获取订单的详情\r\n   * @param    String} url 点的请求链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T14:48:52+0800\r\n   */\r\n  getOrderDetail: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getOrderDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getOrderDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getOrderList\r\n   * @description 获取订单列表接口\r\n   * @param    {Functoin} type      选择全部 0, 觅镜 1， 觅趣 2\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T17:31:38+0800\r\n   */\r\n  getOrderList: function(type, successCb, errorCb) {\r\n    if (type == 0) {\r\n      type = '';\r\n    } else if (type == 1) {\r\n      type = '&type=order_dot_thrand';\r\n    } else if (type == 2) {\r\n      type = '&type=order_tour';\r\n    } else {\r\n      return;\r\n    }\r\n    url = apiServerHost + '/index.php?r=api/order/index' + type;\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getOrderList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getOrderList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 获取觅趣列表接口\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  getOrderActList: function(url, successCb, errorCb) {\r\n    url = url || apiServerHost + '/index.php?r=api/order/index&type=actives_tour';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getOrderActList---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getOrderActList---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @method getOrderListToPage\r\n   * @description 获取订单列表接口（根据分页链接）\r\n   *\r\n   * @param    String} url 分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T17:32:38+0800\r\n   */\r\n  getOrderListToPage: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/order/index&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getOrderListToPage---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getOrderListToPage---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getDotDetail\r\n   * @description 获取点的详情\r\n   *\r\n   * @param    String} url 点的请求链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-26T20:10:17+0800\r\n   */\r\n  getDotDetail: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getDotDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getDotDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getLineDetail\r\n   * @description 获取线的详情\r\n   *\r\n   * @param    String} url 线的请求链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-26T20:10:17+0800\r\n   */\r\n  getLineDetail: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getLineDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getLineDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getActDetail\r\n   * @description 获取觅趣的详情\r\n   *\r\n   * @param    String} url 觅趣的请求链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-26T20:10:17+0800\r\n   */\r\n  getActDetail: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getActDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getActDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取探索页面详情\r\n   * @param  {[type]} url       [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   *\r\n   * @author daixi\r\n   */\r\n  apiSeekList: apiServerHost + '/index.php?r=api/shops/index',\r\n  getSeekList: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/index';\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getSeekList---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getSeekList---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n\r\n  },\r\n  /**\r\n   * @method getItemDetail\r\n   * @description 获取项目的详情\r\n   *\r\n   * @param    String} url 项目的请求链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T16:52:01+0800\r\n   */\r\n  getItemDetail: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getItemDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getItemDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method shopCollect\r\n   * @description 商品点赞\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T17:30:08+0800\r\n   */\r\n  shopCollect: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/shops/collect',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('shopCollect---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('shopCollect---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/shops/collect&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('shopCollect---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @description 获取“我的赞”的列表\r\n   */\r\n  getMyPraiseList: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/shops/praise',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getMyPraiseList---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getMyPraiseList---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  getMyPraiseListToPage: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/praise&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('getMyPraiseListToPage---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getMyPraiseListToPage---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  getSeekSearchList: function(type, typeValue, url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/index&' + type + '=' + typeValue;\r\n    log.info(\"路径路径\", url);\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getMySeekSeachToPage---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * [pwd_captcha_sms 修改密码获取短信接口]\r\n   * @param  {[type]} data      [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  pwd_captcha_sms: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf.data.csrf.TMM_CSRF;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/user/captcha_pwd_sms',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('pwd_captcha_sms---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('pwd_captcha_sms---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n    // 请求拿取验证码连接\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=/api/user/pwd' + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('verifycode---', dataRes);\r\n\r\n        if (dataRes.status == 1) {\r\n          // 成功后，回调获取图片验证码的链接\r\n          callback(dataRes, statusCode);\r\n        } else {\r\n          //errorCb(dataRes, statusCode);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('verifycode---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * [updatePwd 修改密码接口]\r\n   * @param  {[type]} data      [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  updatePwd: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf.data.csrf.TMM_CSRF;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/user/pwd',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('pwd_captcha_sms---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('pwd_captcha_sms---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n    // 请求拿取验证码连接\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=/api/user/pwd' + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        log.info('verifycode---', dataRes);\r\n\r\n        if (dataRes.status == 1) {\r\n          // 成功后，回调获取图片验证码的链接\r\n          callback(dataRes, statusCode);\r\n        } else {\r\n          //errorCb(dataRes, statusCode);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('verifycode---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n\r\n\r\n\r\n  },\r\n\r\n  /**\r\n   * 修改手机号模块 获取手机号验证码\r\n   * @param  {[type]} data      发送的数据\r\n   * @param  {[type]} type      判断是新号还是老号\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   *\r\n   * @author daixi\r\n   */\r\n  getModifyPhoneCode: function(data, type, successCb, errorCb) {\r\n    var url = '';\r\n    var scrfUrl = '';\r\n    if (type == 'old') {\r\n      url = apiServerHost + '/index.php?r=api/user/captcha_old_sms';\r\n      scrfUrl = apiServerHost + '/index.php?r=api/user/phone_old&csrf=csrf';\r\n    } else if (type == 'new') {\r\n      url = apiServerHost + '/index.php?r=api/user/captcha_new_sms';\r\n      scrfUrl = apiServerHost + '/index.php?r=api/user/phone_new&csrf=csrf';\r\n    }\r\n\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('getModifyPhoneCode---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('getModifyPhoneCode---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: scrfUrl,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 修改手机号模块 提交修改手机号\r\n   * @param  {[type]} data      发送的数据\r\n   * @param  {[type]} type      [判断是新号还是老号]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  updateModifyPhone: function(data, type, successCb, errorCb) {\r\n    var url = '';\r\n    var scrfUrl = '';\r\n    if (type == 'old') {\r\n      url = apiServerHost + '/index.php?r=api/user/phone_old';\r\n      scrfUrl = apiServerHost + '/index.php?r=api/user/phone_old&csrf=csrf'\r\n    } else if (type == 'new') {\r\n      url = apiServerHost + '/index.php?r=api/user/phone_new';\r\n      scrfUrl = apiServerHost + '/index.php?r=api/user/phone_new&csrf=csrf'\r\n    }\r\n\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n          log.info('updateModifyPhone---', dataRes);\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('updateModifyPhone---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: scrfUrl,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n\r\n  },\r\n  /**\r\n   * @method orderCancle\r\n   * @description 取消订单\r\n   *\r\n   * @param    {Int}   id 订单id\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T18:38:18+0800\r\n   */\r\n  orderCancle: function(id, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/order/cancel&id=' + id,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('orderCancle---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderCancle---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 代付 取消报名\r\n   * @param  {[type]} value     [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  cancelActEnterA: function(value, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/attend/delete&id=' + value,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('cancelActEnterA---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.info('cancelActEnterA---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method orderPay\r\n   * @description 订单支付\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T18:42:44+0800\r\n   */\r\n  orderPay: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/order/payment',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('orderPay---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('orderPay---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/order/payment&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderPay---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 钱包支付\r\n   * @param  {[type]} data      [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  orderPayByWallet: function(data, id, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/callback/account&id='+id,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('orderPay---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('orderPay---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/callback/account&'+id+'&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderPay---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取随行人员或者主要联系人信息\r\n   * @param  {[type]} url       api连接\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  getRetinue: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 提交修改随行人员或主要联系人信息\r\n   * @param  {[type]} url       api连接\r\n   * @param  {[type]} data      数据\r\n   * @param  {[type]} type      1 修改随行人员; 2 添加随行人员; 3 修改主要联系人; 4 添加主要联系人\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  updateRetinue: function(url, data, type, successCb, errorCb) {\r\n    var urlApi = '';\r\n    if (type == 1 || type == 3) {\r\n      urlApi = url;\r\n    } else if (type == 2) {\r\n      urlApi = apiServerHost + '/index.php?r=api/retinue/create&type=0';\r\n    } else if (type == 4) {\r\n      urlApi = apiServerHost + '/index.php?r=api/retinue/create&type=1';\r\n    }\r\n\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: urlApi,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n          log.info('updateRetinue---', dataRes);\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('updateRetinue---', dataRes);\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/retinue/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n  /**\r\n   * 删除随行人员或者主要联系人\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  deleteRetinue: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method orderCreate\r\n   * @description 创建订单\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-29T17:27:01+0800\r\n   */\r\n  orderCreate: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      data = JSON.stringify(data);\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/order/create',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n\r\n          var dataRes = JSON.parse(dataRes);\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/order/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderCreate---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @getFareOrder\r\n   * @description  获点，线，觅趣的订单信息\r\n   *\r\n   * @param    {Int}   id 点id\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-29T17:29:14+0800\r\n   */\r\n  getFareOrder: function(id, successCb, errorCb) {\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/order/fare&id=' + id,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getFareDot---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getFareDot---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   *\r\n   */\r\n  getQrCode: function(link, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: link,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method actCreate\r\n   * @description 创建觅趣\r\n   *\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-09T11:03:30+0800\r\n   */\r\n  actCreate: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n      data = JSON.stringify(data);\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/actives/create',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/actives/create&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderCreate---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @method actUpdate\r\n   * @description 编辑觅趣\r\n   *\r\n   * @param    {Int}      id   觅趣id\r\n   * @param    {Object}   data 要发送的表单数据\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-09T11:03:30+0800\r\n   */\r\n  actUpdate: function(id, data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n      data = JSON.stringify(data);\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/actives/update&id=' + id,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/actives/update&csrf=csrf&id=' + id,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('orderCreate---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getOrderActivesList\r\n   * @description 我发起的觅趣列表\r\n   *\r\n   * @param    {String}   url       分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-09T11:24:10+0800\r\n   */\r\n  getOrderActivesList: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/orderActives/index&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getOrderActivesList---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getOrderActivesList---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  getActStateDetail: function(url, successCb, errorCb) {\r\n    //log.info(\"测试状态路径\", url);\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n        //log.info('getActStateDetail---', dataRes);\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getActStateDetail---', dataRes);\r\n\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  setActityGoTime: function(goTimeLink, data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      log.info(\"nihao\", goTimeLink);\r\n      $$.ajax({\r\n        method: 'POST',\r\n        //url: apiServerHost + '/index.php?r=api/orderActives/gotime&id=' + goTimeValue,\r\n        url: goTimeLink,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('setActityGoTime---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('setActityGoTime---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/orderActives/gotime&csrf=csrf&id=' + goTimeLink,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('setActityGoTime---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  ActivityEnrollInfoList: function(url, successCb, errorCb) {\r\n    url = url;\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n\r\n\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getLineList\r\n   * @description 获取线的列表\r\n   *\r\n   * @param    {String}   url       分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-09T15:33:59+0800\r\n   */\r\n  getLineList: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=thrand&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getLineList---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getLineList---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * @method getDotList\r\n   * @description 获取线的列表\r\n   *\r\n   * @param    {String}   url       分页链接\r\n   * @param    {Functoin} successCb 成功后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @param    {Functoin} errorCb   失败后的回调函数\r\n   * 参数为：dataRes 响应回来的数据 statusCode 状态码\r\n   *\r\n   * @author Moore Mo\r\n   * @datetime 2015-11-09T15:33:59+0800\r\n   */\r\n  getDotList: function(url, successCb, errorCb) {\r\n    var url = url || apiServerHost + '/index.php?r=api/shops/index&select_dot_thrand=dot&page=1';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('getDotList---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('getDotList---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  tourConfirm: function(value, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/order/confirm&id=' + value,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        log.info('tourConfirm---', dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.info('errorConfirm---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  // 获取地区列表数据\r\n  getAreaList: function(successCb, errorCb) {\r\n    var url = apiServerHost + '/index.php?r=api/area/index';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  // 获取本地定位数据\r\n  getLocationCity: function(successCb, errorCb) {\r\n    var url = apiServerHost + '/index.php?r=api/area/get';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  // 切换城市\r\n  setSelectCity: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  // 提交GPS定位城市\r\n  setGPSCity: function(data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      log.info('setGPSCity----------', data);\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + '/index.php?r=api/area/gps',\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          errorCb(dataRes);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/area/gps&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 查看支付密码相关信息\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  getPayPasswd: function(successCb, errorCb) {\r\n    var url = apiServerHost + '/index.php?r=api/password/view';\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 获取修改支付密码短信验证码\r\n   * @param  {[type]} url       [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  getPhoneCode: function(url, successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url,\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 提交支付密码\r\n   * @param  {[type]} url       [description]\r\n   * @param  {[type]} data      [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  updatePayPasswd: function(url, data, successCb, errorCb) {\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('setActityGoTime---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 判断是否需要短信验证\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  getIsvalidate: function(successCb, errorCb) {\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + '/index.php?r=api/password/isvalidate&type=0',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        successCb(dataRes, statusCode);\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  sendPayPasswd: function(data, id, successCb, errorCb) {\r\n\r\n    var url =apiServerHost + '/index.php?r=api/callback/account&id=' + id;\r\n\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n  /**\r\n   * 编辑觅趣觅趣字段信息\r\n   * @param  {[type]} data      [description]\r\n   * @param  {[type]} successCb [description]\r\n   * @param  {[type]} errorCb   [description]\r\n   * @return {[type]}           [description]\r\n   */\r\n  editActInfo: function(editUrl, data, id, successCb, errorCb) {\r\n    \r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: apiServerHost + editUrl + id,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          log.info('editActInfo---', dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          log.error('editActInfo---', dataRes);\r\n\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: apiServerHost + editUrl + id +'&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        log.error('editActInfo---', dataRes);\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        log.error('editActInfo---', dataRes);\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n  sendPaymentForA: function(data, id, successCb, errorCb) {\r\n\r\n    var url =apiServerHost + '/index.php?r=api/attend/create&id=' + id;\r\n\r\n    var callback = function(csrf) {\r\n      data.TMM_CSRF = csrf;\r\n      data = JSON.stringify(data);\r\n      \r\n      $$.ajax({\r\n        method: 'POST',\r\n        url: url,\r\n        data: data,\r\n        xhrFields: {\r\n          withCredentials: true\r\n        },\r\n        success: function(dataRes, statusCode) {\r\n          var dataRes = JSON.parse(dataRes);\r\n\r\n          successCb(dataRes, statusCode);\r\n        },\r\n        error: function(dataRes, statusCode) {\r\n          errorCb(dataRes, statusCode);\r\n        }\r\n      });\r\n    };\r\n\r\n    $$.ajax({\r\n      method: 'GET',\r\n      url: url + '&csrf=csrf',\r\n      xhrFields: {\r\n        withCredentials: true\r\n      },\r\n      success: function(dataRes, statusCode) {\r\n        var dataRes = JSON.parse(dataRes);\r\n        if (dataRes.status == 1) {\r\n          callback(dataRes.data.csrf.TMM_CSRF);\r\n        }\r\n      },\r\n      error: function(dataRes, statusCode) {\r\n        errorCb(dataRes, statusCode);\r\n      }\r\n    });\r\n  },\r\n\r\n\r\n};\r\n\r\nmodule.exports = httpService;\r\n"},{"id":23,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\log.js","name":"./src/modules/utils/log.js","index":23,"index2":19,"size":1309,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":22,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\services\\httpService.js","module":"./src/modules/services/httpService.js","moduleName":"./src/modules/services/httpService.js","type":"cjs require","userRequest":"../utils/log","loc":"9:10-33"},{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./utils/log","loc":"9:8-30"},{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":27,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommendView.js","module":"./src/modules/recommend/recommendView.js","moduleName":"./src/modules/recommend/recommendView.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":30,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","module":"./src/modules/item/item.js","moduleName":"./src/modules/item/item.js","type":"cjs require","userRequest":"../utils/log","loc":"10:8-31"},{"moduleId":37,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\role\\role.js","module":"./src/modules/role/role.js","moduleName":"./src/modules/role/role.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":40,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","module":"./src/modules/accLogin/accLogin.js","moduleName":"./src/modules/accLogin/accLogin.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":42,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","module":"./src/modules/mobLogin/mobLogin.js","moduleName":"./src/modules/mobLogin/mobLogin.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":53,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","module":"./src/modules/shop/addRetinueShop.js","moduleName":"./src/modules/shop/addRetinueShop.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"../utils/log","loc":"10:8-31"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":64,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","module":"./src/modules/shop/dotManage.js","moduleName":"./src/modules/shop/dotManage.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":65,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","module":"./src/modules/shop/dotManageView.js","moduleName":"./src/modules/shop/dotManageView.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":69,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","module":"./src/modules/myPraise/myPraiseView.js","moduleName":"./src/modules/myPraise/myPraiseView.js","type":"cjs require","userRequest":"../utils/log","loc":"5:10-33"},{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":80,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","module":"./src/modules/order/orderView.js","moduleName":"./src/modules/order/orderView.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":88,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","module":"./src/modules/search/seekSearch.js","moduleName":"./src/modules/search/seekSearch.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":89,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","module":"./src/modules/search/seekSearchView.js","moduleName":"./src/modules/search/seekSearchView.js","type":"cjs require","userRequest":"../utils/log","loc":"5:10-33"},{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":93,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","module":"./src/modules/seek/seekView.js","moduleName":"./src/modules/seek/seekView.js","type":"cjs require","userRequest":"../utils/log","loc":"1:10-33"},{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":99,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\myView.js","module":"./src/modules/my/myView.js","moduleName":"./src/modules/my/myView.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":104,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","module":"./src/modules/modifyPhone/modifyPhone.js","moduleName":"./src/modules/modifyPhone/modifyPhone.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"../utils/log","loc":"2:8-31"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"../utils/log","loc":"3:8-31"},{"moduleId":111,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","module":"./src/modules/createAct/activityView.js","moduleName":"./src/modules/createAct/activityView.js","type":"cjs require","userRequest":"../utils/log","loc":"1:10-33"},{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"},{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"../utils/log","loc":"8:10-33"}],"source":"/**\r\n * @name log\r\n * @description 日志处理相关函数\r\n * \r\n * @author Moore Mo\r\n * @dateTime 2015-10-24T01:11:37+0800\r\n */\r\n\r\n\r\nvar config = {\r\n  // 开启调试模式\r\n  debug: false\r\n};\r\n\r\nvar log = {\r\n  startTime: new Date().getTime(),\r\n  /**\r\n   * @method info\r\n   * @description 正常信息（包括成功信息）打印函数，暂定可以传5个参数\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T01:12:15+0800\r\n   */\r\n  info: function(msg, data1, data2, data3, data4, data5) {\r\n    if (config.debug) {\r\n      var now = new Date();\r\n      var diff = now.getTime() - log.startTime;\r\n\r\n      msg = msg || 'info';\r\n      data1 = data1 || '';\r\n      data2 = data2 || '';\r\n      data3 = data3 || '';\r\n      data4 = data4 || '';\r\n      data5 = data5 || '';\r\n      console.log('(MS ' + diff + ') ' + msg, data1, data2, data3, data4, data5);\r\n    }\r\n  },\r\n  /**\r\n   * @method error\r\n   * @description 错误信息打印函数，暂定可以传5个参数\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T01:12:15+0800\r\n   */\r\n  error: function(msg, data1, data2, data3, data4, data5) {\r\n    if (config.debug) {\r\n      msg = msg || 'error';\r\n      data1 = data1 || '';\r\n      data2 = data2 || '';\r\n      data3 = data3 || '';\r\n      data4 = data4 || '';\r\n      data5 = data5 || '';\r\n      console.log('ERROR - ' + msg, data1, data2, data3, data4, data5)\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = log;\r\n"},{"id":24,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","name":"./src/modules/router.js","index":24,"index2":158,"size":4019,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"./router","loc":"26:13-32"}],"source":"/**\n * @name router\n * @description 路由模块\n *\n * @author Moore Mo\n */\n\nvar appFunc = require('./utils/appFunc'),\n  log = require('./utils/log'),\n  appModule = require('./app/app'),\n  loginModule = require('./login/login'),\n  accLoginModule = require('./accLogin/accLogin'),\n  mobLoginModule = require('./mobLogin/mobLogin'),\n  myModule = require('./my/my'),\n  myInfoModule = require('./myInfo/myInfo'),\n  recommendModule = require('./recommend/recommend'),\n  createLineOrder = require('./shop/createLineOrder'),\n  createDotOrder = require('./shop/createDotOrder'),\n  createActOrder = require('./shop/createActOrder'),\n  orderDetail = require('./order/orderDetail'),\n  seekModule = require('./seek/seek'),\n  shopModule = require('./shop/shop');\n\nmodule.exports = {\n  init: function() {\n    var that = this;\n    \n    $$(document).on('pageBeforeAnimation', function(e) {\n      var page = e.detail.page;\n      that.pageBeforeAnimation(page);\n    });\n\n    $$(document).on('pageAfterAnimation', function(e) {\n      var page = e.detail.page;\n      that.pageAfterAnimation(page);\n    });\n\n  },\n  pageBeforeAnimation: function(page) {\n    var name = page.name;\n    var from = page.from;\n    var fromPage = page.fromPage;\n    log.info('pageBeforeAnimation...', page);\n\n    if (name === 'recommendView' || name === 'seekView' || name === 'seek' || name === 'myView' || name === 'my') {\n      appFunc.showToolbar();\n    }\n\n    // 返回我的信息页面刷新\n    if (name === 'myView' && (fromPage.name === 'login' || fromPage.name === 'acc-login' || fromPage.name === 'mob-login')) {\n      myModule.relodeMyInfoView();\n    }\n\n    // 下单后从订单详情返回\n    if (name === 'dot-order' && (fromPage.name === 'order-detail')) {\n      // tmmApp.getCurrentView().router.back({\n      //   reload: true,\n      //   animatePages: false\n      // });\n      // tmmApp.showTab('#recommendView');\n      // recommendModule.refreshRecommendView();\n    }\n    // 添加主要联系人返回订单页面触发\n    if (name == 'dot-order' && fromPage.from == \"right\" && fromPage.name == \"add-retinue\") {\n      \n      createDotOrder.fillMainRetinue();\n    }\n\n    // 添加主要联系人返回订单页面触发\n    if (name == 'line-order'  && fromPage.from == \"right\" && fromPage.name == \"add-retinue\") {\n      \n      createLineOrder.fillMainRetinue();\n    }\n\n    if (name == 'act-order' && fromPage.from == \"right\" && fromPage.name == \"add-retinue\") {\n      \n      createActOrder.fillMainRetinue();\n    }\n\n    \n\n    // 关闭订单详情页面的定时器\n    if (fromPage.name == \"order-detail\") {\n      orderDetail.clearTime();\n    }\n\n    // 改变页面的状态栏的颜色（登录页面，我的钱包页面）\n    if (name == 'login' || name == 'acc-login' || name == 'mob-login' || name == 'my-wallet') {\n      $$('body').find('.statusbar-overlay').css('background', '#403A39');\n    } else {\n      $$('body').find('.statusbar-overlay').css('background', '#ffffff');\n    }\n\n    if (name == 'draw-money') {\n      // 进入的是提现申请页面，调起原生数字键盘\n      appFunc.showNumberKeyboard(1);\n    } else {\n      // 进入的不是提现申请页面，注销调起原生数字键盘\n      appFunc.showNumberKeyboard(0);\n    }\n    \n    // 改变页面的状态栏的颜色（登录页面，我的钱包页面）\n    if (name == 'login' || name == 'acc-login' || name == 'mob-login' || name == 'my-wallet') {\n      $$('body').find('.statusbar-overlay').css('background', '#403A39');\n    } else {\n      $$('body').find('.statusbar-overlay').css('background', '#ffffff');\n    }\n\n  },\n  pageAfterAnimation: function(page) {\n    log.info('pageAfterAnimation...', page);\n    var name = page.name;\n    var from = page.from;\n    var fromPage = page.fromPage;\n    if (name === 'myInfo' && fromPage.from == \"right\" && (fromPage.name == 'add-retinue' || fromPage.name == 'modify-phone')) {\n\n      myInfoModule.refreshUserInfo();\n    }\n\n    // 觅镜页面选择城市后回到觅镜首页触发\n    if (name == 'seek' && (fromPage.from == 'right' || fromPage.from == 'center') && (fromPage.name == 'select-distination' || fromPage.name == \"select-search-distination\")) {\n      seekModule.getSeekList();\n    }\n\n    // 订单详情页面返回商品详情页面刷新\n    if ((name == 'act-detail') && (fromPage.name == 'order-detail')) {\n\n      shopModule.refreshDetail();\n    }\n   \n\n    \n  }\n};\n"},{"id":25,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","name":"./src/modules/app/app.js","index":25,"index2":157,"size":1835,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":1,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\main.js","module":"./src/modules/main.js","moduleName":"./src/modules/main.js","type":"cjs require","userRequest":"./app/app","loc":"27:16-36"},{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./app/app","loc":"10:14-34"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  recommendModule = require('../recommend/recommend'),\r\n  seekModule = require('../seek/seek'),\r\n  myModule = require('../my/my'),\r\n  seekFreshModule = require('../seekFresh/seekFresh'),\r\n  roleModule = require('../role/role'),\r\n  deviceModule = require('./device'),\r\n  tmmSdkModule = require('./tmmSdk');\r\n\r\nvar AppModuel = {\r\n  init: function() {\r\n    deviceModule.init();\r\n    tmmSdkModule.init();\r\n    if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) {\r\n      // ios不需要显示\r\n    } else {\r\n      appFunc.showToast('定位中...');\r\n    }\r\n    setTimeout(function(argument) {\r\n      if (window.device.flag == false) {\r\n        appFunc.hideToast();\r\n        setTimeout(function() {\r\n          appFunc.hideToast();\r\n        }, 500)\r\n\r\n        recommendModule.init();\r\n      }\r\n\r\n    }, 2000);\r\n\r\n    // window.device.getAddress('113.949586', '22.549915', '深圳市');\r\n    // window.device.setLocationCity('116.46','39.92')\r\n    seekModule.init();\r\n    myModule.init();\r\n    roleModule.init();\r\n    seekFreshModule.init();\r\n    //AppModuel.getLocation();\r\n  },\r\n  getLocation: function() {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        function(position) {\r\n          // 成功时回调\r\n          //tmmApp.alert(position.coords.latitude + '---' + position.coords.longitude);\r\n          //console.log('position....', position);\r\n        },\r\n        function(position) {\r\n          // 错误时回调\r\n          //console.log('position....', position);\r\n        }, {        \r\n          // 指示浏览器获取高精度的位置，默认为false     \r\n          enableHighAccuracy: true,\r\n          // 指定获取地理位置的超时时间，默认不限时，单位为毫秒\r\n          timeout: 5000,\r\n          // 最长有效期，在重复获取地理位置时，此参数指定多久再次获取位置。\r\n          maximumAge: 3000  \r\n        });\r\n    }\r\n  }\r\n};\r\n\r\n\r\nmodule.exports = AppModuel;\r\n"},{"id":26,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","name":"./src/modules/recommend/recommend.js","index":26,"index2":87,"size":5027,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./recommend/recommend","loc":"16:20-52"},{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../recommend/recommend","loc":"2:20-53"},{"moduleId":159,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\device.js","module":"./src/modules/app/device.js","moduleName":"./src/modules/app/device.js","type":"cjs require","userRequest":"../recommend/recommend","loc":"3:22-55"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  recommendView = require('./recommendView'),\r\n  shopModule = require('../shop/shop'),\r\n  seekSearchModule = require('../search/seekSearch');\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n\r\n\r\nvar recommend = {\r\n  init: function() {\r\n    // var locationInfo = window.device.getAddress('1','2','3');\r\n    appFunc.exitSeekFresh();\r\n    // appFunc.showToolbar();\r\n    recommend.getRecommendList();\r\n    recommend.bindEvent();\r\n  },\r\n  refreshRecommendView: function() {\r\n    recommend.getRecommendList();\r\n  },\r\n  /**\r\n   * @method getRecommendList\r\n   * @description 获取推荐列表\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T01:54:01+0800\r\n   */\r\n  getRecommendList: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.pullToRefreshTrigger('#recommendView .pull-to-refresh-content');\r\n\r\n\r\n    //return;\r\n    // 发送获取推荐列表请求\r\n    httpService.getRecommendList(\r\n      function(dataRes, status) {\r\n        log.info(\"推荐的数据\", dataRes);\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        // 进行渲染视图\r\n        recommendView.getRecommendList(dataRes.data);\r\n\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        setTimeout(function() {\r\n          tmmApp.pullToRefreshDone();\r\n        }, 200);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试', '');\r\n        setTimeout(function() {\r\n          tmmApp.pullToRefreshDone();\r\n        }, 200);\r\n      }\r\n    );\r\n  },\r\n  refreshRecommendList: function() {\r\n    log.info('refreshRecommendList...');\r\n    // 发送获取推荐列表请求\r\n    httpService.getRecommendList(\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        // 进行渲染视图\r\n        recommendView.refreshRecommendList(dataRes.data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        tmmApp.pullToRefreshDone();\r\n      }\r\n    );\r\n  },\r\n  infiniteRecommendList: function() {\r\n    // 如果还有下一页的数据的时候（即下一页的链接不为空时）才去请求获取数据\r\n    if (nextPageLink) {\r\n      log.info('recommendCtrl---infiniteRecommendList---nextPageLink---', nextPageLink);\r\n      // 如果正在获取数据，即滚动加载的事件还没处理完，直接返回\r\n      // 防止重复请求，获取到重复的数据\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n      httpService.getRecommendListToPage(\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          log.info('new ---- nextPageLink ----', nextPageLink);\r\n          // 调用视图模型的infiniteRecommendList方法进行渲染视图\r\n          recommendView.infiniteRecommendList(dataRes.data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      //tmmApp.showIndicator();\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        //tmmApp.alert('没有更多的数据了');\r\n        $$(\"#recommendView #no-more\").css('display', 'inline-block');\r\n        $$(\"#recommendView #no-more\").css('background', '#fff');\r\n        $$(\"#recommendView #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      // 没有更多数据了，即销毁到滚动加载的事件\r\n      //tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      setTimeout(function() {\r\n        $$(\"#recommendView #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n\r\n    }\r\n  },\r\n  bindEvent: function() {\r\n\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '.pull-to-refresh-content',\r\n      event: 'refresh',\r\n      handler: recommend.refreshRecommendList\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.pull-to-refresh-content',\r\n      event: 'infinite',\r\n      handler: recommend.infiniteRecommendList\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-recommend-detail',\r\n      event: 'click',\r\n      handler: shopModule.initDetail\r\n    }, {\r\n      element: '#recommendView',\r\n      event: 'show',\r\n      handler: recommend.init\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.ticon-search',\r\n      event: 'click',\r\n      handler: seekSearchModule.init\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = recommend;\r\n"},{"id":27,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommendView.js","name":"./src/modules/recommend/recommendView.js","index":27,"index2":23,"size":2303,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"./recommendView","loc":"4:18-44"}],"source":"/**\r\n * @name recommendView\r\n * @description 推荐视图模型模块\r\n * \r\n * @author Moore Mo\r\n * @dateTime 2015-10-24T02:09:03+0800\r\n */\r\nvar log = require('../utils/log');\r\nvar appFunc = require('../utils/appFunc');\r\nvar template = require('./recommend.tpl.html');\r\n\r\nvar recommendView = {\r\n  /**\r\n   * @method getRecommendList\r\n   * @description 获取推荐列表的数据后进行编译渲染\r\n   * \r\n   * @param    {Array} dataRes 点，线，觅趣的数据\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T02:09:49+0800\r\n   */\r\n  getRecommendList: function(dataRes) {\r\n    // 转成对象赋值给页面上\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    log.info('recommendView --getRecommendList--init...');\r\n\r\n\r\n    var output = appFunc.renderTpl(template, data);\r\n\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#recommendView').find('.tmm-recommend-ul-list').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  /**\r\n   * @method refreshRecommendList\r\n   * @description 下拉刷新获取推荐列表数据后进行编译渲染\r\n   * \r\n   * @param    {Array} dataRes 点，线，觅趣的数据\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T02:13:26+0800\r\n   */\r\n  refreshRecommendList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    log.info('recommendView --refreshRecommendList--init...');\r\n\r\n    var output = appFunc.renderTpl(template, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#recommendView').find('.tmm-recommend-ul-list').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n    \r\n  },\r\n  /**\r\n   * @method infiniteRecommendList\r\n   * @description 无穷加载获取推荐列表后进行编译渲染\r\n   * \r\n   * @param    {Array} dataRes 点，线，觅趣的数据\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T02:15:39+0800\r\n   */\r\n  infiniteRecommendList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(template, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#recommendView').find('.tmm-recommend-ul-list').append(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n};\r\n\r\nmodule.exports = recommendView;\r\n"},{"id":28,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.tpl.html","name":"./src/modules/recommend/recommend.tpl.html","index":28,"index2":22,"size":1461,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommendView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":27,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommendView.js","module":"./src/modules/recommend/recommendView.js","moduleName":"./src/modules/recommend/recommendView.js","type":"cjs require","userRequest":"./recommend.tpl.html","loc":"10:15-46"},{"moduleId":89,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","module":"./src/modules/search/seekSearchView.js","moduleName":"./src/modules/search/seekSearchView.js","type":"cjs require","userRequest":"../recommend/recommend.tpl.html","loc":"8:19-61"},{"moduleId":93,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","module":"./src/modules/seek/seekView.js","moduleName":"./src/modules/seek/seekView.js","type":"cjs require","userRequest":"../recommend/recommend.tpl.html","loc":"4:19-61"}],"source":"module.exports = \"{{#each recommend}}\\r\\n<li class=\\\"tmm-item-content\\\">\\r\\n  <div class=\\\"pic\\\">\\r\\n    {{#js_compare \\\"this.classliy.value !=3\\\"}}\\r\\n    <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" class=\\\"tmm-recommend-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n    {{/js_compare}} {{#js_compare \\\"this.classliy.value ==3\\\"}}\\r\\n    <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" data-acttype=\\\"{{this.actives.actives_type.value}}\\\" class=\\\"tmm-recommend-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n    {{/js_compare}}\\r\\n  </div>\\r\\n  <div class=\\\"txt\\\">\\r\\n\\r\\n    <div class=\\\"title\\\"><!-- <span class=\\\"tmm-rem\\\"></span> --><span class=\\\"tit\\\">{{name}}</span></div>\\r\\n    <div class=\\\"intro\\\">{{info}}</div>\\r\\n\\r\\n    <span class=\\\"flag type {{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\">{{this.type.name}}</span>\\r\\n    \\r\\n    {{#if this.distance}}\\r\\n    <span class=\\\"praise\\\"><span class=\\\"praise-distance\\\">距离</span> {{this.distance}}</span>\\r\\n    {{/if}}\\r\\n\\r\\n  </div>\\r\\n</li>\\r\\n{{else}}\\r\\n<li class=\\\"tmm-item-content\\\">\\r\\n\\r\\n<div style=\\\"margin:0 auto;padding-top:20px;text-align:center;\\\">没有相关内容！</div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\";"},{"id":29,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","name":"./src/modules/shop/shop.js","index":29,"index2":82,"size":17674,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./shop/shop","loc":"22:15-37"},{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"../shop/shop","loc":"5:15-38"},{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../shop/shop","loc":"5:15-38"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"../shop/shop","loc":"5:15-38"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../shop/shop","loc":"20:15-38"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  itemModule = require('../item/item'),\r\n  roleModule = require('../role/role'),\r\n  dot_template = require('./dot-detail.tpl.html'),\r\n  line_template = require('./line-detail.tpl.html'),\r\n  act_template = require('./activity-detail.tpl.html'),\r\n  createLineOrder = require('./createLineOrder'),\r\n  createDotOrder = require('./createDotOrder'),\r\n  createActOrder = require('./createActOrder'),\r\n  myPraiseView = require('../myPraise/myPraiseView'),\r\n  bookingsTpl = require('./booking-information.tpl.html'),\r\n  bridge = require('../utils/pageBridge'),\r\n  local_template = require('./local-specialty.html');\r\n  applySeekfun = require('./applySeekfun');\r\n\r\nvar dataListInfo = {};\r\nvar bookingsInfo = {};\r\nvar link = '';\r\nvar type = '';\r\nvar isFromJourneyPage = '';\r\nvar actType = '';\r\n\r\nvar shop = {\r\n  init: function() {\r\n    log.info('shopModule init...');\r\n    shop.bindEvent();\r\n  },\r\n  initDetail: function() {\r\n    shop.init();\r\n    var _this = this;\r\n    // 类型，点，线，觅趣\r\n    type = $$(_this).attr('data-type');\r\n    // 点，线，觅趣的链接\r\n    link = $$(_this).attr('data-link');\r\n\r\n    isFromJourneyPage = $$(_this).attr('data-select');\r\n\r\n    if (type == 'dot' || type == 1) {\r\n      shop.getDotDetail(link, false);\r\n    } else if (type == 'line' || type == 2) {\r\n      shop.getLineDetail(link, isFromJourneyPage, false);\r\n    } else if (type == 'act' || type == 3) {\r\n      actType = $$(_this).attr('data-acttype');\r\n      // 0为觅趣（旅游）1 为觅趣（农产品）\r\n      if (actType === '0') {\r\n        shop.getActDetail(link, false);\r\n      }\r\n    } else {\r\n      tmmApp.alert('请求的链接不存在');\r\n    }\r\n  },\r\n  refreshDetail: function() {\r\n    shop.init();\r\n    var _this = this;\r\n\r\n    if (type == 'dot' || type == 1) {\r\n      shop.getDotDetail(link , true);\r\n    } else if (type == 'line' || type == 2) {\r\n      shop.getLineDetail(link, isFromJourneyPage, true);\r\n    } else if (type == 'act' || type == 3) {\r\n\r\n      if (actType === '0') {\r\n        shop.getActDetail(link , true);\r\n      }\r\n    } else {\r\n      tmmApp.alert('请求的链接不存在');\r\n    }\r\n  },\r\n  getDotDetail: function(url, isRefresh) {\r\n    tmmApp.showIndicator();\r\n    httpService.getDotDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          dataListInfo = {};\r\n          var isDotPraise = true;\r\n          if (dataRes.data.collent_name == '已赞') {\r\n            isDotPraise = true;\r\n          } else if (dataRes.data.collent_name == '取消') {\r\n            isDotPraise = false;\r\n          };\r\n          // 预定需知\r\n          bookingsInfo = {\r\n            book_info: dataRes.data.book_info,\r\n            cost_info: dataRes.data.cost_info\r\n          };\r\n          dataListInfo = shop.separateFramDate(dataRes.data.list); // 景点列表，农产品分离\r\n          var isFree = shop.countItemIsFree(dataListInfo.itemList); // 计算景点是否全部免费\r\n          var data = {\r\n            dotObj: dataRes.data,\r\n            isDotPraise: isDotPraise,\r\n            dataListInfo: dataListInfo,\r\n            isFree: isFree\r\n          };\r\n\r\n\r\n          var output = appFunc.renderTpl(dot_template, data);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n            reload: isRefresh\r\n          });\r\n          appFunc.hideToolbar();\r\n          tmmApp.hideIndicator();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('该景点未开放，请稍候再试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  getLineDetail: function(url,isFromJourneyPage , isRefresh) {\r\n    tmmApp.showIndicator();\r\n    httpService.getLineDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          log.info(\"线的详情页面\", dataRes);\r\n          var isLinePraise = false;\r\n          if (dataRes.data.collent_name == '已赞') {\r\n            isLinePraise = true;\r\n            log.info(\"init-isPraise\", isLinePraise);\r\n          } else if (dataRes.data.collent_name == '取消') {\r\n            isLinePraise = false;\r\n            log.info(\"init-isPraise\", isLinePraise);\r\n          }\r\n     \r\n            // dataRes.data.list = null;\r\n            dataRes.data.list = appFunc.mergeLineDay(dataRes.data.list);\r\n\r\n          var data = {\r\n            lineObj: dataRes.data,\r\n            isLinePraise: isLinePraise,\r\n            isFree: shop.countItemIsFree(shop.fetchItemList(dataRes.data.list)),\r\n            isFromJourneyPage: isFromJourneyPage\r\n          };\r\n\r\n          // 预定需知\r\n          bookingsInfo = {\r\n            book_info: dataRes.data.book_info,\r\n            cost_info: dataRes.data.cost_info\r\n          };\r\n\r\n\r\n          var output = appFunc.renderTpl(line_template, data);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n            reload: isRefresh\r\n          });\r\n          appFunc.hideToolbar();\r\n          tmmApp.hideIndicator();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('该线路未开放，请稍候再试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  getActDetail: function(url, isRefresh) {\r\n    tmmApp.showIndicator();\r\n    httpService.getActDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n\r\n          var isActPraise = false;\r\n          if (dataRes.data.collent_name == '已赞') {\r\n            isActPraise = true;\r\n            log.info(\"init-isPraise\", isActPraise);\r\n          } else if (dataRes.data.collent_name == '取消') {\r\n            isActPraise = false;\r\n            log.info(\"init-isPraise\", isActPraise);\r\n          };\r\n\r\n          dataRes.data.list = appFunc.mergeLineDay(dataRes.data.list);\r\n          var data = {\r\n            actObj: dataRes.data,\r\n            isActPraise: isActPraise\r\n          };\r\n          var output = appFunc.renderTpl(act_template, data);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n            reload: isRefresh\r\n          });\r\n          var height = appFunc.lockHeight($$('.act-info-remark')[0], 40);\r\n          if (!height) $$('.icon.ticon-expand').css('display', 'none');\r\n\r\n          appFunc.hideToolbar();\r\n          tmmApp.hideIndicator();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('该觅趣未开放，请稍候再试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method praiseShop\r\n   * @description 商品点赞\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T21:17:15+0800\r\n   */\r\n  praiseShop: function() {\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.goToLogin();\r\n      return;\r\n    }\r\n    var _this = this;\r\n    var shop_id = $$(_this).attr('data-shop-id');\r\n    log.info(\"id号码\", shop_id);\r\n    //是否点赞\r\n    var isPraise;\r\n    httpService.shopCollect({\r\n        'Collect': {\r\n          'shops_id': shop_id,\r\n          'user_address': ''\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        log.info(\"点赞，取消赞\", dataRes);\r\n        if (dataRes.status == 1) {\r\n          // tmmApp.alert(dataRes.data.name + '成功', '');\r\n\r\n          if (dataRes.data.value == 1) {\r\n            $$(\".modal\").addClass(\"toast-modal\");\r\n            appFunc.showToast(\"点赞成功\");\r\n            setTimeout(function() {\r\n              appFunc.hideToast();\r\n            }, 1000);\r\n            isPraise = true;\r\n            $$(\".tmm-praise-shop i\").removeClass(\"gray\");\r\n            $$(\".tmm-praise-shop span\").removeClass(\"gray\");\r\n            $$(\".tmm-praise-shop span\").text(parseInt($$(\".tmm-praise-shop span\").text()) + 1);\r\n            //刷新 我的赞列表\r\n            shop.refreshMyPraiseList();\r\n          } else if (dataRes.data.value == 0) {\r\n            $$(\".modal\").addClass(\"toast-modal\");\r\n            appFunc.showToast(\"取消赞成功\");\r\n            setTimeout(function() {\r\n              appFunc.hideToast();\r\n            }, 1000);\r\n            isPraise = false;\r\n            $$(\".tmm-praise-shop i\").addClass(\"gray\");\r\n            $$(\".tmm-praise-shop span\").addClass(\"gray\");\r\n            $$(\".tmm-praise-shop span\").text(parseInt($$(\".tmm-praise-shop span\").text()) - 1);\r\n            //刷新 我的赞列表\r\n            shop.refreshMyPraiseList();\r\n\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  refreshMyPraiseList: function() {\r\n    httpService.getMyPraiseList(\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        myPraiseView.refreshMyPraiseList(dataRes.data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method createOrder\r\n   * @description 创建商品订单\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T21:36:18+0800\r\n   */\r\n  createOrder: function() {\r\n\r\n    // var dotDetailPage = $$('#recommendView').find('.page[data-page=\"dot-detail\"]:not(.cached)');\r\n    // var dotOrderPage = $$('#recommendView').find('.page.cached[data-page=\"dot-order\"]');\r\n    // var selectDotPage = $$('#recommendView').find('.page[data-page=\"select-dot\"]:not(.cached)');\r\n\r\n    // if (selectDotPage.length > 0) {\r\n    //   dotDetailPage.remove();\r\n    //   dotOrderPage.remove();\r\n    //   selectDotPage.remove();\r\n    //   $$('#recommendView').find('.navbar-inner:not(.cached)').remove();\r\n    // }\r\n\r\n\r\n    var _this = this;\r\n    var shop_id = $$(_this).attr('data-shop-id');\r\n    // 商品类型，1点，2线\r\n    var shop_type = $$(_this).attr('data-shop-type');\r\n\r\n    if (shop_type == 1) {\r\n      createDotOrder.showView(shop_id);\r\n      //tmmApp.getCurrentView().router.load({content:dot_order_template});\r\n    } else if (shop_type == 2) {\r\n      // 进入线订单创建模块\r\n      createLineOrder.showView(shop_id);\r\n\r\n    } else if (shop_type == 3) {\r\n      // 进入觅趣订单创建模块\r\n      createActOrder.showView(shop_id);\r\n    }\r\n    log.info('创建订单....', shop_id);\r\n  },\r\n\r\n  /**\r\n   * 分享信息\r\n   * @return {[type]} [description]\r\n   */\r\n  shareMsg: function() {\r\n    var tit = $$(this).attr('data-tit');\r\n    var img = $$(this).attr('data-link');\r\n    var con = $$(this).attr('data-con');\r\n    var id = $$(this).attr('data-id');\r\n    var link = httpService.apiUrl + '/index.php?r=site/share&share=' + id;\r\n    appFunc.shareMsg(tit, con, img, link);\r\n  },\r\n  gotoTop: function() {\r\n    log.info(\"回到顶部\");\r\n    var view = $$(this).attr('data-view');\r\n    appFunc.gotoTop(view);\r\n  },\r\n\r\n  /** 展开觅趣简介 */\r\n  showExpand: function() {\r\n\r\n    var thatObj =  $$(this);\r\n\r\n    if (thatObj.hasClass('tmm-retract')) {\r\n      appFunc.transitionHeight($$('.act-info-remark')[0], '40px');\r\n      $$(this).removeClass('tmm-retract');\r\n    } else {\r\n      appFunc.transitionHeight($$('.act-info-remark')[0]);\r\n      $$(this).addClass('tmm-retract');\r\n    }\r\n    \r\n  },\r\n\r\n  dotCall: function() {\r\n    var managePhone = $$(this).attr(\"data-manage-phone\");\r\n    var type = $$(this).attr(\"data-type\");\r\n    var callManagePhone = managePhone.replace(/-/g, \"\");\r\n    var text = '';\r\n    var tmmPhone = $$(this).attr(\"data-tmm-phone\");\r\n    var callTmmPhone = tmmPhone.replace(/-/g, \"\");\r\n\r\n    text = (type == 'act') ? '联系代理商' : '联系运营商';\r\n\r\n    var buttons1 = [{\r\n      text: text,\r\n      onClick: function() {\r\n        appFunc.dotCallService(managePhone, callManagePhone);\r\n      }\r\n    }, {\r\n      text: '联系田觅觅客服',\r\n      onClick: function() {\r\n        appFunc.dotCallService(tmmPhone, callTmmPhone);\r\n      }\r\n    }];\r\n\r\n    var buttons2 = [{\r\n      text: '取消',\r\n      color: 'red'\r\n    }];\r\n    var groups = [buttons1, buttons2];\r\n\r\n    tmmApp.actions(groups);\r\n\r\n    $$(\".actions-modal-group\").addClass(\"tmmAPP-Call\");\r\n    var isRemove = $$(\".actions-modal\").hasClass('modal-out');\r\n    if (isRemove) {\r\n      $$(\".actions-modal-group\").removeClass('tmmAPP-Call');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 预定须知\r\n   * @return {[type]} [description]\r\n   */\r\n\r\n  shareItemMore: function() {\r\n\r\n    var output = appFunc.renderTpl(bookingsTpl, bookingsInfo)\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n  },\r\n  /**\r\n   * 显示特产列表\r\n   * @return {[type]} [description]\r\n   */\r\n  showLocalSpecialty: function() {\r\n\r\n    appFunc.hideToolbar();\r\n\r\n    var output = appFunc.renderTpl(local_template, dataListInfo);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n  },\r\n\r\n  goLocalSpecialty: function(argument) {\r\n    var title = $$(this).attr('data-name');\r\n    var description = $$(this).attr('data-info');\r\n    var thumb_url = $$(this).attr('data-img');\r\n    var webpageUrl = $$(this).attr('data-link');\r\n    appFunc.goSeekFreshDetail(webpageUrl);\r\n    appFunc.goSeekFreshDetail2(title, description, thumb_url, webpageUrl);\r\n  },\r\n\r\n  /**\r\n   * 分离农产品数据\r\n   * @return {[type]} [description]\r\n   */\r\n  separateFramDate: function(data) {\r\n    var info = {\r\n      itemList: [],\r\n      farmList: []\r\n    };\r\n\r\n    for (var i = 0, length = data.length; i < length; i++) {\r\n      if (data[i].item_type.value == -1) {\r\n        info.farmList.push(data[i]);\r\n      } else {\r\n        info.itemList.push(data[i]);\r\n      }\r\n    }\r\n\r\n    return info;\r\n  },\r\n\r\n  /**\r\n   * 提取线与觅趣的项目\r\n   * @param  {[type]} data 线与觅趣的list\r\n   * @return {[type]} arr 线与觅趣的项目集合\r\n   */\r\n  fetchItemList: function(data) {\r\n    var arr = [];\r\n    for (var i in data) {\r\n      for (var j in data[i]['dot_list'][0]['day_item']) {\r\n        arr.push(data[i]['dot_list'][0]['day_item'][j]);\r\n      }\r\n    }\r\n    return arr;\r\n  },\r\n\r\n  /**\r\n   * 计算项目列表是否免费\r\n   */\r\n  countItemIsFree: function(arr) {\r\n    for (var i = 0, length = arr.length; i < length; i++) {\r\n      if (arr[i].free_status.value == 1)\r\n        return false;\r\n    }\r\n    return true;\r\n  },\r\n\r\n  /*  选择线路 */\r\n  selectJourney: function() {\r\n\r\n    bridge.fire('goLineDeital');\r\n    \r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '.showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemView\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-img-showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemViewForImg\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-praise-shop',\r\n      event: 'click',\r\n      handler: shop.praiseShop\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.go-item',\r\n      event: 'click',\r\n      handler: shop.createOrder\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemView\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-img-showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemViewForImg\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-praise-shop',\r\n      event: 'click',\r\n      handler: shop.praiseShop\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.go-item',\r\n      event: 'click',\r\n      handler: shop.createOrder\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.go-item',\r\n      event: 'click',\r\n      handler: shop.createOrder\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-img-showmore',\r\n      event: 'click',\r\n      handler: itemModule.loadItemViewForImg\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-praise-shop',\r\n      event: 'click',\r\n      handler: shop.praiseShop\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.ticon-share',\r\n      event: 'click',\r\n      handler: shop.shareMsg\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.ticon-share',\r\n      event: 'click',\r\n      handler: shop.shareMsg\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.ticon-share',\r\n      event: 'click',\r\n      handler: shop.shareMsg\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-item-more',\r\n      event: 'click',\r\n      handler: shop.shareItemMore\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-item-more',\r\n      event: 'click',\r\n      handler: shop.shareItemMore\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-item-more',\r\n      event: 'click',\r\n      handler: shop.shareItemMore\r\n    }, {\r\n      element: '.views',\r\n      selector: '.goTop',\r\n      event: 'click',\r\n      handler: shop.gotoTop\r\n    }, {\r\n      element: '.views',\r\n      selector: '.icon.ticon-expand',\r\n      event: 'click',\r\n      handler: shop.showExpand\r\n    }, {\r\n      element: '.views',\r\n      selector: '.tmm-phone',\r\n      event: 'click',\r\n      handler: shop.dotCall\r\n    }, {\r\n      element: '.views',\r\n      selector: '.local-specialty',\r\n      event: 'click',\r\n      handler: shop.showLocalSpecialty\r\n    }, {\r\n      element: '.views',\r\n      selector: '.tmm-local-specialty-card',\r\n      event: 'click',\r\n      handler: shop.goLocalSpecialty\r\n    },\r\n     {\r\n      element: '#myView',\r\n      selector: '.select-journery-in-line-page',\r\n      event: 'click',\r\n      handler: shop.selectJourney\r\n    }\r\n    ,{ // 觅趣付款A支付方式\r\n      element: '.views',\r\n      selector: '.payment-act-A-type',\r\n      event: 'click',\r\n      handler: window.applySeekfun\r\n    }\r\n    ];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = shop;\r\n"},{"id":30,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","name":"./src/modules/item/item.js","index":30,"index2":30,"size":8984,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../item/item","loc":"4:15-38"}],"source":"/**\r\n * @method Item\r\n * @description  项目相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-10-27T16:33:48+0800\r\n */\r\nvar httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  item_template = require('./item-detail.tpl.html'),\r\n  hotel_template = require('./item-hotel-detail.tpl.html');\r\n\r\n\r\n\r\nvar item = {\r\n  init: function() {\r\n    item.bindEvent();\r\n  },\r\n  loadItemView: function() {\r\n\r\n    //appFunc.hideNavbar();\r\n    var _this = this;\r\n    // 类型，点，线，觅趣\r\n    var type = $$(_this).attr('data-type');\r\n    log.info(\"进入初始化页面\", type);\r\n    // 点，线，觅趣的链接\r\n    var link = $$(_this).attr('data-link');\r\n\r\n    type = type == '1' ? 'eat' : type == '2' ? 'hotel' : type == '3' ? 'play' : type == '4' ? 'farm' : type;\r\n\r\n    var item_obj = {\r\n      'eat': item_template,\r\n      'play': item_template,\r\n      'hotel': hotel_template,\r\n      'farm': false,\r\n      'farmOuter': false\r\n    };\r\n\r\n    if (item_obj[type]) {\r\n      item.getItemDetail(item_obj[type], link);\r\n    } else {\r\n      // log.info('请求的链接不存在');\r\n      if (type == 'farmOuter') {\r\n        appFunc.goSeekFreshDetail(link);\r\n      }\r\n      // tmmApp.alert('请求的链接不存在');\r\n    }\r\n  },\r\n  loadItemViewForImg: function() {\r\n    var _this = this;\r\n    // 类型，点，线，觅趣\r\n    var type = $$(_this).attr('data-type');\r\n    // 点，线，觅趣的链接\r\n    var link = $$(_this).attr('data-link');\r\n\r\n    var item_obj = {\r\n      'eat': item_template,\r\n      'play': item_template,\r\n      'hotel': hotel_template,\r\n      '1': item_template,\r\n      '2': item_template,\r\n      '3': hotel_template,\r\n      'farm': false,\r\n      'farmOuter': false\r\n\r\n    };\r\n\r\n    if (item_obj[type]) {\r\n      item.getItemDetail(item_obj[type], link);\r\n    } else {\r\n      // log.info('请求的链接不存在');\r\n      if (type == 'farmOuter') {\r\n        appFunc.goSeekFreshDetail(link);\r\n      }\r\n      // tmmApp.alert('请求的链接不存在');\r\n    }\r\n  },\r\n  getItemDetail: function(template, url) {\r\n    tmmApp.showIndicator();\r\n    item.bindEvent();\r\n    httpService.getItemDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        log.info(\"项目详情\", dataRes);\r\n        if (dataRes.status == 1) {\r\n          var data = {\r\n            itemObj: dataRes.data\r\n          };\r\n          var output = appFunc.renderTpl(template, data);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n          if($$('body').find(\"#tmm-banner-detail-head\").hasClass('tmm-banner-detail')){\r\n            $$(\"#tmm-banner-detail-head\").html(\"\");\r\n          }\r\n          item.hideTheShare();\r\n        } else {\r\n          tmmApp.alert('项目已下线');\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('项目已下线');\r\n        tmmApp.hideIndicator();\r\n      }\r\n    );\r\n  },\r\n  hideTheShare: function() {\r\n  \tvar itemShare = $$('#tmm-item-share');\r\n  \tvar scrollPage = $$('body').find('.tmm-item-on-scroll');\r\n  \tvar p = 0;\r\n  \tvar t = 0;\r\n  \t\r\n  \tvar handleScroll = function(e) {\r\n  \t\t//itemShare.hide();\r\n  \t\tp = scrollPage[0].scrollTop;\r\n\r\n//\t\tlog.info('p...', p);\r\n  \t\t\r\n  \t\t// 如果是下滚，就隐藏\r\n  \t\tif (p > t) {\r\n  \t\t\titemShare.hide();\r\n//\t\t\t$$('.tmm-hide-ite').css('display', 'block');\r\n  \t\t}\r\n  \t\t\r\n  \t\t// 如果是上滚，就显示\r\n  \t\tif (p < t) {\r\n  \t\t\titemShare.show();\r\n//\t\t\t$$('.tmm-show-ite').css('display', 'block');\r\n//\t\t\tsetTimeout(function() {\r\n//\t\t\t\t$$('.tmm-show-ite').css('display', 'block');\r\n//\t\t\t}, 1000);\r\n  \t\t}\r\n  \t\t\r\n  \t\tsetTimeout(function() {\r\n  \t\t\tt = p;\r\n  \t\t}, 0);\r\n\r\n  \t};\r\n  \t\r\n  \tscrollPage.on('scroll', handleScroll);\r\n//\tlog.info('ssd...', scrollPage, 'share,,', itemShare);\r\n  },\r\n  showMapItemView: function() {\r\n    // 如果是ios或android\r\n    if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad || tmmApp.device.android) {\r\n      var dataObj = $$(this).dataset();\r\n      // 显示导航地图\r\n      appFunc.showMap(dataObj.city, dataObj.address, dataObj.lng, dataObj.lat);\r\n    } else {\r\n      // 或者显示地图图片\r\n      $$(\".navbar\").css('display', 'none');\r\n      $$(\"#tmm-hotel-map\").css('display', 'block');\r\n      $$(\"#tmm-hotel-mask\").css('display', 'block');\r\n    }\r\n\r\n  },\r\n  hideMapItemView: function() {\r\n    $$(\".navbar\").css('display', 'block');\r\n    $$(\"#tmm-hotel-map\").css('display', 'none');\r\n    $$(\"#tmm-hotel-mask\").css('display', 'none');\r\n  },\r\n\r\n  showModalOverlay: function(){\r\n    \r\n    if($$('body').find(\".delete\").hasClass('closeDeleteModal') == false){\r\n      $$('body').append('<div class=\"delete closeDeleteModal\"></div>');\r\n    } else { \r\n      $$('body').find(\".delete\").css('display', 'block');\r\n    }\r\n\r\n    if($$('body').find(\"#tmm-banner-detail-head\").hasClass('tmm-banner-detail') == false){\r\n      $$('body').append('<div id=\"tmm-banner-detail-head\" class=\"tmm-banner-detail\"></div>');\r\n    }\r\n\r\n    $$('body').find(\".modal-overlay\").remove();\r\n    if($$('body').find(\".modal-overlay\").hasClass('tmm-banner-detail-show')){\r\n      $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n    } else {\r\n      $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-banner-detail-show tmm-banner-detail-show-color\"></div>');\r\n    }\r\n  },\r\n\r\n  clickSwiperDetail: function(){\r\n     tmmApp.swiper('.swiper-container', {\r\n      pagination:'.swiper-pagination',\r\n      loop : true,\r\n      slidesPerView : 'auto',\r\n      loopedSlides :8,\r\n    });\r\n    if($$('body').find(\".tmm-swiper-pagination\").hasClass('swiper-pagination') == false){\r\n      $$(\".tmm-swiper-pagination span:first-child\").addClass(\"swiper-pagination-bullet-active\");\r\n      $$(\".tmm-swiper-pagination\").addClass('swiper-pagination');\r\n    }\r\n  },\r\n  /*显示吃和玩的详情*/\r\n  showBannerItemView: function() {\r\n    item.showModalOverlay();\r\n\r\n    $$(\"#tmm-banner-detail-content\").appendTo($$(\"#tmm-banner-detail-head\"));\r\n    $$(\"#tmm-banner-detail-content\").css('display', 'block');\r\n    \r\n    item.clickSwiperDetail();\r\n  },\r\n\r\n  /*显示住的详情*/\r\n  showBannerHotelItemView: function() {\r\n    item.showModalOverlay();\r\n    \r\n    $$(\"#tmm-banner-hotel-detail-content\").appendTo($$(\"#tmm-banner-detail-head\"));\r\n    $$(\"#tmm-banner-hotel-detail-content\").css('display', 'block');\r\n    \r\n    item.clickSwiperDetail();\r\n  },\r\n\r\n  hideBannerItemView: function() {\r\n    if($$('body').find(\".modal\").hasClass(\"modal-in\")){\r\n      $$('body').find(\".modal\").remove();\r\n      $$(\".tmm-banner-detail\").css(\"z-index\", '11000');\r\n      $$(\".closeDeleteModal\").css(\"z-index\", '13000');\r\n    }\r\n    \r\n    $$('body').find(\".delete\").css('display', 'none');\r\n    $$(\"#tmm-banner-hotel-detail-content\").css('display', 'none');\r\n    $$(\"#tmm-banner-detail-content\").css('display', 'none');\r\n    $$(\".tmm-banner-detail-show\").removeClass('modal-overlay-visible');\r\n    $$(\".tmm-banner-detail-show\").remove();\r\n    $$(\".tmm-swiper-pagination\").removeClass('swiper-pagination');\r\n    $$(\".swiper-pagination-bullet\").removeClass('swiper-pagination-bullet-active');\r\n  },\r\n  callContentPhone: function(){\r\n    \r\n    $$(\".tmm-banner-detail\").css(\"z-index\", '10009');\r\n    $$(\".closeDeleteModal\").css(\"z-index\", '10010');  \r\n    if($$('body').find(\".modal-overlay\").hasClass('tmm-banner-detail-show')){\r\n      $$('body').find(\".modal-overlay\").removeClass('tmm-banner-detail-show')\r\n    }\r\n\r\n    var phone = $$(this).attr(\"data-phone\");\r\n    var callphone = phone.replace(/-/g, \"\");\r\n    appFunc.detailCallService(phone,callphone);\r\n  },\r\n\r\n  shareMsg : function() {\r\n    var title = $$(this).attr(\"data-title\");\r\n    var description = $$(this).attr(\"data-desc\");\r\n    var thumb_url = $$(this).attr(\"data-img\");\r\n    var type = $$(this).attr(\"data-type\");\r\n    var id = $$(this).attr(\"data-id\");\r\n    var webpageUrl = httpService.apiUrl + '/index.php?r=site/share&share='+id+'&type='+2;\r\n    appFunc.shareMsg(title, description, thumb_url, webpageUrl);\r\n\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '.views',\r\n      selector: '#tmm-hotel-mask',\r\n      event: 'click',\r\n      handler: item.hideMapItemView\r\n    }, {\r\n      element: 'body',\r\n      selector: '#showmoreMap',\r\n      event: 'click',\r\n      handler: item.showMapItemView\r\n    }, {\r\n      element: '.views',\r\n      selector: '#tmm-hotel-infor-top',\r\n      event: 'click',\r\n      handler: item.showBannerHotelItemView\r\n    }, {\r\n      element: '.views',\r\n      selector: '#tmm-infor-top',\r\n      event: 'click',\r\n      handler: item.showBannerItemView\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-div-content-phone',\r\n      event: 'click',\r\n      handler: item.callContentPhone\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-banner-detail-show',\r\n      event: 'click',\r\n      handler: item.hideBannerItemView\r\n    }, {\r\n      element: 'html',\r\n      selector: '.closeDeleteModal',\r\n      event: 'click',\r\n      handler: item.hideBannerItemView\r\n    }, { //分享\r\n      element: 'html',\r\n      selector: '.tmm-deta-share',\r\n      event: 'click',\r\n      handler: item.shareMsg\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = item;\r\n"},{"id":31,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","name":"./src/modules/item/item-detail.tpl.html","index":31,"index2":28,"size":7712,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":30,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","module":"./src/modules/item/item.js","moduleName":"./src/modules/item/item.js","type":"cjs require","userRequest":"./item-detail.tpl.html","loc":"11:18-51"}],"source":"module.exports = \"<!-- 点的详情页面 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">{{itemObj.name}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n       <a href=\\\"#\\\" class=\\\"tmm-infor-top\\\" id=\\\"tmm-infor-top\\\">\\r\\n        <img src=\\\"\" + require(\"../../styles/images/infor.png\") + \"\\\" />\\r\\n      </a> \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"item-detail\\\" class=\\\"page tmm-item-detail\\\">\\r\\n  \\t\\r\\n  <!--分享项目-->\\r\\n      <a id=\\\"tmm-item-share\\\">\\r\\n\\t      <div class=\\\"tmm-deta-share\\\" data-id=\\\"{{itemObj.value}}\\\" data-type=\\\"{{itemObj.item_type.value}}\\\" data-title=\\\"{{itemObj.name}}\\\" data-img=\\\"{{itemObj.img}}\\\" data-desc=\\\"{{itemObj.address}}\\\">\\r\\n\\t      \\t<div class=\\\"tmm-item-can\\\">\\r\\n\\t\\t  \\t\\t\\t<div class=\\\"share-img\\\"><img src=\\\"\" + require(\"../../styles/images/share.png\") + \"\\\" /></div>\\r\\n\\t\\t  \\t\\t  <div class=\\\"share-font\\\">分享项目</div>\\r\\n\\t      \\t</div>\\r\\n\\t      </div>\\r\\n      </a>\\r\\n  \\r\\n    <div class=\\\"page-content tmm-item-on-scroll\\\">\\r\\n    \\t<!--\\r\\n        \\t作者：1397522529@163.com\\r\\n        \\t时间：2015-12-01\\r\\n        \\t描述：\\r\\n      -->\\r\\n      <div id=\\\"tmm-banner-detail-content\\\" style=\\\"display:none\\\">\\r\\n        <!--添加的内容-->  \\r\\n            <div class=\\\"tmm-common-detail-cards\\\">\\r\\n              <div class=\\\"card-detail demo-card-header-pic\\\">\\r\\n                <div class=\\\"card-header color-white no-border\\\">\\r\\n                  <!--图片滚动-->\\r\\n                  <div data-pagination=\\\".swiper-pagination\\\" class=\\\"swiper-container\\\">\\r\\n                    <div class=\\\"swiper-pagination tmm-swiper-pagination\\\"></div>\\r\\n                    <div class=\\\"swiper-wrapper\\\">\\r\\n                      {{#each itemObj.img_arr}}\\r\\n                        <div class=\\\"swiper-slide\\\">\\r\\n                          <img data-src=\\\"{{this}}\\\" src=\\\"{{this}}\\\"  class=\\\"bg\\\">\\r\\n                        </div>\\r\\n                      {{/each}}\\r\\n                    </div>\\r\\n                  </div>\\r\\n                 <!--图片滚动-->\\r\\n                </div>\\r\\n                <div class=\\\"card-content\\\">\\r\\n                  <div class=\\\"list-block media-list\\\">\\r\\n                    <ul>\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">开放时间</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content\\\">\\r\\n                            <div class=\\\"content\\\">{{itemObj.start_work}} - {{itemObj.end_work}}</div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">地址</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content\\\">\\r\\n                            <div class=\\\"content\\\">\\r\\n                              {{itemObj.address}}\\r\\n                              {{#if this.itemObj.distance}}\\r\\n                                <div class=\\\"location\\\" id=\\\"showmoreMap\\\" data-lng=\\\"{{itemObj.lng}}\\\" data-lat=\\\"{{itemObj.lat}}\\\" data-address=\\\"{{itemObj.address}}\\\" data-city=\\\"{{itemObj.address_arr.city}}\\\">\\r\\n                                  <img src=\\\"\" + require(\"../../styles/images/location.png\") + \"\\\">\\r\\n                                  <span>{{itemObj.distance}}</span>\\r\\n                                </div>\\r\\n                              {{/if}}\\r\\n                            </div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">联系电话</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content tmm-div-content-phone\\\"  data-phone=\\\"{{itemObj.phone}}\\\">\\r\\n                            <div class=\\\"content\\\">\\r\\n                              <img src=\\\"\" + require(\"../../styles/images/detailPhone.png\") + \"\\\" class=\\\"tmm-detail-phone\\\">\\r\\n                              <span class=\\\"tmm-detail-phone-txt\\\">{{itemObj.phone}}</span>\\r\\n                            </div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">微信</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content\\\">\\r\\n                            <div class=\\\"content\\\">{{itemObj.weixin}}</div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      <!-- 免费 -->\\r\\n                      {{#js_compare \\\"this.itemObj.free_status.value =='0'\\\"}}\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">费用</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content\\\">\\r\\n                            <div class=\\\"content\\\">免费</div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      {{/js_compare}}\\r\\n                      <!-- 收费 -->\\r\\n                      {{#js_compare \\\"this.itemObj.free_status.value =='1'\\\"}}\\r\\n                      <li class=\\\"item-content\\\">\\r\\n                        <div class=\\\"item-inner\\\">\\r\\n                          <div class=\\\"div_name\\\">\\r\\n                            <div class=\\\"name\\\">费用</div>\\r\\n                          </div>\\r\\n                          <div class=\\\"div_content\\\">\\r\\n                            <div class=\\\"content\\\">\\r\\n                              {{#each itemObj.fare}}\\r\\n                              <div class=\\\"fee\\\">\\r\\n                                <ul>\\r\\n                                  <li>{{name}}</li>\\r\\n                                  <li>{{info}}</li>\\r\\n                                  <li>{{price}} 元</li>\\r\\n                                </ul>\\r\\n                              </div>\\r\\n                              {{/each}}\\r\\n                            </div>\\r\\n                          </div> \\r\\n                        </div>\\r\\n                      </li>\\r\\n                      {{/js_compare}}\\r\\n                    </ul>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n        <!--添加的内容-->\\r\\n      </div>\\r\\n\\r\\n      <!-- 内容添加 -->\\r\\n      <div class=\\\"edit_content\\\">\\r\\n        {{itemObj.content}}\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"tmm-more-map\\\" id=\\\"tmm-hotel-map\\\" style=\\\"display:none\\\">\\r\\n      <div class=\\\"tmm-more-title\\\">{{itemObj.address}}</div>\\r\\n      <img src=\\\"{{itemObj.map}}\\\">\\r\\n    </div>\\r\\n    <div class=\\\"tmm-bg-mask\\\" id=\\\"tmm-hotel-mask\\\" style=\\\"display:none\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":32,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\infor.png","name":"./src/styles/images/infor.png","index":32,"index2":24,"size":1397,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":31,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","module":"./src/modules/item/item-detail.tpl.html","moduleName":"./src/modules/item/item-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/infor.png","loc":"1:441-481"},{"moduleId":36,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-hotel-detail.tpl.html","module":"./src/modules/item/item-hotel-detail.tpl.html","moduleName":"./src/modules/item/item-hotel-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/infor.png","loc":"1:449-489"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAADXElEQVRYw9WYS2gUQRCGv15DVBREbyJ6EJ8YMBF8oBI1njR6CioNSkMiohFBUEEPegl4EBQUNCoEbBNsAnoQF4OXICi+DmokkoDJRfGqBB+QgLaHqYntuNk83NmNPwxbXVU9+231bE3PKERem3LgIKCBCmAm41cfsE0525cr6LWpAfYANcACcb8HOoF25Wxnco6SifOALFA5AaikjitnzyfAlgHNwOZR5j4EDilne2NHRipXKLh+4G4Crhp4PgY4JOeF12bTcAW9NkeASzIeAk4AbcrZT/9K67VZKnCzgvNfBRzQLb4KosvqIFAuvgFgnXK2V3ltngLrJHBUOXuxAJXEa6OAR8AGcX0EdihnX4+QX0m0kvPE9QTYmAFWBXmthYATbQ3ghvLBAUisFhgU13pgayYoK4VY1kC7A/taPrjg+7uA6+E5ygoIlNSWwL4VBrw224AWGTYoZzsSuUfErsmkCLggsF8mYi3AXDlaErFXgT0/TcBvgT09T55KjKcF9o+8S+y18WOlUc4mv6gPWC12NXAviO0nqtwP4EBiXnVgv03zGrwfADaEgMrZ+0TLm0v1gZ1Nc4nbgXgFauV2l1eSsyMeAu15K5hj2cYs5WyP1yYL7ATKgCZg1yjTmiQXIKuc7U2zggBngyrWyX15pOptAuqC6p0FSBVQOfsMuB0PgSuyOUnClQOX+f2PviNz0wUUHQO+iL0COJMj57TEkNxjcSB1QOXsB+Bk4DrptYk3J3ht1gKngvgp5ez7eJBmmwnVTLSl2ghMAW56baokdlN8AI8ld1gFa9Q5KqcC23tt6olueTOBxUTXHMAS+fwK1Ctnf4bnKcY1GEO+AxoDl5EjVqPk/KGiAQpkK3AjR+iGxP5Sao06jw4DVcBKGXeJb1hem0VEDf5eUSsoP/o7UUMekKNOfKEeABeAjqIDCmQ/sBfYK3ZSC+VzUbHaTC7I7FjySlLB8WjSA6bWqMejfN1i0ldw0gOWolGPS5O+gv8F4FA88NrMKTVQguFrhj9fS+wrNSDRQ32s7jKilzXxFvyc9L5W5eznYlJ5bWZLgZoCt1Nem6lEb0FXTujM6ekNsCajnB0kenH4utREgbqA7crZweE+J8+mh4i2QcuBGUWG+gb0AG1As3J2COAXivf/Axu91JsAAAAASUVORK5CYII=\""},{"id":33,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\share.png","name":"./src/styles/images/share.png","index":33,"index2":25,"size":733,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":31,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","module":"./src/modules/item/item-detail.tpl.html","moduleName":"./src/modules/item/item-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/share.png","loc":"1:1054-1094"},{"moduleId":36,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-hotel-detail.tpl.html","module":"./src/modules/item/item-hotel-detail.tpl.html","moduleName":"./src/modules/item/item-hotel-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/share.png","loc":"1:1082-1122"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAABaklEQVRYw+2XvUrDUBiGE7EdC91asEhLK646dNJ76No7kVxLB139W9VBL0LwEsQttqGDg/Rx8D0a9URO9CS1mBcCJ9/vk3MI+RIElUoQsAfsL5vDwIyBJ13jZcNEwIJ3LYBoGSA1YCKI5xSQWU+AWlkwDeBKjefAKAU0kg3FNIqG6QC3avgADGUHQOuhfCi2UxTMLnCvRndAN+V7A9J9VzEoZ8c3TAtI1OAaaH7yfwCSrQncyJUALd9QEXAI1C2+L0Cy14Ej4MArjIqHQJjhswKZPO8wDrCZQHm1Vjr9T4CAPnAKTLHItTh2TVW771qkB8R8o6zGjkBGMdBzATpRwiXQzrMTjrFt1QY4dkmYKXgz79HkiN8wx+e9uO+c1XjLKqAKaJWB1n0UCcPQ2xf9z+1QBVQB/QugeRC8/voU1TQ1ZyUuweeaDC5cB7S8MKoNcOaSsA08UrxiYMv1KQYaxGe/62mVGfIHtt4vpvETYdAmjh4AAAAASUVORK5CYII=\""},{"id":34,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\location.png","name":"./src/styles/images/location.png","index":34,"index2":26,"size":1441,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":31,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","module":"./src/modules/item/item-detail.tpl.html","moduleName":"./src/modules/item/item-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/location.png","loc":"1:3726-3769"},{"moduleId":36,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-hotel-detail.tpl.html","module":"./src/modules/item/item-hotel-detail.tpl.html","moduleName":"./src/modules/item/item-hotel-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/location.png","loc":"1:3623-3666"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABVlBMVEUAAAAAev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8Aev8AAACQc7GdAAAAcHRSTlMAI3q65Pnz2HsksP0lXPf4plgnDKVpgaIehGZkZS5fH4vS9LuXcfuWMO8Qf5gtfi+HkvxUx0agk0XrGOUy4xcCE+4x6VVScKn2HXgRmpUqIJyqnfFB2gkIBokzOTfbhc6fnmJhXvXdD9yhCs8h7SJCnQWAfwAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAGjSURBVDjLtZNXU8JAFIWPZVETBQVR7GKJiD12LNhQ7F2xYu/l/P8nAzGDG4LMOON52L1f5pud3bsb4H9SUFhULFwlRaUFOZUyReV3VKXc2alw01NZ5fX5vFXVHrr9Tk4NWRuwIFBL1mU79RQNP7lBsNHuNAk2G1NLa7CtLdjaYpTNFE02qZ0dxtgpSE0jRacBXWyXnRC7w0AP1d4+oK9XZT8Q7uaAJA1yyDB1fdjEYV0PAUMclKQRjgJjHLd4nNXABEckaZIRYIrTFk9zBpjlpCSpjALknMVzFECUqiTNmystWLyQWinCRVsHlmx7qgRith4sU0mfLmZiLH26FS5LUjguVoG1TJ/WgFURX5e7ucEue8c3uWG7li3Vsy3fXcCtbtlveIe78odd7mU9lcg+D37yAfcjWZKx68OjDB0fpvaelUSQJxk6YTDhIOFU08+s+lzXTuGYOl74zMp3wUtnB4kkr8zqmslEDgleF29S8y1dXuTMHePGQwjdp3+KnLniQ/jxic+/OXhJUlH4+vKrhLd3cv4DefKpaZ/5HMDvz+/8OV/4i1SNXh/zkQAAAABJRU5ErkJggg==\""},{"id":35,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\detailPhone.png","name":"./src/styles/images/detailPhone.png","index":35,"index2":27,"size":1337,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":31,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-detail.tpl.html","module":"./src/modules/item/item-detail.tpl.html","moduleName":"./src/modules/item/item-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/detailPhone.png","loc":"1:4546-4592"},{"moduleId":36,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-hotel-detail.tpl.html","module":"./src/modules/item/item-hotel-detail.tpl.html","moduleName":"./src/modules/item/item-hotel-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/detailPhone.png","loc":"1:4382-4428"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAADLklEQVRIx7XXXcgWRRTA8d8rahaZrJVdREr0nUUZYdgnyoCtmISYN10YSJhQURZoRZhF2YcWiIVlahFEgYl10WRuEWRCYhdRiGYQQiSZNH1YFlhvFzsP7/LwqG+179zszDlnzn/Pmdk5s30arayKPgTMwdU4C7NjSB9quQ1vQE/C2xncbI+idfCwRn9Zhn6PBzEVP+KasiqmDAm4rIrLcA/+wswY0vIY0kd4IdstHqqIl6nTvjqGtLOhX4XDuKmsiotaBZdVMRGz8BueaCpjSD/glfyCi9qO+Fb04bUY0oEeNgfz8+K2wTNz//VuZVkVk9Tr24+H2gZfkPs7uqAn4FWMxKq82VoF/577RZfuEVyKr/BAm9AO+LPcn9wV7cI8XBNDOjwU4K25f2NHGEP6E0vycElZFacNBXhT7s8uq2J4Q/ciPsA4PN86OIa0F5/jDAM7XAypH7fjV8wtq2Ju2xHDuvy8v6mMIX3TkL1UVsV5bYM3GCgI07ts1uItjMGmsirGtAaOIR3C8ixbWVbFiEbU/ZiPL3AJtuQS2krEsFr9zU40sKM78J8xA/twFbaWVVEMFtKr9TUHZVVMVe/kI7guhvRpl/6crJ+AL9W3k73/G5ydr8B9+BaTY0j7u/RnYkvOzC+YH0Pa2MPPterl240VMaQ9xwOPxPu4ATsRcqqbNidjPW7JojdxZwzpYFkVo/CYuox2lvJvvINnYkjbe4Kz49OxHediG2bFkFIPu4V4CqNxAI9jgbqEHsHTOBXzMCpP+xhLe4Kz0/HZaDx2YUYMaV8Pu7PxMqY1xLswr3ObKatiHO5Wn/9jceio4DxhQk77+diPOZ1Uddn14Y68pmvxcAzpjx52U3Im9xwT3Ej7RlyvvgyuxNKjOD7xWJWsrIrFeBIbjgvOE0bkaBap98Vu3BtDem+Q84fhNjyHUzBjUOCGg2lYg86ZvQ3P4t1cSnstwXT1JXJSFq+PIc3/V+DsbBTuUp9uY7P4J2xWl9gd6jvazerNdHm2+Vq99m9wlM9pkC8wWn2GL8CFxzD9Tv0btC6GdKQj/M/grpe4EqX6t+eK7PcT9WVxc69l+AffZQfMO/q8tAAAAABJRU5ErkJggg==\""},{"id":36,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item-hotel-detail.tpl.html","name":"./src/modules/item/item-hotel-detail.tpl.html","index":36,"index2":29,"size":8328,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":30,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\item\\item.js","module":"./src/modules/item/item.js","moduleName":"./src/modules/item/item.js","type":"cjs require","userRequest":"./item-hotel-detail.tpl.html","loc":"12:19-58"}],"source":"module.exports = \"<!-- 点的详情页面 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">{{itemObj.name}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n\\t     <a href=\\\"#\\\" class=\\\"tmm-infor-top\\\" id=\\\"tmm-hotel-infor-top\\\">\\r\\n\\t        <img src=\\\"\" + require(\"../../styles/images/infor.png\") + \"\\\" />\\r\\n\\t      </a> \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"item-hotel-detail\\\" class=\\\"page tmm-item-detail\\\">\\r\\n  \\t\\r\\n  \\t\\r\\n\\t\\t\\t<!--分享项目-->\\r\\n      <a id=\\\"tmm-item-share\\\">\\r\\n\\t      <div class=\\\"tmm-deta-share\\\" data-id=\\\"{{itemObj.value}}\\\" data-type=\\\"{{itemObj.item_type.value}}\\\" data-title=\\\"{{itemObj.name}}\\\" data-img=\\\"{{itemObj.img}}\\\" data-desc=\\\"{{itemObj.address}}\\\">\\r\\n\\t      \\t<div class=\\\"tmm-item-can\\\">\\r\\n\\t\\t  \\t\\t\\t<div class=\\\"share-img\\\"><img src=\\\"\" + require(\"../../styles/images/share.png\") + \"\\\" /></div>\\r\\n\\t\\t  \\t\\t  <div class=\\\"share-font\\\">分享项目</div>\\r\\n\\t      \\t</div>\\r\\n\\t      </div>\\r\\n      </a>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n  \\t\\r\\n    <div class=\\\"page-content tmm-item-on-scroll\\\">\\r\\n    \\t\\r\\n    \\t<!-- 作者：1397522529@163.com\\r\\n    \\t时间：2015-12-01\\r\\n    \\t描述： -->\\r\\n      <div id=\\\"tmm-banner-hotel-detail-content\\\" style=\\\"display:none\\\">\\r\\n        <!--添加的内容-->\\r\\n\\r\\n        <div class=\\\"tmm-common-detail-cards\\\">\\r\\n          <div class=\\\"card-detail demo-card-header-pic\\\">\\r\\n            <div class=\\\"card-header color-white no-border\\\">\\r\\n              <!--图片滚动-->\\r\\n              <div data-pagination=\\\".swiper-pagination\\\" class=\\\"swiper-container\\\">\\r\\n                <div class=\\\"swiper-pagination tmm-swiper-pagination\\\"></div>\\r\\n                <div class=\\\"swiper-wrapper\\\">\\r\\n                  {{#each itemObj.img_arr}}\\r\\n                    <div class=\\\"swiper-slide\\\">\\r\\n                      <img data-src=\\\"{{this}}\\\" src=\\\"{{this}}\\\"  class=\\\"bg\\\">\\r\\n                    </div>\\r\\n                  {{/each}}\\r\\n                </div>\\r\\n              </div>\\r\\n             <!--图片滚动--> \\r\\n              \\r\\n            </div>\\r\\n            <div class=\\\"card-content\\\">\\r\\n              <div class=\\\"list-block media-list\\\">\\r\\n                <ul>\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">开放时间</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        <div class=\\\"content\\\">{{itemObj.start_work}} - {{itemObj.end_work}}</div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">地址</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        <div class=\\\"content\\\">\\r\\n                          {{itemObj.address}}\\r\\n                          {{#if this.itemObj.distance}}\\r\\n                            <div class=\\\"location\\\" id=\\\"showmoreMap\\\" data-lng=\\\"{{itemObj.lng}}\\\" data-lat=\\\"{{itemObj.lat}}\\\" data-address=\\\"{{itemObj.address}}\\\" data-city=\\\"{{itemObj.address_arr.city}}\\\">\\r\\n                              <img src=\\\"\" + require(\"../../styles/images/location.png\") + \"\\\">\\r\\n                              <span>{{itemObj.distance}}</span>\\r\\n                            </div>\\r\\n                          {{/if}}\\r\\n                        </div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">联系电话</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content tmm-div-content-phone\\\" data-phone=\\\"{{itemObj.phone}}\\\">\\r\\n                        <div class=\\\"content\\\">\\r\\n                          <img src=\\\"\" + require(\"../../styles/images/detailPhone.png\") + \"\\\" class=\\\"tmm-detail-phone\\\">\\r\\n                          <span class=\\\"tmm-detail-phone-txt\\\">{{itemObj.phone}}</span>\\r\\n                        </div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">微信</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        <div class=\\\"content\\\">{{itemObj.weixin}}</div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  <!-- 免费 -->\\r\\n                  {{#js_compare \\\"this.itemObj.free_status.value =='0'\\\"}}\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">费用</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        <div class=\\\"content\\\">免费</div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  {{/js_compare}}\\r\\n                  <!-- 收费 -->\\r\\n                  {{#js_compare \\\"this.itemObj.free_status.value =='1'\\\"}}\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">费用</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        <div class=\\\"content\\\">\\r\\n                          {{#each itemObj.fare}}\\r\\n                          <div class=\\\"fee\\\">\\r\\n                            <ul>\\r\\n                              <li>{{name}}</li>\\r\\n                              <li>{{info}} m<sup>2</sup></li>\\r\\n                              <li>{{room number}}</li>\\r\\n                              <li>{{price}} 元</li>\\r\\n                            </ul>\\r\\n                          </div>\\r\\n                          {{/each}}\\r\\n                        </div>\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n                  {{/js_compare}}\\r\\n                  <li class=\\\"item-content\\\">\\r\\n                    <div class=\\\"item-inner\\\">\\r\\n                      <div class=\\\"div_name\\\">\\r\\n                        <div class=\\\"name\\\">酒店服务</div>\\r\\n                      </div>\\r\\n                      <div class=\\\"div_content\\\">\\r\\n                        {{#each itemObj.wifi}}\\r\\n                        <div class=\\\"hotel_content\\\">{{name}}</div>\\r\\n                        {{/each}}\\r\\n                      </div> \\r\\n                    </div>\\r\\n                  </li>\\r\\n\\r\\n                </ul>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <!--添加的内容-->\\r\\n      </div>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\r\\n      <!-- 内容添加 -->\\r\\n      <div class=\\\"edit_content\\\">\\r\\n        {{itemObj.content}}\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- <div class=\\\"popover popover-about\\\">\\r\\n      <div class=\\\"popover-angle\\\"></div>\\r\\n      <div class=\\\"popover-inner\\\">\\r\\n        <div class=\\\"content-block\\\">\\r\\n          <p>{{itemObj.address}}</p>\\r\\n          <div>\\r\\n            <img src=\\\"{{itemObj.map}}\\\">\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div> -->\\r\\n     <div class=\\\"tmm-more-map\\\" id=\\\"tmm-hotel-map\\\" style=\\\"display:none\\\">\\r\\n      <div class=\\\"tmm-more-title\\\">{{itemObj.address}}</div>\\r\\n      <img src=\\\"{{itemObj.map}}\\\">\\r\\n    </div>\\r\\n    <div class=\\\"tmm-bg-mask\\\" id=\\\"tmm-hotel-mask\\\" style=\\\"display:none\\\"></div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\";"},{"id":37,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\role\\role.js","name":"./src/modules/role/role.js","index":37,"index2":37,"size":1478,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../role/role","loc":"6:15-38"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../role/role","loc":"5:15-38"},{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"../role/role","loc":"8:15-38"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"../role/role","loc":"8:15-38"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"../role/role","loc":"7:15-38"},{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"../role/role","loc":"14:15-38"},{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"../role/role","loc":"6:15-38"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../role/role","loc":"8:15-38"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"../role/role","loc":"6:15-38"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../role/role","loc":"19:15-38"},{"moduleId":160,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\tmmSdk.js","module":"./src/modules/app/tmmSdk.js","moduleName":"./src/modules/app/tmmSdk.js","type":"cjs require","userRequest":"../role/role","loc":"3:15-38"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  loginModule = require('../login/login');\r\n\r\nvar role = {\r\n  init: function() {\r\n    log.info('role init....');\r\n    role.getUserInfo();\r\n  },\r\n  getUserInfo: function() {\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          log.info('main getUserInfo....', dataRes);\r\n          var userInfo = {\r\n            'phone': dataRes.data.userInfo.phone,\r\n            'gender': dataRes.data.userInfo.gender,\r\n            'is_organizer': dataRes.data.userInfo.is_organizer,\r\n            'organizer_status': dataRes.data.userInfo.organizer.status\r\n          };\r\n          appFunc.setLocalUserInfo(userInfo);\r\n        } else {\r\n          appFunc.clearLocalUserInfo();\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        appFunc.clearLocalUserInfo();\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n      }\r\n    );\r\n  },\r\n  goToLogin: function() {\r\n    tmmApp.getCurrentView().router.back({animatePages:false});\r\n    tmmApp.showTab('#myView');\r\n    loginModule.loginView();\r\n  },\r\n  redirectToLogin: function() {\r\n    loginModule.loginView();\r\n  },\r\n  isLogin: function(callback) {\r\n    var phone = localStorage.getItem('TmmUserInfo');\r\n    if (phone) {\r\n      return true;\r\n    } \r\n    return false;\r\n  }\r\n};\r\n\r\nmodule.exports = role;\r\n"},{"id":38,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","name":"./src/modules/login/login.js","index":38,"index2":36,"size":2963,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./login/login","loc":"11:16-40"},{"moduleId":37,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\role\\role.js","module":"./src/modules/role/role.js","moduleName":"./src/modules/role/role.js","type":"cjs require","userRequest":"../login/login","loc":"4:16-41"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../login/login","loc":"4:16-41"},{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../login/login","loc":"5:16-41"},{"moduleId":104,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","module":"./src/modules/modifyPhone/modifyPhone.js","moduleName":"./src/modules/modifyPhone/modifyPhone.js","type":"cjs require","userRequest":"../login/login","loc":"5:16-41"},{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"../login/login","loc":"6:16-41"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  login_template = require('./login.tpl.html'),\r\n  accLoginModule = require('../accLogin/accLogin'),\r\n  mobLoginModule = require('../mobLogin/mobLogin');\r\n\r\nvar login = {\r\n  init: function() {\r\n    // appFunc.hideNavbar();\r\n    appFunc.hideToolbar();\r\n    log.info('login init....');\r\n    //login.getUserInfo();\r\n    login.bindEvent();\r\n  },\r\n  isLogin: function() {\r\n    var isLogin = false;\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          isLogin = true;\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n    return isLogin;\r\n  },\r\n  getUserInfo: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n          log.info('tmmApp.getCurrentView()...', tmmApp.getCurrentView());\r\n          //homeF7View.router.loadPage('tpls/my.html');\r\n          //tmmApp.getCurrentView().router.load({pageName: 'myView'});\r\n          //tmmApp.getCurrentView().back();\r\n          //tmmApp.showTab('#myView');\r\n          //tmmApp.showTab('#myView');\r\n          //tmmApp.getCurrentView().loadPage('tpls/my.html');\r\n\r\n\r\n          setTimeout(function() {\r\n            //tmmApp.getCurrentView().back();\r\n            //$$('#myView').find(\".page[data-page='login']\").remove();\r\n            //$$('#myView').find(\".page[data-page='myView']\").removeClass('page-on-left');\r\n            //$$('#myView').find(\".page[data-page='myView']\").addClass('page-on-center');\r\n            //appFunc.showToolbar();\r\n            //tmmApp.showTab('#myView');\r\n          }, 1000);\r\n\r\n        }\r\n\r\n        // 调用视图模型的getRecommendList方法进行渲染视图\r\n        //VM.module('myView').getUserInfo(dataRes);\r\n        // 已经登录\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method loginView\r\n   * @description 显示登录页面\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T10:29:03+0800\r\n   */\r\n  loginView: function() {\r\n    login.init();\r\n    var output = appFunc.renderTpl(login_template, {});\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.tmm-acc-login',\r\n      event: 'click',\r\n      handler: accLoginModule.loginView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-mob-login',\r\n      event: 'click',\r\n      handler: mobLoginModule.loginView\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = login;\r\n"},{"id":39,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.tpl.html","name":"./src/modules/login/login.tpl.html","index":39,"index2":31,"size":652,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"./login.tpl.html","loc":"4:19-46"}],"source":"module.exports = \"<div class=\\\"navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"login\\\" class=\\\"page no-navbar no-toolbar\\\">\\r\\n    <div class=\\\"page-content tmm-login-page\\\">\\r\\n      <nav class=\\\"tmm-login\\\">\\r\\n        <a class=\\\"tmm-acc-login\\\" href=\\\"javascript:;\\\">帐号密码登录</a>\\r\\n        <a class=\\\"tmm-mob-login\\\" href=\\\"javascript:;\\\">手机号快捷登录</a>\\r\\n      </nav>\\r\\n      <div class=\\\"tmm-bg-img\\\"></div>\\r\\n        <a href=\\\"#\\\"  data-reload=\\\"true\\\" class=\\\"close back\\\">\\r\\n            <i class=\\\"icon ticon-close\\\"></i>\\r\\n        </a>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":40,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","name":"./src/modules/accLogin/accLogin.js","index":40,"index2":33,"size":4673,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./accLogin/accLogin","loc":"12:19-49"},{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"../accLogin/accLogin","loc":"5:19-50"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  acc_login_template = require('./acc-login.tpl.html');\r\n\r\n/**\r\n * CSRF检验码\r\n * @type {String}\r\n */\r\nvar g_csrf = '';\r\n/**\r\n * 验证码HASH值\r\n * @type {String}\r\n */\r\nvar g_hash = '';\r\n/**\r\n * 验证码错误的次数，3次错误后刷新\r\n * @type {Number}\r\n */\r\nvar verifycodeError = 3;\r\n\r\n/**\r\n * @name accLogin\r\n * @description 帐号密码登录控制器\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-10-27T11:36:30+0800\r\n */\r\nvar accLogin = {\r\n  init: function() {\r\n    appFunc.hideToolbar();\r\n    log.info('accLogin init....');\r\n    accLogin.bindEvent();\r\n    // accLogin.refresh();\r\n  },\r\n  /**\r\n   * @method loginSubmit\r\n   * @description 登录函数\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:04:28+0800\r\n   */\r\n  loginSubmit: function() {\r\n    var loginName = $$('#tmm-phone').val();\r\n    var password = $$('#tmm-password').val();\r\n    var verifycode = $$('#tmm-verifycode').val();\r\n    if (!appFunc.isPhone(loginName)) {\r\n      tmmApp.alert('手机号码格式不对');\r\n    } else if (!appFunc.validatePassword(password)) {\r\n      tmmApp.alert('密码必须有数字和字母组合！');\r\n    // } else if (verifycode == '') {\r\n      // tmmApp.alert('验证码不能为空');\r\n    // } else if (! appFunc.validateVerifyCodeHash(verifycode, g_hash)) {\r\n      // tmmApp.alert('验证码不正确');\r\n      // accLogin.refresh();\r\n    } else {\r\n      // 要发送的表单数据\r\n      var data = {\r\n        \"UserLoginForm\": {\r\n          \"phone\": loginName,\r\n          \"password\": password\r\n          // \"verifyCode\": g_hash\r\n        }\r\n      };\r\n\r\n      tmmApp.showPreloader('正在登录...');\r\n      // 发送登录请求\r\n      httpService.post(\r\n        httpService.apiAcclogin,\r\n        data,\r\n        function(dataRes, statusCode) {\r\n          if (dataRes.status == 1) {\r\n            // 隐藏错误信息提示栏\r\n            $$('.tmm-showMsg-li').hide();\r\n            // 正确后，请求到我的模块主页\r\n            appFunc.setLocalUserInfo(dataRes.data.phone);\r\n            // ios同步有赞帐号回调\r\n            appFunc.freshLoginCallback(dataRes.data.phone);\r\n\r\n            tmmApp.getCurrentView().router.back({'pageName':'myView', 'force': true});\r\n          } else {\r\n            // 验证表单错误时的提示\r\n            if (dataRes.form) {\r\n              for (msgName in dataRes.form) {\r\n                if (msgName == 'UserLoginForm_verifyCode') {\r\n                    accLogin.refresh();\r\n                }\r\n                tmmApp.alert(dataRes.form[msgName][0]);\r\n                break;\r\n              }\r\n            } else {\r\n              tmmApp.alert('输入有误，请重试');\r\n            }\r\n          }\r\n          tmmApp.hidePreloader();\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hidePreloader();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    }\r\n  },\r\n  /**\r\n   * @method refresh\r\n   * @description 刷新验证码\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T11:36:30+0800\r\n   */\r\n  refresh: function() {\r\n    // 重置错误次数\r\n    verifycodeError = 3;\r\n    // 请求获取验证码\r\n    httpService.verifycode(\r\n      function(csrf, dataRes, status) {\r\n        // 把获取到的CSRF检验码赋给g_csrf\r\n        g_csrf = csrf;\r\n        g_hash =  dataRes.hash1;\r\n        // 把图片验证码连接显示到img元素标签上\r\n        $$('.tmm-verifycode-img').attr('src', httpService.apiUrl + dataRes.url);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        log.error('dataRes', dataRes, 'status', status);\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method loginView\r\n   * @description 显示登录页面\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T10:29:03+0800\r\n   */\r\n  loginView: function() {\r\n    accLogin.init();\r\n    // var output = appFunc.renderTpl(acc_login_template, {});\r\n    var data = {\r\n      phone: localStorage.getItem(\"phone\")\r\n    }\r\n    var output = appFunc.renderTpl(acc_login_template, data);\r\n    // 删除缓存中重复的值\r\n    appFunc.removeCachedPage('myView', 'acc-login');\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      //ignoreCache: true,\r\n      animatePages: true\r\n    });\r\n  },\r\n  /**\r\n   * @method showErrorMsg\r\n   * @description 在表单页面上显示错误消息\r\n   * \r\n   * @param    {String} msg 要显示的信息\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T10:26:11+0800\r\n   */\r\n  showErrorMsg: function(msg) {\r\n    $$('.tmm-showMsg-li').show();\r\n    $$('.tmm-showMsg').html(msg);\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '#tmm-acc-login-submit',\r\n      event: 'click',\r\n      handler: accLogin.loginSubmit\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-verifycode-img',\r\n      event: 'click',\r\n      handler: accLogin.refresh\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = accLogin;\r\n"},{"id":41,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\acc-login.tpl.html","name":"./src/modules/accLogin/acc-login.tpl.html","index":41,"index2":32,"size":2485,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":40,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\accLogin\\accLogin.js","module":"./src/modules/accLogin/accLogin.js","moduleName":"./src/modules/accLogin/accLogin.js","type":"cjs require","userRequest":"./acc-login.tpl.html","loc":"4:23-54"}],"source":"module.exports = \"<div class=\\\"navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"acc-login\\\" class=\\\"page no-navbar no-toolbar\\\">\\r\\n    <div class=\\\"page-content tmm-acc-login-page\\\">\\r\\n      <div class=\\\"content-block tmm-acc-icon\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-100\\\">\\r\\n            <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n              <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block inset\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"tmm-showMsg-li\\\" style=\\\"display:none;\\\">\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <div class=\\\"tmm-showMsg\\\"></div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <input type=\\\"tel\\\" id=\\\"tmm-phone\\\" placeholder=\\\"请输入手机号\\\" maxlength=\\\"30\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <input type=\\\"password\\\" id=\\\"tmm-password\\\" placeholder=\\\"请输入密码\\\" value=\\\"\\\" maxlength=\\\"30\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        <!--   <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input tmm-item-input-img\\\">\\r\\n                  <input type=\\\"text\\\" id=\\\"tmm-verifycode\\\" placeholder=\\\"请输入验证码\\\" maxlength=\\\"30\\\">\\r\\n                  <img class=\\\"tmm-verifycode-img\\\" >\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li> -->\\r\\n        </ul>\\r\\n      </div>\\r\\n      <div class=\\\"content-block\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-100\\\">\\r\\n            <a href=\\\"javascript:;\\\" id=\\\"tmm-acc-login-submit\\\" class=\\\"button button-big active tmm-login-submit\\\">\\r\\n              登录\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":42,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","name":"./src/modules/mobLogin/mobLogin.js","index":42,"index2":35,"size":7525,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./mobLogin/mobLogin","loc":"13:19-49"},{"moduleId":38,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\login\\login.js","module":"./src/modules/login/login.js","moduleName":"./src/modules/login/login.js","type":"cjs require","userRequest":"../mobLogin/mobLogin","loc":"6:19-50"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  mob_login_template = require('./mob-login.tpl.html');\r\n\r\n/**\r\n * 定时器\r\n * @type {Object}\r\n */\r\nvar timer = null;\r\n/**\r\n * CSRF检验码\r\n * @type {String}\r\n */\r\nvar g_csrf = '';\r\n/**\r\n * 验证码HASH值\r\n * @type {String}\r\n */\r\nvar g_hash = '';\r\n/**\r\n * 短信倒计等待时间\r\n * @type {Number}\r\n */\r\nvar waitTime = 60;\r\n/**\r\n * 获取短信的标签对象\r\n * @type {Object}\r\n */\r\nvar codeObj = {};\r\n/**\r\n * 验证码错误的次数，3次错误后刷新\r\n * @type {Number}\r\n */\r\nvar verifycodeError = 3;\r\n\r\n\r\n/**\r\n * @name mobLogin\r\n * @description 手机短信登录控制器\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-10-27T11:36:30+0800\r\n */\r\nvar mobLogin = {\r\n  init: function() {\r\n    appFunc.hideToolbar();\r\n    log.info('mobLogin init....');\r\n    mobLogin.bindEvent();\r\n    // mobLogin.refresh();\r\n  },\r\n  /**\r\n   * @method loginSubmit\r\n   * @description 登录函数\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:36:43+0800\r\n   */\r\n  loginSubmit: function() {\r\n    var loginName = $$('#tmm-mob-phone').val();\r\n    var sms = $$('#tmm-mob-sms').val();\r\n    var verifycode = $$('#tmm-mob-verifycode').val();\r\n\r\n    if (!appFunc.isPhone(loginName)) {\r\n      tmmApp.alert('手机号码格式不对');\r\n    // } else if (verifycode == '') {\r\n    //   tmmApp.alert('图形验证码不能为空');\r\n    //   mobLogin.refresh();\r\n    // } else if (!appFunc.validateVerifyCodeHash(verifycode, g_hash)) {\r\n    //   tmmApp.alert('图形验证码不正确');\r\n    //   mobLogin.refresh();\r\n    } else if (sms == '') {\r\n      tmmApp.alert('短信验证码不能为空');\r\n    } else {\r\n      // 要发送的表单数据\r\n      var data = {\r\n          \"UserSmsLoginForm\": {\r\n            \"phone\": loginName,\r\n            \"sms\": sms,\r\n            \"verifyCode\": verifycode\r\n          },\r\n          \"TMM_CSRF\": g_csrf\r\n        }\r\n        // 显示加载图标提示\r\n      tmmApp.showPreloader('正在登录...');\r\n      // 发送登录请求\r\n      httpService.post(\r\n        httpService.api_login_sms,\r\n        data,\r\n        // 成功后的回调函数\r\n        function(dataRes, statusCode) {\r\n          // 隐藏加载图标\r\n          tmmApp.hidePreloader();\r\n          if (dataRes.status == 1) {\r\n            // 隐藏错误信息提示栏\r\n            $$('.tmm-showMsg-li').hide();\r\n            // 正确后，请求到我的模块主页\r\n            appFunc.setLocalUserInfo(dataRes.data.phone);\r\n            // ios同步有赞帐号回调\r\n            appFunc.freshLoginCallback(dataRes.data.phone);\r\n\r\n            tmmApp.getCurrentView().router.back({\r\n              'pageName': 'myView',\r\n              'force': true\r\n            });\r\n          } else {\r\n            // 验证表单错误时的提示\r\n            if (dataRes.form) {\r\n              for (msgName in dataRes.form) {\r\n                if (msgName == 'UserSmsLoginForm_verifyCode') {\r\n                  mobLogin.refresh();\r\n                }\r\n                tmmApp.alert(dataRes.form[msgName][0]);\r\n                break;\r\n              }\r\n            } else {\r\n              tmmApp.alert('输入有误，请重试');\r\n            }\r\n          }\r\n        },\r\n        // 失败后的回调函数\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hidePreloader();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    }\r\n  },\r\n  /**\r\n   * @method sendSms\r\n   * @description 发送手机短信，获取短信验证码\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:39:15+0800\r\n   */\r\n  sendSms: function() {\r\n    var loginName = $$('#tmm-mob-phone').val();\r\n    var verifycode = $$('#tmm-mob-verifycode').val();\r\n    if (!appFunc.isPhone(loginName)) {\r\n      tmmApp.alert('手机号码格式不对');\r\n    // } else if (verifycode == '') {\r\n    //   tmmApp.alert('图形验证码不能为空');\r\n    // } else if (!appFunc.validateVerifyCodeHash(verifycode, g_hash)) {\r\n    //   tmmApp.alert('图形验证码不正确');\r\n    //   mobLogin.refresh();\r\n    } else {\r\n      // 要发送的表单数据\r\n      var data = {\r\n          \"phone\": loginName,\r\n          \"verifyCode\": verifycode,\r\n          \"TMM_CSRF\": g_csrf\r\n        }\r\n        // 发送短信的按钮对象\r\n      codeObj = $$('#tmm-mob-get-code');\r\n      // 发送获取短信验证码请求\r\n      httpService.post(\r\n        httpService.api_login_captcha_sms,\r\n        data,\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hidePreloader();\r\n          if (dataRes.status == 1) {\r\n            // 成功后，60秒倒计时锁定发送按钮\r\n            log.info('sendSms.....sfdsdfsdfsdfsdfsdfsdf');\r\n            mobLogin.getCodeTimeOut();\r\n          } else {\r\n            // 处理表单错误时的提示\r\n            if (dataRes.form) {\r\n              for (msgName in dataRes.form) {\r\n                // 如果是验证码错误\r\n                if (msgName == 'verifyCode') {\r\n                  mobLogin.refresh();\r\n                }\r\n                // 显示错误信息\r\n                tmmApp.alert(dataRes.form[msgName][0]);\r\n                break;\r\n              }\r\n            } else {\r\n              // 其它错误提醒\r\n              tmmApp.alert('输入有误，请重试');\r\n            }\r\n          }\r\n\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hidePreloader();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n\r\n    }\r\n  },\r\n  /**\r\n   * @method getCodeTimeOut\r\n   * @description 60秒倒计时锁定发送短信按钮\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:42:07+0800\r\n   */\r\n  getCodeTimeOut: function() {\r\n    log.info('getCodeTimeOut...', waitTime);\r\n    if (waitTime === 0) {\r\n      // 60秒到后解锁按钮,使其可点击\r\n      codeObj.removeAttr('disabled');\r\n      // 重置文本信息\r\n      codeObj.html('获取验证码');\r\n      // 重置回60秒\r\n      waitTime = 60;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n    } else {\r\n      // 锁定按钮,使其不可点击\r\n      codeObj.attr('disabled', true);\r\n      // 倒计时提示文本\r\n      codeObj.html(waitTime + '秒后重试');\r\n      // 倒计时自减\r\n      waitTime--;\r\n      // 每秒回调\r\n      timer = setTimeout(function() {\r\n        mobLogin.getCodeTimeOut();\r\n      }, 1000);\r\n    }\r\n\r\n  },\r\n  /**\r\n   * @method refresh\r\n   * @description 刷新验证码\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T11:36:30+0800\r\n   */\r\n  refresh: function() {\r\n    // 重置错误次数\r\n    verifycodeError = 3;\r\n    // 请求获取验证码\r\n    httpService.verifycodeSms(\r\n      function(csrf, dataRes, status) {\r\n        // 把获取到的CSRF检验码赋给g_csrf\r\n        g_csrf = csrf;\r\n        g_hash = dataRes.hash1;\r\n        // 把图片验证码连接显示到img元素标签上\r\n        $$('.tmm-verifycode-img').attr('src', httpService.apiUrl + dataRes.url);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        log.error('dataRes', dataRes, 'status', status);\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method loginView\r\n   * @description 显示登录页面\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T10:29:03+0800\r\n   */\r\n  loginView: function() {\r\n    mobLogin.init();\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    var output = appFunc.renderTpl(mob_login_template, {});\r\n    // 删除缓存中重复的值\r\n    appFunc.removeCachedPage('myView', 'mob-login');\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      animatePages: true\r\n    });\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n        element: '#myView',\r\n        selector: '#tmm-mob-login-submit',\r\n        event: 'click',\r\n        handler: mobLogin.loginSubmit\r\n      }, {\r\n        element: '#myView',\r\n        selector: '.tmm-verifycode-img',\r\n        event: 'click',\r\n        handler: mobLogin.refresh\r\n      },\r\n      // 获取短信验证码按钮\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-mob-get-code',\r\n        event: 'click',\r\n        handler: mobLogin.sendSms\r\n      }, {\r\n        element: '#myView',\r\n        selector: '#tmm-mob-login-back',\r\n        event: 'click',\r\n        handler: mobLogin.mobLoginBack\r\n      }\r\n    ];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = mobLogin;\r\n"},{"id":43,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mob-login.tpl.html","name":"./src/modules/mobLogin/mob-login.tpl.html","index":43,"index2":34,"size":2586,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":42,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\mobLogin\\mobLogin.js","module":"./src/modules/mobLogin/mobLogin.js","moduleName":"./src/modules/mobLogin/mobLogin.js","type":"cjs require","userRequest":"./mob-login.tpl.html","loc":"4:23-54"}],"source":"module.exports = \"<div class=\\\"navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"mob-login\\\" class=\\\"page no-navbar no-toolbar\\\">\\r\\n    <div class=\\\"page-content tmm-acc-login-page\\\">\\r\\n      <div class=\\\"content-block tmm-acc-icon\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-100\\\">\\r\\n            <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n              <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block inset\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"tmm-showMsg-li\\\" style=\\\"display:none;\\\">\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <div class=\\\"tmm-showMsg\\\"></div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <input type=\\\"tel\\\" id=\\\"tmm-mob-phone\\\" value=\\\"\\\" placeholder=\\\"请输入手机号\\\" maxlength=\\\"30\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n   <!--        <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input tmm-item-input-img\\\">\\r\\n                  <input type=\\\"text\\\" id=\\\"tmm-mob-verifycode\\\" placeholder=\\\"请输入图形验证码\\\" maxlength=\\\"30\\\">\\r\\n                  <img class=\\\"tmm-verifycode-img\\\">\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li> -->\\r\\n          <li>\\r\\n            <div class=\\\"item-content\\\">\\r\\n              <div class=\\\"item-inner\\\">\\r\\n                <div class=\\\"item-input\\\">\\r\\n                  <input type=\\\"text\\\" id=\\\"tmm-mob-sms\\\" placeholder=\\\"请输入短信验证码\\\" value=\\\"\\\" maxlength=\\\"30\\\">\\r\\n                  <span class=\\\"get-code\\\" id=\\\"tmm-mob-get-code\\\">获取验证码</span>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n      <div class=\\\"content-block\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col-100\\\">\\r\\n            <a href=\\\"javascript:;\\\" id=\\\"tmm-mob-login-submit\\\" class=\\\"button button-big active tmm-login-submit\\\">\\r\\n              登录\\r\\n            </a>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":44,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","name":"./src/modules/shop/dot-detail.tpl.html","index":44,"index2":42,"size":7411,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./dot-detail.tpl.html","loc":"6:17-49"},{"moduleId":65,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","module":"./src/modules/shop/dotManageView.js","moduleName":"./src/modules/shop/dotManageView.js","type":"cjs require","userRequest":"./dot-detail.tpl.html","loc":"11:19-51"}],"source":"module.exports = \"<!-- 点的详情页面 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">景点详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <!-- <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{dotObj.dot_id}}\\\">\\r\\n        {{#if isDotPraise}}\\r\\n          <i class=\\\"icon ticon-praise\\\"></i>\\r\\n        {{else}}\\r\\n          <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n        {{/if}}\\r\\n      </a> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"dot-detail\\\" class=\\\"page tmm-dot-detail\\\">\\r\\n    <div class=\\\"page-content dot-detail-page-content\\\">\\r\\n      <div class=\\\"banner\\\">\\r\\n        <div>\\r\\n          <img class=\\\"lazy\\\" data-src=\\\"{{dotObj.page_img}}\\\" >\\r\\n        </div>\\r\\n        <div class=\\\"mask\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{dotObj.dot_id}}\\\">\\r\\n            {{#if isDotPraise}}\\r\\n              <i class=\\\"icon ticon-praise\\\"></i>\\r\\n              <span>{{dotObj.praise}}</span>\\r\\n            {{else}}\\r\\n              <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n              <span class=\\\"gray\\\">{{dotObj.praise}}</span>\\r\\n            {{/if}}\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-phone\\\" data-manage-phone=\\\"{{dotObj.manage_phone}}\\\" data-tmm-phone=\\\"{{dotObj.tmm_phone}}\\\">\\r\\n            <div><img src=\\\"\" + require(\"../../styles/images/phone.png\") + \"\\\" /></div>\\r\\n            <span>联系</span>\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-share\\\">\\r\\n            <i class=\\\"icon ticon-share\\\" data-tit=\\\"{{dotObj.name}}\\\" data-id=\\\"{{dotObj.dot_id}}\\\" data-con=\\\"{{dotObj.list_info}}\\\"  data-link=\\\"{{#if dotObj.share_image}}{{dotObj.share_image}}{{else}}{{dotObj.list_img}}{{/if}}\\\"></i>\\r\\n            <span>分享</span>\\r\\n          </a>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--新添加内容-->\\r\\n      <div class=\\\"tmm-dot-bottom-bg\\\">\\r\\n        <div class=\\\"list-block tmm-dot-info-list-block\\\">\\r\\n          <ul>\\r\\n            <li class=\\\"item-content item-link show-act-enroll-info\\\"  >\\r\\n              <div class=\\\"item-inner tmm-dot-item-inner\\\">\\r\\n                <div class=\\\"item-title tmm-dot-item-title\\\">\\r\\n             \\r\\n                  <div class=\\\"tmm-item-dot-list\\\">\\r\\n                    <div class=\\\"tmm-item-dot-list-title\\\">\\r\\n                      {{dotObj.name}}\\r\\n\\r\\n                      {{#js_compare \\\"this.dotObj.is_sale.value == 1\\\"}}\\r\\n                      {{#unless isFree}}\\r\\n                      <span class=\\\"tmm-item-dot-sold\\\">已售出{{dotObj.down}}份</span>\\r\\n                      {{/unless}}\\r\\n                      {{/js_compare}}\\r\\n\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-dot-list-price\\\">\\r\\n                        ￥{{dotObj.price}}/人起   \\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-dot-list-intro\\\">\\r\\n                      {{dotObj.page_info}}\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-more\\\">\\r\\n                        <span class=\\\"tmm-item-dot-sold-more\\\">\\r\\n                          <img src=\\\"\" + require(\"../../styles/images/more.png\") + \"\\\" />预订须知\\r\\n                        </span>\\r\\n                    </div>\\r\\n                  </div>\\r\\n               \\r\\n                </div>\\r\\n              </div>\\r\\n            </li>\\r\\n\\r\\n            {{#if dotObj.exterior_link_num}}\\r\\n            <a href=\\\"###\\\" class=\\\"local-specialty\\\">\\r\\n            <li class=\\\"item-content item-link\\\">\\r\\n              <div class=\\\"item-inner tmm-dot-specialty-item\\\">\\r\\n                <div class=\\\"tmm-item-dot-list-specialty\\\">\\r\\n                  <div class=\\\"tmm-item-dot-list-specialty-pic\\\"><img src=\\\"\" + require(\"../../styles/images/specialty.png\") + \"\\\" /></div>\\r\\n                  <div class=\\\"tmm-item-dot-list-specialty-info\\\">\\r\\n                    <div class=\\\"item-title tmm-item-dot-list-specialty-info-title\\\">{{dotObj.exterior_link_num}}种相关特产</div>\\r\\n                    <div class=\\\"item-title tmm-item-dot-list-specialty-info-li\\\">\\r\\n                    {{#each dataListInfo.farmList}}\\r\\n                      <span>{{this.item_name}}</span>\\r\\n                    {{/each}}\\r\\n                     \\r\\n                    </div>\\r\\n                    <div class=\\\"item-after sett-canter-font\\\"></div>\\r\\n                  </div>\\r\\n                </div>   \\r\\n              </div>\\r\\n            </li>\\r\\n            </a>\\r\\n            {{/if}}\\r\\n\\r\\n\\r\\n          </ul>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <!--新添加内容-->\\r\\n\\r\\n      <div class=\\\"wrap-item tmm-item-dot-list-title tmm-retinue-top-border tmm-retinue-bottom-border\\\">该景区项目</div>\\r\\n      <div class=\\\"wrap\\\">\\r\\n\\r\\n<!-- 项目列表 -->\\r\\n{{#each dataListInfo.itemList}}\\r\\n        <section class=\\\"info detail-b-border\\\">\\r\\n          <i class=\\\"icon tmm-type-icon {{js \\\" this.item_type.value==1 ? 'ticon-eat' : (this.item_type.value==2 ? 'ticon-live' : 'ticon-play') \\\"}}\\\"></i>\\r\\n\\r\\n          <h2 class=\\\"tit tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{item_name}}</h2>\\r\\n          <div class=\\\"state tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{item_info}}</div>\\r\\n\\r\\n          <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\"  class=\\\"showmore\\\"><span>●</span><span>●</span><span>●</span></a>\\r\\n\\r\\n \\r\\n          <div class=\\\"img\\\">\\r\\n          <a class=\\\"tmm-img-showmore\\\" href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">\\r\\n            <img class=\\\"lazy lazy-fadein\\\" data-src=\\\"{{item_img}}\\\">\\r\\n          </a>\\r\\n          </div>\\r\\n        </section>\\r\\n{{/each}}\\r\\n      </div>\\r\\n       <!-- 回到顶部 -->\\r\\n      <div class=\\\"go_top\\\">\\r\\n        <a href=\\\"#\\\" class=\\\"goTop\\\" data-view=\\\"dot-detail\\\"><img src=\\\"\" + require(\"../../styles/images/go_top.png\") + \"\\\" class=\\\"icon\\\"></a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- 下面悬浮工具栏 -->\\r\\n{{#js_compare \\\"this.dotObj.is_sale.value ==1\\\"}}\\r\\n\\r\\n    <!-- 判断是否为免费景点 -->\\r\\n    \\r\\n  {{#if isFree}}\\r\\n    <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">景点免费</a></div>\\r\\n  {{else}}\\r\\n    <!-- 可以下单 -->\\r\\n    <div class=\\\"go-item dot-go-item\\\" data-shop-type=\\\"{{dotObj.c_id}}\\\" data-shop-id=\\\"{{dotObj.dot_id}}\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">我也想去</a></div>\\r\\n  {{/if}}\\r\\n\\r\\n\\r\\n{{/js_compare}}\\r\\n{{#js_compare \\\"this.dotObj.is_sale.value !=1\\\"}}      \\r\\n    <!-- 不能下单 -->\\r\\n    <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">此点正在开发中，敬请期待</a></div>\\r\\n{{/js_compare}}\\r\\n  </div>\\r\\n</div>\";"},{"id":45,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\phone.png","name":"./src/styles/images/phone.png","index":45,"index2":38,"size":2677,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":44,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","module":"./src/modules/shop/dot-detail.tpl.html","moduleName":"./src/modules/shop/dot-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/phone.png","loc":"1:1601-1641"},{"moduleId":49,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\line-detail.tpl.html","module":"./src/modules/shop/line-detail.tpl.html","moduleName":"./src/modules/shop/line-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/phone.png","loc":"1:1665-1705"},{"moduleId":50,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\activity-detail.tpl.html","module":"./src/modules/shop/activity-detail.tpl.html","moduleName":"./src/modules/shop/activity-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/phone.png","loc":"1:1655-1695"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABECAYAAADUZvakAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAHHUlEQVRo3u2af2wT5xnHv05MTNyZdc1gZKF0dGwLtFXIgtaQZRBECzTF0FCqRoVUy9rQrWUTm8aQqqFGVAvbqmjNHxUJBIYCkZqtQ8kiGrQU1aIVoU1KQwdBgSbpWo/Ezi+wY8wd5/vuj3vd3Vhjn8PMZdJ9/rSfx+/zuffuuffuNWBhYWFhYWFhYWFhkRRsU0ki6QLwIIACAEsBfAhgt81mi5gtdEuQ/B7J4yRv8L/5odn13apcuU5MliTpA6/Xe+jixYtHxGfnSU7pjDAdkrkkJZK8cOHCkZycnCcBuAG4XS7XY6FQyC8kN5hd61TkUkl2kuTZs2dbhdijAAoB3Adg8fHjx/cJwXfMrncqgs+TZCgUGl64cOETABYDmKELsWVnZ7tlWQ4IyWVm15yIXDrJyyRZX19fBeD+SULv7ejoeF0INptddyKCPyPJkZGRSwAeAmCfJNReVFRUqiiKRDJCMtvs2o3IpZD8B0nW1ta+DCAzTkr2uXPn3hSzuM/s+o0IriHJYDB42W63LzeQ4mhoaKgiyUgk0mt2/VHsMb4rAYDu7u63FUW5aOCApEmS9DQA9Pb2vmW2WJSUyb5QFKUIADwezykAQwZ+q9rhcGSNjo5+XFhY2Gy2WFxUVb1BkosWLbo/XizJtSTVSCQibd269QUA3za7/ngFp5GkqqpqVlZWRpzYr5D0kmR7e/tBAD9AjDNj2hAKhXyiySyOI9hAkn6/v8fpdLoBuMyuXc9kRzrF7/d/DADp6elLY8hlAygDgPr6+iPXrl3rARA0W8oQJ0+e3EeSkiQdiRXn8/naSXJ4eLirsrJy+p+aUXbv3l1KkoqiDMV4DPpSfn7+5uvXr18RN/jnzK47Eb4ZvQ5JFsaIW3rw4MHfirgAyQVmF26UWadPn/6zgaVXGoDVfX1974rYt/5vHny3bdv2jLhdBEjeGSM0Mz8/f7MkSeNC8qdm126U7KGhoY9E0b+ME5tXV1f3G5KqePpfamgEk3HV1ta+LGbRSzI9RmwagNVdXV1HxQH5jOQcswXiYrfbvz82NtYnit4ZJ3yu0+nc4PP5/i7iPyL5ZbMd4jG3urp6lyh4jOTsOPGLCwoKtgSDwU9Fjoek02yJeCz3er0fiIIPx4m1ASgoLi4uD4fD0bdt7dNdcnZpaWmFeCVBkmvixKcBWFlRUfG8LMsjIqeD5FfNFonFgydOnPijKHaQ5NfixM8E8PCWLVueC4fDl0VeP8klZotMxh1Op3Pd4OBg9LbRRjI1To4LwOqVK1c+ffXq1QsiL2z0NT/J+0jWkdxJ8q7bIbmwuLi4XJKk6NrzFSMHBsCqzMzMx/v7+9t1exlNkzUs8cJrO8lruvggyT+QnJ9MQRuAZVVVVS+qqiqLgSsM5DmgPQi7jx49+qqqqkGR6yO56Sa5BaLzatfC4OBfA4HASbGAIEmZ5GGSDyRLciaANc3Nza+JAZWbi5yEFAC5ANwbN258Znx8/D3d7LxOcjbJn4iZoqIovr17974EsQeyffv2F4aGhlr57w0gleSbJIuSIZkB4FGPx3NYDCaRXG8wdz6AR1JTU9e3tbXV6GbzetTW6/W25+XlPSXkcgHkR0VLSkrKBwYGGlVVDekO0KvJkLwHgLuzs/MvulOnzGCuE8AyAO5NmzY9Oz4+/r6YtbGGhoYqIfMwAH2nniVk1wFw5+XlPdXT09MgxvYnQxAAvgXAferUqUbdaVOZwOPSPRCz2djY+MqKFSvKhNx38Z8bPHrSoe1qFdfU1FSSZCAQ6EyWIKDtNrnb2trqxPVIkm+QnGUw//PZBLAGwNcN5s3o6+t7jSTPnDnzp2QKAsB3ALhrampeikQiV3U39fwEfiMLWrc1jCRJXSTZ1NT0q2QLAsACAOvKysp+HAwGozf1GySrSd7xvx6M5EaSlGU5mJOTk3s7BAFgDoC1GRkZJd3d3U3UttJIbZdqM8lbfutGbc9yl2hqbG1t3Qtg7u0SBLSVy3IA7h07dvx8YmLivK6df0jyCQNLvC8SSyH5I3GwSFLt6OhoArAWQMK/d6ukQGs+65xO54bW1tZqRVH+qRO9JNaXcRsKSbuY/XPR5HA4fH7Pnj07oTWmb9xuOT13QszmvHnzHvd4PDWKonyiE1VIniD5C5IP6GeW5HxxKvZHg2VZ/rSlpeX3DodjvZCbFjvJNmirl4cAuB0Ox/pDhw79+sqVK3/Tr14EEyRPk+zVrT0py/LAsWPHfudyuR4TYsuhraamFanQOu0qUaQ7Nze3tKWlZdfIyMgbkUik/ybZwOjo6LH9+/e/qJuxVQDuRgJ/QTPjBa0N2hLsbmhd9/POumTJkpnl5eVzBgYGwgcOHBgLBoPR/76FAFwC4AXARAczkxkAZgvRu6B14CgKAD+AzwAMJyo2XQS/SNgF4AaAialKWVhYWFhYWGj8C7GDt5wznHXPAAAAAElFTkSuQmCC\""},{"id":46,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\more.png","name":"./src/styles/images/more.png","index":46,"index2":39,"size":561,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":44,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","module":"./src/modules/shop/dot-detail.tpl.html","moduleName":"./src/modules/shop/dot-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/more.png","loc":"1:3376-3415"},{"moduleId":49,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\line-detail.tpl.html","module":"./src/modules/shop/line-detail.tpl.html","moduleName":"./src/modules/shop/line-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/more.png","loc":"1:3366-3405"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVRIx+3WMU7DQBSE4W+t1BElIFoERzA9BVdwtRKn4AQRh4iQXLmjpkgPR4hEDy04B1iKWAhZuAB5wSJMt9v8b96bYgKkKh7jGueYy6MWK1yFpn4MqYoneMBeJmBfLyhnWHTQO1yGpn7OQUtVPMANLrAIqYqvtus9zAXtwZ/QFh1UbmiPMS9yw4Y0G1hJGtlp6P9Ny/FnE46tX3O8e+D/VA9OOLZ2L1zTuvF3U/2VbEzL8Z9Pdct7LcmqD4y2sK2csExV3M8IPcKye65CquIp7v1svT0rQlOvUeIWm4zATccoQ1Ov3wAZ6kbknLUHxwAAAABJRU5ErkJggg==\""},{"id":47,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\specialty.png","name":"./src/styles/images/specialty.png","index":47,"index2":40,"size":2173,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":44,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","module":"./src/modules/shop/dot-detail.tpl.html","moduleName":"./src/modules/shop/dot-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/specialty.png","loc":"1:3988-4032"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAFoklEQVRo3u2ae2xVRRCHv3JrBWwjSqAVEB+QVLEENaIFUUIgWJ/ER2pSjSKKbyOmWiLEt5howBpjxBA0BhVJVNTEqlEbMNpGKAZRARVBSH0Cag220pb2+MfMutvLnvvqbU5v5JfcHHZnZndmd3Z2dgocwiH8b1AIVANNQKv+mrSvMGrlMsV4YDsQhPy2K09OYTKwTw1YD1wEFAHDgUu0L1Cec6NWNlWMAPao4q8ABR6eAqUFyjsqaqVTwVuqcB0QS8AXA+qV9+2olU6GKaroX8AxKfCPUN5AZfstVquSD6Yh84DKrI5a+TAcDXQAXUBJGnIlKtOhY/Q7VCErvyYD2bUqW5UNRQZk2TBzRj7MQPYD/Z7THw0zl+3nGchu1G9ZlnXKCpoRdxqdgexolW2O2ggf2lS5QRnIDlTZ1mwokpeEfgJwNnIfmdVsAnaE8AcpjksfySfFWOBdwpPXLcDdwBFxcol2LF9pB0LmNDvWlkCvYUA5UIEs+HHpGDUO+B2boL4J1AKLkVSpxTHwV+B2bNqU6IwdqbSWkHnDzlgp8DiwNWSRdwILPYt8EBpU4H3gKA/9cCRTb3AG/xQYCXyi7fM8ciOV9nPIvBXOWCDHYCXQ7czTAqwD3tO5dju0b4ExYUaNV6bfUlkBYBbwo8r8pIoEwAIP71jsG8yHBUpfinjBP9r+G1iGuGD89TQAmAl8pbzfAIN9g89RhhUpGGUwFMk0AqwL+zKPiUrbEDLOWqV/7OzCC0BxCjoUAptUpsbHcKcSa9MwDMQ931HZbvy54kyl+7ISkyt2Yc/2pWnqYFx5Ixy8tbv1m1a0AdqBSh00T8e9KY7HrPxej/yNKjMAecJMR4JWOmjQ7yk+4olq9V78r95kKEMydHM23F2rxu8NJcobIDs2I4N5AQ4j8XXCFyTPsichr2Pfzi7CnpE6rFfUal+1wxsDPnL4n0wwZyFwWgL6STrGrjCG2crwA1J88WEVNlhMi6MNBzqxYdrUPN7Q9pXKVwC85Bi1D7nrfJimCu8iPF2r0XFeDjMshpyVAAmzPhQDrytPO3KvuTCRzWQi64Hv9N8zgAuxVap2/S73zJMPPIK4lxnHV/Qpwl4755MApwL7lXF+Ar5HsYnrGU7/c9r/MMnriiZ1uy5u7FHIZW3OzUNqqA/GzZtIIc+8CutONQn4nlWeHVjXXaZ9c5GzMd8xpo2elWBzTVzsjDkJyVBMijU1BT07gbOSGWVwm2PcSmCIhycGNGIjXh7wtbanK0+Ztrd55Fco7VZtV2G9pR5JAMJQiXXle1I1yuAKbEV3D5LVxx/gcUiYbwcec1baXBmXYaNkPOYqrQHxDLOQzxDuegXAEod3cbpGGYzBFjYD4E/gRSSCTkFcYI1D76Zn5rBQ+5d4xi4CfnFku4B5IXrEdJe2KW+nLnSvMYOeWb3v1w1cGyf3qtLmeMbMQ6rARr4ZSe3KdUEnIDtei418AbAZeZNlFaXI4V+FPB8akGLnTp30gjh+c+bO9OzAcqXtR14VQZLfVuBmwt20T3CfTv6U0zcYCded9Dybedjo2YpcwgOBy5GA0gh8j2TtdcD9SLSMBFNV0c+cvsnatymO9wnHqKzUEvsSRdgE2GAe9m1lcC8266iIWulUYZ7rw7T9mrav1/Y12GyiMmpl08GXqripCptQXopcC+ZCvSVqRdOFKeiUAydjq1lDsVWsp/taiWzX7l3kYx+N9cDz2MT2rlw0zNwvHUidAyTxnYVkLFcj2UXOYTPibhPVoC41KFCjchZ/YNMnUz8JkCJnzqIQmx6Z/+pgnv2Z/Gmp3+B07B8tWh3D7ohasd5ithqyzjGqkb6Nvl5ke8IJ+j1WvweAG5CnTE5jAz2fGIuiVigbGILskHmu7yGzanJWEOv9EP+hGDgeubcGIeW0LVEZdgi5hn8BeJ/lFzVOE+IAAAAASUVORK5CYII=\""},{"id":48,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\go_top.png","name":"./src/styles/images/go_top.png","index":48,"index2":41,"size":645,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":44,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-detail.tpl.html","module":"./src/modules/shop/dot-detail.tpl.html","moduleName":"./src/modules/shop/dot-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/go_top.png","loc":"1:6604-6645"},{"moduleId":49,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\line-detail.tpl.html","module":"./src/modules/shop/line-detail.tpl.html","moduleName":"./src/modules/shop/line-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/go_top.png","loc":"1:6085-6126"},{"moduleId":50,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\activity-detail.tpl.html","module":"./src/modules/shop/activity-detail.tpl.html","moduleName":"./src/modules/shop/activity-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/go_top.png","loc":"1:6009-6050"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAiCAYAAAAtZZsLAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVRYw+2XUWrCQBQAx9qv9RQFhWp7EA9RRXuu1qJXaW+g7Un0O37kLfsssbshm2ywOxAM6+MxkCGQAVDQY+5SC2Qy/wkDfMplUstU8Ub5yirkvlcslJy9XlJLWabAsULwCDymljPAXoS2Sm4nv3sS9/guIj/ASAmO5KyQmSQsReAEPMmZFQR4lv8KykY7RXe3VudaEOAV1+O0KzkDHHDdaX4Lgmuzsx43XHbnE+y0x6rufILIrO1x2Zac7m51ZeaaIJStttajAb6p7i5UEFyPByL3+IHr7q/FPkHd4yaWnO5u5pn1CULkHsdq2SpgPkQQ2WV7HDcRnFPvcYQKgntdzZsIAkyAYQuCQ+ChqVxd6ggG0fvv4iyYBVOTBW9e8D7yvi9gEHPhGYwLb0KqvSznAAAAAElFTkSuQmCC\""},{"id":49,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\line-detail.tpl.html","name":"./src/modules/shop/line-detail.tpl.html","index":49,"index2":43,"size":6969,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./line-detail.tpl.html","loc":"7:18-51"}],"source":"module.exports = \"<!-- 线的详情页面 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\"  id=\\\"create-act-pay-type-nav\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">线路详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <!-- <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{lineObj.thrand_id}}\\\">\\r\\n        {{#if isLinePraise}}\\r\\n          <i class=\\\"icon ticon-praise\\\"></i>\\r\\n        {{else}}\\r\\n          <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n        {{/if}}\\r\\n      </a> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"line-detail\\\" class=\\\"page tmm-dot-detail tmm-line-detail\\\">\\r\\n    <div class=\\\"page-content line-detail-page-content\\\">\\r\\n      <div class=\\\"banner\\\">\\r\\n        <div>\\r\\n          <img class=\\\"lazy\\\" data-src=\\\"{{lineObj.page_img}}\\\">\\r\\n        </div>\\r\\n        <div class=\\\"mask\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{lineObj.thrand_id}}\\\">\\r\\n            {{#if isLinePraise}}\\r\\n              <i class=\\\"icon ticon-praise\\\"></i>\\r\\n              <span>{{lineObj.praise}}</span>\\r\\n            {{else}}\\r\\n              <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n              <span class=\\\"gray\\\">{{lineObj.praise}}</span>\\r\\n            {{/if}}\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-phone\\\" data-manage-phone=\\\"{{lineObj.manage_phone}}\\\" data-tmm-phone=\\\"{{lineObj.tmm_phone}}\\\">\\r\\n            <div><img src=\\\"\" + require(\"../../styles/images/phone.png\") + \"\\\" /></div>\\r\\n            <span>联系</span>\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-share\\\">\\r\\n            <i class=\\\"icon ticon-share\\\" data-tit=\\\"{{lineObj.name}}\\\" data-con=\\\"{{lineObj.list_info}}\\\"  data-link=\\\"{{#if lineObj.share_img}}{{lineObj.share_image}}{{else}}{{lineObj.share_image}}{{/if}}\\\" data-id=\\\"{{lineObj.thrand_id}}\\\"></i>\\r\\n            <span>分享</span>\\r\\n          </a>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--新添加内容-->\\r\\n      <div class=\\\"tmm-dot-bottom-bg\\\">\\r\\n        <div class=\\\"list-block tmm-dot-info-list-block\\\">\\r\\n          <ul>\\r\\n            <li class=\\\"item-content item-link show-act-enroll-info\\\"  >\\r\\n              <div class=\\\"item-inner tmm-dot-item-inner\\\">\\r\\n                <div class=\\\"item-title tmm-dot-item-title\\\">\\r\\n             \\r\\n                  <div class=\\\"tmm-item-dot-list\\\">\\r\\n                    <div class=\\\"tmm-item-dot-list-title\\\">\\r\\n                      {{lineObj.name}}\\r\\n                      {{#js_compare \\\"this.lineObj.is_sale.value ==1\\\"}} \\r\\n                      <span class=\\\"tmm-item-dot-sold\\\">已售出{{lineObj.down}}份</span>\\r\\n                      {{/js_compare}}\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-dot-list-price\\\">\\r\\n                        ￥{{lineObj.price}}/人起   \\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-dot-list-intro\\\">\\r\\n                      {{lineObj.page_info}}\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-item-more\\\">\\r\\n                        <span class=\\\"tmm-item-dot-sold-more\\\">\\r\\n                          <img src=\\\"\" + require(\"../../styles/images/more.png\") + \"\\\" />预订须知\\r\\n                        </span>\\r\\n                    </div>\\r\\n                  </div>\\r\\n               \\r\\n                </div>\\r\\n              </div>\\r\\n            </li>\\r\\n\\r\\n\\r\\n          </ul>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"wrap-item tmm-item-dot-list-title tmm-retinue-top-border tmm-retinue-bottom-border\\\">该线路项目</div>\\r\\n      <!--新添加内容-->\\r\\n\\r\\n      <div class=\\\"wrap\\\">\\r\\n        {{#each lineObj.list}}\\r\\n        <div class=\\\"line-day\\\">\\r\\n          <!-- 日程亮点 -->\\r\\n          <div class=\\\"line-day-tit\\\">\\r\\n            <div class=\\\"bright\\\"><i class=\\\"bracket\\\">&lceil;</i>{{day_content}}<i class=\\\"bracket\\\">&rfloor;</i></div>\\r\\n            <div class=\\\"day\\\">{{descript_day}}</div>\\r\\n          </div>\\r\\n          <span class=\\\"tmm-ticon-point\\\">&nbsp;</span>\\r\\n        {{#each dot_list}}\\r\\n          {{#each day_item}}\\r\\n          <!-- 项目类容 -->\\r\\n          <section class=\\\"info detail-b-border\\\">\\r\\n            <i class=\\\"icon tmm-type-icon {{js \\\" this.item_type.value==1 ? 'ticon-eat' : (this.item_type.value==2 ? 'ticon-live' : 'ticon-play') \\\"}}\\\"></i>\\r\\n\\r\\n            <h2 class=\\\"tit tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{item_name}}</h2>\\r\\n            <div class=\\\"state tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{address}}</div>\\r\\n            <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\" class=\\\"showmore\\\"><span>●</span><span>●</span><span>●</span></a>\\r\\n            <div class=\\\"img\\\">\\r\\n              <a class=\\\"tmm-img-showmore\\\" href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">\\r\\n            <img class=\\\"lazy lazy-fadein\\\" data-src=\\\"{{item_img}}\\\">\\r\\n          </a>\\r\\n            </div>\\r\\n          </section>\\r\\n          {{/each}}\\r\\n        {{/each}}\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n       <!-- 回到顶部 -->\\r\\n      <div class=\\\"go_top\\\">\\r\\n        <a href=\\\"#\\\" class=\\\"goTop\\\" data-view=\\\"line-detail\\\"><img src=\\\"\" + require(\"../../styles/images/go_top.png\") + \"\\\" class=\\\"icon\\\"></a>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n  {{#if isFromJourneyPage}}\\r\\n\\r\\n  {{else}}\\r\\n\\r\\n    {{#js_compare \\\"this.lineObj.is_sale.value ==1\\\"}}\\r\\n\\r\\n        {{#if isFree}}\\r\\n        <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">线路免费</a></div>\\r\\n        {{else}}\\r\\n        <!-- 可以下单 -->\\r\\n        <div class=\\\"go-item\\\" data-shop-type=\\\"{{lineObj.c_id}}\\\" data-shop-id=\\\"{{lineObj.thrand_id}}\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">我也想去</a></div>\\r\\n        {{/if}}\\r\\n    {{/js_compare}}\\r\\n    {{#js_compare \\\"this.lineObj.is_sale.value !=1\\\"}}      \\r\\n        <!-- 不能下单 -->\\r\\n        <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">此点正在开发中，敬请期待</a></div>\\r\\n    {{/js_compare}}\\r\\n\\r\\n        \\r\\n  {{/if}}\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":50,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\activity-detail.tpl.html","name":"./src/modules/shop/activity-detail.tpl.html","index":50,"index2":44,"size":9340,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./activity-detail.tpl.html","loc":"8:17-54"}],"source":"module.exports = \"<!-- 觅趣的详情页面 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">{{actObj.name}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <!-- <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{actObj.actives_id}}\\\">\\r\\n        {{#if isActPraise}}\\r\\n          <i class=\\\"icon ticon-praise\\\"></i>\\r\\n        {{else}}\\r\\n          <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n        {{/if}}\\r\\n      </a> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"act-detail\\\" class=\\\"page tmm-dot-detail tmm-line-detail\\\">\\r\\n    <div class=\\\"page-content act-detail-page-content\\\">\\r\\n      <div class=\\\"banner\\\">\\r\\n        <div>\\r\\n          <img class=\\\"lazy\\\" data-src=\\\"{{actObj.page_img}}\\\">\\r\\n        </div>\\r\\n        <div class=\\\"mask\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-praise-shop\\\" data-shop-id=\\\"{{actObj.actives_id}}\\\">\\r\\n            {{#if isActPraise}}\\r\\n              <i class=\\\"icon ticon-praise\\\"></i>\\r\\n              <span>{{actObj.praise}}</span>\\r\\n            {{else}}\\r\\n              <i class=\\\"icon ticon-praise gray\\\"></i>\\r\\n              <span class=\\\"gray\\\">{{actObj.praise}}</span>\\r\\n            {{/if}}\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-phone\\\" data-type=\\\"act\\\"  data-manage-phone=\\\"{{actObj.manage_phone}}\\\" data-tmm-phone=\\\"{{actObj.tmm_phone}}\\\">\\r\\n            <div><img src=\\\"\" + require(\"../../styles/images/phone.png\") + \"\\\" /></div>\\r\\n            <span>联系</span>\\r\\n          </a>\\r\\n          <a href=\\\"#\\\" class=\\\"tmm-share\\\">\\r\\n            <i class=\\\"icon ticon-share\\\" data-tit=\\\"{{actObj.name}}\\\" data-id=\\\"{{actObj.actives_id}}\\\" data-con=\\\"{{actObj.list_info}}\\\" data-link=\\\"{{#if actObj.share_image}}{{actObj.share_image}}{{else}}{{actObj.list_img}}{{/if}}\\\"></i>\\r\\n            <span>分享</span>\\r\\n          </a>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"act-info\\\">\\r\\n        <div class=\\\"tmm-con-icon\\\">\\r\\n          <div class=\\\"tmm-col-fish border-right\\\">\\r\\n            <div>\\r\\n              <p class=\\\"title\\\">参与人数</p>\\r\\n              <p class=\\\"txt\\\">{{actObj.actives_info.order_number.sign}} / {{actObj.actives_info.number.value}}</p>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"tmm-col-fish\\\">\\r\\n            <div>\\r\\n              <p class=\\\"title\\\">觅趣状态</p>\\r\\n              <p class=\\\"txt\\\">{{actObj.actives_status.name}}</p>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"clears\\\"></div>\\r\\n          <div class=\\\"b-border\\\"></div>\\r\\n          <div class=\\\"tmm-col-fish border-right\\\">\\r\\n            <div>\\r\\n              <p class=\\\"title\\\">报名时间</p>\\r\\n              <p class=\\\"txt\\\">{{actObj.actives_time.start_time}} / {{actObj.actives_time.end_time}}</p>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"tmm-col-fish\\\">\\r\\n            <div>\\r\\n              <p class=\\\"title\\\">出游日期</p>\\r\\n              <p class=\\\"txt\\\">{{actObj.actives_time.go_time}}</p>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"clears\\\"></div>\\r\\n          <div class=\\\"b-border\\\"></div>\\r\\n          <div class=\\\"col-100 b-border accordion-item accordion-item-expanded\\\">\\r\\n            <p class=\\\"title\\\">觅趣简介</p>\\r\\n           <div class=\\\"act-info-remark\\\">\\r\\n              {{actObj.actives_info.remark}}\\r\\n            </div>\\r\\n            <div class=\\\"icon ticon-expand\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"wrap\\\">\\r\\n        {{#each actObj.list}}\\r\\n        <div class=\\\"line-day detail-b-border\\\">\\r\\n          <!-- 日程亮点 -->\\r\\n          <div class=\\\"line-day-tit\\\">\\r\\n            <div class=\\\"bright act-bright\\\"><i class=\\\"bracket\\\">&lceil;</i>{{day_content}}<i class=\\\"bracket\\\">&rfloor;</i></div>\\r\\n            <div class=\\\"day act-day\\\">{{descript_day}}</div>\\r\\n          </div>\\r\\n          <span class=\\\"tmm-ticon-point tmm-activity-ticon-point\\\">&nbsp;</span> {{#each dot_list}} {{#each day_item}}\\r\\n          <!-- 项目类容 -->\\r\\n          <section class=\\\"info\\\">\\r\\n            <i class=\\\"icon tmm-type-icon {{js \\\" this.item_type.value==1 ? 'ticon-eat' : (this.item_type.value==2 ? 'ticon-live' : 'ticon-play') \\\"}}\\\"></i>\\r\\n            <h2 class=\\\"tit tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{item_name}}</h2>\\r\\n            <div class=\\\"state tmm-img-showmore\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">{{address}}</div>\\r\\n            <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : 'farm')) \\\"}}\\\" data-link=\\\"{{item_link}}\\\" class=\\\"showmore\\\"><span>●</span><span>●</span><span>●</span></a>\\r\\n            <div class=\\\"img\\\">\\r\\n              <a class=\\\"tmm-img-showmore\\\" href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.item_type.value==1 ? 'eat' : (this.item_type.value==2 ? 'hotel' : (this.item_type.value==3 ? 'play' : (this.item_type.value==3 ? 'farm' : 'farmOuter'))) \\\"}}\\\" data-link=\\\"{{item_link}}\\\">\\r\\n                <img class=\\\"lazy lazy-fadein\\\" data-src=\\\"{{item_img}}\\\">\\r\\n              </a>\\r\\n            </div>\\r\\n          </section>\\r\\n          {{/each}} {{/each}}\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n      <!-- 回到顶部 -->\\r\\n      <div class=\\\"go_top\\\">\\r\\n        <a href=\\\"#\\\" class=\\\"goTop\\\" data-view=\\\"act-detail\\\"><img src=\\\"\" + require(\"../../styles/images/go_top.png\") + \"\\\" class=\\\"icon\\\"></a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <!-- 审核可卖的状态 -->\\r\\n    {{#js_compare \\\"this.actObj.is_sale.value ==1\\\"}}\\r\\n        <!-- 判断报名时间有没有开始 -->\\r\\n        {{#js_compare \\\"this.actObj.actives_status.value ==0\\\"}}\\r\\n        <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">报名时间还未开始</a></div>\\r\\n        {{/js_compare}}\\r\\n\\r\\n         <!-- 报名时间已经开始 -->\\r\\n        {{#js_compare \\\"this.actObj.actives_status.value == 1\\\"}}\\r\\n            <!-- 判断报名人数是否已满 -->\\r\\n            {{#js_compare \\\"this.actObj.actives_info.order_number.value == 0\\\"}}\\r\\n            <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">报名人数已满</a></div>\\r\\n            {{/js_compare}}\\r\\n\\r\\n            <!-- 报名人数还有空余 -->\\r\\n            {{#js_compare \\\"this.actObj.actives_info.order_number.value > 0\\\"}}\\r\\n\\r\\n                \\r\\n                      \\r\\n                    <!-- A 支付 -->\\r\\n                    {{#js_compare \\\"this.actObj.actives_pay_type.value == 1\\\"}}\\r\\n                    <div class=\\\"go-item act-go-item payment-act-A-type\\\" data-actId=\\\"{{actObj.actives_id}}\\\" data-actOpen=\\\"{{actObj.actives_is_open.value}}\\\">\\r\\n                      <a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">\\r\\n                        {{#js_compare \\\"this.actObj.actives_time.value == 0\\\"}}我也要报名{{/js_compare}}{{#js_compare \\\"this.actObj.actives_time.value == 1\\\"}}我也想去{{/js_compare}}\\r\\n                      </a>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n\\r\\n\\r\\n                    \\r\\n                    <!-- AA支付 -->\\r\\n                    {{#js_compare \\\"this.actObj.actives_pay_type.value == 0\\\"}}\\r\\n                      <!-- 判读自己有没有报名（没有有报名） -->\\r\\n                      {{#js_compare \\\"this.actObj.order_actives.value == -1\\\"}} \\r\\n                      <div class=\\\"go-item act-go-item\\\" data-shop-type=\\\"{{actObj.c_id}}\\\" data-acttype=\\\"{{actObj.actives.value}}\\\" data-shop-id=\\\"{{actObj.actives_id}}\\\">\\r\\n                        <a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">{{#js_compare \\\"this.actObj.actives_time.value == 0\\\"}}我也要报名{{/js_compare}}{{#js_compare \\\"this.actObj.actives_time.value == 1\\\"}}我也想去{{/js_compare}}</a>\\r\\n                      </div>\\r\\n                      {{/js_compare}} \\r\\n                      <!-- 判读自己有没有报名（没有有报名） -->\\r\\n                      <!-- 判读自己有没有报名（有报名） -->\\r\\n                      {{#js_compare \\\"this.actObj.order_actives.value != -1\\\"}}\\r\\n                      <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">已报名</a></div>\\r\\n                      {{/js_compare}} \\r\\n                      <!-- 判读自己有没有报名（有报名） -->\\r\\n                    {{/js_compare}}\\r\\n\\r\\n\\r\\n      \\r\\n\\r\\n            {{/js_compare}} \\r\\n        {{/js_compare}}\\r\\n\\r\\n\\r\\n        <!-- 觅趣结束 -->\\r\\n        {{#js_compare \\\"this.actObj.actives_status.value ==2\\\"}}\\r\\n        <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">报名结束</a></div>\\r\\n        {{/js_compare}} \\r\\n    {{/js_compare}} \\r\\n\\r\\n\\r\\n    <!-- 不能下单 -->\\r\\n    {{#js_compare \\\"this.actObj.is_sale.value !=1\\\"}}\\r\\n    <div class=\\\"cannt-item\\\"><a class=\\\"tmm-button\\\" href=\\\"javascript:;\\\">此点正在开发中，敬请期待</a></div>\\r\\n    {{/js_compare}}\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":51,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","name":"./src/modules/shop/createLineOrder.js","index":51,"index2":55,"size":18954,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./shop/createLineOrder","loc":"17:20-53"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./createLineOrder","loc":"9:20-48"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  template = require('./line-order.tpl.html'),\r\n  addRetinueShop = require('./addRetinueShop'),\r\n  selectRetinue_tpl = require('./selectRetinue.tpl.html'),\r\n  orderDetail = require('../order/orderDetail'),\r\n  roleModule = require('../role/role');\r\n\r\nvar info = {\r\n  'orderInfo': {},\r\n  'userInfo': {}\r\n}\r\n\r\nwindow.retinueSelect = []; // 随行人员选择集合\r\n//var retinueSelectDefault = []; //选中的随行人员默认选中\r\nvar cNum = 0; // 成人数量\r\nvar eNum = 0; // 儿童数量\r\nvar totPrice = 0; //订单总价格\r\nvar datetime = '';\r\n\r\nvar createLineOrder = {\r\n\r\n  init: function() {\r\n    cNum = 0;\r\n    eNum = 0; \r\n    retinueSelect = [];\r\n    totPrice = 0;\r\n    datetime = '';\r\n    createLineOrder.selectGoTime();\r\n    // createLineOrder.getUserInfo();\r\n    createLineOrder.bindEvent();\r\n  },\r\n\r\n  /**\r\n   * 显示创建线订单视图\r\n   * @param  {[type]} id 线订单id\r\n   * @return {[type]}    [description]\r\n   */\r\n  showView: function(id) {\r\n    log.info(\"linelinelinelinelinelinelinelineline\");\r\n    retinueSelectDefault = [];\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.goToLogin();\r\n      return;\r\n    }\r\n\r\n\r\n    tmmApp.showIndicator();\r\n    // 获取订单数据\r\n    httpService.getFareOrder(id,\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n          info.orderInfo = dataRes.data;\r\n\r\n          // 获取个人信息\r\n          httpService.getUserInfo(function(dataRes) {\r\n\r\n            info.userInfo = dataRes.data;\r\n            info.datetime = datetime;\r\n            // retinueSelect = dataRes.data.retinueInfo.list;\r\n\r\n\r\n            // 编译模版\r\n            var output = appFunc.renderTpl(template, info);\r\n            tmmApp.getCurrentView().router.load({\r\n              content: output,\r\n            });\r\n            tmmApp.hideIndicator()\r\n            createLineOrder.init();\r\n\r\n          }, function(dataRes) {\r\n            tmmApp.hideIndicator()\r\n          });\r\n\r\n        }\r\n\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator()\r\n      });\r\n  },\r\n  /**\r\n   * 填充主要联系人信息\r\n   */\r\n  fillMainRetinue: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n      info.userInfo = dataRes.data;\r\n\r\n      if (info.userInfo.main_retinueInfo.list) {\r\n        $$('#tmm-order-mainretinue-list').html('<div>' + info.userInfo.main_retinueInfo.list[0].name + '</div>')\r\n      }\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取用户信息\r\n   * @return {[type]} [description]\r\n   */\r\n  getUserInfo: function(fn) {\r\n    httpService.getUserInfo(function(dataRes) {\r\n\r\n      info.userInfo = dataRes.data;\r\n\r\n      // fn || fn();\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取随行人员列表信息\r\n   * @return {[type]} [description]\r\n   */\r\n  showList: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n      info.userInfo = dataRes.data;\r\n      var retinueBack = 0; //是否是返回按钮\r\n      var popupHTML = appFunc.renderTpl(selectRetinue_tpl, info.userInfo);\r\n\r\n      tmmApp.popup(popupHTML);\r\n\r\n      if (info.userInfo.retinueInfo.list != null) {\r\n        $$(\"#noRetinue\").css('display', 'none');\r\n      } else {\r\n        $$(\"#noRetinue\").css('display', 'block');\r\n      }\r\n      //随行人员的默认值\r\n      $$.each($$('.select-retinue'), function(index, value) {\r\n        for (var j = 0; j < retinueSelectDefault.length; j++) {\r\n          if ($$(value).attr('data-id') == retinueSelectDefault[j]) {\r\n            $$(value).attr('checked', 'checked');\r\n          }\r\n        }\r\n      });\r\n\r\n      $$('.retinueBackClose').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup');\r\n      });\r\n\r\n      //添加随行人员事件\r\n      $$('.order-add-retinue').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n        setTimeout(function() {\r\n          addRetinueShop.init(2);\r\n\r\n        }, 200)\r\n      })\r\n\r\n\r\n      //弹出层关闭事件\r\n      $$('.popup').on('close', function() {\r\n        var str = '';\r\n        retinueSelect = [];\r\n        if (retinueBack != 1) {\r\n          retinueSelectDefault = [];\r\n        }\r\n        $$.each($$('.select-retinue'), function(index, value) {\r\n\r\n          if ($$(value).prop('checked')) {\r\n            if (retinueBack != 1) {\r\n              retinueSelectDefault.push($$(value).attr('data-id'));\r\n            }\r\n            retinueSelect.push({\r\n              'retinue_id': $$(value).attr('data-id'),\r\n              'name': $$(value).val(),\r\n              'is_main': \"0\"\r\n            });\r\n\r\n            str += '<div class=\"w_33 retinue\">' + $$(value).val() + '</div>';\r\n          }\r\n        });\r\n        if (retinueBack != 1) {\r\n          $$('#tmm-order-retinue-list .retinue').remove();\r\n          $$('#tmm-order-retinue-list').prepend(str);\r\n        }\r\n      });\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n\r\n\r\n  },\r\n\r\n  /**\r\n   * 计算总价格\r\n   * @return {[type]} [description]\r\n   */\r\n  countPrice: function() {\r\n    totPrice = 0;\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n                list[attr1][i][attr2][j]['fare'][k]['count'] = list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']\r\n                totPrice = (list[attr1][i][attr2][j]['fare'][k]['count'] + totPrice * 1).toFixed(2);\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n    $$('.tmm-total-price').html('￥' + totPrice);\r\n  },\r\n  /**\r\n   * 拼接订单\r\n   */\r\n  spliceItem: function() {\r\n    var item = {};\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    for (var attr1 in list) {\r\n      item[attr1] = [];\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n        item[attr1][i] = {};\r\n        for (var attr2 in list[attr1][i]) {\r\n          item[attr1][i][attr2] = [];\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n              item[attr1][i][attr2][j] = {};\r\n              item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']] = [];\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k] = {};\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']] = {};\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['price'] = list[attr1][i][attr2][j]['fare'][k]['price'];\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['number'] = list[attr1][i][attr2][j]['fare'][k]['number'];\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['count'] = list[attr1][i][attr2][j]['fare'][k]['count'];\r\n\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n    item['value'] = info.orderInfo.value;\r\n    return item;\r\n  },\r\n\r\n  /**\r\n   * 增加数量\r\n   */\r\n  addNum: function() {\r\n    var type = $$(this).attr('data-info'); // 得到成人或者儿童\r\n    var is_room = $$(this).attr('data-room'); // 成人或者儿童所需要的房间数量\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    if (type == '成人') {\r\n\r\n      cNum++;\r\n      $$(this).parent().find('.num').html(cNum);\r\n\r\n    } else if (type == '儿童') {\r\n      if (cNum * 2 <= eNum) {\r\n        tmmApp.alert('一个成人最多只能带两个儿童')\r\n        return;\r\n      }\r\n\r\n      eNum++;\r\n      $$(this).parent().find('.num').html(eNum);\r\n    }\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['info'] == '成人') {\r\n\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = cNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInItem('成人', cNum);\r\n\r\n                } else if (list[attr1][i][attr2][j]['fare'][k]['info'] == '儿童') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = eNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInItem('儿童', eNum);\r\n                }\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['room_number'] != '0') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = Math.ceil(cNum / list[attr1][i][attr2][j]['fare'][k]['room_number']);\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInRoom(list[attr1][i][attr2][j]['fare'][k]['room_number'], list[attr1][i][attr2][j]['fare'][k]['number']);\r\n                }\r\n\r\n              }\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n    createLineOrder.countPrice();\r\n  },\r\n\r\n  /**\r\n   * 减少数量\r\n   * @return {[type]} [description]\r\n   */\r\n  subNum: function() {\r\n\r\n    var type = $$(this).attr('data-info'); // 得到成人或者儿童\r\n    var is_room = $$(this).attr('data-room'); // 成人或者儿童所需要的房间数量\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    if (type == '成人') {\r\n      if (cNum == 0) {\r\n        return;\r\n      }\r\n\r\n      cNum--;\r\n      if (cNum * 2 < eNum) {\r\n        cNum ++;\r\n        tmmApp.alert('一个成人最多只能带两个儿童')\r\n        return;\r\n      }\r\n\r\n      \r\n      $$(this).parent().find('.num').html(cNum);\r\n\r\n    } else if (type == '儿童') {\r\n      if (eNum == 0) {\r\n        return;\r\n      }\r\n      eNum--;\r\n      $$(this).parent().find('.num').html(eNum);\r\n    }\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['info'] == '成人') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = cNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInItem('成人', cNum);\r\n                } else if (list[attr1][i][attr2][j]['fare'][k]['info'] == '儿童') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = eNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInItem('儿童', eNum);\r\n                }\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['room_number'] != '0') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = Math.ceil(cNum / list[attr1][i][attr2][j]['fare'][k]['room_number']);\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createLineOrder.showNumInRoom(list[attr1][i][attr2][j]['fare'][k]['room_number'], list[attr1][i][attr2][j]['fare'][k]['number']);\r\n\r\n                }\r\n\r\n              }\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n    createLineOrder.countPrice();\r\n  },\r\n  /**\r\n   * 成人儿童人数变化时显示到项目中去\r\n   * @param  {[type]} type 成人，儿童\r\n   * @param  {[type]} num 添加的数量\r\n   * @return {[type]}      [description]\r\n   */\r\n  showNumInItem: function(type, num) {\r\n    if (type == '成人') {\r\n      $$(\".fare-item-num[fare-item-type='成人']\").html(num)\r\n    } else if (type == '儿童') {\r\n      $$(\".fare-item-num[fare-item-type='儿童']\").html(num)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 成人变化时添加人数到房间中去\r\n   * @param  {[type]} type 添加房间的room_num\r\n   * @param  {[type]} num  添加的数量\r\n   * @return {[type]}      [description]\r\n   */\r\n  showNumInRoom: function(type, num) {\r\n\r\n    $$(\".fare-item-num[fare-item-room='\" + type + \"']\").html(num)\r\n\r\n  },\r\n  selectGoTime: function() {\r\n    var nowDate = new Date();\r\n    var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n    var calendarDefault = tmmApp.calendar({\r\n      input: '#calendar-gotime',\r\n      closeOnSelect: true,\r\n      minDate: preDay,\r\n      monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n      dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n      dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\r\n      onDayClick: function(p, dayContainer, year, month, day) {\r\n        datetime = appFunc.dateFormt(year, month, day);\r\n      }\r\n    });\r\n  },\r\n\r\n  /*显示选择出游时间时的遮罩层*/\r\n  showlineList: function() {\r\n    $$('body').find(\".modal-overlay\").remove();\r\n    if ($$('body').find(\".modal-overlay\").hasClass('tmm-picker-calendar')) {\r\n      $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n    } else {\r\n      $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-picker-calendar\"></div>');\r\n    }\r\n  },\r\n\r\n\r\n  /**\r\n   * 提交订单\r\n   * @return {[type]} [description]\r\n   */\r\n  submitLineOrder: function() {\r\n    var _this = this;\r\n\r\n    // 判断出游日期\r\n    if (!datetime) {\r\n      tmmApp.alert('请选择出游日期');\r\n      return;\r\n    }\r\n\r\n    // 判断成人选择是否为0\r\n    if (cNum == 0) {\r\n      tmmApp.alert('请选择出游人数');\r\n      return;\r\n    }\r\n    \r\n    // 判断是否存在主要成员\r\n    if (!info.userInfo.main_retinueInfo.list) {\r\n      tmmApp.alert('请添加主要联系人');\r\n      return;\r\n    }\r\n    var token = {};\r\n    var OrderRetinue = [];\r\n    var OrderItemsFare = [];\r\n\r\n    OrderRetinue.push({\r\n      \"is_main\": \"1\",\r\n      \"retinue_id\": info.userInfo.main_retinueInfo.list[0].value\r\n    })\r\n\r\n    for (var i = 0; i < retinueSelect.length; i++) {\r\n\r\n      var temp = {\r\n        \"is_main\": retinueSelect[i].is_main,\r\n        \"retinue_id\": retinueSelect[i].retinue_id\r\n      }\r\n\r\n      OrderRetinue.push(temp);\r\n\r\n    };\r\n\r\n    // 判断选择人数与随行人员不匹配\r\n    if (OrderRetinue.length != cNum + eNum) {\r\n      tmmApp.alert('请确保主要联系人和随行人员总数与出游人数一致');\r\n      return;\r\n    }\r\n\r\n    // 过滤成人与儿童\r\n    var orderItemsFare = [];\r\n    for (var i = 0; i < info.orderInfo.OrderItemsFare.length; i++) {\r\n      orderItemsFare[i] = {};\r\n      orderItemsFare[i]['info'] = info.orderInfo.OrderItemsFare[i]['info'];\r\n      orderItemsFare[i]['is_room'] = info.orderInfo.OrderItemsFare[i]['is_room'];\r\n\r\n      if (orderItemsFare[i]['info'] == '成人') {\r\n        orderItemsFare[i]['number'] = cNum;\r\n      } else if (orderItemsFare[i]['info'] == '儿童') {\r\n        orderItemsFare[i]['number'] = eNum;\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 提交的json数据\r\n     * @type {Object}\r\n     */\r\n    token = {\r\n        \"Order\": {\r\n          \"user_price\": \"0\",\r\n          \"order_type\": \"2\",\r\n          \"order_price\": totPrice,\r\n          \"son_order_count\": \"0\",\r\n          \"go_time\": datetime,\r\n          \"user_go_count\": OrderRetinue.length\r\n        },\r\n        \"OrderRetinue\": OrderRetinue,\r\n        \"OrderItems\": createLineOrder.spliceItem(),\r\n        \"OrderItemsFare\": orderItemsFare\r\n      }\r\n      /**\r\n       * 提交表单\r\n       */\r\n      \r\n    tmmApp.showIndicator();\r\n    httpService.orderCreate(token, function(dataRes) {\r\n      \r\n      tmmApp.hideIndicator();\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('提交订单成功', function() {\r\n\r\n          orderDetail.gotoOrderView(2, dataRes.data[\"0\"]);\r\n        });\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('提交订单失败,请重试');\r\n        }\r\n      }\r\n\r\n    }, function() {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络连接失败');\r\n\r\n    });\r\n\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#orderAddRetinue',\r\n      event: 'click',\r\n      handler: createLineOrder.showList\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-order-line-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createLineOrder.subNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-order-line-addsub .add-num',\r\n      event: 'click',\r\n      handler: createLineOrder.addNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#submitLineOrderBtn',\r\n      event: 'click',\r\n      handler: createLineOrder.submitLineOrder\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderAddRetinue',\r\n      event: 'click',\r\n      handler: createLineOrder.showList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-order-line-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createLineOrder.subNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-order-line-addsub .add-num',\r\n      event: 'click',\r\n      handler: createLineOrder.addNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#submitLineOrderBtn',\r\n      event: 'click',\r\n      handler: createLineOrder.submitLineOrder\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderAddRetinue',\r\n      event: 'click',\r\n      handler: createLineOrder.showList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-order-line-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createLineOrder.subNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-order-line-addsub .add-num',\r\n      event: 'click',\r\n      handler: createLineOrder.addNum\r\n    }, {\r\n      element: \"#recommendView\",\r\n      selector: '.calendar-gotime-line',\r\n      event: 'click',\r\n      handler: createLineOrder.showlineList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#submitLineOrderBtn',\r\n      event: 'click',\r\n      handler: createLineOrder.submitLineOrder\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n\r\n}\r\n\r\nmodule.exports = createLineOrder;\r\n"},{"id":52,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\line-order.tpl.html","name":"./src/modules/shop/line-order.tpl.html","index":52,"index2":45,"size":5709,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"./line-order.tpl.html","loc":"4:13-45"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">线订单预定</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"line-order\\\" class=\\\"page page-order tmm-my-order-detail-page\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail tmm-order tmm-order-line\\\">\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n        <label style=\\\"width: 100%;display:block;\\\">\\r\\n           <div><input type=\\\"text\\\" placeholder=\\\"请选择出游日期\\\" readonly id=\\\"calendar-gotime\\\" class=\\\"calendar-gotime-line\\\"></div>\\r\\n        </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游人数</div>\\r\\n      <div class=\\\"list-block tmm-require tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        {{#each orderInfo.OrderItemsFare}}\\r\\n        <div class=\\\"item-type tmm-order-line-addsub\\\">\\r\\n          <span class=\\\"type-tit\\\">{{info}}</span>\\r\\n          <span class=\\\"fare-item item-num\\\"><span data-info=\\\"{{info}}\\\" data-room=\\\"{{is_room}}\\\" class=\\\"sub-num\\\"></span><span class=\\\"num\\\">{{number}}</span><span data-info=\\\"{{info}}\\\" data-room=\\\"{{is_room}}\\\" class=\\\"add-num\\\"></span></span>\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n      {{#each orderInfo.dot_list}}\\r\\n\\r\\n      {{#if @key%2}}\\r\\n      <div class=\\\"day-time\\\">{{mergeDay @key}}</div>\\r\\n      {{/if}}\\r\\n      <!-- 点的列表 -->\\r\\n      {{#each this}} {{#each this}}\\r\\n      <div class=\\\"list-block tmm-list-block\\\">\\r\\n        <!-- 项目列表 -->\\r\\n        {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <!-- 项目下面的商品列表 -->\\r\\n          <li class=\\\"tmm-item-li clearfix\\\">\\r\\n            <div class=\\\"tmm-item-title {{#js_compare \\\"this.free_status.value =='0'\\\"}}clear-before{{/js_compare}}\\\">\\r\\n              {{#js_compare \\\"this.classliy.value =='3'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.value =='1'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.value =='2'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{name}}\\r\\n              {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n            </div>\\r\\n\\r\\n          {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"fare-item\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number == 0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{info}}</div>\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"this.room_number !=0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{room room_number}}</div>\\r\\n                {{/js_compare}}\\r\\n  \\r\\n                <div class=\\\"fare-item\\\">￥{{price}}</div>\\r\\n                <div fare-item-type=\\\"{{info}}\\\" fare-item-room=\\\"{{room_number}}\\\" class=\\\"fare-item fare-item-num\\\">{{number}}</div>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n\\r\\n            </div>\\r\\n            {{/js_compare}}\\r\\n          </li>\\r\\n        </ul>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n      {{/each}} {{/each}} {{/each}}\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\" id=\\\"tmm-order-mainretinue-list\\\">\\r\\n          {{#if userInfo.main_retinueInfo.list}}\\r\\n          <div>{{userInfo.main_retinueInfo.list[0].name}}</div>\\r\\n          {{else}}\\r\\n          <div id=\\\"orderAddMainRetinue\\\" data-phone=\\\"{{userInfo.userInfo.phone}}\\\" class=\\\"red\\\">添加</div>\\r\\n          {{/if}}\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">随行人员</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\" id=\\\"tmm-order-retinue-list\\\">\\r\\n          <span id=\\\"orderAddRetinue\\\" data-type=\\\"2\\\" class=\\\"w_33 red\\\">选择</span>\\r\\n        </div>\\r\\n      </div>\\r\\n    \\r\\n<!--       <div class=\\\"content-block-title tmm-content-title\\\">优惠券</div>\\r\\n      <div class=\\\"list-block tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\" style=\\\"position: relative;\\\">\\r\\n        <div class=\\\"row select-coupon-code\\\">请使用优惠券<i class=\\\"icon ticon-arrow-right\\\" style=\\\"font-size: 14px;\\\"></i></div>\\r\\n      </div>\\r\\n -->\\r\\n    </div>\\r\\n     <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"tmm-total-price price\\\">￥<span id=\\\"tmm-order-total-price\\\">0.00</span></span>\\r\\n        <a class=\\\"tmm-order-detail-confirm-btn-active\\\" id=\\\"submitLineOrderBtn\\\">提交订单</a>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":53,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","name":"./src/modules/shop/addRetinueShop.js","index":53,"index2":48,"size":5600,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"./addRetinueShop","loc":"5:19-46"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"./addRetinueShop","loc":"5:19-46"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"./addRetinueShop","loc":"4:19-46"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  selectRetinue_tpl = require('./selectRetinue.tpl.html'),\r\n  template = require('../myInfo/add-retinue.tpl.html');\r\n\r\n\r\n\r\nvar info = {};\r\nvar initType = 0;\r\n//var retinueSelectDefault = [];//保存复选框选中的值\r\n\r\nvar addRetinueShop = {\r\n  init: function(type) {\r\n    var _this = this;\r\n    addRetinueShop.showView(type, _this);\r\n    addRetinueShop.bindEvent();\r\n  },\r\n\r\n  showView: function(type, _this) {\r\n    if (type == 2) {\r\n      info.phone = '';\r\n      info.title = '添加随行人员';\r\n      info.emailTxt = '选填'\r\n      info.type = 2;\r\n      initType = 2;\r\n    } else {\r\n      info.phone = $$(_this).attr('data-phone');\r\n\r\n      info.title = '添加主要联系人';\r\n      info.emailTxt = '必填'\r\n      info.type = 4;\r\n    }\r\n\r\n    var output = appFunc.renderTpl(template, info);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n  },\r\n\r\n  showList: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n\r\n      info.userInfo = dataRes.data;\r\n      var retinueBack = 0; //是否是返回按钮\r\n      var popupHTML = appFunc.renderTpl(selectRetinue_tpl, info.userInfo);\r\n\r\n      tmmApp.popup(popupHTML);\r\n      if (info.userInfo.retinueInfo.list != null) {\r\n        $$(\"#noRetinue\").css('display', 'none');\r\n      } else {\r\n        $$(\"#noRetinue\").css('display', 'block');\r\n      }\r\n      log.info(\"弹出层关闭事件------------新添加联系人\", retinueSelectDefault);\r\n      //随行人员的默认值\r\n      $$.each($$('.select-retinue'), function(index, value) {\r\n        for (var j = 0; j < retinueSelectDefault.length; j++) {\r\n          if ($$(value).attr('data-id') == retinueSelectDefault[j]) {\r\n            $$(value).attr('checked', 'checked');\r\n          }\r\n        }\r\n      });\r\n\r\n      $$('.retinueBackClose').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n      });\r\n\r\n      //添加随行人员事件\r\n      $$('.order-add-retinue').on('click', function() {\r\n        // $$('.popup').\r\n        tmmApp.closeModal('.popup')\r\n        setTimeout(function() {\r\n          addRetinueShop.init(2);\r\n\r\n        }, 200)\r\n      })\r\n\r\n\r\n      //弹出层关闭事件\r\n      $$('.popup').on('close', function() {\r\n        var str = '';\r\n        retinueSelect = [];\r\n        if (retinueBack != 1) {\r\n          retinueSelectDefault = [];\r\n        }\r\n\r\n        $$.each($$('.select-retinue'), function(index, value) {\r\n          if ($$(value).prop('checked')) {\r\n            if (retinueBack != 1) {\r\n              retinueSelectDefault.push($$(value).attr('data-id'));\r\n            }\r\n            retinueSelect.push({\r\n              'retinue_id': $$(value).attr('data-id'),\r\n              'name': $$(value).val(),\r\n              'is_main': \"0\"\r\n            });\r\n\r\n            str += '<div class=\"w_33 retinue\">' + $$(value).val() + '</div>';\r\n          }\r\n        });\r\n        if (retinueBack != 1) {\r\n          $$('#tmm-order-retinue-list .retinue').remove();\r\n          $$('#tmm-order-retinue-list').prepend(str);\r\n        }\r\n      });\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n  /**\r\n   * 添加主要联系人和随行人员\r\n   * @return {[type]} [description]\r\n   */\r\n  submitRetinue: function() {\r\n\r\n    var name = $$('#retinueName').val();\r\n    var identity = $$('#retinueIdentity').val();\r\n    var phone = $$('#retinuePhone').val();\r\n    var email = $$('#retinueEmail').val();\r\n\r\n    var token = {\r\n      \"Retinue\": {\r\n        \"name\": name,\r\n        \"identity\": identity,\r\n        \"phone\": phone,\r\n        \"email\": email\r\n      }\r\n    }\r\n\r\n    if (addRetinueShop.checkName(name) && addRetinueShop.checkPhone(phone) && addRetinueShop.checkIdentity(identity) && addRetinueShop.checkEmail(email)) {\r\n      httpService.updateRetinue('', token, info.type, function(data) {\r\n        var msg = '';\r\n        if (data.status == 0) {\r\n          if (data.form) {\r\n            for (msgName in data.form) {\r\n              tmmApp.alert(data.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        } else if (data.status == 1) { // 提交成功\r\n          msg = '添加成功'\r\n          if (initType == 2) {\r\n            tmmApp.alert(msg, '', function() {\r\n              tmmApp.getCurrentView().router.back();\r\n              addRetinueShop.showList();\r\n            });\r\n          } else {\r\n            tmmApp.alert(msg, '', function() {\r\n              tmmApp.getCurrentView().router.back();\r\n            });\r\n          }\r\n        }\r\n      }, function(data) {\r\n        tmmApp.alert('提交失败');\r\n      })\r\n    }\r\n  },\r\n\r\n  checkPhone: function(phone) {\r\n    if (phone == '') {\r\n      tmmApp.alert('手机号不能为空');\r\n      return false;\r\n    }\r\n    if (phone.length != 11) {\r\n      tmmApp.alert('手机号为11位数字');\r\n      return false;\r\n    } else if (!appFunc.isPhone(phone)) {\r\n      tmmApp.alert('手机号不是有效值');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkName: function(name) {\r\n    if (name == '') {\r\n      tmmApp.alert('姓名不能为空');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkIdentity: function(identity) {\r\n    if (identity == '') {\r\n      tmmApp.alert('身份证号码不能为空');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkEmail: function(email) {\r\n    if (!email) return true;\r\n    if (appFunc.isEmail(email)) {\r\n      return true;\r\n    }\r\n    tmmApp.alert('邮箱格式错误');\r\n    return false;\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#submitRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.submitRetinue\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = addRetinueShop;\r\n"},{"id":54,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\selectRetinue.tpl.html","name":"./src/modules/shop/selectRetinue.tpl.html","index":54,"index2":46,"size":1992,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"./selectRetinue.tpl.html","loc":"6:22-57"},{"moduleId":53,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","module":"./src/modules/shop/addRetinueShop.js","moduleName":"./src/modules/shop/addRetinueShop.js","type":"cjs require","userRequest":"./selectRetinue.tpl.html","loc":"4:22-57"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"./selectRetinue.tpl.html","loc":"6:22-57"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"./selectRetinue.tpl.html","loc":"5:22-57"}],"source":"module.exports = \"<div class=\\\"popup\\\">\\r\\n  <div class=\\\"navbar tmm-navbar tmm-select-retinue-navbar\\\">\\r\\n    <div class=\\\"navbar-inner\\\">\\r\\n      <div class=\\\"left\\\">\\r\\n        <span class=\\\"icon ticon-arrow-back retinueBackClose\\\" id=\\\"retinueBackClose\\\"></span>\\r\\n      </div>\\r\\n      <div class=\\\"center sliding\\\"><span class=\\\"tmm-retinue-title\\\">选择随行人员</span></div>\\r\\n      <div class=\\\"right\\\">\\r\\n        <span id=\\\"order-add-retinue\\\" class=\\\"red order-add-retinue\\\">添加</span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"content-block tmm-select-retinue-block\\\" style=\\\"margin-top:39px;\\\">\\r\\n    <div class=\\\"list-block\\\" style=\\\"margin-top:0px;\\\">\\r\\n      <!-- <div class=\\\"tmm-retinue-nar-header\\\">\\r\\n        <span class=\\\"icon ticon-arrow-back tmm-retinue-back retinueBackClose\\\" id=\\\"retinueBackClose\\\"></span>\\r\\n        <span class=\\\"tmm-retinue-title\\\">选择随行人员</span><span id=\\\"order-add-retinue\\\" class=\\\"red order-add-retinue tmm-retinue-add\\\">添加</span>\\r\\n      </div> -->\\r\\n      <ul class=\\\"tmm-select-retinue-ul\\\">\\r\\n        {{#each retinueInfo.list}}\\r\\n        <li>\\r\\n          <label class=\\\"label-checkbox item-content\\\">\\r\\n            <!-- Checked by default -->\\r\\n            <input type=\\\"checkbox\\\" class=\\\"select-retinue\\\" name=\\\"my-checkbox\\\" value=\\\"{{name}}\\\" data-id=\\\"{{value}}\\\">\\r\\n            <div class=\\\"item-media\\\">\\r\\n              <i class=\\\"icon icon-form-checkbox\\\"></i>\\r\\n            </div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">{{name}}</div>\\r\\n            </div>\\r\\n          </label>\\r\\n        </li>\\r\\n        {{/each}}\\r\\n      </ul>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div style=\\\"color:#999;font-size:12px; text-align:center; padding-top:60px; display:none;\\\" id=\\\"noRetinue\\\">你还没有添加随行人员，快去添加吧！</div>\\r\\n  <div class=\\\"tmm-retin-but\\\"><p class=\\\"tmm-select-retinue-p\\\"><a href=\\\"#\\\" class=\\\"close-popup button color-red active\\\">确认</a></p></div>\\r\\n</div>\\r\\n\";"},{"id":55,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\add-retinue.tpl.html","name":"./src/modules/myInfo/add-retinue.tpl.html","index":55,"index2":47,"size":2685,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":53,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\addRetinueShop.js","module":"./src/modules/shop/addRetinueShop.js","moduleName":"./src/modules/shop/addRetinueShop.js","type":"cjs require","userRequest":"../myInfo/add-retinue.tpl.html","loc":"5:13-54"},{"moduleId":106,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","module":"./src/modules/myInfo/addRetinue.js","moduleName":"./src/modules/myInfo/addRetinue.js","type":"cjs require","userRequest":"./add-retinue.tpl.html","loc":"2:13-46"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">{{title}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      {{#if canDelete}}\\r\\n      <a href=\\\"#\\\" id=\\\"deleteRetinue\\\">\\r\\n        <i class=\\\"icon ticon-delete\\\"></i>\\r\\n      </a>\\r\\n      {{/if}}\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"add-retinue\\\" class=\\\"page page-order\\\">\\r\\n    <div class=\\\"page-content tmm-add-retinue-page-contnet\\\">\\r\\n      <!-- 添加随行人员表单 -->\\r\\n      <form class=\\\"list-block inset tmm-myinfo-item-addform\\\" style=\\\"overflow: hidden;\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">姓名</div>\\r\\n\\r\\n                <input type=\\\"text\\\" name=\\\"name\\\" placeholder=\\\"必填\\\" class=\\\"add_input\\\" id=\\\"retinueName\\\" value=\\\"{{name}}\\\">\\r\\n  \\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">身份证</div>\\r\\n              \\r\\n                <input type=\\\"text\\\" name=\\\"identity\\\" placeholder=\\\"用于购买保险，平台不会泄漏(必填)\\\" class=\\\"add_input\\\" id=\\\"retinueIdentity\\\" value=\\\"{{identity}}\\\">\\r\\n              \\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">手机号码</div>\\r\\n              \\r\\n                <input type=\\\"tel\\\" name=\\\"phone\\\" placeholder=\\\"方便商家联系(必填)\\\" class=\\\"add_input\\\" id=\\\"retinuePhone\\\" {{#js_compare \\\"this.type == 3 || this.type == 4\\\"}}readonly{{/js_compare}}\\r\\n value=\\\"{{phone}}\\\">\\r\\n              \\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">邮箱</div>\\r\\n                \\r\\n               <!--  <input type=\\\"text\\\" name=\\\"email\\\" placeholder=\\\"选填\\\" class=\\\"add_input\\\" id=\\\"retinueEmail\\\" value=\\\"{{email}}\\\"> -->\\r\\n                <input type=\\\"text\\\" name=\\\"email\\\" placeholder=\\\"{{emailTxt}}\\\" class=\\\"add_input\\\" id=\\\"retinueEmail\\\" value=\\\"{{email}}\\\">\\r\\n              \\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"f_bottom\\\">\\r\\n          <span id=\\\"submitRetinue\\\" class=\\\"sub_active\\\">确认</span>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":56,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","name":"./src/modules/order/orderDetail.js","index":56,"index2":54,"size":14385,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./order/orderDetail","loc":"20:16-46"},{"moduleId":51,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createLineOrder.js","module":"./src/modules/shop/createLineOrder.js","moduleName":"./src/modules/shop/createLineOrder.js","type":"cjs require","userRequest":"../order/orderDetail","loc":"7:16-47"},{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"../order/orderDetail","loc":"7:22-53"},{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"../order/orderDetail","loc":"6:16-47"},{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"./orderDetail","loc":"12:16-40"},{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"./orderDetail","loc":"5:22-46"}],"source":"/**\r\n * @method orderDetail\r\n * @description  订单详情相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-10-27T16:33:48+0800\r\n */\r\nvar httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  dot_template = require('./dot-order.tpl.html'),\r\n  line_template = require('./line-order.tpl.html'),\r\n  act_template = require('./act-order.tpl.html'),\r\n  act_detail_template = require('./act-order-detail.tpl .html'),\r\n  QRCode = require('../code');\r\n\r\nvar timer = null;// 定时器对象\r\nvar urlapi = ''; // 传过来的订单api\r\nvar orderInfo = {}; // 订单信息\r\nvar tpltype = 0; // 点或者线的订单\r\n\r\n\r\nvar orderDetail = {\r\n  init: function() {\r\n   \r\n    appFunc.hideToolbar();\r\n    orderDetail.bindEvent();\r\n  },\r\n  loadView: function() {\r\n\r\n    orderDetail.init();\r\n    var _this = this;\r\n    // 类型，1=>'自助游(点)',2=>'自助游(线)',3=>'觅趣(旅游)',4=>'觅趣(农产品)',5=>'农产品')\r\n    var type = $$(_this).attr('data-type');\r\n    // 1=>'自助游(点)',2=>'自助游(线)',3=>'觅趣(旅游)',4=>'觅趣(农产品)',5=>'农产品')的链接\r\n    var link = $$(_this).attr('data-link');\r\n\r\n    urlapi = link;\r\n    log.info('type--', type);\r\n\r\n    var orderType = {\r\n      1: dot_template,\r\n      2: line_template,\r\n      3: act_template,\r\n      4: act_template,\r\n      5: false\r\n    };\r\n\r\n    if (orderType[type]) {\r\n      // 已经触发加载时注销点击事件，防止二次触发加载\r\n      $$('#myView').off('click', '#tmm-my-order-page .tmm-my-order-detail-show', orderDetail.loadView);   \r\n      orderDetail.getOrderDetail(orderType[type], type, link);\r\n    } else {\r\n      //tmmApp.alert('请求的链接不存在');\r\n    }\r\n\r\n\r\n  },\r\n  loadActDetail: function() {\r\n\r\n    var _this = this;\r\n    // 类型，1=>'自助游(点)',2=>'自助游(线)',3=>'觅趣(旅游)',4=>'觅趣(农产品)',5=>'农产品')\r\n    var type = $$(_this).attr('data-type');\r\n    // 1=>'自助游(点)',2=>'自助游(线)',3=>'觅趣(旅游)',4=>'觅趣(农产品)',5=>'农产品')的链接\r\n    var link = $$(_this).attr('data-link');\r\n\r\n    urlapi = link;\r\n\r\n    var orderType = {\r\n      1: dot_template,\r\n      2: line_template,\r\n      3: act_template,\r\n      4: act_template,\r\n      5: false\r\n    };\r\n      \r\n    orderDetail.getOrderDetail(orderType[type], type, link);\r\n  },\r\n  gotoOrderView: function(type, link) {\r\n    tpltype = type;\r\n    orderDetail.init();\r\n    var orderType = {\r\n      1: dot_template,\r\n      2: line_template,\r\n      3: act_template,\r\n      4: act_detail_template,\r\n      5: false\r\n    };\r\n\r\n    urlapi = link;\r\n    if (orderType[type]) {\r\n      orderDetail.gotoOrderDetail(orderType[type], type, link);\r\n    } else {\r\n      //tmmApp.alert('请求的链接不存在');\r\n    }\r\n\r\n  },\r\n  gotoOrderDetail: function(template, type, url) {\r\n    tpltype = type;\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getOrderDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          orderInfo = dataRes.data;\r\n          // 如果订单处于待处理状态，加载定时器\r\n          if (orderInfo.status.order_status.value == 0) {\r\n            orderDetail.setTime();\r\n          } \r\n          var hasRetinue = 0;\r\n          for(var i =0; i < dataRes.data.retinue.length; i++){\r\n            if(dataRes.data.retinue[i].is_main == 0){\r\n              hasRetinue = 1;\r\n              break;\r\n            }\r\n          }\r\n          var data = {\r\n            orderObj: dataRes.data,\r\n            hasRetinue: hasRetinue,\r\n            orderOwn: {\r\n              'type': type,\r\n              'url': url\r\n            }\r\n          };\r\n\r\n\r\n          var output = appFunc.renderTpl(template, data);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n            reload: true\r\n          });\r\n\r\n          orderDetail.bindEvent();\r\n\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  getOrderDetail: function(template, type, url) {\r\n    tpltype = type;\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getOrderDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          orderInfo = dataRes.data;\r\n          // 如果订单处于待处理状态，加载定时器\r\n          if (orderInfo.status.order_status.value == 0) {\r\n            orderDetail.setTime();\r\n          } \r\n          \r\n          var hasRetinue = 0;\r\n          for(var i =0; i < dataRes.data.retinue.length; i++){\r\n            if(dataRes.data.retinue[i].is_main == 0){\r\n              hasRetinue = 1;\r\n              break;\r\n            }\r\n          }\r\n          var data = {\r\n            orderObj: dataRes.data,\r\n            hasRetinue: hasRetinue,\r\n            orderOwn: {\r\n              'type': type,              \r\n              'url': url\r\n            }\r\n          };\r\n\r\n\r\n          var output = appFunc.renderTpl(template, data);\r\n          \r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n          //alert($$('body').find(\"#tmm-popupQRcode-detail\").hasClass('tmm-popupQRcode'));\r\n          if($$('body').find(\"#tmm-popupQRcode-detail\").hasClass('tmm-popupQRcode')){\r\n            $$(\"#tmm-popupQRcode-detail\").html(\"\");\r\n          }\r\n          orderDetail.bindEvent();\r\n\r\n          tmmApp.onPageAfterAnimation('order-detail', function(e) {\r\n            $$('#myView').on('click', '#tmm-my-order-page .tmm-my-order-detail-show', orderDetail.loadView);\r\n          });\r\n\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        $$('#myView').on('click', '#tmm-my-order-page .tmm-my-order-detail-show', orderDetail.loadView);\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  orderPay: function() {\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    var order_type = $$(_this).attr('data-type');\r\n    var order_link = $$(_this).attr('data-link');\r\n    var price = $$(_this).attr('data-price');\r\n\r\n    appFunc.payOrder(order_id, price, \r\n      function(dataRes, status) {\r\n      if (dataRes.status == 1) {\r\n        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n          connectWebViewJavascriptBridge(function(bridge) {\r\n            bridge.callHandler('ObjcCallback', {\r\n              'PayCode': dataRes.data.alipay\r\n            }, function(response) {})\r\n          });\r\n        } else if (tmmApp.device.android) {\r\n          window.jsObj.payMoney(dataRes.data.alipay);\r\n        }\r\n\r\n        tmmApp.confirm('您的订单是否支付成功', function() {\r\n          orderDetail.refreshView(tpltype, urlapi);\r\n        }, function() {\r\n          orderDetail.refreshView(tpltype, urlapi);\r\n        });\r\n\r\n\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('支付失败，请重试');\r\n      }\r\n      tmmApp.hideIndicator();\r\n      orderDetail.refreshView(order_type, order_link);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      },function(){\r\n        orderDetail.refreshView(order_type, order_link);\r\n      });\r\n\r\n\r\n    // var data = {\r\n    //   \"id\": order_id,\r\n    //   \"pay_type\": \"1\"\r\n    // };\r\n    // httpService.orderPay(\r\n    //   data,\r\n    //   function(dataRes, status) {\r\n    //     if (dataRes.status == 1) {\r\n    //       if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n    //         connectWebViewJavascriptBridge(function(bridge) {\r\n    //           bridge.callHandler('ObjcCallback', {\r\n    //             'PayCode': dataRes.data.alipay\r\n    //           }, function(response) {})\r\n    //         });\r\n    //       } else if (tmmApp.device.android) {\r\n    //         window.jsObj.payMoney(dataRes.data.alipay);\r\n    //       }\r\n\r\n    //       tmmApp.confirm('您的订单是否支付成功',function(){\r\n    //         orderDetail.refreshView(tpltype,urlapi);\r\n    //       },function(){\r\n    //         orderDetail.refreshView(tpltype,urlapi);\r\n    //       });\r\n          \r\n\r\n    //     } else {\r\n    //       tmmApp.hideIndicator();\r\n    //       tmmApp.alert('支付失败，请重试');\r\n    //     }\r\n    //     tmmApp.hideIndicator();\r\n    //     orderDetail.refreshView(order_type, order_link);\r\n    //   },\r\n    //   function(dataRes, status) {\r\n    //     tmmApp.hideIndicator();\r\n    //     tmmApp.alert('网络超时，请重试');\r\n    //   }\r\n    // );\r\n    log.info('orderPay--', order_id);\r\n  },\r\n  refreshView: function(type, url) {\r\n    orderDetail.bindEvent();\r\n    var orderType = {\r\n      1: dot_template,\r\n      2: line_template,\r\n      3: act_template,\r\n      4: act_template,\r\n      5: false\r\n    };\r\n    var template = orderType[type];\r\n   \r\n    if (template) {\r\n\r\n      httpService.getOrderDetail(\r\n        url,\r\n        function(dataRes, statusCode) {\r\n          var hasRetinue = 0;\r\n          for(var i =0; i < dataRes.data.retinue.length; i++){\r\n            if(dataRes.data.retinue[i].is_main == 0){\r\n              hasRetinue = 1;\r\n              break;\r\n            }\r\n          }\r\n          if (dataRes.status == 1) {\r\n            var data = {\r\n              orderObj: dataRes.data,\r\n              hasRetinue: hasRetinue,\r\n              orderOwn: {\r\n                'type': type,\r\n                'url': url\r\n              }\r\n            };\r\n            var output = appFunc.renderTpl(template, data);\r\n\r\n            tmmApp.getCurrentView().router.load({\r\n              content: output,\r\n              reload: true,\r\n              animatePages: false\r\n            });\r\n\r\n            orderDetail.init();\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    } else {\r\n      //tmmApp.alert('请求的链接不存在');\r\n    }\r\n  },\r\n  showQrCode: function(){\r\n    if ($$(this).attr('data-sq') == 1) {\r\n      var link = $$(this).attr('data-link');\r\n      tmmApp.showIndicator();\r\n      httpService.getQrCode(link,function(dataRes){\r\n\r\n        tmmApp.hideIndicator();\r\n        if($$('body').find(\".delete\").hasClass('closeQrCodeDeleteModal') == false){\r\n          $$('body').append('<div class=\"delete closeQrCodeDeleteModal\"></div>');\r\n        } else { \r\n          $$('body').find(\".closeQrCodeDeleteModal\").css('display', 'block');\r\n        }\r\n        \r\n        if($$('body').find(\"#tmm-popupQRcode-detail\").hasClass('tmm-popupQRcode') == false){\r\n          $$('body').append('<div id=\"tmm-popupQRcode-detail\" class=\"tmm-popupQRcode\"></div>');\r\n        } else {\r\n          $$(\"#tmm-popupQRcode-detail\").css('display', 'block');\r\n        }\r\n        $$('body').find(\".modal-overlay\").remove();\r\n        if($$('body').find(\".modal-overlay\").hasClass('tmm-QrCode-detail-show')){\r\n          $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n        } else {\r\n          $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-QrCode-detail-show tmm-banner-detail-show-color\"></div>');\r\n        }\r\n        $$(\".spopupQRcode\").appendTo($$(\"#tmm-popupQRcode-detail\"));\r\n        $$(\".spopupQRcode\").css(\"display\", \"block\");\r\n        $$(\"#popupQRcodeImage\").html(\"\");\r\n        $$(\".tmm-eject-juan\").html(\"\");\r\n        var oDiv = document.getElementById('popupQRcodeImage');\r\n        var qrcode = new QRCode(oDiv, {\r\n          width : 150,//设置宽高\r\n          height : 150,\r\n        });\r\n        var barcode = dataRes.data.barcode.value\r\n\r\n        qrcode.makeCode(barcode);\r\n        var formatBarcode = appFunc.toFormatNum(barcode);\r\n        $$(\".tmm-eject-juan\").html(\"觅劵：\" + formatBarcode);\r\n        \r\n      },function(){\r\n        tmmApp.hideIndicator();\r\n      });\r\n    }\r\n    \r\n  },\r\n  hideQrCode: function() {\r\n    if($$('body').find(\".modal\").hasClass(\"modal-in\")){\r\n      $$('body').find(\".modal\").remove();\r\n    }\r\n    $$(\"#popupQRcodeImage\").html(\"\");\r\n    $$(\".tmm-eject-juan\").html(\"\");\r\n    \r\n    $$('body').find(\".closeQrCodeDeleteModal\").css('display', 'none');\r\n    $$(\"#tmm-popupQRcode-detail\").css('display', 'none');\r\n    $$(\".tmm-QrCode-detail-show\").removeClass('modal-overlay-visible');\r\n  },\r\n  /**\r\n   * 加载定时器\r\n   * @return {[type]} [description]\r\n   */\r\n  setTime: function() {\r\n    var num = 0;\r\n    timer = setInterval(function(){\r\n      num++;\r\n      orderDetail.getOrderInfo(function(){\r\n       log.info(orderInfo);\r\n        // 订单状态变为待支付状态才能提交订单\r\n        if (orderInfo.status.centre_status.value == 1) {\r\n\r\n          orderDetail.clearTime();\r\n          orderDetail.refreshView(tpltype,urlapi);\r\n        }\r\n        \r\n      });\r\n\r\n    }, 5000);\r\n  },\r\n  /**\r\n   * 关闭定时器\r\n   */\r\n  clearTime: function() {\r\n    if (timer) {\r\n      clearInterval(timer);\r\n    }\r\n  },\r\n  /**\r\n   * 获取订单信息\r\n   * @return {[type]} [description]\r\n   */\r\n  getOrderInfo: function(fn) {\r\n    httpService.getOrderDetail(\r\n      urlapi,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          orderInfo = dataRes.data;\r\n\r\n          fn && fn();\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        \r\n      }\r\n    );\r\n  },\r\n  bindEvent: function() {\r\n\r\n    var bindings = [\r\n      {\r\n        element: '#myView',\r\n        selector: '.tmm-my-order-detail-page .tmm-order-detail-confirm-pay',\r\n        event: 'click',\r\n        handler: orderDetail.orderPay\r\n      },{\r\n        element: \"#recommendView\",\r\n        selector: \".tmm-my-order-detail-page .tmm-order-detail-confirm-pay\",\r\n        event: 'click',\r\n        handler: orderDetail.orderPay\r\n      },{\r\n        element: \"#seekView\",\r\n        selector: \".tmm-my-order-detail-page .tmm-order-detail-confirm-pay\",\r\n        event: 'click',\r\n        handler: orderDetail.orderPay\r\n      },{\r\n        element: \"#myView\",\r\n        selector: \".ticon-qr-code\",\r\n        event: 'click',\r\n        handler: orderDetail.showQrCode\r\n      },{\r\n        element: \"#recommendView\",\r\n        selector: \".ticon-qr-code\",\r\n        event: 'click',\r\n        handler: orderDetail.showQrCode\r\n      },{\r\n        element: \"#seekView\",\r\n        selector: \".ticon-qr-code\",\r\n        event: 'click',\r\n        handler: orderDetail.showQrCode\r\n      }, {\r\n      element: 'html',\r\n      selector: '.closeQrCodeDeleteModal',\r\n      event: 'click',\r\n      handler: orderDetail.hideQrCode\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-QrCode-detail-show',\r\n      event: 'click',\r\n      handler: orderDetail.hideQrCode\r\n    }\r\n    ];\r\n    // 调用bindEvents方法进行事件绑定\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = orderDetail;\r\n"},{"id":57,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\dot-order.tpl.html","name":"./src/modules/order/dot-order.tpl.html","index":57,"index2":49,"size":7427,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"./dot-order.tpl.html","loc":"11:17-48"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">订单详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"order-detail\\\" class=\\\"page page-order tmm-my-order-detail-page\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail\\\">\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>{{orderObj.go_time}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n        {{#each orderObj.items_fare}}\\r\\n          <li class=\\\"tmm-item-li clearfix\\\">\\r\\n            <div class=\\\"tmm-item-title\\\">\\r\\n              {{#js_compare \\\"this.classliy.name =='玩'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='吃'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='住'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}{{name}}\\r\\n\\r\\n              {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n              {{#js_compare \\\"this.free_status.value !='0'\\\"}}<i class=\\\"icon ticon-qr-code {{#js_compare \\\"this.barcode.is_barcode !='1' \\\"}}gray{{/js_compare}}\\\" data-sq=\\\"{{barcode.is_barcode}}\\\" data-link=\\\"{{barcode.link}}\\\"></i>{{/js_compare}}\\r\\n               \\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n            {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n\\r\\n            \\r\\n            {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <div class=\\\"row tmm-order-status\\\" style=\\\"padding-bottom:0px !important;\\\">\\r\\n                    <div style=\\\"color:#A800FF;font-size:14px;\\\">\\r\\n                    {{formatStartDate start_date}}-{{formatEndDate end_date}}（住{{hotel_number}}晚）\\r\\n                    </div>\\r\\n                </div>\\r\\n            {{/js_compare}}\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"tmm-fare-first w_40\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number == '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{info}}</span>\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{room room_number}}</span>\\r\\n                {{/js_compare}}\\r\\n                <span class=\\\"w_10\\\">{{number}}</span>\\r\\n                <span class=\\\"w_20\\\">￥{{count}}</span>\\r\\n              </div>\\r\\n            {{/each}}\\r\\n            {{/js_compare}}\\r\\n            </div>\\r\\n          </li>\\r\\n        {{/each}}\\r\\n        </ul>\\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n      {{#each orderObj.retinue}}\\r\\n        {{#js_compare \\\"this.is_main == 1 \\\"}}\\r\\n          <div>{{name}}</div>\\r\\n        {{/js_compare}}\\r\\n      {{/each}}  \\r\\n        </div>\\r\\n      </div>\\r\\n      {{#js_compare \\\"this.hasRetinue == 1 \\\"}}\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人员<!-- （{{js \\\" this.orderObj.user_go_count.value - 1  \\\"}}人） --></div>\\r\\n        <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n          <div class=\\\"row  tmm-order-status\\\">\\r\\n          {{#each orderObj.retinue}}\\r\\n            {{#js_compare \\\"this.is_main == 0 \\\"}}\\r\\n              <div class=\\\"w_33\\\">{{name}}</div>\\r\\n            {{/js_compare}}\\r\\n          {{/each}}\\r\\n          </div>\\r\\n        </div>\\r\\n      {{/js_compare}}\\r\\n<!--       <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n        <div class=\\\"tmm-order-safe-pay\\\">保险费用</div>\\r\\n        <div class=\\\"tmm-order-safe-detail\\\">保单明细</div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"order-fare-item\\\">大梅沙线路玩耍</span>\\r\\n          <span class=\\\"order-fare-item\\\">单价：10元</span>\\r\\n          <span class=\\\"order-fare-item\\\">10份</span>\\r\\n        </div>\\r\\n      </div> -->\\r\\n\\r\\n      <!-- <div class=\\\"content-block-title tmm-content-title\\\">合计价格</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单总价<span class=\\\"tmm-total-price\\\">￥{{orderObj.order_price.value}}</span></div>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">订单状态</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单编号：{{orderObj.order_no}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <p class=\\\"require phone tmm-retinue-top-border tmm-retinue-bottom-border\\\">索取发票请拨打电话：400-019-7090</p>\\r\\n\\r\\n      \\r\\n    </div>\\r\\n    {{#js_compare \\\"this.orderObj.status.centre_status.value =='0'\\\"}}\\r\\n      <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"price\\\">￥{{orderObj.order_price.value}}</span>\\r\\n        <span class=\\\"tmm-order-detail-confirm-btn-active tmm-order-detail-confirm-pay\\\" data-id=\\\"{{orderObj.value}}\\\" data-type=\\\"{{orderOwn.type}}\\\" data-link=\\\"{{orderOwn.url}}\\\" data-price=\\\"{{orderObj.order_price.value}}\\\">确认支付</span>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      {{#js_compare \\\"this.orderObj.status.centre_status.value =='-1'\\\"}}\\r\\n        {{#js_compare \\\"this.orderObj.status.order_status.value =='0'\\\"}}\\r\\n          <div class=\\\"tmm-border-btn\\\">\\r\\n            <span class=\\\"price\\\">￥{{orderObj.order_price.value}}</span>\\r\\n            <span class=\\\"tmm-order-detail-confirm-btn\\\">等待确认</span>\\r\\n          </div>\\r\\n        {{/js_compare}}\\r\\n      {{/js_compare}}\\r\\n      \\r\\n      <!--扫码弹出层-->\\r\\n  \\t\\t<div class=\\\"spopupQRcode tmm-scan-code\\\" id=\\\"spopupQRcode\\\" style=\\\"display: none;\\\">\\r\\n    \\t\\t<div class=\\\"tmm-eject-scan-code\\\">\\r\\n    \\t\\t\\t<div class=\\\"popupQRcode tmm-eject-code\\\" id=\\\"popupQRcodeImage\\\">\\r\\n    \\t\\t\\t</div>\\r\\n    \\t\\t</div>\\r\\n    \\t\\t<span></span>\\r\\n    \\t\\t<div class=\\\"tmm-eject-hao\\\">\\r\\n    \\t\\t\\t<p class=\\\"tmm-eject-juan\\\"></p>\\r\\n    \\t\\t</div>\\r\\n    \\t</div>\\r\\n      \\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":58,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\line-order.tpl.html","name":"./src/modules/order/line-order.tpl.html","index":58,"index2":50,"size":7284,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"./line-order.tpl.html","loc":"12:18-50"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">订单详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"order-detail\\\" class=\\\"page page-order tmm-my-order-detail-page\\\" id=\\\"tmm-order-line-detail\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail\\\">\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>{{orderObj.go_time}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n    {{#each orderObj.items_fare}}\\r\\n     {{#if @key%2}}\\r\\n        <div class=\\\"tmm-day-num\\\">{{mergeDay @key}}</div>\\r\\n      {{/if}}\\r\\n\\r\\n        {{#each this}}\\r\\n          {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <li class=\\\"tmm-item-li clearfix b-border\\\">\\r\\n            <div class=\\\"tmm-item-title\\\">\\r\\n              {{#js_compare \\\"this.classliy.name =='玩'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='吃'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='住'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}{{name}}\\r\\n\\r\\n              {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n              {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n              <i class=\\\"icon ticon-qr-code {{#js_compare \\\"this.barcode.is_barcode !='1' \\\"}}gray{{/js_compare}}\\\" data-sq=\\\"{{barcode.is_barcode}}\\\" data-link=\\\"{{barcode.link}}\\\"></i>{{/js_compare}}\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n            {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n              {{#js_compare \\\"this.number != '0' \\\"}}\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"tmm-fare-first w_40\\\">{{name}}</div>\\r\\n\\r\\n                {{#js_compare \\\"this.room_number == '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{info}}</span>\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{room room_number}}</span>\\r\\n                {{/js_compare}}\\r\\n                <span class=\\\"w_10\\\">{{number}}</span>\\r\\n                <span class=\\\"w_20\\\">￥{{count}}</span>\\r\\n              </div>\\r\\n              {{/js_compare}}\\r\\n            {{/each}}\\r\\n            {{/js_compare}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n          {{/each}}\\r\\n        {{/each}}\\r\\n    {{/each}}   \\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n      {{#each orderObj.retinue}}\\r\\n        {{#js_compare \\\"this.is_main == 1 \\\"}}\\r\\n          <div>{{name}}</div>\\r\\n        {{/js_compare}}\\r\\n      {{/each}}  \\r\\n        </div>\\r\\n      </div>\\r\\n      {{#js_compare \\\"this.hasRetinue == 1 \\\"}}\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人员<!-- （{{js \\\" this.orderObj.user_go_count.value - 1  \\\"}}人） --></div>\\r\\n        <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n          <div class=\\\"row  tmm-order-status\\\">\\r\\n\\r\\n        {{#each orderObj.retinue}}\\r\\n          {{#js_compare \\\"this.is_main == 0 \\\"}}\\r\\n            <div class=\\\"w_33\\\">{{name}}</div>\\r\\n          {{/js_compare}}\\r\\n        {{/each}}\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      {{/js_compare}}\\r\\n<!--       <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n        <div class=\\\"tmm-order-safe-pay\\\">保险费用</div>\\r\\n        <div class=\\\"tmm-order-safe-detail\\\">保单明细</div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"order-fare-item\\\">大梅沙线路玩耍</span>\\r\\n          <span class=\\\"order-fare-item\\\">单价：10元</span>\\r\\n          <span class=\\\"order-fare-item\\\">10份</span>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">合计价格</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单总价<span class=\\\"tmm-total-price\\\">￥{{orderObj.order_price.value}}</span></div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">订单状态</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单编号：{{orderObj.order_no}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <p class=\\\"require phone tmm-retinue-top-border tmm-retinue-bottom-border\\\">索取发票请拨打电话：400-019-7090</p>\\r\\n      \\r\\n    </div>\\r\\n    {{#js_compare \\\"this.orderObj.status.centre_status.value =='0'\\\"}}\\r\\n      <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"price\\\">￥{{orderObj.order_price.value}}</span>\\r\\n        <span class=\\\"tmm-order-detail-confirm-btn-active tmm-order-detail-confirm-pay\\\" data-id=\\\"{{orderObj.value}}\\\" data-type=\\\"{{orderOwn.type}}\\\" data-link=\\\"{{orderOwn.url}}\\\" data-price=\\\"{{orderObj.order_price.value}}\\\">确认支付</span>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      {{#js_compare \\\"this.orderObj.status.centre_status.value =='-1'\\\"}}\\r\\n        {{#js_compare \\\"this.orderObj.status.order_status.value =='0'\\\"}}\\r\\n        <div class=\\\"tmm-border-btn\\\">\\r\\n          <span class=\\\"price\\\">￥{{orderObj.order_price.value}}</span>\\r\\n          <span class=\\\"tmm-order-detail-confirm-btn\\\">等待确认</span>\\r\\n        </div>\\r\\n        {{/js_compare}}\\r\\n      {{/js_compare}}\\r\\n\\r\\n\\t\\t\\t<!--扫码弹出层-->\\r\\n  \\t\\t<div class=\\\"spopupQRcode tmm-scan-code\\\" id=\\\"spopupQRcode\\\" style=\\\"display: none;\\\">\\r\\n    \\t\\t<div class=\\\"tmm-eject-scan-code\\\">\\r\\n    \\t\\t\\t<div class=\\\"popupQRcode tmm-eject-code\\\" id=\\\"popupQRcodeImage\\\">\\r\\n    \\t\\t\\t</div>\\r\\n    \\t\\t</div>\\r\\n    \\t\\t<span></span>\\r\\n    \\t\\t<div class=\\\"tmm-eject-hao\\\">\\r\\n    \\t\\t\\t<p class=\\\"tmm-eject-juan\\\"></p>\\r\\n    \\t\\t</div>\\r\\n    \\t</div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":59,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\act-order.tpl.html","name":"./src/modules/order/act-order.tpl.html","index":59,"index2":51,"size":6909,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"./act-order.tpl.html","loc":"13:17-48"},{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"../order/act-order.tpl.html","loc":"4:13-51"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣报名详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"order-detail\\\" class=\\\"page page-order tmm-my-order-detail-page\\\" id=\\\"tmm-order-line-detail\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail\\\">\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>{{orderObj.go_time}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n    {{#each orderObj.items_fare}}\\r\\n    {{#if @key%2}}\\r\\n        <div class=\\\"tmm-day-num\\\">{{mergeDay @key}}</div>\\r\\n    {{/if}}\\r\\n        {{#each this}}\\r\\n          {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <li class=\\\"tmm-item-li clearfix b-border\\\">\\r\\n            <div class=\\\"tmm-item-title\\\">\\r\\n            {{#js_compare \\\"this.classliy.name =='玩'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='吃'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='住'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}{{name}}\\r\\n             \\r\\n            {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n            {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n              {{#js_compare \\\"this.number != '0' \\\"}}\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"tmm-fare-first w_40\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number == '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{info}}</span>\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{room room_number}}</span>\\r\\n                {{/js_compare}}\\r\\n                <span class=\\\"w_10\\\">{{number}}</span>\\r\\n                <span class=\\\"w_20\\\">￥{{count}}</span>\\r\\n              </div>\\r\\n              {{/js_compare}}\\r\\n            {{/each}}\\r\\n            {{/js_compare}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n          {{/each}}\\r\\n        {{/each}}\\r\\n    {{/each}}   \\r\\n      </div>\\r\\n\\r\\n      {{#js_compare \\\"this.orderObj.is_organizer.value =='1'\\\"}}\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n        <div class=\\\"tmm-order-safe-pay\\\">服务费（交通、导服及其他）</div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"fare-item w_40\\\">服务费 </span>\\r\\n          <span class=\\\"fare-item w_40\\\">单价：{{orderObj.user_price_fact.value}}元</span>\\r\\n          <span class=\\\"fare-item\\\" style=\\\"padding-right: 16px;\\\">{{orderObj.user_go_count.value}}份</span>\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n      {{#each orderObj.retinue}}\\r\\n        {{#js_compare \\\"this.is_main == 1 \\\"}}\\r\\n          <div>{{name}}</div>\\r\\n        {{/js_compare}}\\r\\n      {{/each}}  \\r\\n        </div>\\r\\n      </div>\\r\\n      {{#js_compare \\\"this.hasRetinue == 1 \\\"}}\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人员<!-- （{{js \\\" this.orderObj.user_go_count.value - 1  \\\"}}人） --></div>\\r\\n        <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n          <div class=\\\"row  tmm-order-status\\\">\\r\\n\\r\\n        {{#each orderObj.retinue}}\\r\\n          {{#js_compare \\\"this.is_main == 0 \\\"}}\\r\\n            <div class=\\\"w_33\\\">{{name}}</div>\\r\\n          {{/js_compare}}\\r\\n        {{/each}}\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      {{/js_compare}}\\r\\n<!--       <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n        <div class=\\\"tmm-order-safe-pay\\\">保险费用</div>\\r\\n        <div class=\\\"tmm-order-safe-detail\\\">保单明细</div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"order-fare-item\\\">大梅沙线路玩耍</span>\\r\\n          <span class=\\\"order-fare-item\\\">单价：10元</span>\\r\\n          <span class=\\\"order-fare-item\\\">10份</span>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <!-- <div class=\\\"content-block-title tmm-content-title\\\">合计价格</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单总价<span class=\\\"tmm-total-price\\\">￥{{orderObj.order_price.value}}</span></div>\\r\\n        </div>\\r\\n      </div> -->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">订单状态</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单编号：{{orderObj.order_no}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <p class=\\\"require phone tmm-retinue-top-border tmm-retinue-bottom-border\\\">索取发票请拨打电话：400-019-7090</p>\\r\\n\\r\\n     \\r\\n      \\r\\n    </div>\\r\\n    {{#js_compare \\\"this.orderObj.status.centre_status.value =='0'\\\"}}\\r\\n    \\r\\n      <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"price\\\">￥{{orderObj.order_price.value}}</span>\\r\\n        <span class=\\\"tmm-order-detail-confirm-btn-active tmm-order-detail-confirm-pay\\\" data-id=\\\"{{orderObj.value}}\\\" data-type=\\\"{{orderOwn.type}}\\\" data-link=\\\"{{orderOwn.url}}\\\" data-price=\\\"{{orderObj.order_price.value}}\\\">确认支付</span>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":60,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\act-order-detail.tpl .html","name":"./src/modules/order/act-order-detail.tpl .html","index":60,"index2":52,"size":4857,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"./act-order-detail.tpl .html","loc":"14:24-63"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣报名详情</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"order-detail\\\" class=\\\"page page-order tmm-my-order-detail-page\\\" id=\\\"tmm-order-line-detail\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail\\\">\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>{{orderObj.go_time}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n    {{#each orderObj.items_fare}}\\r\\n        {{#if @key%2}}\\r\\n        <div class=\\\"tmm-day-num\\\">{{mergeDay @key}}</div>\\r\\n        {{/if}}\\r\\n        {{#each this}}\\r\\n          {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <li class=\\\"tmm-item-li clearfix b-border\\\">\\r\\n            <div class=\\\"tmm-item-title\\\">\\r\\n              {{name}}\\r\\n             \\r\\n          \\r\\n\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n            {{#each fare}}\\r\\n              {{#js_compare \\\"this.number != '0' \\\"}}\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"tmm-fare-first w_40\\\">{{name}}</div>\\r\\n\\r\\n                {{#js_compare \\\"this.room_number == '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{info}}</span>\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{room room_number}}</span>\\r\\n                {{/js_compare}}\\r\\n                <span class=\\\"w_10\\\">{{number}}</span>\\r\\n                <span class=\\\"w_20\\\">￥{{count}}</span>\\r\\n              </div>\\r\\n              {{/js_compare}}\\r\\n            {{/each}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n          {{/each}}\\r\\n        {{/each}}\\r\\n    {{/each}}   \\r\\n      </div>\\r\\n\\r\\n      {{#js_compare \\\"this.is_organizer.value =='1'\\\"}}\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n        <div class=\\\"tmm-order-safe-pay\\\">服务费（交通、导服及其他）</div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"fare-item w_40\\\">服务费￥{{orderObj.user_price_fact.value}}/人</span>\\r\\n          <span class=\\\"fare-item w_40\\\">{{orderObj.user_go_count.value}}份</span>\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n      {{#each orderObj.retinue}}\\r\\n        {{#js_compare \\\"this.is_main == 1 \\\"}}\\r\\n          <div>{{name}}</div>\\r\\n        {{/js_compare}}\\r\\n      {{/each}}  \\r\\n        </div>\\r\\n      </div>\\r\\n      {{#js_compare \\\"this.hasRetinue == 1 \\\"}}\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人员<!-- （{{js \\\" this.orderObj.user_go_count.value - 1  \\\"}}人） --></div>\\r\\n        <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n          <div class=\\\"row  tmm-order-status\\\">\\r\\n\\r\\n        {{#each orderObj.retinue}}\\r\\n          {{#js_compare \\\"this.is_main == 0 \\\"}}\\r\\n            <div class=\\\"w_33\\\">{{name}}</div>\\r\\n          {{/js_compare}}\\r\\n        {{/each}}\\r\\n\\r\\n          </div>\\r\\n        </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">合计价格</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单总价<span class=\\\"tmm-total-price\\\">￥{{orderObj.order_price.value}}</span></div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">订单状态</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>订单编号：{{orderObj.order_no}}</div>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":61,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\code.js","name":"./src/modules/code.js","index":61,"index2":53,"size":44919,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":56,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderDetail.js","module":"./src/modules/order/orderDetail.js","moduleName":"./src/modules/order/orderDetail.js","type":"cjs require","userRequest":"../code","loc":"15:11-29"}],"source":"/*from tccdn minify at 2014-6-4 14:59:43,file：/cn/c/c/qrcode.js*/\r\n/**\r\n * @fileoverview\r\n * - Using the 'QRCode for Javascript library'\r\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\r\n * - this library has no dependencies.\r\n * \r\n * @author davidshimjs\r\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\r\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\r\n */\r\nvar QRCode;\r\n\r\n(function () {\r\n    //---------------------------------------------------------------------\r\n    // QRCode for JavaScript\r\n    //\r\n    // Copyright (c) 2009 Kazuhiko Arase\r\n    //\r\n    // URL: http://www.d-project.com/\r\n    //\r\n    // Licensed under the MIT license:\r\n    //   http://www.opensource.org/licenses/mit-license.php\r\n    //\r\n    // The word \"QR Code\" is registered trademark of \r\n    // DENSO WAVE INCORPORATED\r\n    //   http://www.denso-wave.com/qrcode/faqpatent-e.html\r\n    //\r\n    //---------------------------------------------------------------------\r\n    function QR8bitByte(data) {\r\n        this.mode = QRMode.MODE_8BIT_BYTE;\r\n        this.data = data;\r\n        this.parsedData = [];\r\n\r\n        // Added to support UTF-8 Characters\r\n        for (var i = 0, l = this.data.length; i < l; i++) {\r\n            var byteArray = [];\r\n            var code = this.data.charCodeAt(i);\r\n\r\n            if (code > 0x10000) {\r\n                byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\r\n                byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\r\n                byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\r\n                byteArray[3] = 0x80 | (code & 0x3F);\r\n            } else if (code > 0x800) {\r\n                byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\r\n                byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\r\n                byteArray[2] = 0x80 | (code & 0x3F);\r\n            } else if (code > 0x80) {\r\n                byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\r\n                byteArray[1] = 0x80 | (code & 0x3F);\r\n            } else {\r\n                byteArray[0] = code;\r\n            }\r\n\r\n            this.parsedData.push(byteArray);\r\n        }\r\n\r\n        this.parsedData = Array.prototype.concat.apply([], this.parsedData);\r\n\r\n        if (this.parsedData.length != this.data.length) {\r\n            this.parsedData.unshift(191);\r\n            this.parsedData.unshift(187);\r\n            this.parsedData.unshift(239);\r\n        }\r\n    }\r\n\r\n    QR8bitByte.prototype = {\r\n        getLength: function (buffer) {\r\n            return this.parsedData.length;\r\n        },\r\n        write: function (buffer) {\r\n            for (var i = 0, l = this.parsedData.length; i < l; i++) {\r\n                buffer.put(this.parsedData[i], 8);\r\n            }\r\n        }\r\n    };\r\n\r\n    function QRCodeModel(typeNumber, errorCorrectLevel) {\r\n        this.typeNumber = typeNumber;\r\n        this.errorCorrectLevel = errorCorrectLevel;\r\n        this.modules = null;\r\n        this.moduleCount = 0;\r\n        this.dataCache = null;\r\n        this.dataList = [];\r\n    }\r\n\r\nfunction QRPolynomial(num, shift) {\r\n    if (num.length == undefined) throw new Error(num.length + \"/\" + shift);\r\n    var offset = 0;\r\n    while (offset < num.length && num[offset] == 0) offset++;\r\n    this.num = new Array(num.length - offset + shift);\r\n    for (var i = 0; i < num.length - offset; i++) this.num[i] = num[i + offset];\r\n}\r\n\r\nfunction QRRSBlock(totalCount, dataCount) {\r\n    this.totalCount = totalCount, this.dataCount = dataCount;\r\n}\r\n\r\nfunction QRBitBuffer() {\r\n    this.buffer = [], this.length = 0;\r\n}\r\n\r\n    QRCodeModel.prototype = {\r\n        \"addData\": function(data) {\r\n            var newData = new QR8bitByte(data);\r\n            this.dataList.push(newData), this.dataCache = null;\r\n        },\r\n        \"isDark\": function(row, col) {\r\n            if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) throw new Error(row + \",\" + col);\r\n            return this.modules[row][col];\r\n        },\r\n        \"getModuleCount\": function() {\r\n            return this.moduleCount;\r\n        },\r\n        \"make\": function() {\r\n            this.makeImpl(!1, this.getBestMaskPattern());\r\n        },\r\n        \"makeImpl\": function(test, maskPattern) {\r\n            this.moduleCount = this.typeNumber * 4 + 17, this.modules = new Array(this.moduleCount);\r\n            for (var row = 0; row < this.moduleCount; row++) {\r\n                this.modules[row] = new Array(this.moduleCount);\r\n                for (var col = 0; col < this.moduleCount; col++) this.modules[row][col] = null;\r\n            }\r\n            this.setupPositionProbePattern(0, 0),\r\n            this.setupPositionProbePattern(this.moduleCount - 7, 0),\r\n            this.setupPositionProbePattern(0, this.moduleCount - 7),\r\n            this.setupPositionAdjustPattern(), this.setupTimingPattern(),\r\n            this.setupTypeInfo(test, maskPattern),\r\n            this.typeNumber >= 7 && this.setupTypeNumber(test),\r\n            this.dataCache == null && (this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)), this.mapData(this.dataCache, maskPattern);\r\n        },\r\n        \"setupPositionProbePattern\": function(row, col) {\r\n            for (var r = -1; r <= 7; r++) {\r\n                if (row + r <= -1 || this.moduleCount <= row + r) continue;\r\n                for (var c = -1; c <= 7; c++) {\r\n                    if (col + c <= -1 || this.moduleCount <= col + c) continue;\r\n                    0 <= r && r <= 6 && (c == 0 || c == 6) || 0 <= c && c <= 6 && (r == 0 || r == 6) || 2 <= r && r <= 4 && 2 <= c && c <= 4 ? this.modules[row + r][col + c] = !0 : this.modules[row + r][col + c] = !1;\r\n                }\r\n            }\r\n        },\r\n        \"getBestMaskPattern\": function() {\r\n            var minLostPoint = 0, pattern = 0;\r\n            for (var i = 0; i < 8; i++) {\r\n                this.makeImpl(!0, i);\r\n                var lostPoint = QRUtil.getLostPoint(this);\r\n                if (i == 0 || minLostPoint > lostPoint) minLostPoint = lostPoint, pattern = i;\r\n            }\r\n            return pattern;\r\n        },\r\n        \"createMovieClip\": function(target_mc, instance_name, depth) {\r\n            var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth), cs = 1;\r\n            this.make();\r\n            for (var row = 0; row < this.modules.length; row++) {\r\n                var y = row * cs;\r\n                for (var col = 0; col < this.modules[row].length; col++) {\r\n                    var x = col * cs, dark = this.modules[row][col];\r\n                    dark && (qr_mc.beginFill(0, 100), qr_mc.moveTo(x, y), qr_mc.lineTo(x + cs, y), qr_mc.lineTo(x + cs, y + cs), qr_mc.lineTo(x, y + cs), qr_mc.endFill());\r\n                }\r\n            }\r\n            return qr_mc;\r\n        },\r\n        \"setupTimingPattern\": function() {\r\n            for (var r = 8; r < this.moduleCount - 8; r++) {\r\n                if (this.modules[r][6] != null) continue;\r\n                this.modules[r][6] = r % 2 == 0;\r\n            }\r\n            for (var c = 8; c < this.moduleCount - 8; c++) {\r\n                if (this.modules[6][c] != null) continue;\r\n                this.modules[6][c] = c % 2 == 0;\r\n            }\r\n        },\r\n        \"setupPositionAdjustPattern\": function() {\r\n            var pos = QRUtil.getPatternPosition(this.typeNumber);\r\n            for (var i = 0; i < pos.length; i++) for (var j = 0; j < pos.length; j++) {\r\n                var row = pos[i], col = pos[j];\r\n                if (this.modules[row][col] != null) continue;\r\n                for (var r = -2; r <= 2; r++) for (var c = -2; c <= 2; c++) r == -2 || r == 2 || c == -2 || c == 2 || r == 0 && c == 0 ? this.modules[row + r][col + c] = !0 : this.modules[row + r][col + c] = !1;\r\n            }\r\n        },\r\n        \"setupTypeNumber\": function(test) {\r\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\r\n            for (var i = 0; i < 18; i++) {\r\n                var mod = !test && (bits >> i & 1) == 1;\r\n                this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;\r\n            }\r\n            for (var i = 0; i < 18; i++) {\r\n                var mod = !test && (bits >> i & 1) == 1;\r\n                this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;\r\n            }\r\n        },\r\n        \"setupTypeInfo\": function(test, maskPattern) {\r\n            var data = this.errorCorrectLevel << 3 | maskPattern, bits = QRUtil.getBCHTypeInfo(data);\r\n            for (var i = 0; i < 15; i++) {\r\n                var mod = !test && (bits >> i & 1) == 1;\r\n                i < 6 ? this.modules[i][8] = mod : i < 8 ? this.modules[i + 1][8] = mod : this.modules[this.moduleCount - 15 + i][8] = mod;\r\n            }\r\n            for (var i = 0; i < 15; i++) {\r\n                var mod = !test && (bits >> i & 1) == 1;\r\n                i < 8 ? this.modules[8][this.moduleCount - i - 1] = mod : i < 9 ? this.modules[8][15 - i - 1 + 1] = mod : this.modules[8][15 - i - 1] = mod;\r\n            }\r\n            this.modules[this.moduleCount - 8][8] = !test;\r\n        },\r\n        \"mapData\": function(data, maskPattern) {\r\n            var inc = -1, row = this.moduleCount - 1, bitIndex = 7, byteIndex = 0;\r\n            for (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n                col == 6 && col--;\r\n                for (;;) {\r\n                    for (var c = 0; c < 2; c++) if (this.modules[row][col - c] == null) {\r\n                        var dark = !1;\r\n                        byteIndex < data.length && (dark = (data[byteIndex] >>> bitIndex & 1) == 1);\r\n                        var mask = QRUtil.getMask(maskPattern, row, col - c);\r\n                        mask && (dark = !dark), this.modules[row][col - c] = dark, bitIndex--, bitIndex == -1 && (byteIndex++, bitIndex = 7);\r\n                    }\r\n                    row += inc;\r\n                    if (row < 0 || this.moduleCount <= row) {\r\n                        row -= inc, inc = -inc;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }, QRCodeModel.PAD0 = 236, QRCodeModel.PAD1 = 17, QRCodeModel.createData = function(typeNumber, errorCorrectLevel, dataList) {\r\n        var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel), buffer = new QRBitBuffer;\r\n        for (var i = 0; i < dataList.length; i++) {\r\n            var data = dataList[i];\r\n            buffer.put(data.mode, 4), buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber)), data.write(buffer);\r\n        }\r\n        var totalDataCount = 0;\r\n        for (var i = 0; i < rsBlocks.length; i++) totalDataCount += rsBlocks[i].dataCount;\r\n        if (buffer.getLengthInBits() > totalDataCount * 8) throw new Error(\"code length overflow. (\" + buffer.getLengthInBits() + \">\" + totalDataCount * 8 + \")\");\r\n        buffer.getLengthInBits() + 4 <= totalDataCount * 8 && buffer.put(0, 4);\r\n        while (buffer.getLengthInBits() % 8 != 0) buffer.putBit(!1);\r\n        for (;;) {\r\n            if (buffer.getLengthInBits() >= totalDataCount * 8) break;\r\n            buffer.put(QRCodeModel.PAD0, 8);\r\n            if (buffer.getLengthInBits() >= totalDataCount * 8) break;\r\n            buffer.put(QRCodeModel.PAD1, 8);\r\n        }\r\n        return QRCodeModel.createBytes(buffer, rsBlocks);\r\n    }, QRCodeModel.createBytes = function(buffer, rsBlocks) {\r\n        var offset = 0, maxDcCount = 0, maxEcCount = 0, dcdata = new Array(rsBlocks.length), ecdata = new Array(rsBlocks.length);\r\n        for (var r = 0; r < rsBlocks.length; r++) {\r\n            var dcCount = rsBlocks[r].dataCount, ecCount = rsBlocks[r].totalCount - dcCount;\r\n            maxDcCount = Math.max(maxDcCount, dcCount), maxEcCount = Math.max(maxEcCount, ecCount), dcdata[r] = new Array(dcCount);\r\n            for (var i = 0; i < dcdata[r].length; i++) dcdata[r][i] = 255 & buffer.buffer[i + offset];\r\n            offset += dcCount;\r\n            var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount), rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1), modPoly = rawPoly.mod(rsPoly);\r\n            ecdata[r] = new Array(rsPoly.getLength() - 1);\r\n            for (var i = 0; i < ecdata[r].length; i++) {\r\n                var modIndex = i + modPoly.getLength() - ecdata[r].length;\r\n                ecdata[r][i] = modIndex >= 0 ? modPoly.get(modIndex) : 0;\r\n            }\r\n        }\r\n        var totalCodeCount = 0;\r\n        for (var i = 0; i < rsBlocks.length; i++) totalCodeCount += rsBlocks[i].totalCount;\r\n        var data = new Array(totalCodeCount), index = 0;\r\n        for (var i = 0; i < maxDcCount; i++) for (var r = 0; r < rsBlocks.length; r++) i < dcdata[r].length && (data[index++] = dcdata[r][i]);\r\n        for (var i = 0; i < maxEcCount; i++) for (var r = 0; r < rsBlocks.length; r++) i < ecdata[r].length && (data[index++] = ecdata[r][i]);\r\n        return data;\r\n    };\r\n\r\n    var QRMode = {\r\n        \"MODE_NUMBER\": 1,\r\n        \"MODE_ALPHA_NUM\": 2,\r\n        \"MODE_8BIT_BYTE\": 4,\r\n        \"MODE_KANJI\": 8\r\n    }, QRErrorCorrectLevel = {\r\n        \"L\": 1,\r\n        \"M\": 0,\r\n        \"Q\": 3,\r\n        \"H\": 2\r\n    }, QRMaskPattern = {\r\n        \"PATTERN000\": 0,\r\n        \"PATTERN001\": 1,\r\n        \"PATTERN010\": 2,\r\n        \"PATTERN011\": 3,\r\n        \"PATTERN100\": 4,\r\n        \"PATTERN101\": 5,\r\n        \"PATTERN110\": 6,\r\n        \"PATTERN111\": 7\r\n    }, QRUtil = {\r\n        \"PATTERN_POSITION_TABLE\": [ [], [ 6, 18 ], [ 6, 22 ], [ 6, 26 ], [ 6, 30 ], [ 6, 34 ], [ 6, 22, 38 ], [ 6, 24, 42 ], [ 6, 26, 46 ], [ 6, 28, 50 ], [ 6, 30, 54 ], [ 6, 32, 58 ], [ 6, 34, 62 ], [ 6, 26, 46, 66 ], [ 6, 26, 48, 70 ], [ 6, 26, 50, 74 ], [ 6, 30, 54, 78 ], [ 6, 30, 56, 82 ], [ 6, 30, 58, 86 ], [ 6, 34, 62, 90 ], [ 6, 28, 50, 72, 94 ], [ 6, 26, 50, 74, 98 ], [ 6, 30, 54, 78, 102 ], [ 6, 28, 54, 80, 106 ], [ 6, 32, 58, 84, 110 ], [ 6, 30, 58, 86, 114 ], [ 6, 34, 62, 90, 118 ], [ 6, 26, 50, 74, 98, 122 ], [ 6, 30, 54, 78, 102, 126 ], [ 6, 26, 52, 78, 104, 130 ], [ 6, 30, 56, 82, 108, 134 ], [ 6, 34, 60, 86, 112, 138 ], [ 6, 30, 58, 86, 114, 142 ], [ 6, 34, 62, 90, 118, 146 ], [ 6, 30, 54, 78, 102, 126, 150 ], [ 6, 24, 50, 76, 102, 128, 154 ], [ 6, 28, 54, 80, 106, 132, 158 ], [ 6, 32, 58, 84, 110, 136, 162 ], [ 6, 26, 54, 82, 110, 138, 166 ], [ 6, 30, 58, 86, 114, 142, 170 ] ],\r\n        \"G15\": 1335,\r\n        \"G18\": 7973,\r\n        \"G15_MASK\": 21522,\r\n        \"getBCHTypeInfo\": function(data) {\r\n            var d = data << 10;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) d ^= QRUtil.G15 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15);\r\n            return (data << 10 | d) ^ QRUtil.G15_MASK;\r\n        },\r\n        \"getBCHTypeNumber\": function(data) {\r\n            var d = data << 12;\r\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) d ^= QRUtil.G18 << QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18);\r\n            return data << 12 | d;\r\n        },\r\n        \"getBCHDigit\": function(data) {\r\n            var digit = 0;\r\n            while (data != 0) digit++, data >>>= 1;\r\n            return digit;\r\n        },\r\n        \"getPatternPosition\": function(typeNumber) {\r\n            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1];\r\n        },\r\n        \"getMask\": function(maskPattern, i, j) {\r\n            switch (maskPattern) {\r\n              case QRMaskPattern.PATTERN000:\r\n                return (i + j) % 2 == 0;\r\n              case QRMaskPattern.PATTERN001:\r\n                return i % 2 == 0;\r\n              case QRMaskPattern.PATTERN010:\r\n                return j % 3 == 0;\r\n              case QRMaskPattern.PATTERN011:\r\n                return (i + j) % 3 == 0;\r\n              case QRMaskPattern.PATTERN100:\r\n                return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\r\n              case QRMaskPattern.PATTERN101:\r\n                return i * j % 2 + i * j % 3 == 0;\r\n              case QRMaskPattern.PATTERN110:\r\n                return (i * j % 2 + i * j % 3) % 2 == 0;\r\n              case QRMaskPattern.PATTERN111:\r\n                return (i * j % 3 + (i + j) % 2) % 2 == 0;\r\n              default:\r\n                throw new Error(\"bad maskPattern:\" + maskPattern);\r\n            }\r\n        },\r\n        \"getErrorCorrectPolynomial\": function(errorCorrectLength) {\r\n            var a = new QRPolynomial([ 1 ], 0);\r\n            for (var i = 0; i < errorCorrectLength; i++) a = a.multiply(new QRPolynomial([ 1, QRMath.gexp(i) ], 0));\r\n            return a;\r\n        },\r\n        \"getLengthInBits\": function(mode, type) {\r\n            if (1 <= type && type < 10) switch (mode) {\r\n              case QRMode.MODE_NUMBER:\r\n                return 10;\r\n              case QRMode.MODE_ALPHA_NUM:\r\n                return 9;\r\n              case QRMode.MODE_8BIT_BYTE:\r\n                return 8;\r\n              case QRMode.MODE_KANJI:\r\n                return 8;\r\n              default:\r\n                throw new Error(\"mode:\" + mode);\r\n            } else if (type < 27) switch (mode) {\r\n              case QRMode.MODE_NUMBER:\r\n                return 12;\r\n              case QRMode.MODE_ALPHA_NUM:\r\n                return 11;\r\n              case QRMode.MODE_8BIT_BYTE:\r\n                return 16;\r\n              case QRMode.MODE_KANJI:\r\n                return 10;\r\n              default:\r\n                throw new Error(\"mode:\" + mode);\r\n            } else {\r\n                if (!(type < 41)) throw new Error(\"type:\" + type);\r\n                switch (mode) {\r\n                  case QRMode.MODE_NUMBER:\r\n                    return 14;\r\n                  case QRMode.MODE_ALPHA_NUM:\r\n                    return 13;\r\n                  case QRMode.MODE_8BIT_BYTE:\r\n                    return 16;\r\n                  case QRMode.MODE_KANJI:\r\n                    return 12;\r\n                  default:\r\n                    throw new Error(\"mode:\" + mode);\r\n                }\r\n            }\r\n        },\r\n        \"getLostPoint\": function(qrCode) {\r\n            var moduleCount = qrCode.getModuleCount(), lostPoint = 0;\r\n            for (var row = 0; row < moduleCount; row++) for (var col = 0; col < moduleCount; col++) {\r\n                var sameCount = 0, dark = qrCode.isDark(row, col);\r\n                for (var r = -1; r <= 1; r++) {\r\n                    if (row + r < 0 || moduleCount <= row + r) continue;\r\n                    for (var c = -1; c <= 1; c++) {\r\n                        if (col + c < 0 || moduleCount <= col + c) continue;\r\n                        if (r == 0 && c == 0) continue;\r\n                        dark == qrCode.isDark(row + r, col + c) && sameCount++;\r\n                    }\r\n                }\r\n                sameCount > 5 && (lostPoint += 3 + sameCount - 5);\r\n            }\r\n            for (var row = 0; row < moduleCount - 1; row++) for (var col = 0; col < moduleCount - 1; col++) {\r\n                var count = 0;\r\n                qrCode.isDark(row, col) && count++, qrCode.isDark(row + 1, col) && count++, qrCode.isDark(row, col + 1) && count++, qrCode.isDark(row + 1, col + 1) && count++;\r\n                if (count == 0 || count == 4) lostPoint += 3;\r\n            }\r\n            for (var row = 0; row < moduleCount; row++) for (var col = 0; col < moduleCount - 6; col++) qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6) && (lostPoint += 40);\r\n            for (var col = 0; col < moduleCount; col++) for (var row = 0; row < moduleCount - 6; row++) qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col) && (lostPoint += 40);\r\n            var darkCount = 0;\r\n            for (var col = 0; col < moduleCount; col++) for (var row = 0; row < moduleCount; row++) qrCode.isDark(row, col) && darkCount++;\r\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\r\n            return lostPoint += ratio * 10, lostPoint;\r\n        }\r\n    }, QRMath = {\r\n        \"glog\": function(n) {\r\n            if (n < 1) throw new Error(\"glog(\" + n + \")\");\r\n            return QRMath.LOG_TABLE[n];\r\n        },\r\n        \"gexp\": function(n) {\r\n            while (n < 0) n += 255;\r\n            while (n >= 256) n -= 255;\r\n            return QRMath.EXP_TABLE[n];\r\n        },\r\n        \"EXP_TABLE\": new Array(256),\r\n        \"LOG_TABLE\": new Array(256)\r\n    };\r\n\r\n    for (var i = 0; i < 8; i++) QRMath.EXP_TABLE[i] = 1 << i;\r\n\r\n    for (var i = 8; i < 256; i++) QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];\r\n\r\n    for (var i = 0; i < 255; i++) QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;\r\n\r\n    QRPolynomial.prototype = {\r\n        \"get\": function(index) {\r\n            return this.num[index];\r\n        },\r\n        \"getLength\": function() {\r\n            return this.num.length;\r\n        },\r\n        \"multiply\": function(e) {\r\n            var num = new Array(this.getLength() + e.getLength() - 1);\r\n            for (var i = 0; i < this.getLength(); i++) for (var j = 0; j < e.getLength(); j++) num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));\r\n            return new QRPolynomial(num, 0);\r\n        },\r\n        \"mod\": function(e) {\r\n            if (this.getLength() - e.getLength() < 0) return this;\r\n            var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0)), num = new Array(this.getLength());\r\n            for (var i = 0; i < this.getLength(); i++) num[i] = this.get(i);\r\n            for (var i = 0; i < e.getLength(); i++) num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);\r\n            return (new QRPolynomial(num, 0)).mod(e);\r\n        }\r\n    }, QRRSBlock.RS_BLOCK_TABLE = [ [ 1, 26, 19 ], [ 1, 26, 16 ], [ 1, 26, 13 ], [ 1, 26, 9 ], [ 1, 44, 34 ], [ 1, 44, 28 ], [ 1, 44, 22 ], [ 1, 44, 16 ], [ 1, 70, 55 ], [ 1, 70, 44 ], [ 2, 35, 17 ], [ 2, 35, 13 ], [ 1, 100, 80 ], [ 2, 50, 32 ], [ 2, 50, 24 ], [ 4, 25, 9 ], [ 1, 134, 108 ], [ 2, 67, 43 ], [ 2, 33, 15, 2, 34, 16 ], [ 2, 33, 11, 2, 34, 12 ], [ 2, 86, 68 ], [ 4, 43, 27 ], [ 4, 43, 19 ], [ 4, 43, 15 ], [ 2, 98, 78 ], [ 4, 49, 31 ], [ 2, 32, 14, 4, 33, 15 ], [ 4, 39, 13, 1, 40, 14 ], [ 2, 121, 97 ], [ 2, 60, 38, 2, 61, 39 ], [ 4, 40, 18, 2, 41, 19 ], [ 4, 40, 14, 2, 41, 15 ], [ 2, 146, 116 ], [ 3, 58, 36, 2, 59, 37 ], [ 4, 36, 16, 4, 37, 17 ], [ 4, 36, 12, 4, 37, 13 ], [ 2, 86, 68, 2, 87, 69 ], [ 4, 69, 43, 1, 70, 44 ], [ 6, 43, 19, 2, 44, 20 ], [ 6, 43, 15, 2, 44, 16 ], [ 4, 101, 81 ], [ 1, 80, 50, 4, 81, 51 ], [ 4, 50, 22, 4, 51, 23 ], [ 3, 36, 12, 8, 37, 13 ], [ 2, 116, 92, 2, 117, 93 ], [ 6, 58, 36, 2, 59, 37 ], [ 4, 46, 20, 6, 47, 21 ], [ 7, 42, 14, 4, 43, 15 ], [ 4, 133, 107 ], [ 8, 59, 37, 1, 60, 38 ], [ 8, 44, 20, 4, 45, 21 ], [ 12, 33, 11, 4, 34, 12 ], [ 3, 145, 115, 1, 146, 116 ], [ 4, 64, 40, 5, 65, 41 ], [ 11, 36, 16, 5, 37, 17 ], [ 11, 36, 12, 5, 37, 13 ], [ 5, 109, 87, 1, 110, 88 ], [ 5, 65, 41, 5, 66, 42 ], [ 5, 54, 24, 7, 55, 25 ], [ 11, 36, 12 ], [ 5, 122, 98, 1, 123, 99 ], [ 7, 73, 45, 3, 74, 46 ], [ 15, 43, 19, 2, 44, 20 ], [ 3, 45, 15, 13, 46, 16 ], [ 1, 135, 107, 5, 136, 108 ], [ 10, 74, 46, 1, 75, 47 ], [ 1, 50, 22, 15, 51, 23 ], [ 2, 42, 14, 17, 43, 15 ], [ 5, 150, 120, 1, 151, 121 ], [ 9, 69, 43, 4, 70, 44 ], [ 17, 50, 22, 1, 51, 23 ], [ 2, 42, 14, 19, 43, 15 ], [ 3, 141, 113, 4, 142, 114 ], [ 3, 70, 44, 11, 71, 45 ], [ 17, 47, 21, 4, 48, 22 ], [ 9, 39, 13, 16, 40, 14 ], [ 3, 135, 107, 5, 136, 108 ], [ 3, 67, 41, 13, 68, 42 ], [ 15, 54, 24, 5, 55, 25 ], [ 15, 43, 15, 10, 44, 16 ], [ 4, 144, 116, 4, 145, 117 ], [ 17, 68, 42 ], [ 17, 50, 22, 6, 51, 23 ], [ 19, 46, 16, 6, 47, 17 ], [ 2, 139, 111, 7, 140, 112 ], [ 17, 74, 46 ], [ 7, 54, 24, 16, 55, 25 ], [ 34, 37, 13 ], [ 4, 151, 121, 5, 152, 122 ], [ 4, 75, 47, 14, 76, 48 ], [ 11, 54, 24, 14, 55, 25 ], [ 16, 45, 15, 14, 46, 16 ], [ 6, 147, 117, 4, 148, 118 ], [ 6, 73, 45, 14, 74, 46 ], [ 11, 54, 24, 16, 55, 25 ], [ 30, 46, 16, 2, 47, 17 ], [ 8, 132, 106, 4, 133, 107 ], [ 8, 75, 47, 13, 76, 48 ], [ 7, 54, 24, 22, 55, 25 ], [ 22, 45, 15, 13, 46, 16 ], [ 10, 142, 114, 2, 143, 115 ], [ 19, 74, 46, 4, 75, 47 ], [ 28, 50, 22, 6, 51, 23 ], [ 33, 46, 16, 4, 47, 17 ], [ 8, 152, 122, 4, 153, 123 ], [ 22, 73, 45, 3, 74, 46 ], [ 8, 53, 23, 26, 54, 24 ], [ 12, 45, 15, 28, 46, 16 ], [ 3, 147, 117, 10, 148, 118 ], [ 3, 73, 45, 23, 74, 46 ], [ 4, 54, 24, 31, 55, 25 ], [ 11, 45, 15, 31, 46, 16 ], [ 7, 146, 116, 7, 147, 117 ], [ 21, 73, 45, 7, 74, 46 ], [ 1, 53, 23, 37, 54, 24 ], [ 19, 45, 15, 26, 46, 16 ], [ 5, 145, 115, 10, 146, 116 ], [ 19, 75, 47, 10, 76, 48 ], [ 15, 54, 24, 25, 55, 25 ], [ 23, 45, 15, 25, 46, 16 ], [ 13, 145, 115, 3, 146, 116 ], [ 2, 74, 46, 29, 75, 47 ], [ 42, 54, 24, 1, 55, 25 ], [ 23, 45, 15, 28, 46, 16 ], [ 17, 145, 115 ], [ 10, 74, 46, 23, 75, 47 ], [ 10, 54, 24, 35, 55, 25 ], [ 19, 45, 15, 35, 46, 16 ], [ 17, 145, 115, 1, 146, 116 ], [ 14, 74, 46, 21, 75, 47 ], [ 29, 54, 24, 19, 55, 25 ], [ 11, 45, 15, 46, 46, 16 ], [ 13, 145, 115, 6, 146, 116 ], [ 14, 74, 46, 23, 75, 47 ], [ 44, 54, 24, 7, 55, 25 ], [ 59, 46, 16, 1, 47, 17 ], [ 12, 151, 121, 7, 152, 122 ], [ 12, 75, 47, 26, 76, 48 ], [ 39, 54, 24, 14, 55, 25 ], [ 22, 45, 15, 41, 46, 16 ], [ 6, 151, 121, 14, 152, 122 ], [ 6, 75, 47, 34, 76, 48 ], [ 46, 54, 24, 10, 55, 25 ], [ 2, 45, 15, 64, 46, 16 ], [ 17, 152, 122, 4, 153, 123 ], [ 29, 74, 46, 14, 75, 47 ], [ 49, 54, 24, 10, 55, 25 ], [ 24, 45, 15, 46, 46, 16 ], [ 4, 152, 122, 18, 153, 123 ], [ 13, 74, 46, 32, 75, 47 ], [ 48, 54, 24, 14, 55, 25 ], [ 42, 45, 15, 32, 46, 16 ], [ 20, 147, 117, 4, 148, 118 ], [ 40, 75, 47, 7, 76, 48 ], [ 43, 54, 24, 22, 55, 25 ], [ 10, 45, 15, 67, 46, 16 ], [ 19, 148, 118, 6, 149, 119 ], [ 18, 75, 47, 31, 76, 48 ], [ 34, 54, 24, 34, 55, 25 ], [ 20, 45, 15, 61, 46, 16 ] ], QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\r\n        var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\r\n        if (rsBlock == undefined) throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel);\r\n        var length = rsBlock.length / 3, list = [];\r\n        for (var i = 0; i < length; i++) {\r\n            var count = rsBlock[i * 3 + 0], totalCount = rsBlock[i * 3 + 1], dataCount = rsBlock[i * 3 + 2];\r\n            for (var j = 0; j < count; j++) list.push(new QRRSBlock(totalCount, dataCount));\r\n        }\r\n        return list;\r\n    }, QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\r\n        switch (errorCorrectLevel) {\r\n          case QRErrorCorrectLevel.L:\r\n            return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\r\n          case QRErrorCorrectLevel.M:\r\n            return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\r\n          case QRErrorCorrectLevel.Q:\r\n            return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\r\n          case QRErrorCorrectLevel.H:\r\n            return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\r\n          default:\r\n            return undefined;\r\n        }\r\n    }, QRBitBuffer.prototype = {\r\n        \"get\": function(index) {\r\n            var bufIndex = Math.floor(index / 8);\r\n            return (this.buffer[bufIndex] >>> 7 - index % 8 & 1) == 1;\r\n        },\r\n        \"put\": function(num, length) {\r\n            for (var i = 0; i < length; i++) this.putBit((num >>> length - i - 1 & 1) == 1);\r\n        },\r\n        \"getLengthInBits\": function() {\r\n            return this.length;\r\n        },\r\n        \"putBit\": function(bit) {\r\n            var bufIndex = Math.floor(this.length / 8);\r\n            this.buffer.length <= bufIndex && this.buffer.push(0), bit && (this.buffer[bufIndex] |= 128 >>> this.length % 8), this.length++;\r\n        }\r\n    };\r\n    var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\r\n    \r\n    function _isSupportCanvas() {\r\n        return typeof CanvasRenderingContext2D != \"undefined\";\r\n    }\r\n    \r\n    // android 2.x doesn't support Data-URI spec\r\n    function _getAndroid() {\r\n        var android = false;\r\n        var sAgent = navigator.userAgent;\r\n        \r\n        if (/android/i.test(sAgent)) { // android\r\n            android = true;\r\n            aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\r\n            \r\n            if (aMat && aMat[1]) {\r\n                android = parseFloat(aMat[1]);\r\n            }\r\n        }\r\n        \r\n        return android;\r\n    }\r\n    \r\n    var svgDrawer = (function() {\r\n\r\n        var Drawing = function (el, htOption) {\r\n            this._el = el;\r\n            this._htOption = htOption;\r\n        };\r\n\r\n        Drawing.prototype.draw = function (oQRCode) {\r\n            var _htOption = this._htOption;\r\n            var _el = this._el;\r\n            var nCount = oQRCode.getModuleCount();\r\n            var nWidth = Math.floor(_htOption.width / nCount);\r\n            var nHeight = Math.floor(_htOption.height / nCount);\r\n\r\n            this.clear();\r\n\r\n            function makeSVG(tag, attrs) {\r\n                var el = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n                for (var k in attrs)\r\n                    if (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);\r\n                return el;\r\n            }\r\n\r\n            var svg = makeSVG(\"svg\" , {'viewBox': '0 0 ' + String(nCount) + \" \" + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});\r\n            svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\r\n            _el.appendChild(svg);\r\n\r\n            svg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorDark, \"width\": \"1\", \"height\": \"1\", \"id\": \"template\"}));\r\n\r\n            for (var row = 0; row < nCount; row++) {\r\n                for (var col = 0; col < nCount; col++) {\r\n                    if (oQRCode.isDark(row, col)) {\r\n                        var child = makeSVG(\"use\", {\"x\": String(row), \"y\": String(col)});\r\n                        child.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", \"#template\")\r\n                        svg.appendChild(child);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        Drawing.prototype.clear = function () {\r\n            while (this._el.hasChildNodes())\r\n                this._el.removeChild(this._el.lastChild);\r\n        };\r\n        return Drawing;\r\n    })();\r\n\r\n    var useSVG = document.documentElement.tagName.toLowerCase() === \"svg\";\r\n\r\n    // Drawing in DOM by using Table tag\r\n    var Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {\r\n        var Drawing = function (el, htOption) {\r\n            this._el = el;\r\n            this._htOption = htOption;\r\n        };\r\n            \r\n        /**\r\n         * Draw the QRCode\r\n         * \r\n         * @param {QRCode} oQRCode\r\n         */\r\n        Drawing.prototype.draw = function (oQRCode) {\r\n            var _htOption = this._htOption;\r\n            var _el = this._el;\r\n            var nCount = oQRCode.getModuleCount();\r\n            var nWidth = Math.floor(_htOption.width / nCount);\r\n            var nHeight = Math.floor(_htOption.height / nCount);\r\n            var aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\r\n            \r\n            for (var row = 0; row < nCount; row++) {\r\n                aHTML.push('<tr>');\r\n                \r\n                for (var col = 0; col < nCount; col++) {\r\n                    aHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\r\n                }\r\n                \r\n                aHTML.push('</tr>');\r\n            }\r\n            \r\n            aHTML.push('</table>');\r\n            _el.innerHTML = aHTML.join('');\r\n            \r\n            // Fix the margin values as real size.\r\n            var elTable = _el.childNodes[0];\r\n            var nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;\r\n            var nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;\r\n            if (nLeftMarginTable > 0 && nTopMarginTable > 0) {\r\n                elTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";   \r\n            }\r\n        };\r\n        \r\n        /**\r\n         * Clear the QRCode\r\n         */\r\n        Drawing.prototype.clear = function () {\r\n            this._el.innerHTML = '';\r\n        };\r\n        \r\n        return Drawing;\r\n    })() : (function () { // Drawing in Canvas\r\n        function _onMakeImage() {\r\n            this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\r\n            this._elImage.style.display = \"block\";\r\n            this._elCanvas.style.display = \"none\";          \r\n        }\r\n        \r\n        // Android 2.1 bug workaround\r\n        // http://code.google.com/p/android/issues/detail?id=5141\r\n        if (this._android && this._android <= 2.1) {\r\n            var factor = 1 / window.devicePixelRatio;\r\n            var drawImage = CanvasRenderingContext2D.prototype.drawImage; \r\n            CanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n                if ((\"nodeName\" in image) && /img/i.test(image.nodeName)) {\r\n                    for (var i = arguments.length - 1; i >= 1; i--) {\r\n                        arguments[i] = arguments[i] * factor;\r\n                    }\r\n                } else if (typeof dw == \"undefined\") {\r\n                    arguments[1] *= factor;\r\n                    arguments[2] *= factor;\r\n                    arguments[3] *= factor;\r\n                    arguments[4] *= factor;\r\n                }\r\n                \r\n                drawImage.apply(this, arguments); \r\n            };\r\n        }\r\n        \r\n        /**\r\n         * Check whether the user's browser supports Data URI or not\r\n         * \r\n         * @private\r\n         * @param {Function} fSuccess Occurs if it supports Data URI\r\n         * @param {Function} fFail Occurs if it doesn't support Data URI\r\n         */\r\n        function _safeSetDataURI(fSuccess, fFail) {\r\n            var self = this;\r\n            self._fFail = fFail;\r\n            self._fSuccess = fSuccess;\r\n\r\n            // Check it just once\r\n            if (self._bSupportDataURI === null) {\r\n                var el = document.createElement(\"img\");\r\n                var fOnError = function() {\r\n                    self._bSupportDataURI = false;\r\n\r\n                    if (self._fFail) {\r\n                        _fFail.call(self);\r\n                    }\r\n                };\r\n                var fOnSuccess = function() {\r\n                    self._bSupportDataURI = true;\r\n\r\n                    if (self._fSuccess) {\r\n                        self._fSuccess.call(self);\r\n                    }\r\n                };\r\n\r\n                el.onabort = fOnError;\r\n                el.onerror = fOnError;\r\n                el.onload = fOnSuccess;\r\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\r\n                return;\r\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\r\n                self._fSuccess.call(self);\r\n            } else if (self._bSupportDataURI === false && self._fFail) {\r\n                self._fFail.call(self);\r\n            }\r\n        };\r\n        \r\n        /**\r\n         * Drawing QRCode by using canvas\r\n         * \r\n         * @constructor\r\n         * @param {HTMLElement} el\r\n         * @param {Object} htOption QRCode Options \r\n         */\r\n        var Drawing = function (el, htOption) {\r\n            this._bIsPainted = false;\r\n            this._android = _getAndroid();\r\n        \r\n            this._htOption = htOption;\r\n            this._elCanvas = document.createElement(\"canvas\");\r\n            this._elCanvas.width = htOption.width;\r\n            this._elCanvas.height = htOption.height;\r\n            el.appendChild(this._elCanvas);\r\n            this._el = el;\r\n            this._oContext = this._elCanvas.getContext(\"2d\");\r\n            this._bIsPainted = false;\r\n            this._elImage = document.createElement(\"img\");\r\n            this._elImage.alt = \"Scan me!\";\r\n            this._elImage.style.display = \"none\";\r\n            this._el.appendChild(this._elImage);\r\n            this._bSupportDataURI = null;\r\n        };\r\n            \r\n        /**\r\n         * Draw the QRCode\r\n         * \r\n         * @param {QRCode} oQRCode \r\n         */\r\n        Drawing.prototype.draw = function (oQRCode) {\r\n            var _elImage = this._elImage;\r\n            var _oContext = this._oContext;\r\n            var _htOption = this._htOption;\r\n            \r\n            var nCount = oQRCode.getModuleCount();\r\n            var nWidth = _htOption.width / nCount;\r\n            var nHeight = _htOption.height / nCount;\r\n            var nRoundedWidth = Math.round(nWidth);\r\n            var nRoundedHeight = Math.round(nHeight);\r\n\r\n            _elImage.style.display = \"none\";\r\n            this.clear();\r\n            \r\n            for (var row = 0; row < nCount; row++) {\r\n                for (var col = 0; col < nCount; col++) {\r\n                    var bIsDark = oQRCode.isDark(row, col);\r\n                    var nLeft = col * nWidth;\r\n                    var nTop = row * nHeight;\r\n                    _oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\r\n                    _oContext.lineWidth = 1;\r\n                    _oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;                 \r\n                    _oContext.fillRect(nLeft, nTop, nWidth, nHeight);\r\n                    \r\n                    // 안티 앨리어싱 방지 처리\r\n                    _oContext.strokeRect(\r\n                        Math.floor(nLeft) + 0.5,\r\n                        Math.floor(nTop) + 0.5,\r\n                        nRoundedWidth,\r\n                        nRoundedHeight\r\n                    );\r\n                    \r\n                    _oContext.strokeRect(\r\n                        Math.ceil(nLeft) - 0.5,\r\n                        Math.ceil(nTop) - 0.5,\r\n                        nRoundedWidth,\r\n                        nRoundedHeight\r\n                    );\r\n                }\r\n            }\r\n            \r\n            this._bIsPainted = true;\r\n        };\r\n            \r\n        /**\r\n         * Make the image from Canvas if the browser supports Data URI.\r\n         */\r\n        Drawing.prototype.makeImage = function () {\r\n            if (this._bIsPainted) {\r\n                _safeSetDataURI.call(this, _onMakeImage);\r\n            }\r\n        };\r\n            \r\n        /**\r\n         * Return whether the QRCode is painted or not\r\n         * \r\n         * @return {Boolean}\r\n         */\r\n        Drawing.prototype.isPainted = function () {\r\n            return this._bIsPainted;\r\n        };\r\n        \r\n        /**\r\n         * Clear the QRCode\r\n         */\r\n        Drawing.prototype.clear = function () {\r\n            this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\r\n            this._bIsPainted = false;\r\n        };\r\n        \r\n        /**\r\n         * @private\r\n         * @param {Number} nNumber\r\n         */\r\n        Drawing.prototype.round = function (nNumber) {\r\n            if (!nNumber) {\r\n                return nNumber;\r\n            }\r\n            \r\n            return Math.floor(nNumber * 1000) / 1000;\r\n        };\r\n        \r\n        return Drawing;\r\n    })();\r\n    \r\n    /**\r\n     * Get the type by string length\r\n     * \r\n     * @private\r\n     * @param {String} sText\r\n     * @param {Number} nCorrectLevel\r\n     * @return {Number} type\r\n     */\r\n    function _getTypeNumber(sText, nCorrectLevel) {         \r\n        var nType = 1;\r\n        var length = _getUTF8Length(sText);\r\n        \r\n        for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\r\n            var nLimit = 0;\r\n            \r\n            switch (nCorrectLevel) {\r\n                case QRErrorCorrectLevel.L :\r\n                    nLimit = QRCodeLimitLength[i][0];\r\n                    break;\r\n                case QRErrorCorrectLevel.M :\r\n                    nLimit = QRCodeLimitLength[i][1];\r\n                    break;\r\n                case QRErrorCorrectLevel.Q :\r\n                    nLimit = QRCodeLimitLength[i][2];\r\n                    break;\r\n                case QRErrorCorrectLevel.H :\r\n                    nLimit = QRCodeLimitLength[i][3];\r\n                    break;\r\n            }\r\n            \r\n            if (length <= nLimit) {\r\n                break;\r\n            } else {\r\n                nType++;\r\n            }\r\n        }\r\n        \r\n        if (nType > QRCodeLimitLength.length) {\r\n            throw new Error(\"Too long data\");\r\n        }\r\n        \r\n        return nType;\r\n    }\r\n\r\n    function _getUTF8Length(sText) {\r\n        var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\r\n        return replacedText.length + (replacedText.length != sText ? 3 : 0);\r\n    }\r\n    \r\n    /**\r\n     * @class QRCode\r\n     * @constructor\r\n     * @example \r\n     * new QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\r\n     *\r\n     * @example\r\n     * var oQRCode = new QRCode(\"test\", {\r\n     *    text : \"http://naver.com\",\r\n     *    width : 128,\r\n     *    height : 128\r\n     * });\r\n     * \r\n     * oQRCode.clear(); // Clear the QRCode.\r\n     * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the QRCode.\r\n     *\r\n     * @param {HTMLElement|String} el target element or 'id' attribute of element.\r\n     * @param {Object|String} vOption\r\n     * @param {String} vOption.text QRCode link data\r\n     * @param {Number} [vOption.width=256]\r\n     * @param {Number} [vOption.height=256]\r\n     * @param {String} [vOption.colorDark=\"#000000\"]\r\n     * @param {String} [vOption.colorLight=\"#ffffff\"]\r\n     * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] \r\n     */\r\n    QRCode = function (el, vOption) {\r\n        this._htOption = {\r\n            width : 256, \r\n            height : 256,\r\n            typeNumber : 4,\r\n            colorDark : \"#000000\",\r\n            colorLight : \"#ffffff\",\r\n            correctLevel : QRErrorCorrectLevel.H\r\n        };\r\n        \r\n        if (typeof vOption === 'string') {\r\n            vOption = {\r\n                text : vOption\r\n            };\r\n        }\r\n        \r\n        // Overwrites options\r\n        if (vOption) {\r\n            for (var i in vOption) {\r\n                this._htOption[i] = vOption[i];\r\n            }\r\n        }\r\n        \r\n        if (typeof el == \"string\") {\r\n            el = document.getElementById(el);\r\n        }\r\n        \r\n        this._android = _getAndroid();\r\n        this._el = el;\r\n        this._oQRCode = null;\r\n        this._oDrawing = new Drawing(this._el, this._htOption);\r\n        \r\n        if (this._htOption.text) {\r\n            this.makeCode(this._htOption.text); \r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Make the QRCode\r\n     * \r\n     * @param {String} sText link data\r\n     */\r\n    QRCode.prototype.makeCode = function (sText) {\r\n        this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\r\n        this._oQRCode.addData(sText);\r\n        this._oQRCode.make();\r\n        this._el.title = sText;\r\n        this._oDrawing.draw(this._oQRCode);         \r\n        this.makeImage();\r\n    };\r\n    \r\n    /**\r\n     * Make the Image from Canvas element\r\n     * - It occurs automatically\r\n     * - Android below 3 doesn't support Data-URI spec.\r\n     * \r\n     * @private\r\n     */\r\n    QRCode.prototype.makeImage = function () {\r\n        if (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\r\n            this._oDrawing.makeImage();\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * Clear the QRCode\r\n     */\r\n    QRCode.prototype.clear = function () {\r\n        this._oDrawing.clear();\r\n    };\r\n    \r\n    /**\r\n     * @name QRCode.CorrectLevel\r\n     */\r\n    QRCode.CorrectLevel = QRErrorCorrectLevel;\r\n})();\r\n\r\nmodule.exports = QRCode;"},{"id":62,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","name":"./src/modules/shop/createDotOrder.js","index":62,"index2":60,"size":31055,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./shop/createDotOrder","loc":"18:19-51"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./createDotOrder","loc":"10:19-46"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  template = require('./dot-order.tpl.html'),\r\n  addRetinueShop = require('./addRetinueShop'),\r\n  selectRetinue_tpl = require('./selectRetinue.tpl.html'),\r\n  orderDetailModule = require('../order/orderDetail'),\r\n  roleModule = require('../role/role'),\r\n  dotManageModule = require('./dotManage');\r\n\r\nvar info = {\r\n  'orderInfo': {},\r\n  'userInfo': {}\r\n};\r\nwindow.retinueSelect = []; // 随行人员选择集合\r\n//var retinueSelectDefault = [];//保存复选框选中的值\r\n\r\nvar oldFareDot = [];\r\n// 出游时间\r\nvar goTime = '';\r\nvar trueGoTime = '';\r\n// 订单总价DOM对象\r\nvar obj_total_price = '';\r\n// 订单总价\r\nvar total_price = '';\r\n// 验证酒店项目是否选择了入住和退店日期\r\nvar hotelFareFlag = true;\r\n\r\nvar createDotOrder = {\r\n\r\n  init: function() {\r\n    createDotOrder.bindEvent();\r\n  },\r\n\r\n  /**\r\n   * 显示创建点订单视图\r\n   * @param  {[type]} id 点订单id\r\n   * @return {[type]}    [description]\r\n   */\r\n  showView: function(id) {\r\n    retinueSelectDefault = [];\r\n    createDotOrder.bindEvent();\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.goToLogin();\r\n      return;\r\n    }\r\n\r\n    tmmApp.showIndicator();\r\n    // 获取订单数据\r\n    httpService.getFareOrder(id,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          // 存取多个点的订单信息\r\n          oldFareDot.push(dataRes.data);\r\n          // 多个点的订单信息存取在本地\r\n          createDotOrder.setFareDotLocal(dataRes.data.value, oldFareDot);\r\n          // 赋值到模板\r\n          info.orderInfo = dataRes.data;\r\n          log.info(\"点的项目数据\", info.orderInfo);\r\n          // 获取主要联系人            \r\n          httpService.getUserInfo(function(dataRes) {\r\n            // 用户，主要联系人，随行人员的信息\r\n            info.userInfo = dataRes.data;\r\n            // 编译模版\r\n            var output = appFunc.renderTpl(template, info);\r\n            tmmApp.getCurrentView().router.load({\r\n              content: output,\r\n            });\r\n            tmmApp.hideIndicator();\r\n            // 保存订单信息\r\n            createDotOrder.saveOrderInfoLocal(id, info);\r\n            // 初始化日期控件\r\n            createDotOrder.selectGoTime(id);\r\n            //createDotOrder.selectHotelTime(id);\r\n          }, function(dataRes) {\r\n            tmmApp.hideIndicator();\r\n          });\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试', '');\r\n      });\r\n  },\r\n  /**\r\n   * 填充主要联系人信息\r\n   */\r\n  fillMainRetinue: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n      info.userInfo = dataRes.data;\r\n\r\n      if (info.userInfo.main_retinueInfo.list) {\r\n        $$('#tmm-order-mainretinue-list').html('<div>' + info.userInfo.main_retinueInfo.list[0].name + '</div>')\r\n      }\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n  // 保存订单基本信息到本地\r\n  saveOrderInfoLocal: function(dot_id, dataRes) {\r\n    var localOrderInfo = {\r\n      // 订单总价\r\n      'order_price': '0.00',\r\n      // 出游日期\r\n      'go_time': '',\r\n      // 随行人员人数\r\n      'user_go_count': '1',\r\n      \"OrderRetinue\": [],\r\n    };\r\n    // 保存订单基本信息\r\n    createDotOrder.setOrderInfoLocal(dot_id, localOrderInfo);\r\n  },\r\n  // 获取本地保存的订单基本信息\r\n  getOrderInfoLocal: function(dot_id) {\r\n    var info = localStorage.getItem('dot_order_info_' + dot_id);\r\n    if (appFunc.isObjectEmpty(info)) {\r\n      return {};\r\n    }\r\n    return JSON.parse(info);\r\n  },\r\n  // 保存订单基本信息\r\n  setOrderInfoLocal: function(dot_id, localOrderInfo) {\r\n    // 保存订单基本信息\r\n    localStorage.setItem('dot_order_info_' + dot_id, JSON.stringify(localOrderInfo));\r\n  },\r\n  // 保存订单项目信息\r\n  setFareDotLocal: function(dot_id, localFareDot) {\r\n    localStorage.setItem('dot_order_faredot_' + dot_id, JSON.stringify(localFareDot));\r\n  },\r\n  // 获取本地保存的订单项目信息\r\n  getFareDotLocal: function(dot_id) {\r\n    var info = localStorage.getItem('dot_order_faredot_' + dot_id);\r\n    if (appFunc.isObjectEmpty(info)) {\r\n      return [];\r\n    }\r\n    return JSON.parse(info);\r\n  },\r\n  /**\r\n   * @method subNum\r\n   * @description 价格相减\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T10:26:59+0800\r\n   */\r\n  subNum: function() {\r\n    var _this = this;\r\n    createDotOrder.getTotalPrice(_this, '-');\r\n    createDotOrder.updateDotFare(_this);\r\n  },\r\n  /**\r\n   * @method addNum\r\n   * @description 价格相加\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T10:26:59+0800\r\n   */\r\n  addNum: function() {\r\n    var _this = this;\r\n    createDotOrder.getTotalPrice(_this, '+');\r\n    createDotOrder.updateDotFare(_this);\r\n  },\r\n  /**\r\n   * @method getTotalPrice\r\n   * @description 统计数量和总价\r\n   * \r\n   * @param    {Ojbect} obj 点击的DOM对象\r\n   * @param    {String} perator +号 -号\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T10:27:45+0800\r\n   */\r\n  getTotalPrice: function(obj, operator) {\r\n    var obj_num = $$($$(obj).parent().find('.num')[0]);\r\n    obj_total_price = $$('#tmm-order-total-price');\r\n    var num = obj_num.html();\r\n    var dot_id = $$(obj).attr('data-dotid');\r\n    var hotel_number = $$(obj).attr('data-hotelnumber');\r\n    var type = $$(obj).attr('data-type');\r\n    var price = parseFloat($$(obj).attr('data-price'));\r\n\r\n    total_price = parseFloat(obj_total_price.html());\r\n    if (operator === '-') {\r\n      if (num > 0) {\r\n        num--;\r\n        if (type == 1) {\r\n          if (hotel_number > 0) {\r\n            total_price -= (price * hotel_number);\r\n          }\r\n        } else {\r\n          total_price -= price;\r\n        }\r\n      }\r\n    } else if (operator === '+') {\r\n      num++;\r\n      if (type == 1) {\r\n        if (hotel_number > 0) {\r\n          total_price += (price * hotel_number);\r\n        }\r\n      } else {\r\n        total_price += price;\r\n      }\r\n    }\r\n    obj_num.html(num);\r\n    obj_total_price.html(total_price.toFixed(2));\r\n    $$(obj).attr('data-number', num);\r\n    $$(obj).attr('data-count', (num * price * hotel_number).toFixed(2));\r\n\r\n    // 更新价格总价\r\n    createDotOrder.updateOrderPrice(dot_id, total_price);\r\n  },\r\n  /**\r\n   * @method udpateRetinueInfo\r\n   * 更新随行人员信息\r\n   * \r\n   * @return   {[type]}                 [description]\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T16:19:59+0800\r\n   */\r\n  udpateRetinueInfo: function(dot_id) {\r\n    // 获取要发送订单的信息\r\n    var dotOrderInfo = createDotOrder.getOrderInfoLocal(dot_id);\r\n    // 订单随行人员信息\r\n    var orderRetinue = dotOrderInfo['OrderRetinue'];\r\n\r\n    orderRetinue.push({\r\n      \"is_main\": \"1\", //是否是主要联系人\r\n      \"retinue_id\": \"1\" //随行人员\r\n    });\r\n    // 更新缓存的点的订单数据\r\n    createDotOrder.setOrderInfoLocal(dot_id, dotOrderInfo);\r\n  },\r\n  /**\r\n   * @method updateOrderPrice\r\n   * 更新订单总价\r\n   * \r\n   * @param    {[type]}                 dot_id      [description]\r\n   * @param    {[type]}                 total_price [description]\r\n   * @return   {[type]}                             [description]\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T16:14:28+0800\r\n   */\r\n  updateOrderPrice: function(dot_id, total_price) {\r\n    // 获取要发送订单的信息\r\n    var dotOrderInfo = createDotOrder.getOrderInfoLocal(dot_id);\r\n    // 更改订单总价\r\n    dotOrderInfo['order_price'] = total_price.toFixed(2);\r\n    // 更新缓存的点的订单基本数据\r\n    createDotOrder.setOrderInfoLocal(dot_id, dotOrderInfo);\r\n  },\r\n  /**\r\n   * @method updateDotFare\r\n   * @description 更新项目价格\r\n   * \r\n   * @param    {[type]}                 obj [description]\r\n   * @return   {[type]}                     [description]\r\n   * @author Moore Mo\r\n   * @datetime 2015-10-30T16:14:52+0800\r\n   */\r\n  updateDotFare: function(obj) {\r\n    var itemFraeInfo = $$.dataset(obj);\r\n\r\n    // 点的排序\r\n    var dot_sort = itemFraeInfo.dotsort;\r\n    // 点的id\r\n    var dot_id = itemFraeInfo.dotid;\r\n    // 项目的排序\r\n    var dot_item_sort = $$($$(obj).parent().parent().parent().parent().find('.tmm-item-title')[0]).attr('data-itemsort');\r\n    itemFraeInfo['itemsort'] = dot_item_sort;\r\n    log.info('itemFraeInfo---', itemFraeInfo);\r\n    // 项目的id\r\n    var dot_item_id = itemFraeInfo.itemid;\r\n    // 价格的排序\r\n    var dot_fare_sort = itemFraeInfo.faresort;\r\n    // 价格的id\r\n    var dot_fare_id = itemFraeInfo.fareid;\r\n    // 项目中的单个价格的购买数量\r\n    var dot_fare_number = itemFraeInfo.number;\r\n    // 项目中的单个价格的总价\r\n    var dot_fare_count = itemFraeInfo.count;\r\n    // 获取订单项目的信息\r\n    var orderItems = createDotOrder.getFareDotLocal(dot_id);\r\n    log.info('orderItems---updateDotFare---', orderItems);\r\n\r\n    // shops_sort 商品（点）的排序\r\n    for (shops_sort in orderItems) {\r\n      // 商品id\r\n      var shops_id = orderItems[shops_sort]['value'];\r\n      // item_sort 商品（点）项目的排序\r\n      for (item_sort in orderItems[shops_sort]['items_fare']) {\r\n        // 项目id\r\n        var item_id = orderItems[shops_sort]['items_fare'][item_sort]['value'];\r\n        // fare_sort 商品（点）项目价格的排序\r\n        for (fare_sort in orderItems[shops_sort]['items_fare'][item_sort]['fare']) {\r\n          var fare_info = orderItems[shops_sort]['items_fare'][item_sort]['fare'][fare_sort];\r\n          // 价格id\r\n          var fare_id = orderItems[shops_sort]['items_fare'][item_sort]['fare'][fare_sort]['value'];\r\n          if ((dot_sort == shops_sort) && (dot_id == shops_id) && (dot_item_sort == item_sort) && (dot_item_id == item_id) && (dot_fare_sort == fare_sort) && (dot_fare_id == fare_id)) {\r\n            // 更改数量\r\n            fare_info['number'] = dot_fare_number;\r\n            // 更改价格\r\n            fare_info['count'] = dot_fare_count.toFixed(2);\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n    // 更新缓存的点的订单数据\r\n    createDotOrder.setFareDotLocal(dot_id, orderItems);\r\n  },\r\n  /**\r\n   * @method   updateDotFareDate\r\n   * @description 更新项目价格（住）中的入住和退房日期\r\n   * \r\n   * @param    {Object} obj 所操作的input对象\r\n   * @param    {Array} selectDate 选择的入住和退房日期\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-05T17:52:35+0800\r\n   */\r\n  updateDotFareDate: function(obj, selectDate) {\r\n    var itemFraeInfo = $$.dataset(obj);\r\n    // 点的排序\r\n    var dot_sort = itemFraeInfo.dotsort;\r\n    // 点的id\r\n    var dot_id = itemFraeInfo.dotid;\r\n    // 项目的排序\r\n    var dot_item_sort = $$(obj.parent().parent().parent().parent().parent().find('.tmm-item-title')[0]).attr('data-itemsort');\r\n    itemFraeInfo['itemsort'] = dot_item_sort;\r\n    log.info('itemFraeInfo---', itemFraeInfo);\r\n    // 项目的id\r\n    var dot_item_id = itemFraeInfo.itemid;\r\n    // 价格的排序\r\n    var dot_fare_sort = itemFraeInfo.faresort;\r\n    // 价格的id\r\n    var dot_fare_id = itemFraeInfo.fareid;\r\n    // 日期类型（入住或退房日期）\r\n    var type = itemFraeInfo.type;\r\n    // 获取订单项目的信息\r\n    var orderItems = createDotOrder.getFareDotLocal(dot_id);\r\n    log.info('orderItems---updateDotFare---', orderItems);\r\n    // 真实的订单总价\r\n    var trueTotalPrice = 0.00;\r\n\r\n    // shops_sort 商品（点）的排序\r\n    for (shops_sort in orderItems) {\r\n      // 商品id\r\n      var shops_id = orderItems[shops_sort]['value'];\r\n      // item_sort 商品（点）项目的排序\r\n      for (item_sort in orderItems[shops_sort]['items_fare']) {\r\n        // 项目id\r\n        var item_id = orderItems[shops_sort]['items_fare'][item_sort]['value'];\r\n        // fare_sort 商品（点）项目价格的排序\r\n        for (fare_sort in orderItems[shops_sort]['items_fare'][item_sort]['fare']) {\r\n          var fare_info = orderItems[shops_sort]['items_fare'][item_sort]['fare'][fare_sort];\r\n          // 价格id\r\n          var fare_id = orderItems[shops_sort]['items_fare'][item_sort]['fare'][fare_sort]['value'];\r\n          if ((dot_sort == shops_sort) && (dot_id == shops_id) && (dot_item_sort == item_sort) && (dot_item_id == item_id) && (dot_fare_sort == fare_sort) && (dot_fare_id == fare_id)) {\r\n            // 更改日期\r\n            if ('start_date' in fare_info) {\r\n              fare_info['start_date'] = selectDate[0];\r\n            }\r\n            if ('end_date' in fare_info) {\r\n              fare_info['end_date'] = selectDate[1];\r\n            }\r\n            if ('hotel_number' in fare_info) {\r\n              fare_info['hotel_number'] = selectDate[2];\r\n            }\r\n          }\r\n          // 计算订单总价\r\n          if (('hotel_number' in fare_info) && (fare_info['start_date'] != '0' && fare_info['end_date'] != '0')) {\r\n            trueTotalPrice += fare_info['hotel_number'] * fare_info['price'] * fare_info['number'];\r\n          } else if (!('hotel_number' in fare_info)) {\r\n            trueTotalPrice += fare_info['price'] * fare_info['number'];\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n    // 更新订单总价\r\n    obj_total_price.html(trueTotalPrice.toFixed(2));\r\n    createDotOrder.updateOrderPrice(dot_id, trueTotalPrice);\r\n    // 更新缓存的点的订单数据\r\n    createDotOrder.setFareDotLocal(dot_id, orderItems);\r\n  },\r\n  /**\r\n   * 获取随行人员列表信息\r\n   * @return {[type]} [description]\r\n   */\r\n  showList: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n\r\n      info.userInfo = dataRes.data;\r\n      var retinueBack = 0; //是否是返回按钮\r\n      var popupHTML = appFunc.renderTpl(selectRetinue_tpl, info.userInfo);\r\n      tmmApp.popup(popupHTML);\r\n      if (info.userInfo.retinueInfo.list != null) {\r\n        $$(\"#noRetinue\").css('display', 'none');\r\n      } else {\r\n        $$(\"#noRetinue\").css('display', 'block');\r\n      }\r\n\r\n      //随行人员的默认值\r\n      $$.each($$('.select-retinue'), function(index, value) {\r\n        for (var j = 0; j < retinueSelectDefault.length; j++) {\r\n          if ($$(value).attr('data-id') == retinueSelectDefault[j]) {\r\n            $$(value).attr('checked', 'checked');\r\n          }\r\n        }\r\n      });\r\n\r\n      $$('.retinueBackClose').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n      });\r\n\r\n      //添加随行人员事件\r\n      $$('.order-add-retinue').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n        setTimeout(function() {\r\n          addRetinueShop.init(2);\r\n\r\n        }, 200)\r\n      })\r\n\r\n\r\n      //弹出层关闭事件\r\n      $$('.popup').on('close', function() {\r\n        var str = '';\r\n        retinueSelect = [];\r\n        if (retinueBack != 1) {\r\n          retinueSelectDefault = [];\r\n        }\r\n\r\n        $$.each($$('.select-retinue'), function(index, value) {\r\n\r\n          if ($$(value).prop('checked')) {\r\n            if (retinueBack != 1) {\r\n              retinueSelectDefault.push($$(value).attr('data-id'));\r\n            }\r\n            retinueSelect.push({\r\n              'retinue_id': $$(value).attr('data-id'),\r\n              'name': $$(value).val(),\r\n              'is_main': \"0\"\r\n            });\r\n\r\n            str += '<div class=\"w_33 retinue\">' + $$(value).val() + '</div>';\r\n          }\r\n        });\r\n        if (retinueBack != 1) {\r\n          $$('#tmm-order-retinue-list .retinue').remove();\r\n          $$('#tmm-order-retinue-list').prepend(str);\r\n        }\r\n      });\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n\r\n\r\n  },\r\n  // 商品项目过滤\r\n  filterItem: function(fraeDot) {\r\n\r\n    var item = {}\r\n    item[\"0\"] = [];\r\n\r\n    for (var i = 0; i < fraeDot.length; i++) {\r\n      // 点排序的对象\r\n      item[\"0\"][i] = {};\r\n      // 点的数组\r\n      item[\"0\"][i][fraeDot[i].value] = [];\r\n      for (var j = 0; j < fraeDot[i].items_fare.length; j++) {\r\n        item[\"0\"][i][fraeDot[i].value][j] = {};\r\n        item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value] = [];\r\n\r\n        // item[\"0\"][i][fraeDot[i].value][j] = fraeDot[j].items_fare[j];\r\n        for (var x = 0; x < fraeDot[i].items_fare[j].fare.length; x++) {\r\n          if (fraeDot[i].items_fare[j].fare[x].number > 0) {\r\n            item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x] = {};\r\n            item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value] = {};\r\n\r\n            item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['price'] = fraeDot[i].items_fare[j].fare[x].price;\r\n            item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['number'] = fraeDot[i].items_fare[j].fare[x].number;\r\n            item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['count'] = (fraeDot[i].items_fare[j].fare[x].number * fraeDot[i].items_fare[j].fare[x].price).toFixed(2);\r\n\r\n            if ('start_date' in fraeDot[i].items_fare[j].fare[x]) {\r\n              item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['start_date'] = fraeDot[i].items_fare[j].fare[x].start_date;\r\n              if ((fraeDot[i].items_fare[j].fare[x].number != 0) && (fraeDot[i].items_fare[j].fare[x].start_date == 0)) {\r\n                hotelFareFlag = false;\r\n              } else {\r\n                hotelFareFlag = true;\r\n              }\r\n            }\r\n            if ('end_date' in fraeDot[i].items_fare[j].fare[x]) {\r\n              item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['end_date'] = fraeDot[i].items_fare[j].fare[x].end_date;\r\n              if ((fraeDot[i].items_fare[j].fare[x].number != 0) && (fraeDot[i].items_fare[j].fare[x].end_date == 0)) {\r\n                hotelFareFlag = false;\r\n              } else {\r\n                hotelFareFlag = true;\r\n              }\r\n            }\r\n            if ('hotel_number' in fraeDot[i].items_fare[j].fare[x]) {\r\n              item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['hotel_number'] = fraeDot[i].items_fare[j].fare[x].hotel_number;\r\n              item[\"0\"][i][fraeDot[i].value][j][fraeDot[i].items_fare[j].value][x][fraeDot[i].items_fare[j].fare[x].value]['count'] = (fraeDot[i].items_fare[j].fare[x].number * fraeDot[i].items_fare[j].fare[x].price * fraeDot[i].items_fare[j].fare[x].hotel_number).toFixed(2);\r\n            }\r\n\r\n          }\r\n\r\n        };\r\n      };\r\n    };\r\n\r\n    // 过滤项目子项目\r\n    for (var i = 0; i < item[\"0\"].length; i++) {\r\n      for (var attr1 in item[\"0\"][i]) {\r\n        for (var j = 0; j < item[\"0\"][i][attr1].length; j++) {\r\n          for (var attr2 in item[\"0\"][i][attr1][j]) {\r\n            for (var x = 0; x < item[\"0\"][i][attr1][j][attr2].length; x++) {\r\n              if (item[\"0\"][i][attr1][j][attr2][x] == null) {\r\n\r\n                item[\"0\"][i][attr1][j][attr2].splice(x, 1);\r\n                x--;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    // 过滤项目\r\n    for (var i = 0; i < item[\"0\"].length; i++) {\r\n      for (var attr1 in item[\"0\"][i]) {\r\n        for (var j = 0; j < item[\"0\"][i][attr1].length; j++) {\r\n          for (var attr2 in item[\"0\"][i][attr1][j]) {\r\n            if (item[\"0\"][i][attr1][j][attr2].length == 0) {\r\n              item[\"0\"][i][attr1].splice(j, 1);\r\n              j--;\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    // 过滤点\r\n    for (var i = 0; i < item[\"0\"].length; i++) {\r\n      for (var attr1 in item[\"0\"][i]) {\r\n        if (item[\"0\"][i][attr1].length == 0) {\r\n          item[\"0\"].splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n    }\r\n\r\n    return item;\r\n  },\r\n  getSendOrderInfo: function(dot_id) {\r\n    var sendOrderInfo = {\r\n      \"Order\": {\r\n        \"user_price\": \"0\", //服务费总计\r\n        \"order_type\": \"1\", //点下单\r\n        \"pay_type\": \"1\", //第三方支付接口 选择  默认 支付宝  1\r\n        \"order_price\": \"0.00\", //订单总计\r\n        \"son_order_count\": \"0\", //子订单 统计\r\n        \"go_time\": \"\", //出游日期\r\n        \"user_go_count\": \"1\" //随行人员 人数\r\n      },\r\n      \"OrderRetinue\": [],\r\n      \"OrderItems\": []\r\n    };\r\n\r\n    // 获取要发送订单的信息\r\n    var dotOrderInfo = createDotOrder.getOrderInfoLocal(dot_id);\r\n    // 出游日期\r\n    sendOrderInfo['Order']['go_time'] = dotOrderInfo['go_time'];\r\n\r\n    if (dotOrderInfo['go_time'] == '') {\r\n      tmmApp.alert('请先选择出游日期', '');\r\n      return false;\r\n    }\r\n\r\n\r\n    var orderRetinue = [];\r\n    log.info('getSendOrderInfo--orderRetinue----', info.userInfo);\r\n    if (!info.userInfo.main_retinueInfo.list) {\r\n      tmmApp.alert('请先添加主要联系人', '');\r\n      return false;\r\n    }\r\n\r\n    orderRetinue.push({\r\n      \"is_main\": \"1\",\r\n      \"retinue_id\": info.userInfo.main_retinueInfo.list[0].value\r\n    });\r\n\r\n    for (var i = 0; i < retinueSelect.length; i++) {\r\n\r\n      var temp = {\r\n        \"is_main\": retinueSelect[i].is_main,\r\n        \"retinue_id\": retinueSelect[i].retinue_id\r\n      }\r\n      orderRetinue.push(temp);\r\n    };\r\n\r\n    // 订单随行人员（包括主要联系人）\r\n    sendOrderInfo['OrderRetinue'] = orderRetinue;\r\n    // 订单随行人员总数（包括主要联系人）\r\n    sendOrderInfo['Order']['user_go_count'] = orderRetinue.length;\r\n\r\n    // 订单总价\r\n    sendOrderInfo['Order']['order_price'] = dotOrderInfo['order_price'];\r\n\r\n    var fareDotInfo = createDotOrder.getFareDotLocal(dot_id);\r\n    // 过滤订单项目价格\r\n    sendOrderInfo['OrderItems'] = createDotOrder.filterItem(fareDotInfo);\r\n\r\n    log.info('sdfsdf', sendOrderInfo['OrderItems']);\r\n\r\n    if (sendOrderInfo['OrderItems'][0].length == 0) {\r\n      tmmApp.alert('请选择您要购买的项目', '');\r\n      return false;\r\n    }\r\n\r\n    if (hotelFareFlag === false) {\r\n      tmmApp.alert('您有未选择入住和退房日期的项目', '');\r\n      return false;\r\n    }\r\n\r\n    return sendOrderInfo;\r\n  },\r\n  /**\r\n   * @method   submitDotOrder\r\n   * @description 提交订单\r\n   *  \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-05T12:03:43+0800\r\n   */\r\n  submitDotOrder: function() {\r\n    var _this = this;\r\n    var dot_id = $$(_this).attr('data-dotid');\r\n    var postData = createDotOrder.getSendOrderInfo(dot_id);\r\n    if (postData == false) {\r\n      return;\r\n    }\r\n    log.info('postData---', postData);\r\n    tmmApp.showIndicator();\r\n    httpService.orderCreate(\r\n      postData,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          tmmApp.alert('提交订单成功', '', function() {\r\n            localStorage.removeItem('dot_order_info_' + dot_id);\r\n            localStorage.removeItem('dot_order_faredot_' + dot_id);\r\n            oldFareDot = [];\r\n            retinueSelect = [];\r\n            // 出游时间\r\n            goTime = '';\r\n            trueGoTime = '';\r\n            // 订单总价DOM对象\r\n            obj_total_price = '';\r\n            // 订单总价\r\n            total_price = '';\r\n            hotelFareFlag = true;\r\n            orderDetailModule.gotoOrderView(1, dataRes.data[0]);\r\n          });\r\n        } else {\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('提交订单失败,请重试');\r\n          }\r\n        }\r\n        log.info('orderCreate---', dataRes);\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('提交订单失败');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method   selectGoTime\r\n   * @description 选择出游日期\r\n   * \r\n   * @param    {int} dot_id 点id\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-05T11:39:35+0800\r\n   */\r\n  selectGoTime: function(dot_id) {\r\n    var nowDate = new Date();\r\n    var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n\r\n    tmmApp.calendar({\r\n      input: '#calendar-gotime',\r\n      closeOnSelect: true,\r\n      minDate: preDay,\r\n      monthNames: appFunc.monthNames(),\r\n      dayNames: appFunc.dayNames(),\r\n      dayNamesShort: appFunc.dayNamesShort(),\r\n      scrollToInput: false,\r\n      onDayClick: function(p, dayContainer, year, month, day) {\r\n        var orderInfo = createDotOrder.getOrderInfoLocal(dot_id);\r\n        goTime = appFunc.dateFormt(year, month, day);\r\n        trueGoTime = year + '-' + (parseInt(month, 10) + 1) + '-' + day;\r\n        orderInfo['go_time'] = appFunc.dateFormt(year, month, day);\r\n        createDotOrder.setOrderInfoLocal(dot_id, orderInfo);\r\n        createDotOrder.selectHotelTime(dot_id);\r\n      }\r\n    });\r\n\r\n  },\r\n  /**\r\n   * @method   selectHotelTime\r\n   * @description 选择酒店入住日期\r\n   * \r\n   * @param    {int} dot_id 点id\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-05T11:41:51+0800\r\n   */\r\n  selectHotelTime: function(dot_id) {\r\n    // 订单总价\r\n    obj_total_price = $$('#tmm-order-total-price');\r\n    total_price = parseFloat(obj_total_price.html());\r\n    // 得到每个酒店入住日期选择框\r\n    var calendarList = $$('.tmm-create-dot-order').find('.calendar-hoteltime');\r\n    // 出游日期的真实时间格式\r\n    var goTimeDate = new Date(trueGoTime);\r\n    // 住店的开始时间\r\n    var firstDay = new Date().setDate(goTimeDate.getDate() - 1);\r\n    // 退房的最后时间（最多只能选择10晚的入住时间）\r\n    var lastDay = new Date().setDate(goTimeDate.getDate() + 10);\r\n    // 分别进行初始化\r\n    $$.each(calendarList, function(index, element) {\r\n      var _this = $$(element);\r\n      var subNumObj = _this.parent().parent().parent().find('.sub-num').eq(0);\r\n      log.info('subNumObj...', subNumObj);\r\n      var addNumObj = _this.parent().parent().parent().find('.add-num').eq(0);\r\n      // 记录多选日期的个数\r\n      var num = 0;\r\n      // 记录所选择的两个日期\r\n      var dateArr = [];\r\n      // 临时存入显示的字符串格式，如 \"2015.12.05-12.07（共2晚）\"\r\n      var oldStr = '';\r\n      var str = '';\r\n      // 初始化日期控件\r\n      var calenderObj = tmmApp.calendar({\r\n        input: _this,\r\n        minDate: firstDay, // 所选开始日期必须为等于或大于出游日期\r\n        maxDate: lastDay,\r\n        monthNames: appFunc.monthNames(),\r\n        dayNames: appFunc.dayNames(),\r\n        dayNamesShort: appFunc.dayNamesShort(),\r\n        dateFormat: 'yyyy.mm.dd',\r\n        multiple: true,\r\n        cssClass: 'tmm-hoteldate-picker-calendar',\r\n        closeByOutsideClick: false,\r\n        scrollToInput: false,\r\n        onOpen: function() {\r\n          calenderObj.setValue([]);\r\n          appFunc.showToastBootom('请选择入住日期');\r\n        },\r\n        onDayClick: function(p, dayContainer, year, month, day) {\r\n          calenderObj.setValue([]);\r\n          num++;\r\n          if (num == 1) {\r\n            appFunc.hideToast();\r\n            appFunc.showToastBootom('请选择退房日期');\r\n            dateArr.push(appFunc.dateFormt(year, month, day));\r\n            str += appFunc.dateFormtDot(year, month, day, 1);\r\n          }\r\n          if (num == 2) {\r\n            setTimeout(function() {\r\n              dateArr.push(appFunc.dateFormt(year, month, day));\r\n              log.info('');\r\n              var dif = appFunc.hotelDay(dateArr);\r\n              if (dif <= 0) {\r\n                tmmApp.alert('退房日期必须晚于入住日期');\r\n                _this.val(oldStr);\r\n              } else {\r\n                str += appFunc.dateFormtDot('', month, day, 2) + '（共' + dif + '晚）';\r\n                oldStr = str;\r\n                _this.val(str);\r\n                dateArr.push(dif);\r\n                subNumObj.attr('data-hotelnumber', dif);\r\n                addNumObj.attr('data-hotelnumber', dif);\r\n                createDotOrder.updateDotFareDate(_this, dateArr);\r\n              }\r\n              num = 0;\r\n              str = '';\r\n              dateArr = [];\r\n            }, 0);\r\n\r\n\r\n\r\n            calenderObj.close();\r\n\r\n          }\r\n\r\n\r\n        },\r\n        onClose: function() {\r\n          appFunc.hideToast();\r\n        }\r\n      });\r\n\r\n\r\n\r\n    });\r\n  },\r\n\r\n  /*显示选择出游时间时的遮罩层*/\r\n  showdottList: function() {\r\n    var _this = this;\r\n    var id = $$(_this).attr('id');\r\n    if (goTime == '' && (id != 'calendar-gotime')) {\r\n      tmmApp.alert('请先选择出游日期');\r\n      return;\r\n    }\r\n    $$('body').find(\".modal-overlay\").remove();\r\n    if ($$('body').find(\".modal-overlay\").hasClass('tmm-picker-calendar')) {\r\n      $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n    } else {\r\n      $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-picker-calendar\"></div>');\r\n    }\r\n  },\r\n\r\n  goBack: function() {\r\n    var dot_id = $$(this).attr('data-dotid');\r\n    localStorage.removeItem('dot_order_info_' + dot_id);\r\n    localStorage.removeItem('dot_order_faredot_' + dot_id);\r\n    oldFareDot = [];\r\n    retinueSelect = [];\r\n    // 出游时间\r\n    goTime = '';\r\n    trueGoTime = '';\r\n    // 订单总价DOM对象\r\n    obj_total_price = '';\r\n    // 订单总价\r\n    total_price = '';\r\n    hotelFareFlag = true;\r\n  },\r\n  selectDot: function() {\r\n    dotManageModule.showDotList();\r\n    log.info('selectDot---');\r\n  },\r\n  bindEvent: function() {\r\n\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#orderDotAddRetinue',\r\n      event: 'click',\r\n      handler: createDotOrder.showList\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-create-dot-order .sub-num',\r\n      event: 'click',\r\n      handler: createDotOrder.subNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-create-dot-order .add-num',\r\n      event: 'click',\r\n      handler: createDotOrder.addNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#submitDotOrder',\r\n      event: 'click',\r\n      handler: createDotOrder.submitDotOrder\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#dot-order-back',\r\n      event: 'click',\r\n      handler: createDotOrder.goBack\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#tmm-select-dot',\r\n      event: 'click',\r\n      handler: createDotOrder.selectDot\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderDotAddRetinue',\r\n      event: 'click',\r\n      handler: createDotOrder.showList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-create-dot-order .sub-num',\r\n      event: 'click',\r\n      handler: createDotOrder.subNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-create-dot-order .add-num',\r\n      event: 'click',\r\n      handler: createDotOrder.addNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#submitDotOrder',\r\n      event: 'click',\r\n      handler: createDotOrder.submitDotOrder\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#dot-order-back',\r\n      event: 'click',\r\n      handler: createDotOrder.goBack\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#tmm-select-dot',\r\n      event: 'click',\r\n      handler: createDotOrder.selectDot\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderDotAddRetinue',\r\n      event: 'click',\r\n      handler: createDotOrder.showList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-create-dot-order .sub-num',\r\n      event: 'click',\r\n      handler: createDotOrder.subNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-create-dot-order .add-num',\r\n      event: 'click',\r\n      handler: createDotOrder.addNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#submitDotOrder',\r\n      event: 'click',\r\n      handler: createDotOrder.submitDotOrder\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#dot-order-back',\r\n      event: 'click',\r\n      handler: createDotOrder.goBack\r\n    }, {\r\n      element: \"#recommendView\",\r\n      selector: '.calendar-gotime-dott',\r\n      event: 'click',\r\n      handler: createDotOrder.showdottList\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.calendar-gotime-dott',\r\n      event: 'click',\r\n      handler: createDotOrder.showdottList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-select-dot',\r\n      event: 'click',\r\n      handler: createDotOrder.selectDot\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n\r\n}\r\n\r\nmodule.exports = createDotOrder;\r\n"},{"id":63,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dot-order.tpl.html","name":"./src/modules/shop/dot-order.tpl.html","index":63,"index2":56,"size":6541,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"./dot-order.tpl.html","loc":"4:13-44"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\" id=\\\"dot-order-back\\\" data-dotid=\\\"{{orderInfo.value}}\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">点订单预定</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"dot-order\\\" class=\\\"page page-order tmm-my-order-detail-page tmm-create-dot-order\\\" style=\\\"padding-bottom: 50px;\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail tmm-order\\\" >\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div><input type=\\\"text\\\" placeholder=\\\"请选择出游日期\\\" readonly id=\\\"calendar-gotime\\\" class=\\\"calendar-gotime-dott\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n      <!-- 点的列表 -->\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <!-- 项目列表 -->\\r\\n        {{#each orderInfo.items_fare}}\\r\\n        <div class=\\\"b_border\\\">\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <!-- 项目下面的商品列表 -->\\r\\n          <li class=\\\"tmm-item-li clearfix\\\">\\r\\n            <div class=\\\"tmm-item-title\\\" data-itemsort=\\\"{{@index}}\\\">\\r\\n              {{#js_compare \\\"this.classliy.name =='玩'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='吃'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.name =='住'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}{{name}}\\r\\n              {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n            {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n              <div class=\\\"tmm-item-fare {{js \\\"this.room_number !=0?'hotel':''\\\"}}\\\">\\r\\n                {{#js_compare \\\"this.room_number !=0\\\"}}\\r\\n                  <div class=\\\"row tmm-order-status\\\">\\r\\n                    <div><input type=\\\"text\\\" placeholder=\\\"请选择入住和退房日期 >\\\" size=\\\"30\\\" readonly\\r\\n                    data-dotsort=\\\"0\\\"\\r\\n                    data-dotid=\\\"{{../../../../orderInfo.value}}\\\"\\r\\n                    data-itemid=\\\"{{../../value}}\\\"\\r\\n                    data-faresort=\\\"{{@index}}\\\"\\r\\n                    data-fareid=\\\"{{value}}\\\"\\r\\n                    data-type=\\\"start_date\\\"\\r\\n                     class=\\\"calendar-gotime-dott calendar-hoteltime\\\">\\r\\n                    </div>\\r\\n                  </div>\\r\\n                {{/js_compare}}\\r\\n                <div class=\\\"fare-item\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number ==0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{info}}</div>\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.room_number !=0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{room room_number}}</div>\\r\\n                {{/js_compare}}\\r\\n     \\r\\n                <div class=\\\"fare-item price\\\">￥{{price}}</div>\\r\\n                <div class=\\\"fare-item item-num\\\">\\r\\n                  <span class=\\\"sub-num\\\"\\r\\n                  data-dotsort=\\\"0\\\"\\r\\n                  data-dotid=\\\"{{../../../../orderInfo.value}}\\\"\\r\\n                  data-itemid=\\\"{{../value}}\\\"\\r\\n                  data-faresort=\\\"{{@index}}\\\"\\r\\n                  data-fareid=\\\"{{value}}\\\"\\r\\n                  data-price=\\\"{{price}}\\\"\\r\\n                  data-number=\\\"0\\\"\\r\\n                  data-count=\\\"0\\\"\\r\\n                  data-hotelnumber=\\\"0\\\"\\r\\n                  data-type=\\\"{{js \\\"this.room_number !=0 ? '1' : '0'\\\"}}\\\"\\r\\n                  >\\r\\n                    \\r\\n                  </span>\\r\\n                  <span class=\\\"num\\\">{{number}}</span>\\r\\n                  <span class=\\\"add-num\\\" \\r\\n                  data-dotsort=\\\"0\\\"\\r\\n                  data-dotid=\\\"{{../../../../orderInfo.value}}\\\"\\r\\n                  data-itemid=\\\"{{../value}}\\\"\\r\\n                  data-faresort=\\\"{{@index}}\\\"\\r\\n                  data-fareid=\\\"{{value}}\\\"\\r\\n                  data-price=\\\"{{price}}\\\"\\r\\n                  data-number=\\\"0\\\"\\r\\n                  data-count=\\\"0\\\"\\r\\n                  data-hotelnumber=\\\"0\\\"\\r\\n                  data-type=\\\"{{js \\\"this.room_number !=0 ? '1' : '0'\\\"}}\\\"\\r\\n                  >\\r\\n                  </span>\\r\\n                </div>\\r\\n           \\r\\n              </div>\\r\\n            {{/each}}\\r\\n            {{/js_compare}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\" id=\\\"tmm-order-mainretinue-list\\\">\\r\\n          {{#if userInfo.main_retinueInfo.list}}\\r\\n          <div>{{userInfo.main_retinueInfo.list[0].name}}</div>\\r\\n          {{else}}\\r\\n          <div id=\\\"orderAddMainRetinue\\\" data-phone=\\\"{{userInfo.userInfo.phone}}\\\" class=\\\"red\\\">添加</div>\\r\\n          {{/if}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">随行人员</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row  tmm-order-status\\\" id=\\\"tmm-order-retinue-list\\\">\\r\\n          <span id=\\\"orderDotAddRetinue\\\" data-type=\\\"2\\\" class=\\\"w_33 red\\\">选择</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n      <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"price\\\">￥<span id=\\\"tmm-order-total-price\\\">0.00</span></span>\\r\\n        <span class=\\\"tmm-order-detail-confirm-btn-active\\\" id=\\\"submitDotOrder\\\" data-dotid=\\\"{{orderInfo.value}}\\\">提交订单</span>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":64,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","name":"./src/modules/shop/dotManage.js","index":64,"index2":59,"size":1976,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":62,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createDotOrder.js","module":"./src/modules/shop/createDotOrder.js","moduleName":"./src/modules/shop/createDotOrder.js","type":"cjs require","userRequest":"./dotManage","loc":"9:20-42"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  dotManageViewModel = require('./dotManageView');\r\n\r\nvar dotManage = {\r\n  init: function() {\r\n    log.info('dotManage init...');\r\n    appFunc.hideToolbar();\r\n  },\r\n  showDotList: function() {\r\n    dotManage.bindEvent();\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getDotList(\r\n      function(dataRes, statusCode) {\r\n        dotManageViewModel.getDotList(dataRes.data);\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试...', '');\r\n      }\r\n    );\r\n  },\r\n  showDotDetail: function() {\r\n    log.info('showDotDetail---');\r\n\r\n    var _this = this;\r\n    var link = $$(_this).attr('data-link');\r\n    tmmApp.showIndicator();\r\n    httpService.getDotDetail(\r\n      link,\r\n      function(dataRes, statusCode) {\r\n        dotManageViewModel.showDotDetail(dataRes);\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试...', '');\r\n      }\r\n    );\r\n\r\n\r\n    // // 显示正在加载的图标\r\n    // tmmApp.showIndicator();\r\n    // httpService.getDotList(\r\n    //   function(dataRes, statusCode) {\r\n    //     dotManageViewModel.getDotList(dataRes.data);\r\n    //     // 隐藏正在加载的图标\r\n    //     tmmApp.hideIndicator();\r\n    //   },\r\n    //   function(dataRes, statusCode) {\r\n    //     // 隐藏正在加载的图标\r\n    //     tmmApp.hideIndicator();\r\n    //     tmmApp.alert('网络超时，请重试...', '');\r\n    //   }\r\n    // );\r\n\r\n\r\n    log.info('showDotDetail...');\r\n\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '.tmm-select-dot-detail',\r\n      event: 'click',\r\n      handler: dotManage.showDotDetail\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = dotManage;\r\n"},{"id":65,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","name":"./src/modules/shop/dotManageView.js","index":65,"index2":58,"size":1953,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":64,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManage.js","module":"./src/modules/shop/dotManage.js","moduleName":"./src/modules/shop/dotManage.js","type":"cjs require","userRequest":"./dotManageView","loc":"4:23-49"}],"source":"/**\r\n * @name dotManageView\r\n * @description 点列表视图模型模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-11-02T15:46:01+0800\r\n */\r\nvar log = require('../utils/log'),\r\n  appFunc = require('../utils/appFunc'),\r\n  select_dot_tpl = require('./select-dot.tpl.html'),\r\n  dot_detail_tpl = require('./dot-detail.tpl.html');\r\n\r\nvar dotManageView = {\r\n  getDotList: function(dataRes) {\r\n    // 转成对象赋值给页面上\r\n    var data = {\r\n      dotList: dataRes.list_data\r\n    };\r\n    log.info('dotManageView --getDotList--init...');\r\n\r\n    var output = appFunc.renderTpl(select_dot_tpl, data);\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      reload: true\r\n    });\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  refreshDotList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    log.info('recommendView --refreshRecommendList--init...');\r\n\r\n    var output = appFunc.renderTpl(template, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#recommendView').find('.tmm-recommend-ul-list').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n\r\n  },\r\n  infiniteDotList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(template, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#recommendView').find('.tmm-recommend-ul-list').append(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  showDotDetail: function(dataRes) {\r\n    var data = {\r\n      dotObj: dataRes.data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(dot_detail_tpl, data);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      reload: true\r\n    });\r\n  }\r\n};\r\n\r\nmodule.exports = dotManageView;\r\n"},{"id":66,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\select-dot.tpl.html","name":"./src/modules/shop/select-dot.tpl.html","index":66,"index2":57,"size":1649,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":65,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\dotManageView.js","module":"./src/modules/shop/dotManageView.js","moduleName":"./src/modules/shop/dotManageView.js","type":"cjs require","userRequest":"./select-dot.tpl.html","loc":"10:19-51"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">选择点</div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"select-dot\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"tmm-list-block\\\">\\r\\n        <ul class=\\\"tmm-select-dot-list\\\">\\r\\n          {{#each dotList}}\\r\\n          <li class=\\\"tmm-item-content\\\">\\r\\n            <div class=\\\"pic\\\">\\r\\n              <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" class=\\\"tmm-select-dot-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n            </div>\\r\\n            <div class=\\\"txt\\\">\\r\\n              <div class=\\\"title\\\">{{name}}</div>\\r\\n              <div class=\\\"intro\\\">{{info}}</div>\\r\\n              <span class=\\\"type {{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\">\\r\\n                {{js \\\" this.classliy.value==1 ? '景点' : this.classliy.value==2 ? '线路' : '觅趣' \\\"}}\\r\\n              </span>\\r\\n              <span class=\\\"praise\\\"><i class=\\\"icon ticon-praise\\\"></i>\\r\\n    <span class=\\\"num\\\" id=\\\"recommend_{{value}}\\\">{{collect_count}}</span>\\r\\n              </span>\\r\\n            </div>\\r\\n          </li>\\r\\n          {{/each}}\\r\\n        </ul>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":67,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","name":"./src/modules/shop/createActOrder.js","index":67,"index2":62,"size":17963,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./shop/createActOrder","loc":"19:19-51"},{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./createActOrder","loc":"11:19-46"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  template = require('./act-order.tpl.html'),\r\n  addRetinueShop = require('./addRetinueShop'),\r\n  selectRetinue_tpl = require('./selectRetinue.tpl.html'),\r\n  orderDetail = require('../order/orderDetail'),\r\n  roleModule = require('../role/role');\r\n\r\nvar info = {\r\n  'orderInfo': {},\r\n  'userInfo': {}\r\n}\r\n\r\nwindow.retinueSelect = []; // 随行人员选择集合\r\n//var retinueSelectDefault = [];//保存复选框选中的值\r\nvar cNum = 0; // 成人数量\r\nvar eNum = 0; // 儿童数量\r\nvar totPrice = 0; //订单总价格\r\nvar servicePrice = 0; // 服务总价格\r\nvar datetime = '';\r\n\r\nvar createActOrder = {\r\n\r\n  init: function() {\r\n    cNum = 0;\r\n    eNum = 0;\r\n    retinueSelect = [];\r\n    // createActOrder.getUserInfo();\r\n    createActOrder.bindEvent();\r\n  },\r\n\r\n  /**\r\n   * 显示创建觅趣订单视图\r\n   * @param  {[type]} id 线订单id\r\n   * @return {[type]}    [description]\r\n   */\r\n  showView: function(id) {\r\n\r\n    retinueSelectDefault = [];\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.goToLogin();\r\n      return;\r\n    }\r\n\r\n\r\n    tmmApp.showIndicator();\r\n    // 获取订单数据\r\n    httpService.getFareOrder(id,\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n          info.orderInfo = dataRes.data;\r\n\r\n          // 获取个人信息\r\n          httpService.getUserInfo(function(dataRes) {\r\n\r\n            info.userInfo = dataRes.data;\r\n            info.datetime = datetime;\r\n            // retinueSelect = dataRes.data.retinueInfo.list;\r\n\r\n            \r\n            // 编译模版\r\n            var output = appFunc.renderTpl(template, info);\r\n            tmmApp.getCurrentView().router.load({\r\n              content: output,\r\n            });\r\n            tmmApp.hideIndicator()\r\n            createActOrder.init();\r\n\r\n          }, function(dataRes) {\r\n            tmmApp.hideIndicator()\r\n          });\r\n\r\n        } else {\r\n          tmmApp.hideIndicator()\r\n        }\r\n\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator()\r\n      });\r\n  },\r\n  /**\r\n   * 填充主要联系人信息\r\n   */\r\n  fillMainRetinue: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n      info.userInfo = dataRes.data;\r\n\r\n      if (info.userInfo.main_retinueInfo.list) {\r\n        $$('#tmm-order-mainretinue-list').html('<div>' + info.userInfo.main_retinueInfo.list[0].name + '</div>')\r\n      }\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取用户信息\r\n   * @return {[type]} [description]\r\n   */\r\n  getUserInfo: function(fn) {\r\n    httpService.getUserInfo(function(dataRes) {\r\n\r\n      info.userInfo = dataRes.data;\r\n\r\n      // fn || fn();\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取随行人员列表信息\r\n   * @return {[type]} [description]\r\n   */\r\n  showList: function() {\r\n    httpService.getUserInfo(function(dataRes) {\r\n      \r\n      info.userInfo = dataRes.data;\r\n      var retinueBack = 0; //是否是返回按钮\r\n      var popupHTML = appFunc.renderTpl(selectRetinue_tpl, info.userInfo);\r\n      \r\n      tmmApp.popup(popupHTML);\r\n\r\n      if(info.userInfo.retinueInfo.list != null){  \r\n        $$(\"#noRetinue\").css('display','none');\r\n      } else {\r\n        $$(\"#noRetinue\").css('display','block');\r\n      }\r\n\t\t\t\r\n\t\t\t//随行人员的默认值\r\n      $$.each($$('.select-retinue'), function(index, value) {\r\n        for(var j = 0; j < retinueSelectDefault.length; j++){\r\n          if ($$(value).attr('data-id') == retinueSelectDefault[j]) {\r\n            $$(value).attr('checked', 'checked');\r\n          }\r\n        }\r\n      });\r\n\r\n      $$('.retinueBackClose').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n      });\r\n\r\n      //添加随行人员事件\r\n      $$('.order-add-retinue').on('click', function() {\r\n        retinueBack = 1;\r\n        tmmApp.closeModal('.popup')\r\n        setTimeout(function() {\r\n          addRetinueShop.init(2);\r\n\r\n        }, 200)\r\n      })\r\n\r\n\r\n      //弹出层关闭事件\r\n      $$('.popup').on('close', function() {\r\n        var str = '';\r\n        retinueSelect = [];\r\n        if(retinueBack != 1){\r\n          retinueSelectDefault = [];\r\n        }\r\n\r\n        $$.each($$('.select-retinue'), function(index, value) {\r\n\r\n          if ($$(value).prop('checked')) {\r\n          \tif (retinueBack != 1) {\r\n              retinueSelectDefault.push($$(value).attr('data-id'));\r\n            }\r\n            retinueSelect.push({\r\n              'retinue_id': $$(value).attr('data-id'),\r\n              'name': $$(value).val(),\r\n              'is_main': \"0\"\r\n            });\r\n\r\n            str += '<div class=\"w_33 retinue\">' + $$(value).val() + '</div>';\r\n          }\r\n        });\r\n        if (retinueBack != 1) {\r\n          $$('#tmm-order-retinue-list .retinue').remove();\r\n          $$('#tmm-order-retinue-list').prepend(str);\r\n        }\r\n\r\n      });\r\n\r\n    }, function(dataRes) {\r\n\r\n    });\r\n\r\n\r\n  },\r\n\r\n  /**\r\n   * 计算总价格\r\n   * @return {[type]} [description]\r\n   */\r\n  countPrice: function() {\r\n    totPrice = 0;\r\n    servicePrice = 0;\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n                list[attr1][i][attr2][j]['fare'][k]['count'] = list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']\r\n                totPrice = (list[attr1][i][attr2][j]['fare'][k]['count'] + totPrice * 1).toFixed(2);\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 计算服务费\r\n    var num = cNum + eNum;\r\n    servicePrice = num * info.orderInfo.price.value;\r\n\r\n    totPrice = (parseFloat(totPrice) + servicePrice).toFixed(2);\r\n\r\n    $$('.tmm-service-num').html(num);\r\n    $$('.tmm-total-price').html('￥' + totPrice);\r\n  },\r\n  /**\r\n   * 拼接订单\r\n   */\r\n  spliceItem: function() {\r\n    var item = {};\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    for (var attr1 in list) {\r\n      item[attr1] = [];\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n        item[attr1][i] = {};\r\n        for (var attr2 in list[attr1][i]) {\r\n          item[attr1][i][attr2] = [];\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n              item[attr1][i][attr2][j] = {};\r\n              item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']] = [];\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k] = {};\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']] = {};\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['price'] = list[attr1][i][attr2][j]['fare'][k]['price'];\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['number'] = list[attr1][i][attr2][j]['fare'][k]['number'];\r\n                item[attr1][i][attr2][j][list[attr1][i][attr2][j]['value']][k][list[attr1][i][attr2][j]['fare'][k]['value']]['count'] = list[attr1][i][attr2][j]['fare'][k]['count'];\r\n\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n    item['value'] = info.orderInfo.value;\r\n    return item;\r\n  },\r\n\r\n  /**\r\n   * 增加数量\r\n   */\r\n  addNum: function() {\r\n    var type = $$(this).attr('data-info'); // 得到成人或者儿童\r\n    var is_room = $$(this).attr('data-room'); // 成人或者儿童所需要的房间数量\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    if (type == '成人') {\r\n\r\n      cNum++;\r\n      $$(this).parent().find('.num').html(cNum);\r\n\r\n    } else if (type == '儿童') {\r\n      if (cNum * 2 <= eNum) {\r\n        tmmApp.alert('一个成人最多只能带两个儿童')\r\n        return;\r\n      }\r\n\r\n      eNum++;\r\n      $$(this).parent().find('.num').html(eNum);\r\n    }\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['info'] == '成人') {\r\n\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = cNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInItem('成人', cNum);\r\n\r\n                } else if (list[attr1][i][attr2][j]['fare'][k]['info'] == '儿童') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = eNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInItem('儿童', eNum);\r\n                }\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['room_number'] != '0') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = Math.ceil(cNum / list[attr1][i][attr2][j]['fare'][k]['room_number']);\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInRoom(list[attr1][i][attr2][j]['fare'][k]['room_number'], list[attr1][i][attr2][j]['fare'][k]['number']);\r\n                }\r\n\r\n              }\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n    createActOrder.countPrice();\r\n  },\r\n\r\n  /**\r\n   * 减少数量\r\n   * @return {[type]} [description]\r\n   */\r\n  subNum: function() {\r\n\r\n    var type = $$(this).attr('data-info'); // 得到成人或者儿童\r\n    var is_room = $$(this).attr('data-room'); // 成人或者儿童所需要的房间数量\r\n    var list = info.orderInfo.dot_list;\r\n\r\n    if (type == '成人') {\r\n      if (cNum == 0) {\r\n        return;\r\n      }\r\n\r\n       cNum--;\r\n      if (cNum * 2 < eNum) {\r\n        cNum ++;\r\n        tmmApp.alert('一个成人最多只能带两个儿童')\r\n        return;\r\n      }\r\n      \r\n      $$(this).parent().find('.num').html(cNum);\r\n\r\n    } else if (type == '儿童') {\r\n      if (eNum == 0) {\r\n        return;\r\n      }\r\n      eNum--;\r\n      $$(this).parent().find('.num').html(eNum);\r\n    }\r\n\r\n    for (var attr1 in list) {\r\n\r\n      for (var i = 0; i < list[attr1].length; i++) {\r\n\r\n        for (var attr2 in list[attr1][i]) {\r\n          if (attr2 != '$$hashKey') {\r\n\r\n            for (var j = 0; j < list[attr1][i][attr2].length; j++) {\r\n\r\n              for (var k = 0; k < list[attr1][i][attr2][j]['fare'].length; k++) {\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['info'] == '成人') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = cNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInItem('成人', cNum);\r\n                } else if (list[attr1][i][attr2][j]['fare'][k]['info'] == '儿童') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = eNum;\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInItem('儿童', eNum);\r\n                }\r\n\r\n                if (list[attr1][i][attr2][j]['fare'][k]['room_number'] != '0') {\r\n                  list[attr1][i][attr2][j]['fare'][k]['number'] = Math.ceil(cNum / list[attr1][i][attr2][j]['fare'][k]['room_number']);\r\n                  list[attr1][i][attr2][j]['fare'][k]['count'] = (list[attr1][i][attr2][j]['fare'][k]['number'] * list[attr1][i][attr2][j]['fare'][k]['price']).toFixed(2);\r\n\r\n                  createActOrder.showNumInRoom(list[attr1][i][attr2][j]['fare'][k]['room_number'], list[attr1][i][attr2][j]['fare'][k]['number']);\r\n\r\n                }\r\n\r\n              }\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n    createActOrder.countPrice();\r\n  },\r\n  /**\r\n   * 成人儿童人数变化时显示到项目中去\r\n   * @param  {[type]} type 成人，儿童\r\n   * @param  {[type]} num 添加的数量\r\n   * @return {[type]}      [description]\r\n   */\r\n  showNumInItem: function(type, num) {\r\n    if (type == '成人') {\r\n      $$(\".fare-item-num[fare-item-type='成人']\").html(num)\r\n    } else if (type == '儿童') {\r\n      $$(\".fare-item-num[fare-item-type='儿童']\").html(num)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 成人变化时添加人数到房间中去\r\n   * @param  {[type]} type 添加房间的room_num\r\n   * @param  {[type]} num  添加的数量\r\n   * @return {[type]}      [description]\r\n   */\r\n  showNumInRoom: function(type, num) {\r\n\r\n    $$(\".fare-item-num[fare-item-room='\" + type + \"']\").html(num)\r\n\r\n  },\r\n  /**\r\n   * 提交订单\r\n   * @return {[type]} [description]\r\n   */\r\n  submitActOrder: function() {\r\n    var _this = this;\r\n\r\n    // 判断成人选择是否为0\r\n    if (cNum == 0) {\r\n      tmmApp.alert('请选择出游人数');\r\n      return;\r\n    }\r\n    // 判断是否存在主要成员\r\n    if (!info.userInfo.main_retinueInfo.list) {\r\n      tmmApp.alert('请添加主要联系人');\r\n      return;\r\n    }\r\n    var token = {};\r\n    var OrderRetinue = [];\r\n    var OrderItemsFare = [];\r\n\r\n    OrderRetinue.push({\r\n      \"is_main\": \"1\",\r\n      \"retinue_id\": info.userInfo.main_retinueInfo.list[0].value\r\n    })\r\n\r\n    for (var i = 0; i < retinueSelect.length; i++) {\r\n\r\n      var temp = {\r\n        \"is_main\": retinueSelect[i].is_main,\r\n        \"retinue_id\": retinueSelect[i].retinue_id\r\n      }\r\n\r\n      OrderRetinue.push(temp);\r\n\r\n    };\r\n\r\n    // 判断选择人数与随行人员不匹配\r\n    if (OrderRetinue.length != cNum + eNum) {\r\n      tmmApp.alert('请确保主要联系人和随行人员总数与出游人数一致');\r\n      return;\r\n    }\r\n\r\n\r\n    // 过滤成人与儿童\r\n    var orderItemsFare = [];\r\n    for (var i = 0; i < info.orderInfo.OrderItemsFare.length; i++) {\r\n      orderItemsFare[i] = {};\r\n      orderItemsFare[i]['info'] = info.orderInfo.OrderItemsFare[i]['info'];\r\n      orderItemsFare[i]['is_room'] = info.orderInfo.OrderItemsFare[i]['is_room'];\r\n\r\n      if (orderItemsFare[i]['info'] == '成人') {\r\n        orderItemsFare[i]['number'] = cNum;\r\n      } else if (orderItemsFare[i]['info'] == '儿童') {\r\n        orderItemsFare[i]['number'] = eNum;\r\n      }\r\n    };\r\n\r\n\r\n    /**\r\n     * 提交的json数据\r\n     * @type {Object}\r\n     */\r\n    token = {\r\n        \"Order\": {\r\n            \"user_price\": servicePrice,\r\n            \"order_type\": \"3\",\r\n            \"order_price\": totPrice,\r\n            \"son_order_count\": \"0\",\r\n            \"user_go_count\": OrderRetinue.length\r\n        },\r\n        \"OrderRetinue\": OrderRetinue,\r\n        \"OrderItems\": createActOrder.spliceItem(),\r\n        \"OrderItemsFare\": orderItemsFare\r\n      };\r\n      \r\n      /**\r\n       * 提交表单\r\n       */\r\n      tmmApp.showIndicator();\r\n    httpService.orderCreate(token, function(dataRes) {\r\n      \r\n      tmmApp.hideIndicator();\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('提交订单成功', function() {\r\n\r\n          orderDetail.gotoOrderView(3, dataRes.data[\"0\"]);\r\n        });\r\n      } else {\r\n        if (dataRes.form) {\r\n          if (dataRes.form.Order_go_time) {\r\n            tmmApp.alert(dataRes.form.Order_go_time[0]);\r\n            return;\r\n          } else if (dataRes.form.Order_order_price) {\r\n            tmmApp.alert(dataRes.form.Order_order_price[0]);\r\n            return;\r\n          }\r\n        }\r\n        tmmApp.alert('提交订单失败');\r\n      }\r\n\r\n    }, function() {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络连接失败');\r\n\r\n    });\r\n\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#recommendView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#orderActAddRetinue',\r\n      event: 'click',\r\n      handler: createActOrder.showList\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-order-act-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createActOrder.subNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '.tmm-order-act-addsub .add-num',\r\n      event: 'click',\r\n      handler: createActOrder.addNum\r\n    }, {\r\n      element: '#recommendView',\r\n      selector: '#submitActOrderBtn',\r\n      event: 'click',\r\n      handler: createActOrder.submitActOrder\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#orderActAddRetinue',\r\n      event: 'click',\r\n      handler: createActOrder.showList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-order-act-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createActOrder.subNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-order-act-addsub .add-num',\r\n      event: 'click',\r\n      handler: createActOrder.addNum\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '#submitActOrderBtn',\r\n      event: 'click',\r\n      handler: createActOrder.submitActOrder\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderAddMainRetinue',\r\n      event: 'click',\r\n      handler: addRetinueShop.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#orderActAddRetinue',\r\n      event: 'click',\r\n      handler: createActOrder.showList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-order-act-addsub .sub-num',\r\n      event: 'click',\r\n      handler: createActOrder.subNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-order-act-addsub .add-num',\r\n      event: 'click',\r\n      handler: createActOrder.addNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#submitActOrderBtn',\r\n      event: 'click',\r\n      handler: createActOrder.submitActOrder\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\nmodule.exports = createActOrder;\r\n"},{"id":68,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\act-order.tpl.html","name":"./src/modules/shop/act-order.tpl.html","index":68,"index2":61,"size":6203,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":67,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\createActOrder.js","module":"./src/modules/shop/createActOrder.js","moduleName":"./src/modules/shop/createActOrder.js","type":"cjs require","userRequest":"./act-order.tpl.html","loc":"3:13-44"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣报名</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"act-order\\\" class=\\\"page page-order tmm-my-order-detail-page\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail tmm-order tmm-order-line\\\">\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n          出游日期：{{orderInfo.go_time.value}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游人数</div>\\r\\n      <div class=\\\"list-block tmm-require tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        {{#each orderInfo.OrderItemsFare}}\\r\\n        <div class=\\\"item-type tmm-order-act-addsub\\\">\\r\\n          <span class=\\\"type-tit\\\">{{info}}</span>\\r\\n          <span class=\\\"fare-item item-num\\\"><span data-info=\\\"{{info}}\\\" data-room=\\\"{{is_room}}\\\" class=\\\"sub-num\\\"></span><span class=\\\"num\\\">{{number}}</span><span data-info=\\\"{{info}}\\\" data-room=\\\"{{is_room}}\\\" class=\\\"add-num\\\"></span></span>\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n      {{#each orderInfo.dot_list}}\\r\\n      {{#if @key%2}}\\r\\n      <div class=\\\"day-time\\\">{{mergeDay @key}}</div>\\r\\n      {{/if}}\\r\\n      <!-- 点的列表 -->\\r\\n      {{#each this}} {{#each this}}\\r\\n      <div class=\\\"list-block tmm-list-block\\\">\\r\\n        <!-- 项目列表 -->\\r\\n        {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <!-- 项目下面的商品列表 -->\\r\\n          <li class=\\\"tmm-item-li clearfix\\\">\\r\\n            <div class=\\\"tmm-item-title {{#js_compare \\\"this.free_status.value =='0'\\\"}}clear-before{{/js_compare}}\\\">\\r\\n              {{#js_compare \\\"this.classliy.value =='3'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-play\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.value =='1'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-eat\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.classliy.value =='2'\\\"}}\\r\\n              <i class=\\\"icon tmm-type-icon ticon-live\\\"></i>\\r\\n              {{/js_compare}}\\r\\n              {{name}}\\r\\n              {{#js_compare \\\"this.free_status.value =='0'\\\"}}<span style=\\\"position:absolute;right:16px;top:50%;line-height:20px;margin-top:-10px;\\\">此项目免费</span>{{/js_compare}}\\r\\n            </div>\\r\\n\\r\\n          {{#js_compare \\\"this.free_status.value !='0'\\\"}}\\r\\n            {{#each fare}}\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"fare-item\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number == 0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{info}}</div>\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"this.room_number !=0\\\"}}\\r\\n                <div class=\\\"fare-item\\\">{{room room_number}}</div>\\r\\n                {{/js_compare}}\\r\\n  \\r\\n                <div class=\\\"fare-item\\\">￥{{price}}</div>\\r\\n                <div fare-item-type=\\\"{{info}}\\\" fare-item-room=\\\"{{room_number}}\\\" class=\\\"fare-item fare-item-num\\\">{{number}}</div>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n\\r\\n            </div>\\r\\n            {{/js_compare}}\\r\\n          </li>\\r\\n        </ul>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n      {{/each}} {{/each}} {{/each}}\\r\\n  \\r\\n\\r\\n      {{#js_compare \\\"this.orderInfo.is_organizer.value =='1'\\\"}}\\r\\n      <!-- 服务费用 -->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">服务费（交通、导服及其他）</div>\\r\\n      <div class=\\\"list-block tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row  tmm-order-status tmm-order-fare-item\\\">\\r\\n          <span class=\\\"fare-item w_30\\\">{{orderInfo.price.name}}</span>\\r\\n          <span class=\\\"fare-item w_40\\\">单价：{{orderInfo.price.value}}元</span>\\r\\n          <span class=\\\"fare-item w_30\\\"><span class=\\\"tmm-service-num\\\">0</span>份</span>\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\" id=\\\"tmm-order-mainretinue-list\\\">\\r\\n          {{#if userInfo.main_retinueInfo.list}}\\r\\n          <div>{{userInfo.main_retinueInfo.list[0].name}}</div>\\r\\n          {{else}}\\r\\n          <div id=\\\"orderAddMainRetinue\\\" data-phone=\\\"{{userInfo.userInfo.phone}}\\\" class=\\\"red\\\">添加</div>\\r\\n          {{/if}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">随行人员</div>\\r\\n      <div class=\\\"list-block tmm-retinue tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <div class=\\\"row tmm-order-status\\\" id=\\\"tmm-order-retinue-list\\\">\\r\\n          <span id=\\\"orderActAddRetinue\\\" data-type=\\\"2\\\" class=\\\"w_33 red\\\">选择</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n     \\r\\n     <!--  <div class=\\\"content-block-title tmm-content-title\\\">优惠券</div>\\r\\n      <div class=\\\"list-block tmm-main-retinue tmm-retinue-top-border tmm-retinue-bottom-border\\\" style=\\\"position: relative;\\\">\\r\\n        <div class=\\\"row select-coupon-code\\\">请使用优惠券<i class=\\\"icon ticon-arrow-right\\\" style=\\\"font-size: 14px;\\\"></i></div>\\r\\n      </div> -->\\r\\n\\r\\n      \\r\\n    </div>\\r\\n    <div class=\\\"tmm-border-btn tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        <span class=\\\"tmm-total-price price\\\">￥<span id=\\\"tmm-order-total-price\\\">0.00</span></span>\\r\\n        <a class=\\\"tmm-order-detail-confirm-btn-active\\\" id=\\\"submitActOrderBtn\\\">提交订单</a>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":69,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","name":"./src/modules/myPraise/myPraiseView.js","index":69,"index2":65,"size":1741,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../myPraise/myPraiseView","loc":"12:17-52"},{"moduleId":109,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","module":"./src/modules/myPraise/myPraise.js","moduleName":"./src/modules/myPraise/myPraise.js","type":"cjs require","userRequest":"./myPraiseView","loc":"4:17-42"}],"source":"/**\r\n * @name recommendView\r\n * @description 我的赞模型模块\r\n */\r\nvar log = require('../utils/log');\r\nvar appFunc = require('../utils/appFunc');\r\nvar template = require('./my-praise.tpl.html');\r\nvar template_li = require('./my-praise-li.tpl.html');\r\nvar myPraiseView = {\r\n  /**\r\n   * @method getMyPraiseList\r\n   * @description 获取我的赞的列表的数据后进行编译渲染\r\n   */\r\n  getMyPraiseList: function(dataRes) {\r\n    // 转成对象赋值给页面上\r\n    log.info('dataRes',dataRes);\r\n    var data = {\r\n      myPraiseList: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(template, data);\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  /**\r\n   * @method refreshMyPraiseList\r\n   * @description 下拉刷新获取我的赞列表数据后进行编译渲染\r\n   */\r\n  refreshMyPraiseList: function(dataRes) {\r\n    var data = {\r\n      myPraiseList: dataRes.list_data\r\n    };\r\n    log.info('myPraiseView --refreshMyPraiseList--init...');\r\n\r\n    var output = appFunc.renderTpl(template_li, data);\r\n    $$('#myPraise').find('.tmm-myPraise-ul-list').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n    \r\n  },\r\n  /**\r\n   * @method infiniteRecommendList\r\n   * @description 滚动加载获取我的赞\r\n   */\r\n  infiniteMyPraiseList: function(dataRes) {\r\n    var data = {\r\n      myPraiseList: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(template_li, data);\r\n    $$('#myPraise').find('.tmm-myPraise-ul-list').append(output);\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n};\r\n\r\nmodule.exports = myPraiseView;\r\n"},{"id":70,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\my-praise.tpl.html","name":"./src/modules/myPraise/my-praise.tpl.html","index":70,"index2":63,"size":2439,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":69,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","module":"./src/modules/myPraise/myPraiseView.js","moduleName":"./src/modules/myPraise/myPraiseView.js","type":"cjs require","userRequest":"./my-praise.tpl.html","loc":"7:15-46"}],"source":"module.exports = \"<div>\\r\\n  <div class=\\\"navbar tmm-navbar\\\">\\r\\n    <div class=\\\"navbar-inner\\\">\\r\\n      <div class=\\\"left\\\">\\r\\n        <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n          <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n        </a>\\r\\n      </div>\\r\\n      <div class=\\\"center\\\">我的赞</div>\\r\\n      <div class=\\\"right\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"pages\\\">\\r\\n    <div data-page=\\\"myPraise\\\" class=\\\"page\\\" id=\\\"myPraise\\\">\\r\\n      <div  data-distance=\\\"50\\\" class=\\\"page-content pull-to-refresh-content infinite-scroll tmm-zan-page\\\">\\r\\n        <!-- 默认的下拉刷新层 -->\\r\\n        <div class=\\\"pull-to-refresh-layer\\\">\\r\\n          <div class=\\\"preloader\\\"></div>\\r\\n          <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"tmm-list-block\\\">\\r\\n          <ul class=\\\"tmm-myPraise-ul-list\\\">\\r\\n            {{#each myPraiseList}}\\r\\n            <li class=\\\"tmm-item-content\\\">\\r\\n              <div class=\\\"pic\\\">\\r\\n              {{#js_compare \\\"this.classliy.value !=3\\\"}}  \\r\\n                <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\"  class=\\\"tmm-shops-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n              {{/js_compare}} \\r\\n              {{#js_compare \\\"this.classliy.value ==3\\\"}}  \\r\\n                <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" data-acttype=\\\"{{this.actives.actives_type.value}}\\\" class=\\\"tmm-shops-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n              {{/js_compare}} \\r\\n                <div class=\\\"conColor\\\">\\r\\n                  <i class=\\\"icon ticon-praise\\\"></i>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"txt\\\">\\r\\n                <div class=\\\"title\\\">{{name}}</div>\\r\\n                <div class=\\\"intro\\\">{{info}}</div>\\r\\n                <span class=\\\"type {{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\"> {{this.type.name}}</span>\\r\\n              </div>\\r\\n            </li>\\r\\n            {{/each}}\\r\\n          </ul>\\r\\n          <div id=\\\"no-more\\\" style=\\\"display:none\\\"></div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":71,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\my-praise-li.tpl.html","name":"./src/modules/myPraise/my-praise-li.tpl.html","index":71,"index2":64,"size":1179,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":69,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraiseView.js","module":"./src/modules/myPraise/myPraiseView.js","moduleName":"./src/modules/myPraise/myPraiseView.js","type":"cjs require","userRequest":"./my-praise-li.tpl.html","loc":"8:18-52"}],"source":"module.exports = \"{{#each myPraiseList}}\\r\\n<li class=\\\"tmm-item-content\\\">\\r\\n  <div class=\\\"pic\\\">\\r\\n  {{#js_compare \\\"this.classliy.value !=3\\\"}}  \\r\\n    <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\"  class=\\\"tmm-shops-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n  {{/js_compare}} \\r\\n  {{#js_compare \\\"this.classliy.value ==3\\\"}}  \\r\\n    <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" data-acttype=\\\"{{this.actives.actives_type.value}}\\\" class=\\\"tmm-shops-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n  {{/js_compare}} \\r\\n    <div class=\\\"conColor\\\">\\r\\n      <i class=\\\"icon ticon-praise\\\"></i>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"txt\\\">\\r\\n    <div class=\\\"title\\\">{{name}}</div>\\r\\n    <div class=\\\"intro\\\">{{info}}</div>\\r\\n    <span class=\\\"type {{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\"> {{this.type.name}}</span>\\r\\n  </div>\\r\\n</li>\\r\\n{{/each}}\\r\\n\";"},{"id":72,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\booking-information.tpl.html","name":"./src/modules/shop/booking-information.tpl.html","index":72,"index2":66,"size":942,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./booking-information.tpl.html","loc":"13:16-57"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">预订须知</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"booking-information\\\" class=\\\"page booking-information\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"tmm-booking\\\">\\r\\n        <div class=\\\"booking-title\\\">预订须知</div>\\r\\n        <div class=\\\"booking-con\\\">\\r\\n            {{book_info}}\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"tmm-booking\\\">\\r\\n        <div class=\\\"booking-title\\\">费用包含</div>\\r\\n        <div class=\\\"booking-con\\\">\\r\\n            {{cost_info}}\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\";"},{"id":73,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\utils\\pageBridge.js","name":"./src/modules/utils/pageBridge.js","index":73,"index2":67,"size":301,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"../utils/pageBridge","loc":"14:11-41"},{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"../utils/pageBridge","loc":"5:11-41"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../utils/pageBridge","loc":"23:11-41"}],"source":"var list = {};\r\n\r\nbridge = {\r\n\r\n    add: function(id, fn) {\r\n\r\n        list[id] = fn;\r\n\r\n    },\r\n\r\n    fire: function(id) {\r\n\r\n        if (list[id]) {\r\n            var result = list[id]();\r\n            delete list[id];\r\n            return result;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = bridge;\r\n"},{"id":74,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\local-specialty.html","name":"./src/modules/shop/local-specialty.html","index":74,"index2":68,"size":1595,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./local-specialty.html","loc":"15:19-52"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">特产</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"localSpecialty\\\" class=\\\"page tmm-local-specialty\\\" id=\\\"localSpecialty\\\">\\r\\n\\r\\n    <div class=\\\"tmm-local-specialty-cards\\\">\\r\\n  {{#each farmList}}\\r\\n      <div class=\\\"card tmm-local-specialty-card\\\" data-name=\\\"{{this.item_name}}\\\" data-img=\\\"{{this.item_img}}\\\" data-info=\\\"{{this.item_info}}\\\" data-link=\\\"{{this.item_link}}\\\">\\r\\n        <div class=\\\"card-content\\\">\\r\\n          <div class=\\\"list-block media-list\\\">\\r\\n            <ul>\\r\\n              <li class=\\\"item-content\\\">\\r\\n                <div class=\\\"item-media tmm-local-specialty-item-media\\\">\\r\\n                 <img src=\\\"{{this.item_img}}\\\">\\r\\n                </div>\\r\\n                <div class=\\\"item-inner\\\">\\r\\n                  <div class=\\\"item-title-row\\\">\\r\\n                    <div class=\\\"item-title tmm-local-specialty-item-title\\\">{{this.item_name}}</div>\\r\\n                  </div>\\r\\n                  <div class=\\\"tmm-local-specialty-item-subtitle\\\">{{this.item_info}}\\r\\n                  </div>\\r\\n                  \\r\\n                </div>\\r\\n              </li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div> \\r\\n  {{/each}}\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":75,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","name":"./src/modules/shop/applySeekfun.js","index":75,"index2":81,"size":10366,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":29,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\shop.js","module":"./src/modules/shop/shop.js","moduleName":"./src/modules/shop/shop.js","type":"cjs require","userRequest":"./applySeekfun","loc":"16:17-42"}],"source":"var httpService = require('../services/httpService'),\r\n    joinActModule = require('../order/joinAct'),\r\n    appFunc = require('../utils/appFunc'),\r\n    selectPepoleTpl = require('./applySeekfunTpl/select-people.tpl.html'),\r\n    addPepoleTpl = require('./applySeekfunTpl/add-people.tpl.html'),\r\n    checkPhoneTpl = require('./applySeekfunTpl/check-phone.tpl.html'),\r\n    applySuccessTpl = require('./applySeekfunTpl/apply-success.tpl.html');\r\n\r\n/////////////////////////////////////////////第一步\r\nvar adultNum = 0;\r\nvar childNum = 0;\r\nvar activeId = \"\"; //觅趣id\r\nvar actIsOpen = \"\"; //觅趣的公开性 公开的觅趣 用ID或者觅趣消费码 都可以报名 没有公开的觅趣 只能用觅趣消费码报名 ID 无效(暂时用id)\r\nvar retinueInfo = {\r\n    mainRetinueInfo: [],\r\n    adultRetinueInfo: [],\r\n    childRetinueInfo: []\r\n};\r\n\r\n\r\nfunction main() {\r\n    adultNum = 0;\r\n    childNum = 0;\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n        content: selectPepoleTpl\r\n    });\r\n    activeId = $$(this).attr(\"data-actId\");\r\n    actIsOpen = $$(this).attr(\"data-actOpen\");\r\n    bindEvent()\r\n    \r\n}\r\n\r\nfunction bindEvent() {\r\n    removeEvent();\r\n    $$(document).on('click', '.payment-select-pepole .payment-next-step-select-pepole', step1);\r\n    $$('.payment-select-pepole').on('click', '.adult .fare-item', modifyAdult);\r\n    $$('.payment-select-pepole').on('click', '.child .fare-item', modifyChild);\r\n    $$(document).on('click', '.payment-add-pepole .payment-next-step-add-pepole', step2);\r\n    $$(document).on('click', '.payment-check-phone .payment-next-step-check-phone', step3);\r\n    $$(document).on('click', '.payment-check-phone .send-coder', sendCode);\r\n    $$(document).on('click', '.payment-apply-success .payment-next-step-apply-success', goActListPage);\r\n\r\n}\r\n\r\nfunction removeEvent() {\r\n    $$(document).off('click', '.payment-select-pepole .payment-next-step-select-pepole', step1);\r\n    $$('.payment-select-pepole').off('click', '.adult .fare-item', modifyAdult);\r\n    $$('.payment-select-pepole').off('click', '.child .fare-item', modifyChild);\r\n    $$(document).off('click', '.payment-add-pepole .payment-next-step-add-pepole', step2);\r\n    $$(document).off('click', '.payment-check-phone .payment-next-step-check-phone', step3);\r\n    $$(document).off('click', '.payment-check-phone .send-coder', sendCode);\r\n    $$(document).off('click', '.payment-apply-success .payment-next-step-apply-success', goActListPage);\r\n}\r\n\r\nfunction modifyAdult(e) {\r\n\r\n    var tmp = adultNum;\r\n    if ($$(e.target).hasClass('add-num')) {\r\n        adultNum++;\r\n    } else if ($$(e.target).hasClass('sub-num')) {\r\n        adultNum--;\r\n    } else {\r\n        return;\r\n    }\r\n    if (!checkPeople()) {\r\n        adultNum = tmp;\r\n        return;\r\n    }\r\n\r\n    $$(this).find('.num').html(adultNum);\r\n}\r\n\r\nfunction modifyChild(e) {\r\n    var tmp = childNum;\r\n    if ($$(e.target).hasClass('add-num')) {\r\n        childNum++;\r\n    } else if ($$(e.target).hasClass('sub-num')) {\r\n        childNum--;\r\n    } else {\r\n        return;\r\n    }\r\n    if (!checkPeople()) {\r\n        childNum = tmp;\r\n        return;\r\n    }\r\n    $$(this).find('.num').html(childNum);\r\n}\r\n\r\nfunction checkPeople() {\r\n    if (childNum < 0 || adultNum < 0) return;\r\n    if (childNum > adultNum * 2) {\r\n        tmmApp.alert('一个成人最多只能带两个儿童');\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction step1() {\r\n    if (adultNum === 0) {\r\n        tmmApp.alert('请选择出游人数');\r\n        return false;\r\n    }\r\n    retinueInfo.adultRetinueInfo.length = retinueInfo.childRetinueInfo.length = retinueInfo.mainRetinueInfo.length = 0;\r\n    retinueInfo.adultRetinueInfo.length = adultNum - 1;\r\n    retinueInfo.childRetinueInfo.length = childNum;\r\n    for (var i = 0; i < retinueInfo.adultRetinueInfo.length; i++) {\r\n        retinueInfo.adultRetinueInfo[i] = {};\r\n        retinueInfo.adultRetinueInfo[i].index = i + 1;\r\n    }\r\n    for (var j = 0; j < retinueInfo.childRetinueInfo.length; j++) {\r\n        retinueInfo.childRetinueInfo[j] = {};\r\n        retinueInfo.childRetinueInfo[j].index = i + j + 1;\r\n    }\r\n\r\n    var output = appFunc.renderTpl(addPepoleTpl, retinueInfo)\r\n    tmmApp.getCurrentView().router.load({\r\n        content: output\r\n    });\r\n}\r\n/////////////////////////////////////////////第二步\r\n\r\nfunction checkFormPeople() {\r\n    var aInput = $$('.payment-add-pepole').find('input'),\r\n        type = '',\r\n        value = '';\r\n\r\n    aInput.removeClass('warn');\r\n\r\n    for (var i = 0; i < aInput.length; i++) {\r\n        type = $$(aInput[i]).attr('type');\r\n        value = $$(aInput[i]).val();\r\n        if (value === '') {\r\n            $$(aInput[i]).addClass('warn');\r\n            appFunc.autoToast('请填写完整信息');\r\n            return false;\r\n        } else {\r\n            if (type === 'tel' && !appFunc.isPhone(value)) {\r\n                $$(aInput[i]).addClass('warn');\r\n                appFunc.autoToast('输入正确的手机号码');\r\n                return false;\r\n            } else if (type === 'text' && value.length > 10) {\r\n                $$(aInput[i]).addClass('warn');\r\n                appFunc.autoToast('姓名必须小于10个字符');\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    retinueInfo.adultRetinueInfo.length = retinueInfo.childRetinueInfo.length = retinueInfo.mainRetinueInfo.length = 0;\r\n    $$('.payment-add-pepole').find('.main-wrap').each(function() {\r\n        retinueInfo.mainRetinueInfo.push(addRetinueToData.call(this));\r\n    })\r\n    $$('.payment-add-pepole').find('.adult-wrap').each(function() {\r\n        retinueInfo.adultRetinueInfo.push(addRetinueToData.call(this));\r\n    })\r\n    $$('.payment-add-pepole').find('.child-wrap').each(function() {\r\n        retinueInfo.childRetinueInfo.push(addRetinueToData.call(this));\r\n    })\r\n    return true;\r\n\r\n}\r\n\r\nfunction addRetinueToData() {\r\n    var retinue = {};\r\n    retinue.name = $$(this).find('input.name').val();\r\n    retinue.is_people = 0;\r\n    if ($$(this).find('input.phone').length !== 0) {\r\n        retinue.phone = $$(this).find('input.phone').val();\r\n        retinue.is_people = 1;\r\n    }\r\n\r\n    return retinue;\r\n}\r\n\r\nvar timer = null;\r\n\r\nfunction step2() {\r\n    if (!checkFormPeople()) return;\r\n    var phone = retinueInfo.mainRetinueInfo[0].phone;\r\n    phone = phone.substr(0, 3) + '****' + phone.substr(7);\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n        content: checkPhoneTpl\r\n    });\r\n\r\n    $$('.payment-check-phone .phone-num').html(phone);\r\n    clearInterval(timer);\r\n\r\n}\r\n/////////////////////////////////////////////第三步\r\n\r\n\r\nfunction sendCode() {\r\n    var self = $$(this);\r\n    var i = 60;\r\n    if (self.hasClass('gray')) {\r\n        return;\r\n    }\r\n    self.addClass('gray');\r\n    self.html('获取验证码(' + i + ')')\r\n    var timer = setInterval(function() {\r\n        i--;\r\n        $$(self).html('获取验证码(' + i + ')');\r\n        if (i == 1) {\r\n            self.removeClass('gray');\r\n            self.html('获取验证码');\r\n            \r\n            clearInterval(timer);\r\n        }\r\n\r\n    }, 1000);\r\n    // 请求觅趣报名获取短信验证码\r\n    var url = \"/index.php?r=api/attend/captcha_sms&id=\";\r\n    var data = {\r\n        \"phone\": retinueInfo.mainRetinueInfo[0].phone\r\n    }\r\n    httpService.editActInfo(\r\n        url,\r\n        data,\r\n        activeId,\r\n        function(dataRes, statusCode) {\r\n            \r\n            if (dataRes.status == 1) {\r\n               \r\n\r\n            } else {\r\n                if (dataRes.form) {\r\n                    for (var msgName in dataRes.form) {\r\n                        tmmApp.alert(dataRes.form[msgName][0]);            \r\n                        break;\r\n                    }\r\n                } else {\r\n                    tmmApp.alert('网络超时，请重试');\r\n                }\r\n            }\r\n        },\r\n        function(dataRes, statusCode) {\r\n            \r\n            tmmApp.alert('网络超时，请重试');\r\n        }\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nfunction step3() {\r\n    if ($$('.payment-check-phone .phone-coder').val() === '') {\r\n        tmmApp.alert('请填写验证码');\r\n        return;\r\n    }\r\n\r\n    disposalData($$('.payment-check-phone .phone-coder').val());\r\n\r\n\r\n}\r\n\r\n\r\nfunction disposalData(sms) {\r\n    var i = 0,\r\n        tmp = [],\r\n        token = {\r\n            \"Attend\": [{\r\n                \"sms\": sms, //短信验证码 \r\n                \"name\": retinueInfo.mainRetinueInfo[0].name, //报名人姓名\r\n                \"phone\": retinueInfo.mainRetinueInfo[0].phone, //报名手机号 获取短信的手机号\r\n                \"people\": retinueInfo.adultRetinueInfo.length + 1, //成人数量 包含自己 （报名人员默认成人）\r\n                \"children\": retinueInfo.childRetinueInfo.length //儿童 数量\r\n            }]\r\n        };\r\n\r\n    for (i = 0; i < retinueInfo.adultRetinueInfo.length; i++) {\r\n        tmp.push(retinueInfo.adultRetinueInfo[i])\r\n\r\n    }\r\n\r\n    for (i = 0; i < retinueInfo.childRetinueInfo.length; i++) {\r\n        tmp.push(retinueInfo.childRetinueInfo[i])\r\n    }\r\n\r\n    token.Attend = token.Attend.concat(tmp);\r\n\r\n    sendPaymentForA(token);\r\n\r\n}\r\n\r\nfunction sendPaymentForA(postData) {\r\n\r\n    httpService.sendPaymentForA(postData, activeId, function(data) {\r\n        \r\n        if (data.status === 1) {\r\n\r\n            tmmApp.getCurrentView().router.load({\r\n                content: applySuccessTpl\r\n            });\r\n \r\n        } else {\r\n            if (data.form) {\r\n                for (var msgName in data.form) {\r\n                    for (var attr in data.form[msgName]) {\r\n                        tmmApp.alert(data.form[msgName][attr][0]);\r\n                        break;\r\n                    } \r\n                    break;\r\n                }\r\n            } else {\r\n                tmmApp.alert('网络超时，请重试');\r\n            }\r\n        }\r\n    }, function(data) {\r\n         tmmApp.alert('网络超时，请重试');\r\n    });\r\n}\r\n\r\nfunction goActListPage() {\r\n    removeEvent()\r\n    if (tmmApp.getCurrentView().selector === '#seekView') {\r\n        tmmApp.getCurrentView().router.back({\r\n            force: true,\r\n            pageName: 'seek',\r\n            animatePages: false\r\n\r\n        });\r\n\r\n        tmmApp.showTab('#myView');\r\n    }\r\n    if (tmmApp.getCurrentView().selector === '#recommendView') {\r\n        tmmApp.getCurrentView().router.back({\r\n            force: true,\r\n            pageName: 'recommendView',\r\n            animatePages: false\r\n\r\n        });\r\n\r\n        tmmApp.showTab('#myView');\r\n    }\r\n    if (tmmApp.getCurrentView().selector === '#myView') {\r\n        tmmApp.getCurrentView().router.back({\r\n            force: true,\r\n            pageName: 'myView',\r\n            animatePages: false\r\n\r\n        });\r\n    }\r\n\r\n    joinActModule.loadJoinActList();\r\n}\r\n\r\nmodule.exports = main;\r\n"},{"id":76,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","name":"./src/modules/order/joinAct.js","index":76,"index2":76,"size":25325,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"../order/joinAct","loc":"2:20-47"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../order/joinAct","loc":"11:18-45"}],"source":"/**\r\n * @method joinAct\r\n * @description  觅趣报名相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-11-06T15:41:43+0800\r\n */\r\nvar httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  joinActList_tpl = require('./join-act-list.tpl.html'),\r\n  joinActListCard_tpl = require('./join-act-list-card.tpl.html'),\r\n  orderDetail = require('./orderDetail'),\r\n  orderModule = require('./order'),\r\n  roleModule = require('../role/role'),\r\n  actPayADetail = require('./payA-detail.tpl.html');\r\n// act = require('../createAct/activity');\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 选择标签页的url\r\n * @type {String}\r\n */\r\nvar selectUrl = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\nvar moreLoading = false;\r\nvar link = httpService.apiJoinActAA;\r\nvar payTypeSel = 1;\r\n\r\n// 数据模型\r\nvar model = {};\r\nvar orderListModel = null;\r\nvar actAddTime = null;\r\n\r\n/* 加载更多的div */\r\nvar loadMoreDiv = null;\r\n/** @type {String} 参与人数加载更多的连接 */\r\nvar loadMoreJoinLink = '';\r\n\r\n/**\r\n * 参与人加载更多方法\r\n * @return {[type]} [description]\r\n */\r\nfunction getMoreJoinData(link) {\r\n  var itemHtml = '{{#each list_data}}' +\r\n    '<div class=\"join-item\">' +\r\n    '<div class=\"item-top\">' +\r\n    '<span class=\"time\">{{this.add_time}}</span><span class=\"status green\">{{this.status.order_status.name}}</span>' +\r\n    '</div>' +\r\n    '<div class=\"item-inner\">' +\r\n    '<p class=\"tit\"><span class=\"name\">{{this.main_retinue.name}}</span><span class=\"phone\">{{this.main_retinue.phone}}</span></p>' +\r\n    '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.user_go_count}}人</span><span class=\"order-price\">订单金额：{{this.order_price}}元</span></p>' +\r\n    '</div>' +\r\n    '</div>' +\r\n    '{{/each}}';\r\n  loadMoreDiv.innerHTML = '努力加载中...';\r\n  // $$('.seekfun-detail-page .join-block .join-list').append();\r\n  httpService.get(link, function(data) {\r\n    if (data.status === 1) {\r\n      var output = appFunc.renderTpl(itemHtml, data.data);\r\n      $$('.seekfun-detail-page .join-block .join-list').append(output);\r\n      loadMoreJoinLink = data.data.page.next;\r\n    }\r\n    loadMoreDiv.innerHTML = '点击加载更多';\r\n  }, function(data) {\r\n    loadMoreDiv.innerHTML = '点击加载更多';\r\n  })\r\n}\r\n\r\nvar joinAct = {\r\n  init: function() {\r\n    joinAct.bindEvent();\r\n  },\r\n\r\n  /**\r\n   * 显示觅趣列表页面\r\n   * @return {[type]} [description]\r\n   */\r\n  loadJoinActList: function() {\r\n    link = httpService.apiJoinActAA;\r\n    nextPageLink = '';\r\n    payTypeSel = 1;\r\n    // if (!appFunc.getLocalUserInfo()) {\r\n    //   //tmmApp.alert('请先登录', '');\r\n    //   roleModule.redirectToLogin(); \r\n    //   return;\r\n    // }\r\n    tmmApp.showIndicator();\r\n    httpService.getOrderActList(link, function(dataRes) {\r\n\r\n      if (dataRes.status == 1) {\r\n        nextPageLink = dataRes.data.page.next;\r\n        appFunc.hideToolbar();\r\n        //var data = dataRes.data;\r\n        var data = {\r\n          actData: dataRes.data,\r\n          payType: payTypeSel\r\n        };\r\n        var output = appFunc.renderTpl(joinActList_tpl, data)\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        joinAct.init();\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        if ('login' in dataRes.data) {\r\n          roleModule.redirectToLogin();\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n\r\n      tmmApp.hideIndicator();\r\n    }, function(dataRes) {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络超时，请重试');\r\n    })\r\n  },\r\n\r\n  refreshList: function() {\r\n    httpService.getOrderActList(link,\r\n      function(dataRes) {\r\n\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        var data = {\r\n          actData: dataRes.data,\r\n          payType: payTypeSel\r\n        };\r\n        // 刷新处理\r\n        var output = appFunc.renderTpl(joinActListCard_tpl, data);\r\n        $$('#join-act-list .tmm-order-card-list').html(output);\r\n\r\n        if ($$('#join-act-list .activityGoTimeSel') != null) {\r\n          $$.each($$('#join-act-list .payAactGoTimeSel'), function(index, value) {\r\n            joinAct.activityGoTime(value);\r\n          });\r\n        }\r\n        setTimeout(function() {\r\n          tmmApp.pullToRefreshDone();\r\n\r\n        }, 200);\r\n      },\r\n      function(dataRes) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        tmmApp.pullToRefreshDone();\r\n      }\r\n    );\r\n  },\r\n\r\n\r\n  infiniteList: function() {\r\n    if (nextPageLink) {\r\n      if (loading) return;\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n      httpService.getOrderActList(\r\n        nextPageLink,\r\n        function(dataRes, statusCode) {\r\n          nextPageLink = dataRes.data.page.next;\r\n          var data = {\r\n            actData: dataRes.data,\r\n            payType: payTypeSel\r\n          };\r\n          var output = appFunc.renderTpl(joinActListCard_tpl, data);\r\n          $$('#join-act-list .tmm-order-card-list').append(output);\r\n          if ($$('#join-act-list .activityGoTimeSel') != null) {\r\n            $$.each($$('#join-act-list .payAactGoTimeSel'), function(index, value) {\r\n              joinAct.activityGoTime(value);\r\n            });\r\n          }\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        $$(\"#join-act-list #no-more\").css('display', 'block');\r\n        //$$(\"#join-act-list #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      setTimeout(function() {\r\n        $$(\"#join-act-list #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * @method orderCancle\r\n   * @description 订单取消\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderCancle: function() {\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    tmmApp.confirm('确定取消吗?', '', function() {\r\n      httpService.orderCancle(\r\n        order_id,\r\n        function(dataRes, status) {\r\n          if (dataRes.status == 1) {\r\n            tmmApp.alert('已成功取消', '', function() {\r\n              joinAct.refreshList();\r\n            });\r\n          } else {\r\n            tmmApp.alert('取消失败，请重试');\r\n          }\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    });\r\n  },\r\n\r\n  /**\r\n   * @method orderRefund\r\n   * @description 退款\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderRefund: function() {\r\n    appFunc.orderRefund()\r\n  },\r\n\r\n  /**\r\n   * 确认出游\r\n   * @return {[type]} [description]\r\n   */\r\n  orderConfirm: function() {\r\n    var order_id = $$(this).attr('data-id');\r\n\r\n    tmmApp.confirm('确认出游吗', '', function() {\r\n      httpService.tourConfirm(\r\n        order_id,\r\n        function(dataRes, status) {\r\n          if (dataRes.status == 1) {\r\n            tmmApp.alert('确认出游成功', '', function() {\r\n              joinAct.refreshList();\r\n            });\r\n          } else {\r\n            tmmApp.alert('确认出游失败');\r\n          }\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 代付 取消报名\r\n   * @return {[type]} [description]\r\n   */\r\n  cancelActEnter: function() {\r\n    var order_id = $$(this).attr('data-id');\r\n    var isDetail = 0;\r\n    if ($$(this).attr('data-detail')) {\r\n      isDetail = $$(this).attr('data-detail');\r\n    }\r\n    //isDetail = $$(this).attr('data-detail');\r\n    tmmApp.confirm('确认取消报名吗', '', function() {\r\n      httpService.cancelActEnterA(\r\n        order_id,\r\n        function(dataRes, status) {\r\n          if (dataRes.data.status == 1) {\r\n            tmmApp.alert('取消报名成功', '', function() {\r\n              joinAct.refreshList();\r\n              if (isDetail == 1) {\r\n                tmmApp.getCurrentView().router.back();\r\n              }\r\n            });\r\n          } else {\r\n            tmmApp.alert('取消报名失败');\r\n          }\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    })\r\n  },\r\n  orderPayAct: function() {\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    var price = $$(_this).attr('data-price');\r\n\r\n    appFunc.payOrder(order_id, price,\r\n      function(dataRes, status) {\r\n\r\n        if (dataRes.status == 1) {\r\n\r\n          if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n              bridge.callHandler('ObjcCallback', {\r\n                'PayCode': dataRes.data.alipay\r\n              }, function(response) {})\r\n            });\r\n          } else if (tmmApp.device.android) {\r\n            var str = window.jsObj.payMoney(dataRes.data.alipay);\r\n          }\r\n\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('支付失败，请重试');\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      },\r\n      function() {\r\n        joinAct.refreshList();\r\n      });\r\n  },\r\n\r\n  showSelect: function() {\r\n\r\n    var clickedLink = this;\r\n    var popoverHTML = '<div class=\"popover journey-subnavbar-popover\">' +\r\n      '<div class=\"popover-inner\">' +\r\n      '<div class=\"list-block\">' +\r\n      '<ul>' +\r\n      '<li ><a href=\"javascript:;\" id=\"tmm_select_AA\" class=\"item-link list-button\">自费</li>' +\r\n      '<li ><a href=\"javascript:;\" id=\"tmm_select_A\" class=\"item-link list-button\">代付</li>' +\r\n      '</ul>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '</div>';\r\n    tmmApp.popover(popoverHTML, clickedLink);\r\n    joinAct.bindEvent();\r\n  },\r\n\r\n  //AA付款\r\n  loadJoinActAAList: function() {\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n    $$(\"body\").find(\".tmm-pay-type-list\").html('自费');\r\n    tmmApp.showIndicator();\r\n    link = httpService.apiJoinActAA;\r\n    httpService.getOrderActList(link, function(dataRes) {\r\n      if (dataRes.status == 1) {\r\n        nextPageLink = dataRes.data.page.next;\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        appFunc.hideToolbar();\r\n        //var data = dataRes.data;\r\n        payTypeSel = 1;\r\n        var data = {\r\n          actData: dataRes.data,\r\n          payType: payTypeSel\r\n        };\r\n\r\n        var output = appFunc.renderTpl(joinActListCard_tpl, data);\r\n        $$('#join-act-list .tmm-order-card-list').html(output);\r\n\r\n        joinAct.init();\r\n\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        if ('login' in dataRes.data) {\r\n          roleModule.redirectToLogin();\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n      tmmApp.hideIndicator();\r\n      tmmApp.closeModal();\r\n    }, function(dataRes) {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络超时，请重试');\r\n    })\r\n  },\r\n\r\n  //统一代付\r\n  loadJoinActAList: function() {\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n    $$(\"body\").find(\".tmm-pay-type-list\").html('代付');\r\n    link = httpService.apiJoinActA;\r\n    tmmApp.showIndicator();\r\n    httpService.getOrderActList(link, function(dataRes) {\r\n      if (dataRes.status == 1) {\r\n        nextPageLink = dataRes.data.page.next;\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        appFunc.hideToolbar();\r\n        //var data = dataRes.data;\r\n        payTypeSel = 0;\r\n        var data = {\r\n          actData: dataRes.data,\r\n          payType: payTypeSel\r\n        };\r\n\r\n        var output = appFunc.renderTpl(joinActListCard_tpl, data);\r\n        $$('#join-act-list .tmm-order-card-list').html(output);\r\n\r\n        joinAct.init();\r\n        if ($$('#join-act-list .activityGoTimeSel') != null) {\r\n          $$.each($$('#join-act-list .payAactGoTimeSel'), function(index, value) {\r\n            joinAct.activityGoTime(value);\r\n          });\r\n        }\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        if ('login' in dataRes.data) {\r\n          roleModule.redirectToLogin();\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n      tmmApp.hideIndicator();\r\n      tmmApp.closeModal();\r\n    }, function(dataRes) {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络超时，请重试');\r\n    })\r\n  },\r\n\r\n  /*代付确定出游日期*/\r\n  activityGoTime: function(ele) {\r\n    var nowDate = new Date();\r\n    var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n    var id = $$(ele).attr('data-id');\r\n    var goTimeLink = $$(ele).attr('data-link');\r\n\r\n    tmmApp.calendar({\r\n      input: ele,\r\n      closeOnSelect: true,\r\n      minDate: preDay,\r\n      monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n      dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n      dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\r\n      onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n        var goTime = appFunc.dateFormt(year, month, day);\r\n        setTimeout(function() {\r\n          tmmApp.confirm('出游日期确认为：' + goTime, '', function() {\r\n            var data = {\r\n              \"Actives[go_time]=\": goTime\r\n            };\r\n            httpService.setActityGoTime(\r\n              goTimeLink,\r\n              data,\r\n              function(dataRes, statusCode) {\r\n                if (dataRes.status == 1) {\r\n                  tmmApp.alert('出游日期确认成功!');\r\n                  joinAct.refreshList();\r\n                  /* if($$(\"div\").find('.tmm-set-act-date').hasClass(\"tmm-add-act-date\")){\r\n                     $$('.normal-group').find(\".tmm-set-act-date\").remove();\r\n                     $$('.tmmGoTime').append('<div class=\"normal-cell\">'+ goTime +'</div>');\r\n                   }*/\r\n\r\n                } else {\r\n                  if (dataRes.form) {\r\n                    for (var msgName in dataRes.form) {\r\n                      tmmApp.alert(dataRes.form[msgName][0]);\r\n                      break;\r\n                    }\r\n                  } else {\r\n                    tmmApp.alert('网络超时，请重试');\r\n                  }\r\n                }\r\n              },\r\n              function(dataRes, statusCode) {\r\n                tmmApp.alert('网络超时，请重试');\r\n              });\r\n          });\r\n        }, 80);\r\n      }\r\n    });\r\n  },\r\n\r\n  /*显示选择时间时的遮罩层*/\r\n  showModalList: function() {\r\n    $$('body').find(\".modal-overlay\").remove();\r\n    if ($$('body').find(\".modal-overlay\").hasClass('tmm-picker-calendar')) {\r\n      $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n    } else {\r\n      $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-picker-calendar\"></div>');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 显示代付觅趣详情页\r\n   * @return {[type]} [description]\r\n   */\r\n  goActPayADetail: function() {\r\n    var link = $$(this).attr('data-link');\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n    tmmApp.showIndicator();\r\n    httpService.get(link, function(dataRes) {\r\n\r\n      if (dataRes.status == 1) {\r\n        appFunc.hideToolbar();\r\n        model = dataRes.data;\r\n        orderListModel = null;\r\n        var output = appFunc.renderTpl(actPayADetail, dataRes.data);\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        joinAct.init();\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        if ('login' in dataRes.data) {\r\n          roleModule.redirectToLogin();\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n\r\n      tmmApp.hideIndicator();\r\n    }, function(dataRes) {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络超时，请重试');\r\n    })\r\n  },\r\n  showTabs: function(ev) {\r\n    $$(this).find('span').removeClass('active');\r\n    $$(ev.target).addClass('active');\r\n    if ($$(ev.target).hasClass('journery')) {\r\n      $$('.payA-detail-page .join-block').css('display', 'none');\r\n      $$('.payA-detail-page .intro-block').css('display', 'none');\r\n      $$('.payA-detail-page .journery-block').css('display', 'block');\r\n    } else if ($$(ev.target).hasClass('join')) {\r\n      if (model.is_me === 0) {\r\n        model = model;\r\n        joinAct.joinPeopleTpl();\r\n      } else {\r\n        if (model.actives_pay_type.value === '1') {\r\n          link = model.actives_info.attend_list;\r\n        } else if (model.actives_pay_type.value === '0') {\r\n          link = model.actives_info.order_list;\r\n        }\r\n      }\r\n      if (orderListModel === null && !!link) {\r\n        httpService.get(link, function(data) {\r\n          if (data.status == 1) {\r\n            orderListModel = data.data;\r\n            model.orderListModel = orderListModel;\r\n            joinAct.joinPeopleTpl();\r\n          } else {\r\n\r\n          }\r\n        }, function(data) {\r\n\r\n        })\r\n      }\r\n      $$('.payA-detail-page .intro-block').css('display', 'none');\r\n      $$('.payA-detail-page .journery-block').css('display', 'none');\r\n      $$('.payA-detail-page .join-block').css('display', 'block');\r\n    } else if ($$(ev.target).hasClass('intro')) {\r\n      $$('.payA-detail-page .join-block').css('display', 'none');\r\n      $$('.payA-detail-page .journery-block').css('display', 'none');\r\n      $$('.payA-detail-page .intro-block').css('display', 'block');\r\n    }\r\n  },\r\n\r\n  /*参与人html页面*/\r\n  joinPeopleTpl: function() {\r\n    loadMoreDiv = document.createElement('div');\r\n    loadMoreDiv.className = 'loadmore';\r\n    loadMoreDiv.innerHTML = '点击加载更多';\r\n    loadMoreDiv.removeEventListener('click', getMoreJoinData, false);\r\n    loadMoreDiv.addEventListener('click', getMoreJoinData, false);\r\n    var html = '<div class=\"join-first-item\">' +\r\n      '{{#js_compare \"this.actives_pay_type.value === \\'1\\'\"}}' +\r\n      //代付 A\r\n      '<p class=\"txt\">已参与人数：<span>{{orderListModel.people}}成人  {{orderListModel.children}}儿童</span></p>' +\r\n      '{{/js_compare}}' +\r\n      //自费 AA\r\n      '{{#js_compare \"this.actives_pay_type.value === \\'0\\'\"}}' +\r\n      '<p class=\"txt\">已参与人数：<span>{{js \"this.actives_info.number.value - this.actives_info.order_number.value\"}}/{{actives_info.number.value}}</span></p>' +\r\n      '<p class=\"txt\">费用总额：<span>{{actives_info.total.value}}元</span></p>' +\r\n      '{{/js_compare}}' +\r\n      '<span class=\"share-invite invite\">邀请好友加入</span>' +\r\n      '</div>' +\r\n      //代付 A\r\n      '{{#js_compare \"this.actives_pay_type.value === \\'1\\'\"}}' +\r\n      '<div class=\"join-list\">' +\r\n      '{{#each orderListModel.list_data}}' +\r\n      //主要联系人\r\n      '{{#js_compare \"this.is_main === 1\"}}' +\r\n      '<div class=\"join-item\" style=\"margin:0px;\">' +\r\n      '<div class=\"item-top item-pepole\">' +\r\n      '<span class=\"time\">主要联系人</span>' +\r\n      '</div>' +\r\n      '<div class=\"item-inner\">' +\r\n      '<p class=\"tit\"><span class=\"name\">{{this.name}}</span></p>' +\r\n      '<p class=\"describe\"><span class=\"join-num\">手机：{{this.phone}}</p>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '{{/js_compare}}' +\r\n      //联系人列表\r\n      '{{#js_compare \"this.is_main === 0\"}}' +\r\n      '<div class=\"join-item\" style=\"margin:0px;\">' +\r\n      '<div class=\"item-top item-pepole\">' +\r\n      '<span class=\"time\">{{this.add_time}}</span>' +\r\n      '</div>' +\r\n      '<div class=\"item-inner\">' +\r\n      '<p class=\"tit\"><span class=\"name\">{{this.name}}</span><span class=\"phone\">{{this.phone}}</span></p>' +\r\n      '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.people}}成人</span>{{#js_compare \"this.number - this.people > \\'0\\'\"}}<span class=\"order-price\">{{js \"this.number - this.people\"}}儿童</span>{{/js_compare}}</p>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '{{/js_compare}}' +\r\n      '{{/each}}' +\r\n      '</div>' +\r\n      '{{/js_compare}}' +\r\n      //自费 AA\r\n      '{{#js_compare \"this.actives_pay_type.value === \\'0\\'\"}}' +\r\n      '<div class=\"join-list\">' +\r\n      '{{#each orderListModel.list_data}}' +\r\n      '<div class=\"join-item\">' +\r\n      '<div class=\"item-top item-pepole\">' +\r\n      '<span class=\"time\">{{this.add_time}}</span><span class=\"status green\">{{this.status.order_status.name}}</span>' +\r\n      '</div>' +\r\n      '<div class=\"item-inner\">' +\r\n      '<p class=\"tit\"><span class=\"name\">{{this.main_retinue.name}}</span><span class=\"phone\">{{this.main_retinue.phone}}</span></p>' +\r\n      '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.user_go_count}}人</span><span class=\"order-price\">订单金额：{{this.order_price}}元</span></p>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '{{/each}}' +\r\n      '</div>' +\r\n      '{{/js_compare}}';\r\n\r\n    var htmlIsNotMe = '<div class=\"join-first-item\">' +\r\n      '{{#js_compare \"this.actives_pay_type.value === \\'1\\'\"}}' +\r\n      '<p class=\"txt\">已参与人数：<span>{{actives_info.attend_list.people}}成人  {{actives_info.attend_list.children}}儿童</span></p>' +\r\n      '<p class=\"txt\">报名时间：<span>{{add_time}}</span></p>' +\r\n      '{{/js_compare}}' +\r\n      '</div>' +\r\n      '<div class=\"join-list\">' +\r\n      '<div class=\"join-item\" style=\"margin:0px;\">' +\r\n      '<div class=\"item-pepole\">' +\r\n      '<span  class=\"people-tit\">主要联系人</span>' +\r\n      '</div>' +\r\n      '<div class=\"item-inner-pepole\">' +\r\n      '<p class=\"people-tit\"><span class=\"name\">{{actives_info.attend_list.name}}</span><span class=\"phone\">{{actives_info.attend_list.phone}}</span></p>' +\r\n      '</div>' +\r\n      '{{#js_compare \"this.actives_info.attend_list.children > \\'0\\'\"}}' +\r\n      '<div class=\"item-pepole\">' +\r\n      '<span class=\"people-tit\">随行人</span>' +\r\n      '</div>' +\r\n      '<div class=\"item-inner-pepole\">' +\r\n      '{{#each actives_info.attend_list.son}}' +\r\n      '<p class=\"people-tit b-border\"><span class=\"name\">{{this.name}}</span><span class=\"phone\">{{this.phone}}</span><span class=\"people-type\">{{this.is_people.name}}</span></p>' +\r\n      '{{/each}}' +\r\n      '</div>' +\r\n      '{{/js_compare}}' +\r\n      '</div>' +\r\n      '</div>';\r\n    console.log(\"活动加载出行人员\", model);\r\n    if (model.is_me == 0) {\r\n      var output = appFunc.renderTpl(htmlIsNotMe, model);\r\n      $$('.payA-detail-page .join-block').html(output);\r\n    } else if (model.is_me == 1) {\r\n      var output = appFunc.renderTpl(html, model);\r\n      $$('.payA-detail-page .join-block').html(output).append(loadMoreDiv);\r\n      loadMoreJoinLink = model.orderListModel.page.next;\r\n      if (loadMoreJoinLink) {\r\n        loadMoreDiv.style.display = 'block';\r\n      } else {\r\n        loadMoreDiv.style.display = 'none';\r\n      }\r\n    }\r\n    $$('.share-invite').off('click', shareMsg);\r\n    $$('.share-invite').on('click', shareMsg);\r\n\r\n    function shareMsg() {\r\n      var link = httpService.apiUrl + '/index.php?r=site/share&share=' + model.shops.value;\r\n      appFunc.shareMsg(model.name, '来自田觅觅的觅趣分享', model.image, link);\r\n    }\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n        element: '#myView',\r\n        selector: '#join-act-list .pull-to-refresh-content',\r\n        event: 'refresh',\r\n        handler: joinAct.refreshList\r\n      }, {\r\n        element: '#myView',\r\n        selector: '#join-act-list .pull-to-refresh-content',\r\n        event: 'infinite',\r\n        handler: joinAct.infiniteList\r\n      }, {\r\n        element: '#myView',\r\n        selector: '#join-act-list .tmm-my-order-detail-show-act',\r\n        event: 'click',\r\n        handler: orderDetail.loadActDetail\r\n      },\r\n      // 取消出游\r\n      {\r\n        element: '#myView',\r\n        selector: '#join-act-list .tmm-button-cancle',\r\n        event: 'click',\r\n        handler: joinAct.orderCancle\r\n      },\r\n      // 确认出游\r\n      {\r\n        element: '#myView',\r\n        selector: '#join-act-list .tmm-button-confirm',\r\n        event: 'click',\r\n        handler: joinAct.orderConfirm\r\n      },\r\n      // 支付订单\r\n      {\r\n        element: '#myView',\r\n        selector: '#join-act-list .tmm-button-pay',\r\n        event: 'click',\r\n        handler: joinAct.orderPayAct\r\n      },\r\n      // 申请退款\r\n      {\r\n        element: '#myView',\r\n        selector: '#join-act-list .tmm-button-refund',\r\n        event: 'click',\r\n        handler: joinAct.orderRefund\r\n      }, {\r\n        element: '#myView',\r\n        selector: '#tmm_add_pay',\r\n        event: 'click',\r\n        handler: joinAct.showSelect\r\n      }, {\r\n        element: 'body',\r\n        selector: '#tmm_select_AA',\r\n        event: 'click',\r\n        handler: joinAct.loadJoinActAAList\r\n      }, {\r\n        element: 'body',\r\n        selector: '#tmm_select_A',\r\n        event: 'click',\r\n        handler: joinAct.loadJoinActAList\r\n      }, {\r\n        element: 'body',\r\n        selector: '.tmm-button-A-cancle',\r\n        event: 'click',\r\n        handler: joinAct.cancelActEnter\r\n      }, {\r\n        element: '#myView',\r\n        selector: '.payAactGoTimeSel',\r\n        event: 'click',\r\n        handler: joinAct.showModalList\r\n      }, {\r\n        element: '#myView',\r\n        selector: '.payType-go-seekfun-detail',\r\n        event: 'click',\r\n        handler: joinAct.goActPayADetail\r\n      }, {\r\n        element: '#myView',\r\n        selector: '.payA-detail-page .seekfun-tabs',\r\n        event: 'click',\r\n        handler: joinAct.showTabs\r\n      }\r\n    ];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = joinAct;\r\n"},{"id":77,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\join-act-list.tpl.html","name":"./src/modules/order/join-act-list.tpl.html","index":77,"index2":69,"size":8995,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"./join-act-list.tpl.html","loc":"10:20-55"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <!-- <div class=\\\"center\\\">我参加的觅趣</div> -->\\r\\n    <div class=\\\"center tmm-pay-type-list\\\" data-popover=\\\".popover-links\\\" id=\\\"tmm_add_pay\\\">自费</div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"my-order\\\" class=\\\"page page-order\\\" id=\\\"join-act-list\\\">\\r\\n    <div data-distance=\\\"50\\\" class=\\\"page-content pull-to-refresh-content infinite-scroll\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"tmm-order-card-list\\\" style=\\\"margin-top: 0px;\\\">\\r\\n  \\r\\n            {{#unless actData.list_data.length}}\\r\\n            <div style=\\\"text-align: center;margin-top: 10px;font-size: 14px;\\\">您还没有参加觅趣哦！</div>\\r\\n            {{/unless}}\\r\\n\\r\\n            {{#js_compare \\\"this.payType =='1'\\\"}}\\r\\n              {{#each actData.list_data}}\\r\\n              <div class=\\\"card tmm-my-order-card\\\">\\r\\n                <!--AA付款-->\\r\\n                <a href=\\\"javascript:;\\\" class=\\\"tmm-my-order-detail-show-act\\\" data-type=\\\"{{status.order_type.value}}\\\" data-link=\\\"{{link}}\\\">\\r\\n                  <div class=\\\"card-content\\\">\\r\\n                    <div class=\\\"tmm-order-img\\\">\\r\\n                      <img src=\\\"{{shops_img}}\\\">\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-content\\\">\\r\\n                      <div class=\\\"tmm-order-content-title\\\">\\r\\n                        {{shops_name}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        出游日期：{{go_time}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        <span class=\\\"tmm-order-content-count\\\">价格：{{order_price}}元</span>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-status\\\">\\r\\n                      {{#js_compare \\\"this.actives_status.value =='0'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='2'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='-1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                    </div>\\r\\n                  </div>\\r\\n                  \\r\\n                  <!--AA付款-->\\r\\n\\r\\n                  {{#js_compare \\\"this.status.centre_status.value =='0'\\\"}}\\r\\n                  <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-pay\\\" data-id=\\\"{{value}}\\\" data-price=\\\"{{order_price}}\\\">前去支付</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                \\r\\n                  {{#js_compare \\\"this.status.centre_status.value =='-1'\\\"}}\\r\\n\\r\\n                    {{#js_compare \\\"this.status.status_go.value =='0'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                    {{#js_compare \\\"this.status.status_go.value =='1'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                        {{#js_compare \\\"this.go_time !== '出游日期未定'\\\"}}\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-confirm\\\" data-id=\\\"{{value}}\\\">确认出游</a>\\r\\n                        {{/js_compare}}\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                    {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-refund\\\" data-id=\\\"{{value}}\\\">申请退款</a>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                  {{/js_compare}} \\r\\n                </a>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/js_compare}} \\r\\n\\r\\n            {{#js_compare \\\"this.payType =='0'\\\"}}\\r\\n              {{#each actData.list_data}}\\r\\n              <div class=\\\"card tmm-my-order-card\\\">\\r\\n                <!--代付-->\\r\\n                <a href=\\\"javascript:;\\\" class=\\\"payType-go-seekfun-detail\\\" data-link=\\\"{{link}}\\\">\\r\\n                  <div class=\\\"card-content\\\">\\r\\n                    <div class=\\\"tmm-order-img\\\">\\r\\n                      <img src=\\\"{{shops_img}}\\\">\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-content\\\">\\r\\n                      <div class=\\\"tmm-order-content-title\\\">\\r\\n                        {{shops_name}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        出游日期：{{actives_time.go_time}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        <span class=\\\"tmm-order-content-count\\\">成人：{{people}}人&nbsp;&nbsp;儿童{{children}}人</span>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-status\\\">\\r\\n                      {{#js_compare \\\"this.actives_status.value =='0'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='2'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='-1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                    </div>\\r\\n                  </div>\\r\\n\\r\\n                  <!--代付-->\\r\\n\\r\\n                  {{#js_compare \\\"this.is_me =='1' && this.actives_time.go_time_value == '0'\\\"}}\\r\\n                   <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button payAactGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{actives_time.set_go_time.link}}\\\">确认出游日期</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                  {{#js_compare \\\"this.delete.value !=''\\\"}}\\r\\n                   <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-A-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                </a>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/js_compare}} \\r\\n      </div>\\r\\n\\r\\n      <div id=\\\"no-more\\\"></div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n\\r\\n</div>\";"},{"id":78,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\join-act-list-card.tpl.html","name":"./src/modules/order/join-act-list-card.tpl.html","index":78,"index2":70,"size":7808,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"./join-act-list-card.tpl.html","loc":"11:24-64"}],"source":"module.exports = \"{{#js_compare \\\"this.payType =='1'\\\"}}\\r\\n              {{#each actData.list_data}}\\r\\n              <div class=\\\"card tmm-my-order-card\\\">\\r\\n                <!--AA付款-->\\r\\n                <a href=\\\"javascript:;\\\" class=\\\"tmm-my-order-detail-show-act\\\" data-type=\\\"{{status.order_type.value}}\\\" data-link=\\\"{{link}}\\\">\\r\\n                  <div class=\\\"card-content\\\">\\r\\n                    <div class=\\\"tmm-order-img\\\">\\r\\n                      <img src=\\\"{{shops_img}}\\\">\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-content\\\">\\r\\n                      <div class=\\\"tmm-order-content-title\\\">\\r\\n                        {{shops_name}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        出游日期：{{go_time}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        <span class=\\\"tmm-order-content-count\\\">价格：{{order_price}}元</span>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-status\\\">\\r\\n                      {{#js_compare \\\"this.actives_status.value =='0'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='2'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='-1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                    </div>\\r\\n                  </div>\\r\\n                  \\r\\n                  <!--AA付款-->\\r\\n\\r\\n                  {{#js_compare \\\"this.status.centre_status.value =='0'\\\"}}\\r\\n                  <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-pay\\\" data-id=\\\"{{value}}\\\" data-price=\\\"{{order_price}}\\\">前去支付</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                \\r\\n                  {{#js_compare \\\"this.status.centre_status.value =='-1'\\\"}}\\r\\n\\r\\n                    {{#js_compare \\\"this.status.status_go.value =='0'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                    {{#js_compare \\\"this.status.status_go.value =='1'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                        {{#js_compare \\\"this.go_time !== '出游日期未定'\\\"}}\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-confirm\\\" data-id=\\\"{{value}}\\\">确认出游</a>\\r\\n                        {{/js_compare}}\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                    {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n                    <div class=\\\"card-footer no-border\\\">\\r\\n                      <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                        <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-refund\\\" data-id=\\\"{{value}}\\\">申请退款</a>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    {{/js_compare}}\\r\\n                  {{/js_compare}} \\r\\n                </a>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/js_compare}} \\r\\n\\r\\n            {{#js_compare \\\"this.payType =='0'\\\"}}\\r\\n              {{#each actData.list_data}}\\r\\n              <div class=\\\"card tmm-my-order-card\\\">\\r\\n                <!--代付-->\\r\\n                <a href=\\\"javascript:;\\\" class=\\\"payType-go-seekfun-detail\\\" data-link=\\\"{{link}}\\\">\\r\\n                  <div class=\\\"card-content\\\">\\r\\n                    <div class=\\\"tmm-order-img\\\">\\r\\n                      <img src=\\\"{{shops_img}}\\\">\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-content\\\">\\r\\n                      <div class=\\\"tmm-order-content-title\\\">\\r\\n                        {{shops_name}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        出游日期：{{actives_time.go_time}}\\r\\n                      </div>\\r\\n                      <div class=\\\"tmm-order-content-info\\\">\\r\\n                        <span class=\\\"tmm-order-content-count\\\">成人：{{people}}人&nbsp;&nbsp;儿童{{children}}人</span>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-status\\\">\\r\\n                      {{#js_compare \\\"this.actives_status.value =='0'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='2'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                      {{#js_compare \\\"this.actives_status.value =='-1'\\\"}}\\r\\n                      <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{actives_status.name}}\\\">{{actives_status.name}}</span> \\r\\n                      {{/js_compare}} \\r\\n                    </div>\\r\\n                  </div>\\r\\n\\r\\n                  <!--代付-->\\r\\n                  {{#js_compare \\\"this.is_me =='1' && this.actives_time.go_time_value == '0'\\\"}}\\r\\n                   <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button payAactGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{actives_time.set_go_time.link}}\\\">确认出游日期</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                  {{#js_compare \\\"this.delete.value !=''\\\"}}\\r\\n                   <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-A-cancle\\\" data-id=\\\"{{value}}\\\">取消报名</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                </a>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/js_compare}}\";"},{"id":79,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","name":"./src/modules/order/order.js","index":79,"index2":74,"size":10875,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"./order","loc":"13:16-34"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../order/order","loc":"7:16-41"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  orderViewModel = require('./orderView'),\r\n  orderDetailModule = require('./orderDetail'),\r\n  roleModule = require('../role/role');\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n// 觅镜1 觅趣2\r\nvar type = 1;\r\n\r\nvar order = {\r\n  init: function() {\r\n    type = 1;\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n    log.info('order init...');\r\n\r\n    // 获取订单列表信息\r\n    order.getOrderList();\r\n    // 绑定页面元素对象事件\r\n    order.bingEvent();\r\n  },\r\n  getOrderList: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    // 发送获取推荐列表请求\r\n    httpService.getOrderList(\r\n      type,\r\n      function(dataRes, status) {\r\n        if (dataRes.status == 1) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          orderViewModel.getOrderList(dataRes.data);\r\n          // 隐藏正在加载的图标\r\n          tmmApp.hideIndicator();\r\n          appFunc.hideToolbar();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          if ('login' in dataRes.data) {\r\n            roleModule.redirectToLogin();\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  refreshOrderList: function() {\r\n    // 获取推荐列表\r\n    httpService.getOrderList(\r\n      type,\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        orderViewModel.refreshOrderList(dataRes.data);\r\n      },\r\n      function(dataRes, status) {}\r\n    );\r\n  },\r\n  infiniteOrderList: function() {\r\n    // 如果还有下一页的数据的时候（即下一页的链接不为空时）才去请求获取数据\r\n    if (nextPageLink) {\r\n      log.info('myOrderCtrl---infiniteOrderList---nextPageLink---', nextPageLink);\r\n      // 如果正在获取数据，即滚动加载的事件还没处理完，直接返回\r\n      // 防止重复请求，获取到重复的数据\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n      httpService.getOrderListToPage(\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 获取数据完毕，重置加载flag为false\r\n          loading = false;\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          orderViewModel.infiniteOrderList(dataRes.data);\r\n          tmmApp.hideIndicator();\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      //tmmApp.showIndicator();\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        // tmmApp.alert('没有更多的数据了');\r\n        $$(\"#tmm-my-order-page #no-more\").css('display', 'block');\r\n        $$(\"#tmm-my-order-page #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      setTimeout(function() {\r\n        $$(\"#tmm-my-order-page #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n    }\r\n  },\r\n  /**\r\n   * @method orderCancle\r\n   * @description 订单取消\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderCancle: function() {\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    tmmApp.confirm('确定取消吗?', '', function() {\r\n      httpService.orderCancle(\r\n        order_id,\r\n        function(dataRes, status) {\r\n          if (dataRes.status == 1) {\r\n            tmmApp.alert('已成功取消', '', function() {\r\n              order.refreshOrderList();\r\n            });\r\n          } else {\r\n            tmmApp.alert('取消失败，请重试');\r\n          }\r\n          tmmApp.hideIndicator();\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    });\r\n\r\n    log.info('orderCancle--', order_id);\r\n  },\r\n  /**\r\n   * @method orderPay\r\n   * @description 订单支付\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderPay: function() {\r\n\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    var price = $$(_this).attr('data-price');\r\n\r\n    appFunc.payOrder(id, price, \r\n      function(dataRes, status) {\r\n\r\n        if (dataRes.status == 1) {\r\n\r\n          if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n              bridge.callHandler('ObjcCallback', {\r\n                'PayCode': dataRes.data.alipay\r\n              }, function(response) {})\r\n            });\r\n          } else if (tmmApp.device.android) {\r\n            var str = window.jsObj.payMoney(dataRes.data.alipay);\r\n          }\r\n          order.getOrderList();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('支付失败，请重试');\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      },function() {\r\n        order.getOrderList();\r\n      });\r\n\r\n    // var data = {\r\n    //   \"id\": order_id,\r\n    //   \"pay_type\": \"1\"\r\n    // };\r\n\r\n    // httpService.orderPay(\r\n    //   data,\r\n\r\n    //   function(dataRes, status) {\r\n\r\n    //     if (dataRes.status == 1) {\r\n\r\n    //       if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n    //         connectWebViewJavascriptBridge(function(bridge) {\r\n    //           bridge.callHandler('ObjcCallback', {\r\n    //             'PayCode': dataRes.data.alipay\r\n    //           }, function(response) {})\r\n    //         });\r\n    //       } else if (tmmApp.device.android) {\r\n    //         var str = window.jsObj.payMoney(dataRes.data.alipay);\r\n    //       }\r\n    //       order.getOrderList();\r\n    //     } else {\r\n    //       tmmApp.hideIndicator();\r\n    //       tmmApp.alert('支付失败，请重试');\r\n    //     }\r\n    //     tmmApp.hideIndicator();\r\n    //   },\r\n    //   function(dataRes, status) {\r\n    //     tmmApp.hideIndicator();\r\n    //     tmmApp.alert('网络超时，请重试');\r\n    //   }\r\n    // );\r\n\r\n    log.info('orderPay--', order_id);\r\n  },\r\n  /**\r\n   * @method orderPay\r\n   * @description 订单支付\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderPayListPage: function() {\r\n\r\n    var _this = this;\r\n    var order_id = $$(_this).attr('data-id');\r\n    var price = $$(_this).attr('data-price');\r\n\r\n    // var data = {\r\n    //   \"id\": order_id,\r\n    //   \"pay_type\": \"1\"\r\n    // };\r\n\r\n    appFunc.payOrder(order_id, price, \r\n      function(dataRes, status) {\r\n\r\n        if (dataRes.status == 1) {\r\n\r\n          if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n            connectWebViewJavascriptBridge(function(bridge) {\r\n              bridge.callHandler('ObjcCallback', {\r\n                'PayCode': dataRes.data.alipay\r\n              }, function(response) {})\r\n            });\r\n          } else if (tmmApp.device.android) {\r\n            var str = window.jsObj.payMoney(dataRes.data.alipay);\r\n          }\r\n\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('支付失败，请重试');\r\n        }\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      },function(){\r\n        order.refreshOrderList();\r\n      });\r\n\r\n    // httpService.orderPay(\r\n    //   data,\r\n\r\n    //   function(dataRes, status) {\r\n\r\n    //     if (dataRes.status == 1) {\r\n\r\n    //       if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n    //         connectWebViewJavascriptBridge(function(bridge) {\r\n    //           bridge.callHandler('ObjcCallback', {\r\n    //             'PayCode': dataRes.data.alipay\r\n    //           }, function(response) {})\r\n    //         });\r\n    //       } else if (tmmApp.device.android) {\r\n    //         var str = window.jsObj.payMoney(dataRes.data.alipay);\r\n    //       }\r\n\r\n    //     } else {\r\n    //       tmmApp.hideIndicator();\r\n    //       tmmApp.alert('支付失败，请重试');\r\n    //     }\r\n    //     tmmApp.hideIndicator();\r\n    //   },\r\n    //   function(dataRes, status) {\r\n    //     tmmApp.hideIndicator();\r\n    //     tmmApp.alert('网络超时，请重试');\r\n    //   }\r\n    // );\r\n\r\n    log.info('orderPay--', order_id);\r\n  },\r\n  /**\r\n   * @method orderRefund\r\n   * @description 退款\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-28T19:01:40+0800\r\n   */\r\n  orderRefund: function() {\r\n    appFunc.orderRefund();\r\n  },\r\n\r\n  /**\r\n   * 选择觅镜或者觅趣\r\n   * @return {[type]} [description]\r\n   */\r\n  selectType: function() {\r\n    var oldType = type;\r\n    type = $$(this).attr('date-type');\r\n    if (type != oldType) {\r\n      $$('#myView .my-order-list').removeClass('active');\r\n      $$(this).addClass('active');\r\n      order.refreshOrderList();\r\n    }\r\n\r\n  },\r\n  /**\r\n   * @method bingEvent\r\n   * @description 给页面元素绑定事件\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T02:06:54+0800\r\n   */\r\n  bingEvent: function() {\r\n    var bindings = [\r\n      // 列表下拉刷新事件\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .pull-to-refresh-content',\r\n        event: 'refresh',\r\n        handler: order.refreshOrderList\r\n      },\r\n      // 滚动加载事件\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .pull-to-refresh-content',\r\n        event: 'infinite',\r\n        handler: order.infiniteOrderList\r\n      },\r\n      // 进入订单详情页\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .tmm-my-order-detail-show',\r\n        event: 'click',\r\n        handler: orderDetailModule.loadView\r\n      },\r\n      // 取消订单\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .tmm-button-cancle',\r\n        event: 'click',\r\n        handler: order.orderCancle\r\n      },\r\n      // 支付订单\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .tmm-button-pay',\r\n        event: 'click',\r\n        handler: order.orderPayListPage\r\n      },\r\n      // 申请退款\r\n      {\r\n        element: '#myView',\r\n        selector: '#tmm-my-order-page .tmm-button-refund',\r\n        event: 'click',\r\n        handler: order.orderRefund\r\n      }, {\r\n        element: '#myView',\r\n        selector: '.my-order-list',\r\n        event: 'click',\r\n        handler: order.selectType\r\n      }\r\n    ];\r\n    // 调用bindEvents方法进行事件绑定\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = order;\r\n"},{"id":80,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","name":"./src/modules/order/orderView.js","index":80,"index2":73,"size":1767,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":79,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\order.js","module":"./src/modules/order/order.js","moduleName":"./src/modules/order/order.js","type":"cjs require","userRequest":"./orderView","loc":"4:19-41"}],"source":"/**\r\n * @name orderView\r\n * @description 我的订单视图模型模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-10-28T11:21:24+0800\r\n */\r\nvar log = require('../utils/log');\r\nvar appFunc = require('../utils/appFunc');\r\nvar template = require('./my-order.tpl.html');\r\nvar card_template = require('./my-order-card.tpl.html');\r\n\r\nvar orderView = {\r\n  getOrderList: function(dataRes) {\r\n    // 转成对象赋值给页面上\r\n    var data = {\r\n      orderList: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(template, data);\r\n\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    //$$('#myView #tmm-my-order-page').find('.tmm-order-card-list').html(output);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  refreshOrderList: function(dataRes) {\r\n    var data = {\r\n      orderList: dataRes.list_data\r\n    };\r\n    log.info('orderView --refreshorderList--init...');\r\n\r\n    var output = appFunc.renderTpl(card_template, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#myView #tmm-my-order-page').find('.tmm-order-card-list').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n    \r\n  },\r\n  infiniteOrderList: function(dataRes) {\r\n    var data = {\r\n      orderList: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(card_template, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#myView #tmm-my-order-page').find('.tmm-order-card-list').append(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n};\r\n\r\nmodule.exports = orderView;\r\n"},{"id":81,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\my-order.tpl.html","name":"./src/modules/order/my-order.tpl.html","index":81,"index2":71,"size":5535,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":80,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","module":"./src/modules/order/orderView.js","moduleName":"./src/modules/order/orderView.js","type":"cjs require","userRequest":"./my-order.tpl.html","loc":"10:15-45"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">我的订单</div>\\r\\n    <!--<div class=\\\"right tmm-right\\\">刷新</div>-->\\r\\n    <div class=\\\"subnavbar tmm-order-subnavbar\\\">\\r\\n      <div class=\\\"buttons-row\\\">\\r\\n        <a date-type=\\\"1\\\" class=\\\"button my-order-list active\\\">觅境</a>\\r\\n        <a date-type=\\\"2\\\" class=\\\"button my-order-list\\\">觅趣</a>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"my-order\\\" class=\\\"page page-order\\\" id=\\\"tmm-my-order-page\\\" >\\r\\n    <div data-distance=\\\"50\\\" class=\\\"page-content pull-to-refresh-content infinite-scroll\\\" style=\\\"padding-bottom:0px;\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\" style=\\\"position: absolute;margin-top: 45px;\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-order-card-list\\\">\\r\\n        <div class=\\\"tabs\\\">\\r\\n            {{#each orderList}}\\r\\n            <div class=\\\"card tmm-my-order-card\\\">\\r\\n              <a href=\\\"javascript:;\\\" class=\\\"tmm-my-order-detail-show\\\" data-type=\\\"{{status.order_type.value}}\\\" data-link=\\\"{{link}}\\\">\\r\\n                <div class=\\\"card-content\\\">\\r\\n                  <div class=\\\"tmm-order-img\\\">\\r\\n                    <img class=\\\"lazy lazy-fadein\\\" data-src=\\\"{{shops_img}}\\\">\\r\\n                  </div>\\r\\n                  <div class=\\\"tmm-order-content\\\">\\r\\n                    <div class=\\\"tmm-order-content-title\\\">\\r\\n                      {{shops_name}}\\r\\n                    </div>\\r\\n                    <div class=\\\"tmm-order-content-info\\\">\\r\\n                      <span class=\\\"tmm-order-content-count\\\">价格：{{order_price}}元</span>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  <div class=\\\"tmm-order-status\\\">\\r\\n                    {{#js_compare \\\"this.status.order_status.value =='0'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='1'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='3'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='-1'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='-2'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}} {{#js_compare \\\"this.status.order_status.value =='-3'\\\"}}\\r\\n                    <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span> {{/js_compare}}\\r\\n                  </div>\\r\\n                </div>\\r\\n                \\r\\n\\r\\n                {{#js_compare \\\"this.status.centre_status.value =='0'\\\"}}\\r\\n                <div class=\\\"card-footer no-border\\\">\\r\\n                  <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                    <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消</a>\\r\\n                    <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-pay\\\" data-id=\\\"{{value}}\\\" data-price=\\\"{{order_price}}\\\">支付</a>\\r\\n                  </div>\\r\\n                </div>\\r\\n                {{/js_compare}} \\r\\n                \\r\\n                {{#js_compare \\\"this.status.centre_status.value =='-1'\\\"}}\\r\\n                  {{#js_compare \\\"this.status.order_status.value =='0' || this.status.order_status.value =='1'\\\"}}\\r\\n                  <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n\\r\\n                  {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n                  <div class=\\\"card-footer no-border\\\">\\r\\n                    <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n                      <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-refund\\\" data-id=\\\"{{value}}\\\">退款</a>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{/js_compare}}\\r\\n                {{/js_compare}} \\r\\n\\r\\n                \\r\\n              </a>\\r\\n            </div>\\r\\n            {{/each}}\\r\\n     \\r\\n        </div>\\r\\n      </div>\\r\\n      <div id=\\\"no-more\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <!--添加内容 -->\\r\\n</div>\\r\\n\";"},{"id":82,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\my-order-card.tpl.html","name":"./src/modules/order/my-order-card.tpl.html","index":82,"index2":72,"size":4039,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":80,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\orderView.js","module":"./src/modules/order/orderView.js","moduleName":"./src/modules/order/orderView.js","type":"cjs require","userRequest":"./my-order-card.tpl.html","loc":"11:20-55"}],"source":"module.exports = \"{{#each orderList}}\\r\\n      <div class=\\\"card tmm-my-order-card\\\">\\r\\n        <a href=\\\"javascript:;\\\" class=\\\"tmm-my-order-detail-show\\\" data-type=\\\"{{status.order_type.value}}\\\" data-link=\\\"{{link}}\\\">\\r\\n          <div class=\\\"card-content\\\">\\r\\n            <div class=\\\"tmm-order-img\\\">\\r\\n              <img class=\\\"lazy lazy-fadein\\\" data-src=\\\"{{shops_img}}\\\">\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-content\\\">\\r\\n              <div class=\\\"tmm-order-content-title\\\">\\r\\n                {{shops_name}}\\r\\n              </div>\\r\\n              <div class=\\\"tmm-order-content-info\\\">\\r\\n                <span class=\\\"tmm-order-content-count\\\">价格：{{order_price}}元</span>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-status\\\">\\r\\n\\r\\n              {{#js_compare \\\"this.status.order_status.value =='0'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-chuli\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='1'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-fukuan\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='3'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-xiaofei\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='-1'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='-2'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n              {{#js_compare \\\"this.status.order_status.value =='-3'\\\"}}\\r\\n                <span class=\\\"tmm-icon-triangle tmm-tip-gray\\\" title=\\\"{{status.order_status.name}}\\\">{{status.order_status.name}}</span>\\r\\n              {{/js_compare}}\\r\\n            </div>\\r\\n          </div>\\r\\n       \\r\\n\\r\\n        {{#js_compare \\\"this.status.centre_status.value =='0'\\\"}}\\r\\n        <div class=\\\"card-footer no-border\\\">\\r\\n          <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n            <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消</a>\\r\\n            <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-pay\\\" data-id=\\\"{{value}}\\\" data-price=\\\"{{order_price}}\\\">支付</a>\\r\\n          </div>\\r\\n        </div>\\r\\n        {{/js_compare}} \\r\\n        \\r\\n        {{#js_compare \\\"this.status.centre_status.value =='-1'\\\"}}\\r\\n          {{#js_compare \\\"this.status.order_status.value =='0' || this.status.order_status.value =='1'\\\"}}\\r\\n          <div class=\\\"card-footer no-border\\\">\\r\\n            <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n              <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-cancle\\\" data-id=\\\"{{value}}\\\">取消</a>\\r\\n            </div>\\r\\n          </div>\\r\\n          {{/js_compare}}\\r\\n\\r\\n          {{#js_compare \\\"this.status.order_status.value =='2'\\\"}}\\r\\n          <div class=\\\"card-footer no-border\\\">\\r\\n            <div class=\\\"tmm-card-footer tmm-my-order-b-border\\\">\\r\\n              <a href=\\\"javascript:;\\\" class=\\\"button tmm-button-refund\\\" data-id=\\\"{{value}}\\\">退款</a>\\r\\n            </div>\\r\\n          </div>\\r\\n          {{/js_compare}}\\r\\n        {{/js_compare}} \\r\\n        </a>\\r\\n      </div>\\r\\n{{/each}}\";"},{"id":83,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\payA-detail.tpl.html","name":"./src/modules/order/payA-detail.tpl.html","index":83,"index2":75,"size":5048,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":76,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\order\\joinAct.js","module":"./src/modules/order/joinAct.js","moduleName":"./src/modules/order/joinAct.js","type":"cjs require","userRequest":"./payA-detail.tpl.html","loc":"15:18-51"}],"source":"module.exports = \"<!-- 觅趣详情 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣详情</div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"seekfun-detail infinite-scroll\\\" class=\\\"page payA-detail-page\\\" id=\\\"seekfun-detail\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"seekfun-banner\\\">\\r\\n        <img src=\\\"{{image}}\\\">\\r\\n        <div class=\\\"seekfun-tabs\\\">\\r\\n          <span class=\\\"tab-item journery active\\\">行程</span>\\r\\n          <span class=\\\"tab-item join\\\">参与人</span>\\r\\n          <span class=\\\"tab-item intro\\\">概要</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!-- 行程 -->\\r\\n      <div class=\\\"journery-block\\\">\\r\\n      {{#each items_fare}}\\r\\n        <div class=\\\"seekfun-item\\\">\\r\\n\\r\\n          {{#if @key%2}}\\r\\n          <div class=\\\"day-tit\\\">\\r\\n            <div class=\\\"tit\\\">{{mergeDay @key}}</div>\\r\\n            <div class=\\\"address\\\">深圳</div>\\r\\n          </div>\\r\\n          {{/if}}\\r\\n\\r\\n          {{#each this}}\\r\\n            {{#each this}}\\r\\n              {{#each fare}}\\r\\n              <div class=\\\"day-item\\\">\\r\\n                <span class=\\\"img\\\">\\r\\n                  \\r\\n           \\r\\n                  <i class=\\\"icon ticon-type{{../classliy.value}}\\\"></i>\\r\\n                  \\r\\n                </span>\\r\\n                <div class=\\\"describe\\\">\\r\\n                  <div class=\\\"tit\\\">{{../name}}</div>\\r\\n                  {{#js_compare \\\"this.room_number != '0'\\\"}}\\r\\n                  <div class=\\\"txt\\\">{{name}} 　{{room_number}}人间　￥{{price}}</div>\\r\\n                  {{/js_compare}}\\r\\n                  {{#js_compare \\\"this.room_number == '0'\\\"}}\\r\\n                  <div class=\\\"txt\\\">{{name}} 　{{info}}　￥{{price}}</div>\\r\\n                  {{/js_compare}}\\r\\n                </div>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/each}}\\r\\n          {{/each}}\\r\\n        </div>\\r\\n        {{/each items_fare}}\\r\\n        </div>\\r\\n      <!-- 参与人 -->\\r\\n      <div class=\\\"join-block\\\" >\\r\\n        <p style=\\\"text-align: center;margin-top: 20px;\\\">您还没有参与人哦！</p>\\r\\n      </div>\\r\\n      <!-- 概要 -->\\r\\n\\r\\n      <!-- 不可以编辑 -->\\r\\n      <div class=\\\"intro-block\\\">\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣名称\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{name}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group tmmGoTime\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            出游日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\" name=\\\"tmm-set-act-date\\\">\\r\\n            {{actives_time.go_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            付款方式\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{#js_compare \\\"this.actives_pay_type.value == '1'\\\"}} 代付 {{/js_compare}} {{#js_compare \\\"this.actives_pay_type.value == '0'\\\"}} 自费 {{/js_compare}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣报名日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_time.start_time}} 至 {{actives_time.end_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣参与人数\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{js \\\"this.actives_info.number.value - this.actives_info.order_number.value\\\"}}/{{actives_info.number.value}}人\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        {{#js_compare \\\"this.is_organizer == 1\\\"}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            服务费（交通、导服及其他）\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_info.tour_price.value}}元/人\\r\\n          </div>\\r\\n        </div>\\r\\n        {{/js_compare}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            创建日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_time.add_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣简介\\r\\n          </div>\\r\\n          <div class=\\\"editer-con\\\">\\r\\n            {{actives_info.remark}}\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <!-- 不可以编辑完成 -->\\r\\n    </div>\\r\\n\\r\\n    {{#js_compare \\\"this.delete.value !=''\\\"}}\\r\\n      <div class=\\\"tmm-seekfun-btn\\\">\\r\\n        <span class=\\\"outline-button tmm-button-A-cancle\\\" data-id=\\\"{{delete.value}}\\\" data-detail=\\\"1\\\">取消报名</span>\\r\\n      </div>\\r\\n    {{/js_compare}}\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":84,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfunTpl\\select-people.tpl.html","name":"./src/modules/shop/applySeekfunTpl/select-people.tpl.html","index":84,"index2":77,"size":1333,"cacheable":true,"built":true,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"./applySeekfunTpl/select-people.tpl.html","loc":"4:22-73"}],"source":"module.exports = \"\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">出行人数</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"payment-select-pepole\\\" class=\\\"page payment-select-pepole\\\">\\r\\n    <div class=\\\"page-content\\\" style=\\\"background-color: #fff;\\\">\\r\\n      <div style=\\\"height: 10px;background: #f2f2f2;\\\">\\r\\n      </div>\\r\\n        <div class=\\\"item-type adult\\\">\\r\\n          <div class=\\\"type-tit\\\">成人</div>\\r\\n          <div class=\\\"fare-item item-num\\\"><span class=\\\"sub-num\\\"></span><span class=\\\"num\\\">0</span><span class=\\\"add-num\\\"></span></div>\\r\\n        </div>\\r\\n        <div class=\\\"item-type child\\\">\\r\\n          <div class=\\\"type-tit\\\">儿童</div>\\r\\n          <div class=\\\"fare-item item-num\\\"><span class=\\\"sub-num\\\"></span><span class=\\\"num\\\">0</span><span class=\\\"add-num\\\"></span></div>\\r\\n        </div>\\r\\n    \\r\\n      <div class=\\\"block-sub-button\\\"><span class=\\\"sub-button payment-next-step-select-pepole\\\">下一步</span></div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</div>\";"},{"id":85,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfunTpl\\add-people.tpl.html","name":"./src/modules/shop/applySeekfunTpl/add-people.tpl.html","index":85,"index2":78,"size":2186,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"./applySeekfunTpl/add-people.tpl.html","loc":"5:19-67"}],"source":"module.exports = \"\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">报名信息</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"payment-add-pepole\\\" class=\\\"page payment-add-pepole\\\">\\r\\n    <div class=\\\"page-content\\\" style=\\\"padding-bottom:65px;\\\">\\r\\n\\r\\n      <div class=\\\"main-wrap\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">请填写出行人信息</div>\\r\\n        <div class=\\\"normal-cell\\\"><label><span class=\\\"tit\\\">姓名：</span><input type=\\\"text\\\" class=\\\"main-input name\\\"></label></div>\\r\\n        <div class=\\\"normal-cell\\\"><label><span class=\\\"tit\\\">手机号码：</span><input type=\\\"tel\\\" class=\\\"main-input phone\\\"></label></div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      <!-- <div style=\\\"height: 10px;background: #f2f2f2; text-align: center; margin-top:10px;font-size:12px;\\\">请填写出行人信息</div> -->\\r\\n\\r\\n\\r\\n      {{#each adultRetinueInfo}}\\r\\n      <div class=\\\"adult-wrap\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人信息{{index}}（成人）</div>\\r\\n        <div class=\\\"normal-cell\\\"><label><span class=\\\"tit\\\">姓名：</span><input type=\\\"text\\\" class=\\\"adult-input name\\\" data-key=\\\"{{@index}}\\\"></label></div>\\r\\n        <div class=\\\"normal-cell\\\"><label><span class=\\\"tit\\\">手机号码：</span><input type=\\\"tel\\\" class=\\\"adult-input phone\\\" data-key=\\\"{{@index}}\\\"></label></div>\\r\\n      </div>\\r\\n      {{/each}}\\r\\n  \\r\\n      {{#each childRetinueInfo}}\\r\\n      <div class=\\\"child-wrap\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">随行人信息{{index}}（儿童）</div>\\r\\n        <div class=\\\"normal-cell\\\"><label><span class=\\\"tit\\\">姓名：</span><input type=\\\"text\\\" class=\\\"child-input name\\\" data-key=\\\"{{@index}}\\\"></label></div> \\r\\n       </div>\\r\\n      {{/each}}\\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"block-sub-button\\\"><span class=\\\"sub-button payment-next-step-add-pepole\\\">下一步</span></div>\\r\\n\\r\\n  </div>\\r\\n</div>\";"},{"id":86,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfunTpl\\check-phone.tpl.html","name":"./src/modules/shop/applySeekfunTpl/check-phone.tpl.html","index":86,"index2":79,"size":1013,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"./applySeekfunTpl/check-phone.tpl.html","loc":"6:20-69"}],"source":"module.exports = \"\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">验证手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"payment-check-phone\\\" class=\\\"page payment-check-phone\\\">\\r\\n    <div class=\\\"page-content\\\" style=\\\"padding-bottom:55px;\\\">\\r\\n\\r\\n\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">验证码将发到<span class=\\\"phone-num\\\"></span></div>\\r\\n      <div class=\\\"normal-cell\\\"><input class=\\\"phone-coder\\\" type=\\\"text\\\" placeholder=\\\"填写验证码\\\"><div class=\\\"send-coder\\\">获取验证码</div></div>\\r\\n      \\r\\n\\r\\n    </div>\\r\\n    <div class=\\\"block-sub-button\\\"><span class=\\\"sub-button payment-next-step-check-phone\\\">下一步</span></div>\\r\\n\\r\\n  </div>\\r\\n</div>\";"},{"id":87,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfunTpl\\apply-success.tpl.html","name":"./src/modules/shop/applySeekfunTpl/apply-success.tpl.html","index":87,"index2":80,"size":731,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":75,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\shop\\applySeekfun.js","module":"./src/modules/shop/applySeekfun.js","moduleName":"./src/modules/shop/applySeekfun.js","type":"cjs require","userRequest":"./applySeekfunTpl/apply-success.tpl.html","loc":"7:22-73"}],"source":"module.exports = \"\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">验证手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <!-- Page, \\\"data-page\\\" contains page name -->\\r\\n  <div data-page=\\\"payment-apply-success\\\" class=\\\"page payment-apply-success\\\">\\r\\n    <div class=\\\"page-content\\\" style=\\\"padding-bottom:55px;\\\">\\r\\n\\r\\n\\r\\n      <h3 class=\\\"tit\\\">报名成功</h3>\\r\\n      <p class=\\\"txt\\\">请进入\\\"我参加的觅趣\\\"查看报名信息</p>\\r\\n      <div class=\\\"block-sub-button\\\"><span class=\\\"sub-button payment-next-step-apply-success\\\">完成</span></div>\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":88,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","name":"./src/modules/search/seekSearch.js","index":88,"index2":86,"size":7191,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":26,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\recommend\\recommend.js","module":"./src/modules/recommend/recommend.js","moduleName":"./src/modules/recommend/recommend.js","type":"cjs require","userRequest":"../search/seekSearch","loc":"6:21-52"},{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../search/seekSearch","loc":"6:21-52"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  seekSearchView = require('./seekSearchView');\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n\r\nvar type = '';\r\nvar typeValue = '';\r\n\r\nvar seekSearch = {\r\n  init: function() {\r\n    appFunc.hideToolbar();\r\n    seekSearch.getSeekSearchList();\r\n    seekSearch.bindEvent();\r\n  },\r\n\r\n  getSeekSearchList: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    seekSearchView.getSeekSearchList();\r\n    tmmApp.hideIndicator();\r\n  },\r\n\r\n  clearHistoryTagOrInput: function(typeValue) {\r\n    var keyword_arr = [];\r\n    if (localStorage.getItem('keyword_arr')) {\r\n       keyword_arr = JSON.parse(localStorage.getItem('keyword_arr'));\r\n\r\n       //判断是否已经存储过相同的数据\r\n      var locArrayBoolean = true;\r\n      var locArray = eval(JSON.parse(localStorage.getItem('keyword_arr')));\r\n      for(var i = 0; i < locArray.length; i++){\r\n        if(locArray[i] == typeValue){\r\n          keyword_arr.splice(i,1);\r\n          i--;\r\n          //locArrayBoolean = false;\r\n          break;\r\n        }\r\n      };\r\n      if(locArrayBoolean){     //localStorage存储数据\r\n        //keyword_arr.push(typeValue);\r\n        keyword_arr.unshift(typeValue);\r\n        localStorage.setItem('keyword_arr', JSON.stringify(keyword_arr));\r\n      }    \r\n    } else {  //存储第一次搜索记录\r\n      keyword_arr.push(typeValue);\r\n      localStorage.setItem('keyword_arr', JSON.stringify(keyword_arr));   \r\n    }\r\n  },\r\n\r\n  /**\r\n   * 输入搜索的值\r\n   */\r\n  getSeekSearchInputList: function() {\r\n    \r\n    // 显示正在加载的图标\r\n    type = 'search_info';\r\n    typeValue = ($$('.tmm-seek-searchbar-input').val()).replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n\r\n    if(typeValue != null && typeValue != \"\"){\r\n      seekSearch.clearHistoryTagOrInput(typeValue);\r\n      \r\n      $$('.tmm-seek-searchbar-input').blur();\r\n\r\n      httpService.getSeekSearchList(\r\n        type,\r\n        typeValue,\r\n        '',\r\n        function(dataRes, status) {\r\n          if(dataRes.data.list_data.length == 0){\r\n            seekSearchView.clearSeekSearchList();\r\n            tmmApp.alert('没有搜索到相关的数据！');\r\n            //return;\r\n          } else {\r\n            $$('#seekSearch .tmm-sou-list-block').hide();\r\n            nextPageLink = dataRes.data.page.next;\r\n            log.info(\"nextPageLink\",nextPageLink);\r\n            seekSearchView.getSeekSearchInputList(dataRes.data);\r\n            tmmApp.hideIndicator();\r\n          }\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      tmmApp.alert('请输入关键字！');\r\n      return;\r\n    }\r\n  },\r\n\r\n  getSeekSearchHistoryList: function() {\r\n    // 显示正在加载的图标\r\n    \r\n    type = 'search_info';\r\n    typeValue = $$(this).html();\r\n    $$('.tmm-seek-searchbar-input').val(typeValue);\r\n    $$('.tmm-seek-searchbar').addClass(\"searchbar-not-empty\");\r\n    httpService.getSeekSearchList(\r\n      type,\r\n      typeValue,\r\n      '',\r\n      function(dataRes, status) {\r\n        if(dataRes.data.list_data.length == 0){\r\n          seekSearchView.clearSeekSearchList();\r\n          tmmApp.alert('没有搜索到相关的数据！');\r\n          //return;\r\n        } else {\r\n          $$('#seekSearch .tmm-sou-list-block').hide();\r\n          nextPageLink = dataRes.data.page.next;\r\n          seekSearchView.getSeekSearchInputList(dataRes.data);\r\n          tmmApp.hideIndicator();\r\n        }\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n      }\r\n    );\r\n    seekSearch.clearHistoryTagOrInput(typeValue);\r\n  },\r\n\r\n refreshSeekSearchList: function() {\r\n    httpService.getSeekSearchList(\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        seekSearchView.refreshSeekSearchList(dataRes.data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  }, \r\n  /**\r\n   * 动画加载分页\r\n   */\r\n  infiniteSeekSearchList: function() {\r\n    if (nextPageLink) {\r\n      log.info(\"测试加载更多\");\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n      httpService.getSeekSearchList(\r\n        '',\r\n        '',\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          log.info('new --infiniteSeekSearchList-- nextPageLink ----', nextPageLink);\r\n          // 调用视图模型的infiniteRecommendList方法进行渲染视图\r\n          seekSearchView.infiniteSeekSearchList(dataRes.data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      //tmmApp.showIndicator();\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        // tmmApp.alert('没有更多的数据了');\r\n        $$(\"#seekSearch #no-more\").css('display','block');\r\n        $$(\"#seekSearch #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      setTimeout(function() {\r\n        $$(\"#seekSearch #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      },2000);      \r\n    }\r\n  },\r\n  clearSeekSearchHistory: function() {\r\n    log.info('清除历史记录');\r\n    $$('#seekSearch .tmm-sou-list-block').hide();\r\n    tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n    //localStorage.clear();\r\n    localStorage.removeItem(\"keyword_arr\");\r\n  },\r\n\r\n  bindEvent: function() {\r\n\r\n    var bindings = [{\r\n      element: '.views',\r\n      selector: '#seekSearch .tmm-seek-search-page-content',\r\n      event: 'refresh',\r\n      handler: seekSearch.refreshSeekSearchList\r\n    }, {\r\n      element: '.views',\r\n      selector: '#seekSearch .tmm-seek-search-page-content',\r\n      event: 'infinite',\r\n      handler: seekSearch.infiniteSeekSearchList\r\n    }, /*{\r\n      element: '#seekView',\r\n      selector: '.tmm-seek-search-test',\r\n      event: 'click',\r\n      handler: seekSearch.getSeekSearchInputList\r\n    }, */{\r\n      element: '.views',\r\n      selector: '.tmm-sou-item-title',\r\n      event: 'click',\r\n      handler: seekSearch.getSeekSearchHistoryList\r\n    }, {\r\n      element: '.views',\r\n      selector: '.tmm-sou-clear',\r\n      event: 'click',\r\n      handler: seekSearch.clearSeekSearchHistory\r\n    }, {\r\n      element: '.views',\r\n      selector: '.tmm-seek-searchbar',\r\n      event: 'submit',\r\n      handler: seekSearch.getSeekSearchInputList\r\n    }, {\r\n      element: '.views',\r\n      selector: '.searchbar-clear',\r\n      event: 'click',\r\n      handler: seekSearchView.clearSeekSearchList\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = seekSearch;\r\n"},{"id":89,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","name":"./src/modules/search/seekSearchView.js","index":89,"index2":85,"size":2970,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":88,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearch.js","module":"./src/modules/search/seekSearch.js","moduleName":"./src/modules/search/seekSearch.js","type":"cjs require","userRequest":"./seekSearchView","loc":"4:19-46"}],"source":"/**\r\n * @name recommendView\r\n * @description 搜索模型模块\r\n */\r\nvar log = require('../utils/log');\r\nvar appFunc = require('../utils/appFunc');\r\nvar template = require('./seek-search.tpl.html');\r\nvar listTemplate = require('../recommend/recommend.tpl.html');\r\nvar listHistoryTemplate = require('../search/seek-search-history.tpl.html');\r\n\r\nvar seekSearchView = {\r\n  /**\r\n   * @method getSeekSearchList\r\n   * @description 搜索列表的数据后进行编译渲染\r\n   */\r\n  getSeekSearchList: function() {\r\n\r\n    // 转成对象赋值给页面上\r\n    log.info('seekSearchHistory',JSON.parse(localStorage.getItem('keyword_arr')));\r\n    var data = {\r\n      seekSearchHistory:JSON.parse(localStorage.getItem('keyword_arr'))\r\n    };\r\n\r\n    var output = appFunc.renderTpl(template, data);\r\n    \r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n    if(!localStorage.getItem('keyword_arr')){\r\n      $$('#seekSearch .tmm-sou-list-block').hide();\r\n    }\r\n  },\r\n  clearSeekSearchList: function() {\r\n    var dataHistory = {\r\n      seekSearchHistory:JSON.parse(localStorage.getItem('keyword_arr'))\r\n    };\r\n    var outputHistory = appFunc.renderTpl(listHistoryTemplate, dataHistory);\r\n    $$('#seekSearch').find('.tmm-sou-list').html(outputHistory);\r\n    \r\n    // 转成对象赋值给页面上\r\n    var data = {\r\n      seekSearchHistory:JSON.parse(localStorage.getItem('keyword_arr')),\r\n      recommend: ''\r\n    };\r\n\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    $$('#seekSearch').find('.tmm-seekSearch-ul-list').html('');\r\n    \r\n    if(localStorage.getItem('keyword_arr')){\r\n      $$('#seekSearch .tmm-sou-list-block').show();\r\n    }\r\n  },\r\n\r\n  getSeekSearchInputList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    $$('#seekSearch').find('.tmm-seekSearch-ul-list').html(output);\r\n\r\n   \r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);    \r\n  },\r\n  /**\r\n   * @method refreshSeekSearchList\r\n   * @description 下拉刷新获取列表数据后进行编译渲染\r\n   */\r\n  refreshSeekSearchList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    log.info('seekSearchView --refreshSeekSearchList--init...');\r\n\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    $$('#seekSearch').find('.tmm-seekSearch-ul-list').append(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);  \r\n  },\r\n  /**\r\n   * @method infiniteRecommendList\r\n   * @description 滚动加载获取搜索的值\r\n   */\r\n  infiniteSeekSearchList: function(dataRes) {\r\n\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    $$('#seekSearch').find('.tmm-seekSearch-ul-list').append(output);\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n};\r\n\r\nmodule.exports = seekSearchView;\r\n"},{"id":90,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seek-search.tpl.html","name":"./src/modules/search/seek-search.tpl.html","index":90,"index2":83,"size":2532,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":89,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","module":"./src/modules/search/seekSearchView.js","moduleName":"./src/modules/search/seekSearchView.js","type":"cjs require","userRequest":"./seek-search.tpl.html","loc":"7:15-48"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center tmm-sou-center\\\">\\r\\n    \\t<form data-search-list=\\\".list-block-search\\\" data-search-in=\\\".item-title\\\" class=\\\"searchbar searchbar-init tmm-seek-searchbar\\\">\\r\\n\\t\\t    <div class=\\\"searchbar-input\\\">\\r\\n          <i class=\\\"icon ticon-search tmm-searchbar-search\\\"></i>\\r\\n\\t\\t      <input type=\\\"search\\\" placeholder=\\\"搜索\\\" class=\\\"tmm-seek-searchbar-input\\\"><a href=\\\"#\\\" class=\\\"searchbar-clear\\\"></a>\\r\\n\\t\\t    </div><!-- <a href=\\\"#\\\" class=\\\"searchbar-cancel tmm-searchbar-cancel\\\">取消</a> -->\\r\\n\\t\\t  </form>\\r\\n    </div>\\r\\n    <div class=\\\"right tmm-sou-right\\\">\\r\\n      <!-- <a href=\\\"javascript:;\\\" class=\\\"link tmm-seek-search-test\\\">\\r\\n        <span>搜索</span>\\r\\n      </a> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"search\\\" class=\\\"page\\\" id=\\\"seekSearch\\\">\\r\\n\\r\\n  \\t<div class=\\\"searchbar-overlay\\\"></div>\\r\\n    <div data-distance=\\\"50\\\" class=\\\"page-content infinite-scroll tmm-seek-search-page-content\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n\\r\\n      <!---test-->\\r\\n      <div class=\\\"tmm-sou-list-block\\\">\\r\\n      <div class=\\\"list-block list-block-search searchbar-found tmm-list-search-block\\\">\\r\\n        <div class=\\\"tmm-sou-tit tmm-search-bottom-border\\\">搜索历史</div>\\r\\n        <div class=\\\"tmm-sou-row-scroll\\\">\\r\\n          <ul class=\\\"tmm-sou-list\\\">\\r\\n            {{#each seekSearchHistory}}\\r\\n            <li class=\\\"item-content tmm-sou-list-title\\\">\\r\\n              <div class=\\\"item-inner tmm-item-inner tmm-search-item-inner\\\">\\r\\n                <div class=\\\"item-title  tmm-sou-item-title\\\">{{this}}</div>\\r\\n              </div>\\r\\n            </li>\\r\\n          {{/each}}\\r\\n          </ul>\\r\\n        </div>\\r\\n        <div class=\\\"tmm-sou-clear tmm-search-top-border tmm-search-bottom-border\\\">清空历史记录</div>\\r\\n      </div>\\r\\n      </div>\\r\\n      <!---test-->\\r\\n\\r\\n      <div class=\\\"tmm-list-block\\\">\\r\\n        <ul class=\\\"tmm-seekSearch-ul-list\\\">\\r\\n          \\r\\n        </ul>\\r\\n         <div id=\\\"no-more\\\" style=\\\"display:none\\\"></div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":91,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seek-search-history.tpl.html","name":"./src/modules/search/seek-search-history.tpl.html","index":91,"index2":84,"size":282,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":89,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\seekSearchView.js","module":"./src/modules/search/seekSearchView.js","moduleName":"./src/modules/search/seekSearchView.js","type":"cjs require","userRequest":"../search/seek-search-history.tpl.html","loc":"9:26-75"}],"source":"module.exports = \"{{#each seekSearchHistory}}\\r\\n  <li class=\\\"item-content tmm-sou-list-title\\\">\\r\\n    <div class=\\\"item-inner tmm-item-inner tmm-search-item-inner\\\">\\r\\n      <div class=\\\"item-title  tmm-sou-item-title\\\">{{this}}</div>\\r\\n    </div>\\r\\n  </li>\\r\\n{{/each}}\\r\\n\";"},{"id":92,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","name":"./src/modules/seek/seek.js","index":92,"index2":93,"size":7253,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./seek/seek","loc":"21:15-37"},{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../seek/seek","loc":"3:15-38"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  seekView = require('./seekView'),\r\n  shopModule = require('../shop/shop'),\r\n  seekSearchModule = require('../search/seekSearch'),\r\n  selectDistinationModule = require('../search/selectDistination');\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 选择标签页的url\r\n * @type {String}\r\n */\r\nvar selectUrl = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\nvar moreLoading = false;\r\n\r\nvar seek = {\r\n  init: function() {\r\n    this.bindEvents();\r\n    // this.getSeekList();\r\n  },\r\n\r\n  /**\r\n   * 获取探索页面内容\r\n   *\r\n   * @author daixi\r\n   */\r\n  getSeekList: function() {\r\n    appFunc.exitSeekFresh();\r\n    // 显示加载图标\r\n    tmmApp.showIndicator();\r\n    selectUrl = httpService.apiSeekList;\r\n    // http请求\r\n    httpService.getSeekList(\r\n      '',\r\n      function(dataSeek, status) {\r\n\r\n        if (dataSeek.status == 1) {\r\n          nextPageLink = dataSeek.data.page.next;\r\n\r\n          seekView.getSeekList(dataSeek.data);\r\n          tmmApp.hideIndicator();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n          tmmApp.pullToRefreshDone();\r\n        }\r\n\r\n        // httpService.getLocationCity(function (dataRes) {\r\n        //   if (dataRes.status == 1) {\r\n        //     dataSeek.data.locationCity = dataRes.data.address_info.city.name;\r\n        //   } else {\r\n        //     dataSeek.data.locationCity = \"选择\";\r\n        //   }\r\n\r\n        //   nextPageLink = dataSeek.data.page.next;\r\n        //   console.log('====',dataSeek.data)\r\n        //   seekView.getSeekList(dataSeek.data);\r\n        //   tmmApp.hideIndicator();\r\n        // }, function (dataRes) {\r\n        //   dataSeek.data.locationCity = \"选择\";\r\n        //   nextPageLink = dataSeek.data.page.next;\r\n        //   seekView.getSeekList(dataSeek.data);\r\n        //   tmmApp.hideIndicator();\r\n        // })     \r\n        \r\n      },\r\n      function(dataSeek, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试', '');\r\n        tmmApp.pullToRefreshDone();\r\n      });\r\n  \r\n  },\r\n\r\n  /**\r\n   * 下拉刷新请求\r\n   * @return {[type]} [description]\r\n   */\r\n  refreshSeekList: function() {\r\n    // 发送获取推荐列表请求\r\n    httpService.getSeekList(\r\n      selectUrl,\r\n      function(dataSeek, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataSeek.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        // 进行渲染视图\r\n        seekView.refreshSeekList(dataSeek.data);\r\n      },\r\n      function(dataSeek, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n\r\n  /**\r\n   * 选择标签后请求数据\r\n   * @return {[type]} [description]\r\n   */\r\n  getSeekSelect: function() {\r\n    $$(\".tmm-sublist a\").removeClass('tmm-seek-selected');\r\n    $$(this).addClass('tmm-seek-selected');\r\n    // 隐藏展开的菜单 \r\n    $$('#seekView .tmm-sublist').hide();\r\n    selectUrl = $$(this).attr('data-link');\r\n    /*if(localStorage.getItem('selectHistory') != null) {\r\n      localStorage.removeItem(\"selectHistory\");\r\n      localStorage.setItem('selectHistory', $$(this).html());\r\n    } else {\r\n      localStorage.setItem('selectHistory', $$(this).html());\r\n    }*/\r\n    httpService.getSeekList(\r\n      selectUrl,\r\n      function(dataSeek) {\r\n        nextPageLink = dataSeek.data.page.next;\r\n        seekView.getSeekSelect(dataSeek.data);\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataSeek) {\r\n        tmmApp.hideIndicator();\r\n      });\r\n\r\n  },\r\n\r\n  renderSeek: function(data, type) {\r\n    var renderData = {\r\n      seekList: data\r\n    };\r\n    var output = appFunc.renderTpl(template, renderData);\r\n    if (type === 'prepend') {\r\n      $$('#seekView').find('.tmm-seek-page-contnet ul').prepend(output);\r\n    } else if (type === 'append') {\r\n      $$('#seekView').find('.tmm-seek-page-contnet ul').append(output);\r\n    } else {\r\n      $$('#seekView').find('.tmm-seek-page-contnet ul').html(output);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 无限滚动请求\r\n   * @return {[type]} [description]\r\n   */\r\n  infiniteSeekList: function() {\r\n    // 如果还有下一页的数据的时候（即下一页的链接不为空时）才去请求获取数据\r\n    if (nextPageLink) {\r\n      // 如果正在获取数据，即滚动加载的事件还没处理完，直接返回\r\n      // 防止重复请求，获取到重复的数据\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n\r\n      httpService.getSeekList(\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          // 调用视图模型的infiniteSeekList方法进行渲染视图\r\n          seekView.infiniteSeekList(dataRes.data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      //tmmApp.showIndicator();\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        // tmmApp.alert('没有更多的数据了');\r\n        $$(\"#seekView #no-more\").css('display','inline-block');\r\n        $$(\"#seekView #no-more\").css('background', '#fff');\r\n        $$(\"#seekView #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 300);\r\n      // 没有更多数据了，即销毁到滚动加载的事件\r\n      // tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      setTimeout(function(){\r\n      \t$$(\"#seekView #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      },2000);\r\n    }\r\n  },\r\n\r\n\r\n  bindEvents: function() {\r\n    var bindings = [{\r\n      element: '#seekView',\r\n      event: 'show',\r\n      handler: seek.getSeekList\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.buttons-row .button',\r\n      event: 'click',\r\n      handler: seekView.showSubList\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.tmm-sublist a',\r\n      event: 'click',\r\n      handler: seek.getSeekSelect\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.pull-to-refresh-content',\r\n      event: 'refresh',\r\n      handler: seek.refreshSeekList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.pull-to-refresh-content',\r\n      event: 'infinite',\r\n      handler: seek.infiniteSeekList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-recommend-detail',\r\n      event: 'click',\r\n      handler: shopModule.initDetail\r\n    },{\r\n      element: '#seekView',\r\n      selector: '#tmm-seek-search .ticon-search',\r\n      event: 'click',\r\n      handler: seekSearchModule.init\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.bg-mask-seek',\r\n      event: 'click',\r\n      handler: seekView.hideSubList\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.bg-mask-seek',\r\n      event: 'touchstart',\r\n      handler: seekView.hideSubList\r\n    }, {\r\n      element: \"#seekView\",\r\n      selector: '.tmm-seek-destination', // 切换目的地\r\n      event: 'touchstart',\r\n      handler: selectDistinationModule.init\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = seek;\r\n"},{"id":93,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","name":"./src/modules/seek/seekView.js","index":93,"index2":89,"size":3888,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"./seekView","loc":"4:13-34"}],"source":"var log = require('../utils/log');\r\nvar appFunc = require('../utils/appFunc');\r\nvar template = require('./seek.tpl.html');\r\nvar listTemplate = require('../recommend/recommend.tpl.html');\r\n\r\nvar seekView = {\r\n\r\n  /**\r\n   * 获取探索主页数据\r\n   * @return {[type]} [description]\r\n   * @param {[type]} dataSeek 探索页面数据\r\n   *\r\n   * @author daixi\r\n   */\r\n  getSeekList: function(dataSeek) {\r\n\r\n    var that = this;\r\n    var renderData = {\r\n      seek: dataSeek\r\n    };\r\n\r\n\r\n    // if ($$('#seekView .seek-page').length <1) {\r\n    var output = appFunc.renderTpl(template, renderData);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      reload: true\r\n    });\r\n\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    // }\r\n\r\n  },\r\n  /**\r\n   * 显示二级导航对应的列表\r\n   * @return {[type]} [description]\r\n   */\r\n  showSubList: function() {\r\n    var that = this;\r\n    var bg_mask_seek_ele = $$('#tmm-seek-page').find(\".bg-mask-seek\");\r\n\r\n    if ($$(that).hasClass('active')) {\r\n      if (bg_mask_seek_ele.css('display') === 'none') {\r\n        bg_mask_seek_ele.css('display', 'block');\r\n      } else {\r\n        bg_mask_seek_ele.css('display', 'none');\r\n      }\r\n    } else {\r\n      bg_mask_seek_ele.css('display', 'block');\r\n    }\r\n    var index = $$(that).index();\r\n    var subList = $$(that).parent().parent().find('.tmm-seek-subbar .tmm-sublist');\r\n\r\n    subList.eq(index).css({\r\n      'maxHeight': $$('body').height() - 135 + 'px'\r\n    });\r\n\r\n    var style = subList.eq(index).css('display')\r\n    if (style == 'block') {\r\n\r\n      subList.eq(index).hide();\r\n    } else if (style == 'none') {\r\n\r\n      $$(that).parent().children().removeClass('active');\r\n      $$(that).addClass('active');\r\n      subList.hide();\r\n      subList.eq(index).show();\r\n    }\r\n\r\n  },\r\n\r\n  hideSubList: function() {\r\n    log.info(\"关闭标签\");\r\n    $$(\".bg-mask-seek\").css('display', 'none');\r\n    var subList = $$('.tmm-seek-subbar .tmm-sublist');\r\n    subList.hide();\r\n  },\r\n\r\n  /**\r\n   * 用户选择标签后展现的列表\r\n   * @param  {[type]} dataSeek 后台数据\r\n   * @return {[type]}         [description]\r\n   */\r\n  getSeekSelect: function(dataSeek) {\r\n    $$(\".bg-mask-seek\").css('display', 'none');\r\n    // 转成对象赋值给页面上\r\n    var data = {\r\n      recommend: dataSeek.list_data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#seekView').find('.tmm-seek-page-contnet ul').html(output);\r\n    // 把滚动条置顶\r\n\r\n    $$('#seekView .page-content').scrollTop(0);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  },\r\n  /**\r\n   * 刷新视图渲染\r\n   * @param  {[type]} dataList [description]\r\n   * @return {[type]}          [description]\r\n   */\r\n  refreshSeekList: function(dataList) {\r\n    var data = {\r\n      recommend: dataList.list_data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#seekView').find('.tmm-seek-page-contnet ul').html(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 100);\r\n\r\n  },\r\n  /**\r\n   * @method infiniteSeekList\r\n   * @description 无穷加载获取推荐列表后进行编译渲染\r\n   * \r\n   * @param    {Array} dataRes 点，线，觅趣的数据\r\n   * \r\n   * @author Moore Mo\r\n   * @dateTime 2015-10-24T02:15:39+0800\r\n   */\r\n  infiniteSeekList: function(dataRes) {\r\n    $$(\".bg-mask-seek\").css('display', 'none');\r\n    $$('.tmm-seek-subbar .tmm-sublist').hide();\r\n    var data = {\r\n      recommend: dataRes.list_data\r\n    };\r\n    var output = appFunc.renderTpl(listTemplate, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#seekView').find('.tmm-seek-page-contnet ul').append(output);\r\n    // 实现图片懒加载...\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n}\r\n\r\nmodule.exports = seekView;\r\n"},{"id":94,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.tpl.html","name":"./src/modules/seek/seek.tpl.html","index":94,"index2":88,"size":3774,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":93,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seekView.js","module":"./src/modules/seek/seekView.js","moduleName":"./src/modules/seek/seekView.js","type":"cjs require","userRequest":"./seek.tpl.html","loc":"3:15-41"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-seek-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n    </div>\\r\\n    <div class=\\\"center tmm-seek-destination\\\" data-type=\\\"1\\\">\\r\\n      <div>\\r\\n        <p class=\\\"tit\\\">{{js \\\"this.seek.orientation.value ? this.seek.orientation.value.address_info.name : (this.seek.location.value ? this.seek.location.value.address_info.name : '选择')\\\"}}</p>\\r\\n        <p class=\\\"sub-txt\\\">目的地</p>\\r\\n      </div>\\r\\n      <div class=\\\"arrow\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <a href=\\\"javascript:;\\\" class=\\\"link\\\" id=\\\"tmm-seek-search\\\">\\r\\n        <i class=\\\"icon ticon-search\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <!-- 二级导航栏目 -->\\r\\n    <div class=\\\"subnavbar tmm-seek-subbar\\\" style=\\\"padding: 0;\\\">\\r\\n      <div class=\\\"mian-navbar-line\\\"></div>\\r\\n      <div class=\\\"buttons-row\\\">\\r\\n        {{#each seek.search}}\\r\\n        <a href=\\\"javascript:;\\\" class=\\\"button {{#if @first}}active{{/if}}\\\" style=\\\"padding:0;\\\">{{name}}</a> {{/each}}\\r\\n      </div>\\r\\n      <!-- 二级导航选择列表 -->\\r\\n      {{#each seek.search}}\\r\\n      <div class=\\\"tmm-sublist\\\">\\r\\n        {{#each son}}\\r\\n        <span class=\\\"item\\\"><a data-link=\\\"{{link}}\\\" href=\\\"javascript:;\\\">{{name}}</a></span> {{/each}}\\r\\n      </div>\\r\\n      {{/each}}\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"seek\\\" class=\\\"page seek-page\\\" id=\\\"tmm-seek-page\\\">\\r\\n    <div class=\\\"page-content pull-to-refresh-content infinite-scroll tmm-seek-page-contnet\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-list-block\\\">\\r\\n        <ul>\\r\\n          <!-- 内容列表 -->\\r\\n          {{#each seek.list_data}}\\r\\n          <li class=\\\"tmm-item-content\\\">\\r\\n            <div class=\\\"pic\\\">\\r\\n              {{#js_compare \\\"this.classliy.value !=3\\\"}}\\r\\n              <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" class=\\\"tmm-recommend-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n              {{/js_compare}} {{#js_compare \\\"this.classliy.value ==3\\\"}}\\r\\n              <a href=\\\"javascript:;\\\" data-type=\\\"{{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\" data-link=\\\"{{link}}\\\" data-acttype=\\\"{{this.actives.actives_type.value}}\\\" class=\\\"tmm-recommend-detail\\\"><img data-src=\\\"{{image}}\\\" class=\\\"lazy lazy-fadein\\\"></a>\\r\\n              {{/js_compare}}\\r\\n            </div>\\r\\n            <div class=\\\"txt\\\">\\r\\n              <div class=\\\"title\\\"><!-- <span class=\\\"tmm-rem\\\"></span> --><span class=\\\"tit\\\">{{name}}</span></div>\\r\\n              <div class=\\\"intro\\\">{{info}}</div>\\r\\n              \\r\\n                <span class=\\\"flag type {{js \\\" this.classliy.value==1 ? 'dot' : this.classliy.value==2 ? 'line' : 'act' \\\"}}\\\">\\r\\n                    {{this.type.name}}\\r\\n                  </span>\\r\\n\\r\\n              {{#if this.distance}}\\r\\n              <span class=\\\"praise\\\"><span class=\\\"praise-distance\\\">距离</span> {{this.distance}}</span>\\r\\n              {{/if}}\\r\\n            </div>\\r\\n          </li>\\r\\n          {{else}}\\r\\n          <li class=\\\"tmm-item-content\\\">\\r\\n            <div style=\\\"margin:0 auto;padding-top:20px;text-align:center;\\\">没有相关内容！</div>\\r\\n          </li>\\r\\n          {{/each}}\\r\\n        </ul>\\r\\n        <div id=\\\"no-more\\\" style=\\\"display:none\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"bg-mask-seek infinite-scroll\\\" style=\\\"display:none\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":95,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","name":"./src/modules/search/selectDistination.js","index":95,"index2":92,"size":6210,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":92,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seek\\seek.js","module":"./src/modules/seek/seek.js","moduleName":"./src/modules/seek/seek.js","type":"cjs require","userRequest":"../search/selectDistination","loc":"7:28-66"},{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"../search/selectDistination","loc":"21:22-60"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  selectTpl = require('./select-distination.tpl.html'),\r\n  bridge = require('../utils/pageBridge'),\r\n  selectSearchTpl = require('./select-search-distination.tpl.html');\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n\r\nvar type = '';\r\nvar typeValue = '';\r\n\r\n// 本页数据\r\nvar data = {};\r\n// 过滤数据\r\nvar dataFilter = {};\r\n\r\nvar disType = \"\";\r\nvar disPos = 0;\r\n\r\nvar selectDistination = {\r\n  init: function() {\r\n    if($$(this).attr('data-type')){\r\n      disType = 1;\r\n      disPos = 1;\r\n    }\r\n    appFunc.hideToolbar();\r\n    selectDistination.getSeekSearchList();\r\n    selectDistination.bindEvent();\r\n  },\r\n\r\n  getSeekSearchList: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n\r\n    httpService.getAreaList(function(dataRes) {\r\n\r\n      if (dataRes.status == 1) {\r\n        data = dataRes.data;\r\n        data.loactionCity = window.device.location.city;\r\n        if(disType == 1){\r\n          data.disTitle = \"切换目的地\";\r\n        } else {\r\n          data.disTitle = \"选择目的地\";\r\n        }\r\n        data.disPos = disPos;\r\n        var output = appFunc.renderTpl(selectTpl, data);\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        disType = \"\";\r\n        disPos = 0;\r\n        tmmApp.hideIndicator();\r\n\r\n      }\r\n\r\n    }, function(dataRes) {\r\n\r\n    })\r\n\r\n  },\r\n\r\n  showSearchBar: function() {\r\n\r\n    dataFilter = data.list_data;\r\n    \r\n    var output = appFunc.renderTpl(selectSearchTpl, dataFilter);\r\n\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      reload: true\r\n    });\r\n    tmmApp.hideIndicator();\r\n  },\r\n\r\n  showCityList: function() {\r\n\r\n    var output = appFunc.renderTpl(selectTpl, data);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output,\r\n      reload: true\r\n    });\r\n    tmmApp.hideIndicator();\r\n  },\r\n\r\n  selectCity: function() {\r\n    var url = $$(this).attr('data-link');\r\n    var address = $$(this).html();\r\n    httpService.setSelectCity(\r\n      url,\r\n      function(dataRes) {\r\n        \r\n        bridge.add('selectDistiantion',function(){\r\n          return address;\r\n        })\r\n\r\n        tmmApp.getCurrentView().router.back();\r\n      },\r\n      function(dataRes) {\r\n        // body...\r\n      })\r\n\r\n  },\r\n  filterCity: function() {\r\n\r\n\r\n    var inputValue = this.value;\r\n    var filter = [];\r\n    var _html = '';\r\n    var re = new RegExp(\"^\" + inputValue, \"i\");\r\n    var arrayData = selectDistination.json2Array(dataFilter);\r\n\r\n    if (inputValue == '') {\r\n      for (attr in dataFilter) {\r\n        _html += '<div class=\"city-list-tit\">' + attr + '</div><div class=\"city-list-con\">'\r\n        for (var i = 0; i < dataFilter[attr].length; i++) {\r\n          _html += '<p class=\"select-city-confirm\" data-id=\"' + dataFilter[attr][i]['value'] + '\" data-link=\"' + dataFilter[attr][i]['link'] + '\">' + dataFilter[attr][i]['name'] + '</p>';\r\n        };\r\n        _html += '</div>';\r\n      }\r\n    } else {\r\n      filter = arrayData.filter(function(value) {\r\n        return re.test(value.spell) || value.name.match(inputValue);\r\n      })\r\n\r\n      _html += '<div class=\"city-list-con\">'\r\n      for (var i = 0; i < filter.length; i++) {\r\n        _html += '<p class=\"select-city-confirm\" data-id=\"' + filter[i]['value'] + '\" data-link=\"' + filter[i]['link'] + '\">' + filter[i]['name'] + '</p>';\r\n      }\r\n      if (filter.length <= 0) {\r\n        _html += '没有相关城市'\r\n      }\r\n      _html += '</div>';\r\n    }\r\n\r\n    log.info('filterCity...', _html);\r\n\r\n    $$('.city-list').html(_html);\r\n  },\r\n  json2Array: function(json) {\r\n    var arr = [];\r\n    var i = 0;\r\n\r\n    for (var attr in json) {\r\n      arr = arr.concat(json[attr]);\r\n    }\r\n\r\n    return arr;\r\n  },\r\n  // 设置gps定位城市\r\n  setLocationCity: function() {\r\n    var address = $$(this).html();\r\n    appFunc.getDeviceLocation(function(dataLoation) {\r\n      httpService.setGPSCity({\r\n         \"location\": {\r\n          \"lng\": dataLoation.lng,\r\n          \"lat\": dataLoation.lat\r\n        }\r\n      }, function(dataRes) {\r\n\r\n\r\n        bridge.add('selectDistiantion', function(){\r\n          return address;\r\n        })\r\n\r\n        tmmApp.getCurrentView().router.back();\r\n      \r\n      }, function(dataRes) {\r\n       \r\n      });\r\n\r\n\r\n    },function() {\r\n      tmmApp.alert('获取位置信息失败');\r\n    })\r\n    \r\n    \r\n\r\n  },\r\n  bindEvent: function() {\r\n\r\n    var bindings = [{\r\n      element: '#seekView',\r\n      selector: '.tmm-show-select-city',\r\n      event: 'click',\r\n      handler: selectDistination.showSearchBar\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-select-distination-cancel',\r\n      event: 'click',\r\n      handler: selectDistination.showCityList\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.select-city-confirm',\r\n      event: 'click',\r\n      handler: selectDistination.selectCity\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-seek-distination-input',\r\n      event: 'input',\r\n      handler: selectDistination.filterCity\r\n    }, {\r\n      element: '#seekView',\r\n      selector: '.tmm-get-location-to-set-location',\r\n      event: 'click',\r\n      handler: selectDistination.setLocationCity\r\n    },{\r\n      element: '#myView',\r\n      selector: '.tmm-show-select-city',\r\n      event: 'click',\r\n      handler: selectDistination.showSearchBar\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-select-distination-cancel',\r\n      event: 'click',\r\n      handler: selectDistination.showCityList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.select-city-confirm',\r\n      event: 'click',\r\n      handler: selectDistination.selectCity\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-seek-distination-input',\r\n      event: 'input',\r\n      handler: selectDistination.filterCity\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-get-location-to-set-location',\r\n      event: 'click',\r\n      handler: selectDistination.setLocationCity\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = selectDistination;\r\n"},{"id":96,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\select-distination.tpl.html","name":"./src/modules/search/select-distination.tpl.html","index":96,"index2":90,"size":2066,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"./select-distination.tpl.html","loc":"4:14-54"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"index.html\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">{{disTitle}}</div>\\r\\n    <div class=\\\"right\\\"></div>\\r\\n    <div class=\\\"subnavbar tmm-select-distination-subbar\\\">\\r\\n      <div class=\\\"subnavbar-center\\\">\\r\\n        <i class=\\\"icon ticon-search\\\"></i>\\r\\n        <input type=\\\"search\\\" readonly placeholder=\\\"请输入城市名、拼音、首字母\\\" class=\\\"tmm-seek-searchbar-input tmm-show-select-city\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"select-distination\\\" class=\\\"page select-distination\\\">\\r\\n    <div class=\\\"page-content infinite-scroll\\\" style=\\\"padding-top: 80px;\\\">\\r\\n      <div class=\\\"select-city\\\">\\r\\n        {{#js_compare \\\"this.disPos == '1'\\\"}}\\r\\n        <div class=\\\"my-place\\\">\\r\\n          <h3>我的位置</h3>\\r\\n          <span class=\\\"tmm-get-location-to-set-location\\\">\\r\\n          {{#if location.value}}\\r\\n            {{location.value.address_info.name}} \\r\\n          {{else}}\\r\\n            定位失败\\r\\n          {{/if}}\\r\\n          </span>\\r\\n        </div>\\r\\n        {{/js_compare}}\\r\\n        <div class=\\\"hot-city\\\">\\r\\n          <h3>热门城市</h3> {{#each this.hot_city}}\\r\\n          <span class=\\\"select-city-confirm\\\" data-id=\\\"{{this.value}}\\\" data-link=\\\"{{this.link}}\\\">{{this.name}}</span> {{/each}}\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"city-list\\\">\\r\\n        {{#each this.list_data}}\\r\\n        <div class=\\\"city-list-tit\\\">{{@key}}</div>\\r\\n        <div class=\\\"city-list-con\\\">\\r\\n          {{#each this}}\\r\\n          <p class=\\\"select-city-confirm\\\" data-id=\\\"{{this.value}}\\\" data-link=\\\"{{this.link}}\\\">{{this.name}}</p>\\r\\n          {{/each}}\\r\\n        </div>\\r\\n        {{else}}\\r\\n        <div class=\\\"city-list-con\\\">\\r\\n          没有相关城市\\r\\n        </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":97,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\select-search-distination.tpl.html","name":"./src/modules/search/select-search-distination.tpl.html","index":97,"index2":91,"size":1446,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":95,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\search\\selectDistination.js","module":"./src/modules/search/selectDistination.js","moduleName":"./src/modules/search/selectDistination.js","type":"cjs require","userRequest":"./select-search-distination.tpl.html","loc":"6:20-67"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"center tmm-sou-center\\\">\\r\\n      <form class=\\\"searchbar searchbar-init tmm-seek-searchbar\\\">\\r\\n        <div class=\\\"searchbar-input tmm-seek-select-city-searchbar\\\">\\r\\n          <i class=\\\"icon ticon-search tmm-searchbar-search\\\"></i>\\r\\n          <input type=\\\"search\\\" placeholder=\\\"请输入城市名、拼音、首字母\\\" autofocus=\\\"autofocus\\\" class=\\\"tmm-seek-distination-input\\\">\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n    <div class=\\\"right tmm-sou-right\\\">\\r\\n      <a class=\\\"link tmm-select-distination-cancel\\\">\\r\\n        取消\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"select-search-distination\\\" class=\\\"page select-distination\\\">\\r\\n    <div class=\\\"searchbar-overlay\\\"></div>\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"city-list\\\">\\r\\n        {{#each this}}\\r\\n          <div class=\\\"city-list-tit\\\">{{@key}}</div>\\r\\n          <div class=\\\"city-list-con\\\">\\r\\n            {{#each this}}\\r\\n            <p class=\\\"select-city-confirm\\\" data-spell={{this.spell}} data-id=\\\"{{this.value}}\\\" data-link=\\\"{{this.link}}\\\">{{this.name}}</p>\\r\\n            {{/each}}\\r\\n          </div>\\r\\n        {{else}}\\r\\n          <div class=\\\"city-list-con\\\">\\r\\n            没有相关城市\\r\\n          </div>\\r\\n        {{/each}}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":98,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","name":"./src/modules/my/my.js","index":98,"index2":153,"size":6997,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./my/my","loc":"14:13-31"},{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../my/my","loc":"4:13-32"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  loginModule = require('../login/login'),\r\n  myViewModel = require('./myView'),\r\n  myInfoModule = require('../myInfo/myInfo'),\r\n  orderModule = require('../order/order'),\r\n  roleModule = require('../role/role'),\r\n  myPraiseModule = require('../myPraise/myPraise'),\r\n  actModule = require('../createAct/activity'),\r\n  joinActModule = require('../order/joinAct'),\r\n  bankModule = require('./bank'),\r\n  cashModule = require('./cash'),\r\n  my_wallet_tpl = require('./my-wallet.tpl.html'),\r\n  draw_money_tpl = require('./draw-money.tpl.html');\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 保存已绑定的银行卡信息\r\n * @type {Object}\r\n */\r\nvar bankCardInfo = {};\r\n/**\r\n * 保存钱包\r\n * @type {Object}\r\n */\r\nvar burserInfo = {};\r\n\r\n\r\nvar my = {\r\n  init: function() {\r\n    appFunc.showToolbar();\r\n    my.bindEvent();\r\n  },\r\n  lodeMyInfoView: function() {\r\n    appFunc.exitSeekFresh();\r\n    my.init();\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n        // 调用视图模型的loadMyInfoView方法进行渲染视图\r\n        myViewModel.loadMyInfoView(dataRes);\r\n        // 已经登录\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  relodeMyInfoView: function() {\r\n    //$$(\"#myView\").find('.navbar-inner.navbar-on-center.cached').removeClass('cached');\r\n    //my.bindEvent();\r\n    my.lodeMyInfoView();\r\n  },\r\n  /**\r\n   * @method logout\r\n   * @description 退出登录\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T14:57:37+0800\r\n   */\r\n  logout: function() {\r\n    tmmApp.confirm('', '是否要退出?', function() {\r\n      httpService.logout(\r\n        function(dataRes, status) {\r\n          if (dataRes.status == 1) {\r\n            // 成功退出后，回到登录页面\r\n            //meView.router.loadPage('tpls/login.html');\r\n            appFunc.clearLocalUserInfo();\r\n            appFunc.exitRemoveAllCookie();\r\n            loginModule.loginView();\r\n          } else {\r\n            // 弹框提示\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.alert('网络超时，请重试');\r\n          log.error('dataRes', dataRes, 'status', status);\r\n        }\r\n      );\r\n    });\r\n\r\n  },\r\n  /**\r\n   * @method showWallet\r\n   * @description  加载我的钱包\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:30:13+0800\r\n   */\r\n  showWallet: function() {\r\n    var noBank = true;\r\n    // 查询钱包信息\r\n    var getWalletinfo = function() {\r\n      httpService.getBurseInfo(\r\n        function(dataRes, statusCode) {\r\n          if (dataRes.status == 1) {\r\n            appFunc.hideToolbar();\r\n            tmmApp.hideIndicator();\r\n            var data = {\r\n              'walletObj': dataRes.data,\r\n              'noBank': noBank\r\n            };\r\n            // 保存钱包信息\r\n            burserInfo = dataRes.data;\r\n            var output = appFunc.renderTpl(my_wallet_tpl, data);\r\n            tmmApp.getCurrentView().router.load({\r\n              content: output\r\n            });\r\n            // 初始化银行管理模块\r\n            bankModule.init();\r\n          } else {\r\n            tmmApp.hideIndicator();\r\n            if ('login' in dataRes.data) {\r\n              roleModule.redirectToLogin();\r\n            } else {\r\n              tmmApp.alert('网络超时，请重试');\r\n            }\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n      );\r\n    };\r\n    // 查询绑定的银行卡信息\r\n    tmmApp.showIndicator();\r\n    httpService.bankCardList(\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          noBank = false;\r\n          // 保存已绑定的银行卡信息\r\n          bankCardInfo = dataRes.data[0];\r\n        } else {\r\n          bankCardInfo = {};\r\n        }\r\n        getWalletinfo();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method drawMoney\r\n   * @description 提现申请\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T17:09:37+0800\r\n   */\r\n  drawMoney: function() {\r\n    // 查询绑定的银行卡信息\r\n    tmmApp.showIndicator();\r\n    httpService.bankCardList(\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          var data = {\r\n            'bankCardInfo': dataRes.data[0],\r\n            'burserInfo': burserInfo\r\n          };\r\n          var output = appFunc.renderTpl(draw_money_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n          // 初始化提现模块\r\n          cashModule.init();\r\n        } else {\r\n          tmmApp.alert('您还未绑定银行卡');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * [bindEvent description]\r\n   * @return {[type]} [description]\r\n   */\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      event: 'show',\r\n      handler: my.lodeMyInfoView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-login',\r\n      event: 'click',\r\n      handler: loginModule.loginView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-info',\r\n      event: 'click',\r\n      handler: myInfoModule.getUserInfo\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.login-out',\r\n      event: 'click',\r\n      handler: my.logout\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-praise',\r\n      event: 'click',\r\n      handler: myPraiseModule.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-order',\r\n      event: 'click',\r\n      handler: orderModule.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#add-setting',\r\n      event: 'click',\r\n      handler: my.addsett\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-activity',\r\n      event: 'click',\r\n      handler: actModule.loadActivity\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-join-act',\r\n      event: 'click',\r\n      handler: joinActModule.loadJoinActList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-wallet',\r\n      event: 'click',\r\n      handler: my.showWallet\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-draw-menoy',\r\n      event: 'click',\r\n      handler: my.drawMoney\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-trade',\r\n      event: 'click',\r\n      handler: cashModule.tradeRecord\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-draw-money-record',\r\n      event: 'click',\r\n      handler: cashModule.drawMoneyRecord\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = my;\r\n"},{"id":99,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\myView.js","name":"./src/modules/my/myView.js","index":99,"index2":96,"size":1293,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"./myView","loc":"5:16-35"}],"source":"/**\r\n * @name myView\r\n * @description 我的视图模型模块\r\n * \r\n * @author Moore Mo\r\n * @dateTime 2015-10-24T02:09:03+0800\r\n */\r\nvar log = require('../utils/log'),\r\n  appFunc = require('../utils/appFunc'),\r\n  template = require('./my.tpl.html');\r\n\r\nvar myView = {\r\n  /**\r\n   * @method loadMyInfoView 渲染用户信息\r\n   * @param    {Object} dataRes 用户数据\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-27T10:04:06+0800\r\n   */\r\n  loadMyInfoView: function(dataRes) {\r\n    // 删除缓存中重复的值\r\n    appFunc.removeCachedPage('myView', 'my');\r\n    var renderData = {\r\n      isLogin: false,\r\n      userInfo: {},\r\n    };\r\n\r\n\r\n    if (dataRes.status == 1) {\r\n      var renderData = {\r\n        isLogin: true,\r\n        userInfo: dataRes.data.userInfo,\r\n      };\r\n\r\n      var uInfo = {\r\n        'phone': dataRes.data.userInfo.phone,\r\n        'gender': dataRes.data.userInfo.gender,\r\n        'is_organizer': dataRes.data.userInfo.is_organizer,\r\n        'organizer_status': dataRes.data.userInfo.organizer.status\r\n      };\r\n      // 更新本地缓存的用户信息\r\n      appFunc.setLocalUserInfo(uInfo);\r\n    } else {\r\n      // 清除本地缓存的用户信息\r\n      appFunc.clearLocalUserInfo();\r\n    }\r\n\r\n    var output = appFunc.renderTpl(template, renderData);\r\n\r\n    $$('#myView').find('.tmm-my-page-contnet').html(output);\r\n  }\r\n};\r\n\r\nmodule.exports = myView;\r\n"},{"id":100,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.tpl.html","name":"./src/modules/my/my.tpl.html","index":100,"index2":95,"size":1561,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\myView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":99,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\myView.js","module":"./src/modules/my/myView.js","moduleName":"./src/modules/my/myView.js","type":"cjs require","userRequest":"./my.tpl.html","loc":"10:13-37"}],"source":"module.exports = \"{{#if isLogin}}\\r\\n<!-- 已登录 -->\\r\\n<div class=\\\"item-top-to list-block media-list tmm-logo-list-block no-border\\\">\\r\\n  <ul class=\\\"tmm-my-login-ul\\\">\\r\\n    <li>\\r\\n      <div class=\\\"item-content\\\">\\r\\n        <a href=\\\"javascript:;\\\" id=\\\"tmm-my-info\\\">\\r\\n          <div class=\\\"item-media\\\">\\r\\n            <img src=\\\"\" + require(\"../../styles/images/header.png\") + \"\\\"/>\\r\\n            <span class=\\\"item-title\\\">{{userInfo.phone}}</span>\\r\\n          </div>\\r\\n        </a>\\r\\n        <div class=\\\"item-after\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"login-out\\\">退出</a>\\r\\n        </div>\\r\\n      </div>\\r\\n    </li>\\r\\n  </ul>\\r\\n</div>\\r\\n{{else}}\\r\\n<!-- 未登录 -->\\r\\n<a href=\\\"javascript:;\\\" id=\\\"tmm-my-login\\\">\\r\\n  <div class=\\\"item-top\\\">\\r\\n    <div class=\\\"item-canter-login\\\">快速登录帐号</div>\\r\\n  </div>\\r\\n</a>\\r\\n{{/if}}\\r\\n\\r\\n<div class=\\\"tmm-con-icon\\\">\\r\\n  <div class=\\\"col-33\\\" id=\\\"tmm-my-order\\\"><i class=\\\"icon ticon-order-outline\\\"></i><p>我的订单</p></div>\\r\\n  <div class=\\\"col-33\\\" id=\\\"tmm-my-wallet\\\"><i class=\\\"icon ticon-qianbao\\\"></i><p>我的钱包</p></div>\\r\\n  <div class=\\\"col-33\\\" id=\\\"tmm-my-join-act\\\"><i class=\\\"icon ticon-active\\\"></i><p>我参加的觅趣</p></div>\\r\\n  <div class=\\\"col-33\\\" id=\\\"tmm-my-praise\\\"><i class=\\\"icon ticon-praise\\\"></i><p>我的赞</p></div>\\r\\n  <div class=\\\"col-33\\\" id=\\\"tmm-my-activity\\\"><i class=\\\"icon ticon-flag-outline\\\"></i><p>我发起的觅趣</p></div>\\r\\n  {{#js_compare \\\"this.userInfo.is_organizer == 1\\\"}}\\r\\n  {{/js_compare}}\\r\\n</div>\\r\\n\\r\\n<span class=\\\"version\\\">版本号：V1.2.6</span>\\r\\n\\r\\n\\r\\n\";"},{"id":101,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\header.png","name":"./src/styles/images/header.png","index":101,"index2":94,"size":3425,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":100,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.tpl.html","module":"./src/modules/my/my.tpl.html","moduleName":"./src/modules/my/my.tpl.html","type":"cjs require","userRequest":"../../styles/images/header.png","loc":"1:345-386"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAJTUlEQVR42u2deWwU1x3HPzvrexcfgI3BBNtgwLQ1tjFdKJQ0weVymSit1KrhyJKkalChqlqp0Cr5J4JEIalatU2boIZjAi2VqqokixRCClQkJWKABnAwhnAYjMEBbMD4PvvHjMHYu+udfW93TJKPhBbtznzf+30917t+48BGvD7PSKAYmAzkm59ZwAggCXAD7UAjcMv8vAacBirNz481Vb9hVwyOKBuWBJQCc4FHgakS6tADnAD2A/uAvZqqN0crpogb6PV5FGAesAJQAVeEi2wCfMBW4H1N1bsjWVjEDPT6PG7gR8DPgJxIBhGEKuD3wJuaqjdGogDpBnp9nkRgNbAGGBlJdyxwA3gV+KOm6i0yhaUa6PV5fghsAMZFzxtLXALWaqr+d1mCUgz0+jzZwBvAQpuMscp7wLOaql8UFVJEBbw+zzKMu+CDYh7AAuCEWXchwj4CvT5PAvAn4Gm73RBkM7BKU/XWcHYOy0Cvz5MB7AS+YXf0kvgIeFxT9WtWd7RsoNfnyQXeBybYHbVkzgHzNFW/YGUnSwZ6fZ4pwL+BMXZHGyGuAN/WVP1UqDuEbKDX58nDaC6NtTvKCHMZeERT9XOhbBySgV6fJx04COTZHV2UOAvM0lT9+mAbDvoY4/V54jDall8U8zBj9ZmxByWU58A/AzPsjsgGZmA8pgUl6ClsPmhuszsSm1mmqfpfA/0Y0ECzeXYCSLY7AptpAKYGavbFBNlxI4LmxSrxLMtfw+S0aXT3dFJe9xHvVm3jVtug1+awSI1PZ1HOkxSMmIniiOH0zaNsr3yFju52Edlk0wu/TVWnvy/NXpW1ogGVPvR9Hs56nFgljjhnAmPdeczMXEh146fUtV6Val5+WgmrC18lN3kKcc4EYpU4Ml3ZNHc2UtVQISqfV7Qk68zxHTWf9P9hwE3E7HbfICOoovSHB3yXGOPi2YL1lGQ8Ks28aRmP8OOCdSTGDOzsLvZThzB52fTmPvzdhVcjoT8vKWYYWW7/rT2nI4Zl+WtZkL0Uh0CPmgMHC7KX8uSUX+N0+L8ajUue7NfYMBhnehPYQLMb/pcySstOzg9qjuJQKMvxsnLqS7hjUyzru2NTWFnwImU53qDlOHAwbthkGSEBrDE98m8g8BSSuuEDHX39yU8rYU3J60xMLQxZe2JqIWtKXid/+PSQth8bYl1CYITp0V3uGmiOnv1cVkmjXTkhb5sSP5KfTN1AWc4KFIcz4HaKw8l3clewqvAVUuJD/ztbqUsI/ML0Crj/MWYekCurlPQEax02ikNhQfYSvjZiBkev7edy41ka2usBSI4bzlh3HiUZc8lyj7del8QsmQbmAPOB3f0NXCGzlPSk8DptstwTQj79Q66LXAPB8Go3mKeweXtWZamnxWeQFOMWF5KEKzaF1Ph0mZKLvT6PC+5dA+cjccbA+JSvRs+dEMlN/opMORfGJe+ugVJH1GaNLouOKxaYPWaxbMmFcM/AubJUPaPmkWfhkSRaTEwtZPqoUpmScwEc5gjbZzIUXbEpPPf1Tbhih2YHTlPHbV48/AxNHQ2yJEcpwDRZaotznxqy5oHxBy7L8cqULFGAIhlKmUnZzMxcYIcvlpg1uoxRSdKm7hQqSBrrWJizLGgrYqigOJwszBae0dFLnoKE1kd6YpbfrquhSlH6w4xMlDK0PV5BwiD5nKzHhLqloo3iUJgz5jEZUqMVYLiIgtMRQ0mGtKegqDF9VGnAPkQLDFeARBGFSWnFYfXn2Y07NsVSF1oAkhRgmIjCxNQiu70Im0lpxaISbgVjHUbY5KUU2O1D2OQmi7fZFeCOiMDIxNF2+xA2aQnCPTSNwga6HsDrXy/JcUL3T4BmYQPbuqSuGogqbV1hzertS70CCE0TuNFyxW4fwo++tVZUolYBLE1p7c/FO6ft9iH8ujdUikqcUzAmE4bN6Zv/s9uH8Ot+62NRibMKcExE4VT9YTq62+z2wjLt3W1U1h8RlTmhAEKHUFtXC8euf2C3H5Y5dv2AjBvgEcVcGyF0Gh+oedtuPyzzYc07ohKfaqp+rXdMZJ+I0qU7p2WcDlGjsv6IjJvfPrg3qPSuqNrb5/9Cd09E1zZLobunm3cuvClD6t7AOsbKoyYRtStNFzhQs9NWc0LhQM1OahrPi8o0YXhmGKipehOwS1R114UtfNZ8yW6PAlLbfJFdFzbLkNplenbf9Latoqod3W1sPrmOlk6hgzkitHQ2sfnkOtH50r1s7f1PXwP3YOQYEKK2+SJvnXqJrp7OaHsUkK6eTrZWrJd1dlzE8AroY6CZ3eK3MkqoqD/Mlor1Q8LErp5ONp18gcqbR2VJ/q5vJpD+M1S3AHUySim/cZCN5c/T0hmRZBkh0dLZyMby5zlZd0iWZB2wqe8X9w3kHt9R0160JAvMmUfCpbVe5fiNDxk3bLLs6WWDUtVQwRvlz1F954xM2Rc0Vd/f94sBY5HmXMFTSMy8oTgUvpX1PRblLCfeKTSGNSitXc3srtrOfy7/kx56ZEpfAqb0z4rkdzDX6/M8AfxNdnCu2BRKH/oB3xyzWLqRrV3N/PfKLvZW/4Omjtuyqw6wVFP1AZ4EWyu3GyO7hXTinYkUpc9hekYpE1ILwh6f7ezu4PztTzhybS/Hrn8Qyd7xPZqq+/UiWM1XAseJwGLDtq4WDtXu4VDtHuKUeManFpCbPIXMpBxGJGSSHJdGYoybOGcCAO1drbR0NtLQfpO61lquNlVRdecU52+V0x75rrQG0wu/DLbcdTnwVqRrOMRZrqn69kA/Bl1wran6Nvrdtr9gbApmHoS2Yn0VIO1B6gHikBl7UL5MOuEfeUknAEyhRUCN3ZFFgcvAolDMAwvJxzRVP4vRQqm2O8IIUg3MN2MNCUvZ28yMPrMB4SXgQ5AKYLaVrEUQRvo7TdWrgTkY18TPCweBOWZslggrf6Cm6vUYC01esztyCbwGzDVjsozwxGavz/NdjBx8qXY7YZFbwNOaqv9LREQ4g6VZgSKMtJoPCu8BxaLmgfwktE8ALzO0k9D+SlP1HbIEI5UG+acYySuGUhrk3wB/GNJpkPvi9XmGAc8wNBJxb9JUXWgiaSC+TAUviF0vIyjFeBlBgYQ69ADlGNk19/J5exlBMMxOimJgEgNfh+Hi3tHaZP6rw2iP974O4wzG6zAik80sBP4PWX6fXTz73YAAAAAASUVORK5CYII=\""},{"id":102,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","name":"./src/modules/myInfo/myInfo.js","index":102,"index2":100,"size":7155,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":24,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\router.js","module":"./src/modules/router.js","moduleName":"./src/modules/router.js","type":"cjs require","userRequest":"./myInfo/myInfo","loc":"15:17-43"},{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../myInfo/myInfo","loc":"6:17-44"},{"moduleId":106,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","module":"./src/modules/myInfo/addRetinue.js","moduleName":"./src/modules/myInfo/addRetinue.js","type":"cjs require","userRequest":"./myInfo","loc":"3:11-30"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  template = require('./myinfo.tpl.html'),\r\n  httpService = require('../services/httpService'),\r\n  loginModule = require('../login/login'),\r\n  modifyModule = require('../modifyPhone/modifyPhone'),\r\n  addRetinue = require('./addRetinue'),\r\n  modifyPwdModule = require('../modifyPwd/modifyPwd');\r\n\r\n\r\n\r\nvar myInfo = {\r\n\r\n  init: function() {\r\n    myInfo.bindEvent();\r\n  },\r\n  /**\r\n   * 获取用户信息\r\n   * @return {[type]} [description]\r\n   * @author 唐亚敏\r\n   */\r\n  getUserInfo: function() {\r\n    myInfo.init();\r\n    log.info('myInfo-getUserInfo-init');\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n        //接收数据\r\n        var infoData = {\r\n          userInfo: dataRes.data.userInfo,\r\n          main_retinueInfo: dataRes.data.main_retinueInfo.list,\r\n          retinueInfo: dataRes.data.retinueInfo.list,\r\n          tagsInfo: dataRes.data.tagsInfo,\r\n          noMain: true,\r\n          noOther: true\r\n        };\r\n\r\n        //保存电话号码、是否设置了密码\r\n        localStorage.setItem(\"phone\", infoData.userInfo.phone);\r\n        localStorage.setItem(\"is_set\", infoData.userInfo.is_set);\r\n\r\n        log.info('myInfo-data-', infoData);\r\n\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n\r\n        //回填模板\r\n        var output = appFunc.renderTpl(template, infoData);\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        appFunc.hideToolbar();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n  /**\r\n   * 刷新用户信息\r\n   * @return {[type]} [description]\r\n   * @author 唐亚敏\r\n   */\r\n  refreshUserInfo: function() {\r\n    myInfo.init();\r\n    log.info('myInfo-getUserInfo-init');\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getUserInfo(\r\n      function(dataRes, statusCode) {\r\n        //接收数据\r\n        var infoData = {\r\n          userInfo: dataRes.data.userInfo,\r\n          main_retinueInfo: dataRes.data.main_retinueInfo.list,\r\n          retinueInfo: dataRes.data.retinueInfo.list,\r\n          tagsInfo: dataRes.data.tagsInfo,\r\n          noMain: true,\r\n          noOther: true\r\n        };\r\n\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        //回填模板\r\n        var output = appFunc.renderTpl(template, infoData);\r\n\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output,\r\n          reload: true,\r\n          animatePages: false\r\n        });\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n\r\n  /**\r\n   * [changeGender 修改性别]\r\n   * @return {[type]} [description]\r\n   * @author 唐亚敏\r\n   */\r\n  changeGender: function() {\r\n    log.info(\"changeGender-init\");\r\n    //原来的昵称 \r\n    var nickname = $$('#nickname').text(),\r\n      post_gender = '0';\r\n    //选择按钮\r\n    var buttons = [{\r\n      text: '男',\r\n      onClick: function() {\r\n        var dataObj = {\r\n          \"User\": {\r\n            \"nickname\": nickname,\r\n            \"gender\": \"1\"\r\n          }\r\n        };\r\n        httpService.updateUserInfo(\r\n          dataObj,\r\n          function(dataRes, statusCode) {\r\n            if (dataRes.status == 1) {\r\n              myInfo.refreshUserInfo();\r\n            } else {\r\n              if (dataRes.form) {\r\n                for (msgName in dataRes.form) {\r\n                  tmmApp.alert(dataRes.form[msgName][0]);\r\n                  break;\r\n                }\r\n              } else {\r\n                tmmApp.alert('网络超时，请重试');\r\n              }\r\n            }\r\n          },\r\n          function(dataRes, statusCode) {\r\n            tmmApp.alert('网络超时，请重试');\r\n          });\r\n      } /*onClick*/\r\n    }, {\r\n      text: '女',\r\n      onClick: function() {\r\n        var dataObj = {\r\n          \"User\": {\r\n            \"nickname\": nickname,\r\n            \"gender\": \"2\"\r\n          }\r\n        };\r\n        httpService.updateUserInfo(\r\n          dataObj,\r\n          function(dataRes, statusCode) {\r\n            if (dataRes.status == 1) {\r\n              myInfo.refreshUserInfo();\r\n            } else {\r\n              if (dataRes.form) {\r\n                for (msgName in dataRes.form) {\r\n                  tmmApp.alert(dataRes.form[msgName][0]);\r\n                  break;\r\n                }\r\n              } else {\r\n                tmmApp.alert('网络超时，请重试');\r\n              }\r\n            }\r\n          },\r\n          function(dataRes, statusCode) {\r\n            tmmApp.alert('网络超时，请重试');\r\n          });\r\n      }\r\n    }, {\r\n      text: '取消',\r\n      color: 'red'\r\n    }, ];\r\n\r\n    tmmApp.actions(buttons);\r\n  },\r\n  /**\r\n   * [updateUserInfo 修改用户信息]\r\n   * @return {[type]} [description]\r\n   * @author 唐亚敏\r\n   */\r\n  updateUserInfo: function() {\r\n    log.info(\"changeNickname-init-\");\r\n    //原来的昵称 、性别\r\n    var nickname = $$('#nickname').text(),\r\n      gender = $$('#gender').text();\r\n    var post_gender = '0';\r\n    //性别的文字装换为数字\r\n    if (gender == \"保密\") {\r\n      post_gender = '0';\r\n    } else if (gender == \"男\") {\r\n      post_gender = '1';\r\n    } else if (gender == \"女\") {\r\n      post_gender = '2';\r\n    }\r\n    log.info(\"nickname-\", nickname, \"gender\", gender, \"post_gender\", post_gender);\r\n    tmmApp.prompt('', '修改昵称', function(data) {\r\n      // @data contains input value\r\n      log.info(\"new-nickname-\", dataObj);\r\n      if (appFunc.getCharLength(data) < 2 || appFunc.getCharLength(data) > 11) {\r\n        tmmApp.alert(\"昵称 必须是2-11位字符组成\");\r\n        return false;\r\n      } else {\r\n        var dataObj = {\r\n          \"User\": {\r\n            \"nickname\": data,\r\n            \"gender\": post_gender\r\n          }\r\n        };\r\n        httpService.updateUserInfo(\r\n          dataObj,\r\n          function(dataRes, statusCode) {\r\n            if (dataRes.status == 1) {\r\n              myInfo.refreshUserInfo();\r\n            } else {\r\n              if (dataRes.form) {\r\n                for (msgName in dataRes.form) {\r\n                  tmmApp.alert(dataRes.form[msgName][0]);\r\n                  break;\r\n                }\r\n              } else {\r\n                tmmApp.alert('网络超时，请重试');\r\n              }\r\n            }\r\n          },\r\n          function(dataRes, statusCode) {\r\n            tmmApp.alert('网络超时，请重试');\r\n          });\r\n      }\r\n    });\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.myinfo-retinue',\r\n      event: 'click',\r\n      handler: addRetinue.showView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.changeGender',\r\n      event: 'click',\r\n      handler: myInfo.changeGender\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.changeNickname',\r\n      event: 'click',\r\n      handler: myInfo.updateUserInfo\r\n    }, {\r\n      // 修改手机号码\r\n      element: '#myView',\r\n      selector: '#modify-phone',\r\n      event: 'click',\r\n      handler: modifyModule.showView\r\n    }, {\r\n      // 修改密码\r\n      element: '#myView',\r\n      selector: '#modify_pwd',\r\n      event: 'click',\r\n      handler: modifyPwdModule.showView\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = myInfo;\r\n"},{"id":103,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myinfo.tpl.html","name":"./src/modules/myInfo/myinfo.tpl.html","index":103,"index2":97,"size":3565,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"./myinfo.tpl.html","loc":"3:13-41"},{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"../myInfo/myinfo.tpl.html","loc":"5:19-55"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">我的信息</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"myInfo\\\" class=\\\"page tmm-my-info-page\\\">\\r\\n    <div class=\\\"page-content tmm-myinfo-page-contnet\\\">\\r\\n      <div class=\\\"list-block tmm-myinfo-item-info\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner changeNickname\\\">\\r\\n              <div class=\\\"item-title\\\">昵称</div>\\r\\n              <div class=\\\"item-after\\\">\\r\\n                <span class=\\\"side_txt changeNickname\\\" id=\\\"nickname\\\">{{userInfo.nickname}}</span>\\r\\n                <i class=\\\"icon ticon-arrow-right\\\"></i>\\r\\n\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner changeGender\\\">\\r\\n              <div class=\\\"item-title\\\">性别</div>\\r\\n              <div class=\\\"item-after\\\">\\r\\n                <span class=\\\"side_txt\\\" id=\\\"gender\\\">{{js \\\"this.userInfo.gender==0 ? '保密' : this.userInfo.gender==1?'男':'女'\\\"}}</span>\\r\\n                <i class=\\\"icon ticon-arrow-right\\\"></i>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <a class=\\\"item-inner\\\" href=\\\"javascript:;\\\" id=\\\"modify-phone\\\">\\r\\n              <div class=\\\"item-title\\\">手机号码</div>\\r\\n              <div class=\\\"item-after\\\">\\r\\n                <span class=\\\"side_txt side_ok\\\">{{userInfo.phone}}</span>\\r\\n                <i class=\\\"icon ticon-arrow-right\\\"></i>\\r\\n              </div>\\r\\n            </a>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <a class=\\\"item-inner\\\" href=\\\"#\\\" class=\\\"link\\\" id=\\\"modify_pwd\\\">\\r\\n              <div class=\\\"item-title\\\">密码</div>\\r\\n              <div class=\\\"item-after\\\">\\r\\n                <span class=\\\"side_txt\\\">{{js \\\"this.userInfo.is_set?'修改密码':'设置密码'\\\"}}</span>\\r\\n                <i class=\\\"icon ticon-arrow-right\\\"></i>\\r\\n              </div>\\r\\n            </a>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title myinfo-block-title\\\">主要联系人</div>\\r\\n      <div class=\\\"list-block tmm-myinfo-item-mainretinue\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              {{#unless this.main_retinueInfo}}\\r\\n              <span data-type=\\\"4\\\" data-phone=\\\"{{userInfo.phone}}\\\" class=\\\"myinfo-retinue red_txt\\\">添加</span> {{/unless}} {{#each main_retinueInfo}}\\r\\n              <span data-type=\\\"3\\\" data-link=\\\"{{view_link}}\\\" class=\\\"myinfo-retinue item-title item-title-name\\\">{{name}}</span>\\r\\n              {{/each}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n      </div>\\r\\n      <div class=\\\"content-block-title myinfo-block-title\\\">随行联系人</div>\\r\\n      <div class=\\\"content-block tmm-myinfo-content-otherretinue\\\">\\r\\n        <div class=\\\"content-block-inner\\\">\\r\\n          {{#if this.retinueInfo}} {{#each retinueInfo}}\\r\\n          <span data-link=\\\"{{view_link}}\\\" data-type=\\\"1\\\" class=\\\"txt myinfo-retinue\\\">{{name}}</span> {{/each}} {{/if}}\\r\\n          <span data-type=\\\"2\\\" class=\\\"myinfo-retinue red_txt\\\">添加</span>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":104,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","name":"./src/modules/modifyPhone/modifyPhone.js","index":104,"index2":99,"size":6904,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../modifyPhone/modifyPhone","loc":"6:17-54"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  modify_template = require('./modify-phone.tpl.html'),\r\n  loginModule = require('../login/login');\r\n\r\nvar timer = null; //定时器\r\nvar oldFlag = true; //能否点击获取验证码\r\nvar newFlag = true; //能否点击获取验证码\r\n\r\nvar modifyPhone = {\r\n  init: function() {\r\n    modifyPhone.bindEvent();\r\n  },\r\n  modifyPhone: function() {\r\n\r\n  },\r\n  /**\r\n   * 显示修改手机页面\r\n   * @return {[type]} [description]\r\n   */\r\n  showView: function() {\r\n    var output = appFunc.renderTpl(modify_template, {});\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n    modifyPhone.init();\r\n    if (timer) {\r\n      clearInterval(timer);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 点击获取旧手机号码短信验证的方法\r\n   * @return {[type]} [description]\r\n   */\r\n  getOldNote: function() {\r\n    // if (!oldFlag) {\r\n    //   return;\r\n    // }\r\n    var str = $$('#oldPhoneNum').val();\r\n    if (modifyPhone.checkPhone(str)) {\r\n\r\n      var data = {\r\n        'phone': str\r\n      }\r\n      httpService.getModifyPhoneCode(data, 'old', function(data) {\r\n        var msg = '';\r\n        if (data.status == 1) {\r\n          modifyPhone.setTime($$('.get_old_code'), 'old');\r\n        } else {\r\n\r\n          if (data.form) {\r\n            for (msgName in data.form) {\r\n              tmmApp.alert(data.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n\r\n        }\r\n      }, function(data) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      });\r\n    }\r\n\r\n  },\r\n  /**\r\n   * 点击获取新手机号码短信验证的方法\r\n   * @return {[type]} [description]\r\n   */\r\n  getNewNote: function() {\r\n    // if (!newFlag) {\r\n    //   return;\r\n    // }\r\n    var str = $$('#newPhoneNum').val();\r\n\r\n    if (modifyPhone.checkPhone(str)) {\r\n\r\n      var data = {\r\n        'phone': str\r\n      }\r\n      httpService.getModifyPhoneCode(data, 'new', function(data) {\r\n        var msg = '';\r\n        if (data.status == 1) {\r\n          modifyPhone.setTime($$('.get_new_code'), 'new');\r\n        } else {\r\n          if (data.form) {\r\n            for (msgName in data.form) {\r\n              tmmApp.alert(data.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n\r\n      }, function(data) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      });\r\n    }\r\n\r\n  },\r\n  /**\r\n   * 设置定时器\r\n   */\r\n  setTime: function(code, type) {\r\n\r\n    var num = 60;\r\n    if (type == 'old') {\r\n      oldFlag = false;\r\n    } else {\r\n      newFlag = false;\r\n    }\r\n    log.info('setTime....', num);\r\n    code.attr('disabled', true);\r\n    code.html(--num + '秒后重新获取')\r\n    timer = setInterval(function() {\r\n      log.info('setTime....timer...', num);\r\n      if (num == 1) {\r\n        code.html('获取验证码')\r\n        code.removeAttr('disabled');\r\n        if (type == 'old') {\r\n          oldFlag = true;\r\n        } else {\r\n          newFlag = true;\r\n        }\r\n        clearInterval(timer);\r\n      } else {\r\n        code.html(--num + '秒后重新获取');\r\n      }\r\n\r\n    }, 1000);\r\n  },\r\n\r\n  /**\r\n   * 手机号码验证\r\n   * @param  {[type]} str 手机号\r\n   * @return {[type]}     成功返回true，失败返回false\r\n   */\r\n  checkPhone: function(str) {\r\n\r\n    if (str == '') {\r\n      tmmApp.alert('手机号码不能为空');\r\n      return false;\r\n    } else if (!appFunc.isPhone(str)) {\r\n      tmmApp.alert('手机号不是有效值');\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  },\r\n  /**\r\n   * 提交验证\r\n   * @param  {[type]} str  手机号\r\n   * @param  {[type]} code 验证码\r\n   * @return {[type]}      [description]\r\n   */\r\n  checkSubmit: function(str, code) {\r\n    if (modifyPhone.checkPhone(str)) {\r\n      if (code == '') {\r\n        tmmApp.alert('验证码不能为空');\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  /**\r\n   * 提交修改旧手机号验证码\r\n   * @return {[type]} [description]\r\n   */\r\n  submitOldPhone: function() {\r\n    var str = $$('#oldPhoneNum').val();\r\n    var code = $$('#oldPhoneNote').val()\r\n    if (!modifyPhone.checkSubmit(str, code)) {\r\n      return;\r\n    }\r\n    var data = {\r\n      \"User\": {\r\n        \"phone\": str,\r\n        \"sms\": code\r\n      }\r\n    }\r\n\r\n    httpService.updateModifyPhone(data, 'old', function(data) {\r\n      var msg = '';\r\n      if (data.status == 1) {\r\n\r\n        $$('.set-old-phone-wrap').css({\r\n          'left': '-100%',\r\n          'opacity': 0\r\n        });\r\n        $$('.set-new-phone-wrap').css('left', 0);\r\n        if (timer) {\r\n          clearInterval(timer);\r\n        }\r\n      } else {\r\n        if (data.form) {\r\n          for (msgName in data.form) {\r\n            tmmApp.alert(data.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('输入有误，请重试');\r\n        }\r\n      }\r\n\r\n    }, function(data) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    });\r\n\r\n  },\r\n  /**\r\n   * 提交修改新手机号验证码\r\n   * @return {[type]} [description]\r\n   */\r\n  submitNewPhone: function() {\r\n    var str = $$('#newPhoneNum').val();\r\n    var code = $$('#newPhoneNote').val()\r\n    if (!modifyPhone.checkSubmit(str, code)) {\r\n      return;\r\n    }\r\n    var data = {\r\n      \"User\": {\r\n        \"phone\": str,\r\n        \"sms\": code\r\n      }\r\n    }\r\n\r\n    httpService.updateModifyPhone(data, 'new', function(data) {\r\n      var msg = '';\r\n      if (data.status == 1) {\r\n        tmmApp.alert(\"手机号已修改成功，将重新登录\", function() {\r\n          modifyPhone.logout();\r\n          // myView.router.back();\r\n        });\r\n      } else {\r\n        if (data.form) {\r\n          for (msgName in data.form) {\r\n            tmmApp.alert(data.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('输入有误，请重试');\r\n        }\r\n      }\r\n\r\n    }, function(data) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    });\r\n\r\n  },\r\n  logout: function() {\r\n    httpService.logout(\r\n      function(dataRes, status) {\r\n        if (dataRes.status == 1) {\r\n          // 成功退出后，回到登录页面\r\n          //meView.router.loadPage('tpls/login.html');\r\n          appFunc.clearLocalUserInfo();\r\n          loginModule.loginView();\r\n        } else {\r\n          // 弹框提示\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        log.error('dataRes', dataRes, 'status', status);\r\n      }\r\n    );\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.get_old_code',\r\n      event: 'click',\r\n      handler: modifyPhone.getOldNote\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.get_new_code',\r\n      event: 'click',\r\n      handler: modifyPhone.getNewNote\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#oldPhoneSubmit',\r\n      event: 'click',\r\n      handler: modifyPhone.submitOldPhone\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#newPhoneSubmit',\r\n      event: 'click',\r\n      handler: modifyPhone.submitNewPhone\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n}\r\nmodule.exports = modifyPhone;\r\n"},{"id":105,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modify-phone.tpl.html","name":"./src/modules/modifyPhone/modify-phone.tpl.html","index":105,"index2":98,"size":2940,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":104,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPhone\\modifyPhone.js","module":"./src/modules/modifyPhone/modifyPhone.js","moduleName":"./src/modules/modifyPhone/modifyPhone.js","type":"cjs require","userRequest":"./modify-phone.tpl.html","loc":"4:20-54"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">修改手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div class=\\\"page tmm-modify-phone-page\\\" data-page=\\\"modify-phone\\\">\\r\\n  <div class=\\\"set-old-phone-wrap\\\">\\r\\n    <form class=\\\"list-block tmm-setPhone-list-Form inset\\\">\\r\\n      <ul>\\r\\n        <li class=\\\"item-content\\\" id=\\\"setPhoneOewErrMsg\\\" style=\\\"display:none;\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-title label tmm-setPhone-errlabel\\\">错误信息</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPhone-item-inner\\\">\\r\\n            <input type=\\\"tel\\\" name=\\\"name\\\" id=\\\"oldPhoneNum\\\" placeholder=\\\"请输入旧手机号\\\" class=\\\"setPhoneInput\\\">\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPhone-item-inner\\\">\\r\\n            <div class=\\\"item-input item-title-con\\\">\\r\\n              <input type=\\\"text\\\" name=\\\"name\\\" id=\\\"oldPhoneNote\\\" placeholder=\\\"请输入短信验证码\\\" class=\\\"setPhoneInput\\\">\\r\\n              <span  class=\\\"get_old_code get_code\\\">获取验证码</span>\\r\\n            </div>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <div class=\\\"bg_btn mob_btn\\\">\\r\\n        <span class=\\\"sub_btn\\\" id=\\\"oldPhoneSubmit\\\">下一步</span>\\r\\n      </div>\\r\\n    </form>\\r\\n   </div>\\r\\n   <div class=\\\"set-new-phone-wrap\\\">\\r\\n    <form class=\\\"list-block tmm-setPhone-list-Form inset tmm-new-phone-page\\\">\\r\\n      <ul>\\r\\n        <li class=\\\"item-content\\\" id=\\\"setPhoneNewErrMsg\\\" style=\\\"display:none;\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-title label tmm-setPhone-errlabel\\\">错误信息</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <input type=\\\"tel\\\" name=\\\"name\\\" id=\\\"newPhoneNum\\\" placeholder=\\\"请输入新手机号\\\" class=\\\"setPhoneInput\\\">\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-title item-title-con\\\">\\r\\n              <input type=\\\"text\\\" name=\\\"name\\\" id=\\\"newPhoneNote\\\" placeholder=\\\"请输入短信验证码\\\" class=\\\"setPhoneInput\\\">\\r\\n            </div>\\r\\n            <div class=\\\"item-after\\\">\\r\\n              <a href=\\\"javascript:;\\\" class=\\\"get_new_code get_code\\\">获取验证码</a>\\r\\n            </div>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <div class=\\\"bg_btn mob_btn\\\">\\r\\n        <span class=\\\"sub_btn\\\" id=\\\"newPhoneSubmit\\\">提交</span>\\r\\n      </div>\\r\\n    </form>\\r\\n     \\r\\n   </div>\\r\\n \\r\\n  </div>\\r\\n\\r\\n</div>\\r\\n\";"},{"id":106,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\addRetinue.js","name":"./src/modules/myInfo/addRetinue.js","index":106,"index2":101,"size":4989,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"./addRetinue","loc":"7:15-38"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  template = require('./add-retinue.tpl.html'),\r\n  myInfo = require('./myInfo'),\r\n  httpService = require('../services/httpService');\r\n\r\n\r\nvar retinueInfo = {}\r\n\r\nvar addRetinue = {\r\n  init: function() {\r\n    addRetinue.bindEvent();\r\n  },\r\n  /**\r\n   * 显示视图\r\n   * @return {[type]} [description]\r\n   */\r\n  showView: function() {\r\n    var _this = this;\r\n    var link = $$(this).attr('data-link');\r\n    // 1 修改随行人员; 2 添加随行人员; 3 修改主要联系人; 4 添加主要联系人\r\n    var type = $$(this).attr('data-type');\r\n    if (link) {\r\n\r\n\r\n      httpService.getRetinue(link, function(data) {\r\n        retinueInfo = data.data;\r\n\r\n        if (type == 1) {\r\n          retinueInfo.title = '修改随行人员';\r\n          retinueInfo.type = 1;\r\n          retinueInfo.canDelete = true;\r\n          retinueInfo.emailTxt = '选填';\r\n        } else {\r\n          retinueInfo.title = '修改主要联系人';\r\n          retinueInfo.type = 3;\r\n          retinueInfo.readonly = true;\r\n          retinueInfo.canDelete = false;\r\n          retinueInfo.emailTxt = '必填';\r\n        }\r\n\r\n        var output = appFunc.renderTpl(template, retinueInfo);\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        addRetinue.init();\r\n      }, function(data) {\r\n\r\n      })\r\n    } else {\r\n      retinueInfo = {};\r\n      if (type == 2) {\r\n        retinueInfo.title = '添加随行人员';\r\n        retinueInfo.type = 2;\r\n        retinueInfo.canDelete = false;\r\n        retinueInfo.emailTxt = '选填';\r\n      } else {\r\n        retinueInfo.title = '添加主要联系人';\r\n        retinueInfo.type = 4;\r\n        retinueInfo.phone = $$(_this).attr('data-phone');\r\n        retinueInfo.canDelete = false;\r\n        retinueInfo.emailTxt = '必填';\r\n      }\r\n\r\n\r\n      var output = appFunc.renderTpl(template, retinueInfo);\r\n      tmmApp.getCurrentView().router.load({\r\n        content: output\r\n      });\r\n      addRetinue.init();\r\n    }\r\n\r\n\r\n  },\r\n\r\n  /**\r\n   * 提交修改随行人员或主要联系人\r\n   * @return {[type]} [description]\r\n   */\r\n  submitRetinue: function() {\r\n\r\n    var name = $$('#retinueName').val();\r\n    var identity = $$('#retinueIdentity').val();\r\n    var phone = $$('#retinuePhone').val();\r\n    var email = $$('#retinueEmail').val();\r\n\r\n    var token = {\r\n      \"Retinue\": {\r\n        \"name\": name,\r\n        \"identity\": identity,\r\n        \"phone\": phone,\r\n        \"email\": email\r\n      }\r\n    }\r\n\r\n    if (addRetinue.checkName(name) && addRetinue.checkPhone(phone) && addRetinue.checkIdentity(identity) && addRetinue.checkEmail(email)) {\r\n      httpService.updateRetinue(retinueInfo.update_link, token, retinueInfo.type, function(data) {\r\n        var msg = '';\r\n        if (data.status == 0) {\r\n          if (data.form) {\r\n            for (msgName in data.form) {\r\n              tmmApp.alert(data.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        } else if (data.status == 1) { // 提交成功\r\n          if (retinueInfo.type == 2 || retinueInfo.type == 4) {\r\n            msg = '添加成功';\r\n          } else {\r\n            msg = '修改成功';\r\n          }\r\n          tmmApp.alert(msg, function() {\r\n\r\n            tmmApp.getCurrentView().router.back();\r\n          });\r\n        }\r\n      }, function(data) {\r\n        tmmApp.alert('提交失败');\r\n      })\r\n    }\r\n  },\r\n\r\n  deleteRetinue: function() {\r\n    tmmApp.confirm('确定删除吗?', function() {\r\n      httpService.deleteRetinue(retinueInfo.delete_link, function(dataRes, statusCode) {\r\n        tmmApp.alert('删除成功', function() {\r\n          tmmApp.getCurrentView().router.back();\r\n        });\r\n      }, function(dataRes, statusCode) {\r\n        tmmApp.alert('删除失败');\r\n      });\r\n\r\n    });\r\n  },\r\n\r\n  checkPhone: function(phone) {\r\n    if (phone == '') {\r\n      tmmApp.alert('手机号不能为空');\r\n      return false;\r\n    }\r\n    if (phone.length != 11) {\r\n      tmmApp.alert('手机号为11位数字');\r\n      return false;\r\n    } else if (!appFunc.isPhone(phone)) {\r\n      tmmApp.alert('手机号不是有效值');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkName: function(name) {\r\n    if (name == '') {\r\n      tmmApp.alert('姓名不能为空');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkIdentity: function(identity) {\r\n    if (identity == '') {\r\n      tmmApp.alert('身份证号码不能为空');\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n  checkEmail: function(email) {\r\n    if (!email) return true;\r\n    if (appFunc.isEmail(email)) {\r\n      return true;\r\n    }\r\n    tmmApp.alert('邮箱格式错误');\r\n    return false;\r\n  },\r\n\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.myinfo-add',\r\n      event: 'click',\r\n      handler: addRetinue.showView\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#submitRetinue',\r\n      event: 'click',\r\n      handler: addRetinue.submitRetinue\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#deleteRetinue',\r\n      event: 'click',\r\n      handler: addRetinue.deleteRetinue\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = addRetinue;\r\n"},{"id":107,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","name":"./src/modules/modifyPwd/modifyPwd.js","index":107,"index2":103,"size":5439,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":102,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myInfo\\myInfo.js","module":"./src/modules/myInfo/myInfo.js","moduleName":"./src/modules/myInfo/myInfo.js","type":"cjs require","userRequest":"../modifyPwd/modifyPwd","loc":"8:20-53"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  template = require('./modifyPwd.tpl.html'),\r\n  httpService = require('../services/httpService'),\r\n  myInfoTemplate = require('../myInfo/myinfo.tpl.html'),\r\n  loginModule = require('../login/login');\r\n// accLoginModule = require('../accLogin/accLogin');\r\n\r\n/**\r\n *  定时器\r\n * @type {Object}\r\n */\r\nvar timer = null;\r\n/**\r\n * 短信倒计等待时间\r\n * @type {Number}\r\n */\r\nvar waitTime = 60;\r\n/**\r\n * 获取短信的标签对象\r\n * @type {Object}\r\n */\r\nvar codeObj = {};\r\n/**\r\n * 是否显示错误信息\r\n * @type {Boolean}\r\n */\r\nvar isShow = false;\r\n/**\r\n * 错误提示信息\r\n * @type {Object}\r\n */\r\nvar message = {};\r\n\r\nvar modifyPwd = {\r\n\r\n  init: function() {\r\n    appFunc.hideToolbar();\r\n    modifyPwd.bindEvent();\r\n  },\r\n  showView: function() {\r\n    modifyPwd.init();\r\n    log.info('modifyPwd-init');\r\n    var data = {\r\n      phone: localStorage.getItem(\"phone\"),\r\n      is_set: localStorage.getItem(\"is_set\")\r\n    };\r\n\r\n    log.info('电话号码：', data);\r\n    //回填模板\r\n    var output = appFunc.renderTpl(template, data);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    });\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    // //删除保存的号码\r\n    // localStorage.removeItem(\"phone\");\r\n    // localStorage.removeItem(\"is_set\");\r\n  },\r\n\r\n  getCode: function() {\r\n    log.info('短信定时器-init');\r\n    var data = {\r\n      phone: localStorage.getItem(\"phone\")\r\n        // phone: \"183591425296\"\r\n    };\r\n    // modifyPwd.goTime();\r\n    httpService.pwd_captcha_sms(\r\n      data,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          modifyPwd.goTime();\r\n        } else {\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n  /**\r\n   * @method goTime\r\n   * @description 60秒倒计时锁定发送短信按钮\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-10-24T01:42:07+0800\r\n   */\r\n  goTime: function() {\r\n    if (waitTime === 0) {\r\n      // 60秒到后解锁按钮,使其可点击\r\n      $$(\".get_code\").removeAttr('disabled');\r\n      // 重置文本信息\r\n      $$(\".get_code\").html('获取验证码');\r\n      // 重置回60秒\r\n      waitTime = 60;\r\n      if (timer) {\r\n        clearTimeout(timer);\r\n      }\r\n    } else {\r\n      // 锁定按钮,使其不可点击\r\n      $$(\".get_code\").attr('disabled', true);\r\n      // 倒计时提示文本\r\n      $$(\".get_code\").html(waitTime + '秒后重试');\r\n      // 倒计时自减\r\n      waitTime--;\r\n      // 每秒回调\r\n      timer = setTimeout(function() {\r\n        modifyPwd.goTime();\r\n      }, 1000);\r\n    }\r\n\r\n  },\r\n  updatePwd: function() {\r\n    log.info('修改密码-init');\r\n    var sms = $$(\"#sms\").val(),\r\n      pwd = $$(\"#pwd\").val(),\r\n      confirm_pwd = $$(\"#confirm_pwd\").val();\r\n    if (sms == \"\" || pwd == \"\" || confirm_pwd == \"\" || pwd != confirm_pwd) {\r\n      if (sms == \"\") {\r\n        // isShow = true;\r\n        // message = \"验证码不能为空\";\r\n        tmmApp.alert(\"验证码不能为空\");\r\n      } else if (pwd == \"\") {\r\n        tmmApp.alert(\"密码不能为空\");\r\n        // isShow = true;\r\n        // message = \"密码不能为空\";\r\n      } else if (confirm_pwd == \"\") {\r\n        tmmApp.alert(\"确认密码不能为空\");\r\n        // isShow = true;\r\n        // message = \"确认密码不能为空\";\r\n      } else if (pwd != confirm_pwd) {\r\n        tmmApp.alert(\"两次输入的密码不一致\");\r\n        // isShow = true;\r\n        // message = \"两次输入的密码不一致\";\r\n      }\r\n    } else {\r\n\r\n      var token = {\r\n        \"User\": {\r\n          \"phone\": localStorage.getItem(\"phone\"),\r\n          \"sms\": sms,\r\n          \"_pwd\": pwd,\r\n          \"confirm_pwd\": confirm_pwd\r\n        }\r\n      }\r\n      log.info(\"修改密码表单数据\", token.User);\r\n\r\n      httpService.updatePwd(\r\n        token,\r\n        function(dataRes, statusCode) {\r\n          if (dataRes.status == 1) {\r\n            log.info(\"pwd_captcha_sms-success！\");\r\n            // tmmApp.getCurrentView().router.back();\r\n            // accLoginModule.loginView();\r\n            // loginModule.loginView();\r\n            modifyPwd.logout();\r\n          } else {\r\n            if (dataRes.form.User__pwd) {\r\n              tmmApp.alert(dataRes.form.User__pwd[0], \"\");\r\n            } else if (dataRes.form.User_sms) {\r\n              tmmApp.alert(dataRes.form.User_sms[0], \"\");\r\n            } else {\r\n              tmmApp.alert('网络超时，请重试');\r\n            }\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      );\r\n    }\r\n\r\n  },\r\n  logout: function() {\r\n    httpService.logout(\r\n      function(dataRes, status) {\r\n        if (dataRes.status == 1) {\r\n          // 成功退出后，回到登录页面\r\n          //meView.router.loadPage('tpls/login.html');\r\n          appFunc.clearLocalUserInfo();\r\n          loginModule.loginView();\r\n        } else {\r\n          // 弹框提示\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        log.error('dataRes', dataRes, 'status', status);\r\n      }\r\n    );\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.get_code',\r\n      event: 'click',\r\n      handler: modifyPwd.getCode\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#updatePwd',\r\n      event: 'click',\r\n      handler: modifyPwd.updatePwd\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = modifyPwd;\r\n"},{"id":108,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.tpl.html","name":"./src/modules/modifyPwd/modifyPwd.tpl.html","index":108,"index2":102,"size":2092,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":107,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\modifyPwd\\modifyPwd.js","module":"./src/modules/modifyPwd/modifyPwd.js","moduleName":"./src/modules/modifyPwd/modifyPwd.js","type":"cjs require","userRequest":"./modifyPwd.tpl.html","loc":"3:13-44"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">{{js \\\"this.is_set?'修改密码':'设置密码'\\\"}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"myinfo\\\" class=\\\"page tmm-modify-pwd-page\\\">\\r\\n    <form class=\\\"list-block tmm-setPwd-list-Form inset\\\">\\r\\n      <ul>\\r\\n        <li class=\\\"item-content\\\" style=\\\"display:none\\\">\\r\\n          <div class=\\\"item-inner tmm-setPwd-item-inner\\\">\\r\\n            <div class=\\\"item-title label tmm-setPwd-errlabel\\\">错误信息</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPwd-item-inner\\\">\\r\\n            <input type=\\\"text\\\" name=\\\"name\\\" placeholder=\\\"请输入手机号\\\" class=\\\"setPhoneInput\\\" value=\\\"{{phone}}\\\" disabled>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPwd-item-inner\\\">\\r\\n            <div class=\\\"item-input item-title-con\\\">\\r\\n              <input type=\\\"text\\\" name=\\\"name\\\" placeholder=\\\"输入验证码\\\" class=\\\"setPhoneInput\\\" id=\\\"sms\\\">\\r\\n              <span class=\\\"get_code\\\">获取验证码</span>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPwd-item-inner\\\">\\r\\n            <input type=\\\"password\\\" name=\\\"name\\\" placeholder=\\\"请输入密码\\\" class=\\\"setPhoneInput\\\" id=\\\"pwd\\\">\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner tmm-setPwd-item-inner\\\">\\r\\n            <input type=\\\"password\\\" name=\\\"name\\\" placeholder=\\\"确认新密码\\\" class=\\\"setPhoneInput\\\" id=\\\"confirm_pwd\\\">\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <div class=\\\"bg_btn mob_btn\\\">\\r\\n        <a class=\\\"sub_btn\\\"  id=\\\"updatePwd\\\">确定</a>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":109,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\myPraise\\myPraise.js","name":"./src/modules/myPraise/myPraise.js","index":109,"index2":104,"size":4239,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../myPraise/myPraise","loc":"9:19-50"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  log = require('../utils/log'),\r\n  myPraiseView = require('./myPraiseView'),\r\n  shopModule = require('../shop/shop'),\r\n  roleModule = require('../role/role');\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n\r\nvar myPraise = {\r\n  init: function() {\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      //tmmApp.alert('请先登录', '');\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n    myPraise.getMyPraiseList();\r\n    myPraise.bindEvent();\r\n  },\r\n  refreshMyPraiseView: function() {\r\n    myPraise.getMyPraiseList();\r\n  },\r\n  /**\r\n   * @method getMyPraiseList\r\n   * @description 获取我的赞列表\r\n   */\r\n  getMyPraiseList: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getMyPraiseList(\r\n      function(dataRes, status) {\r\n        log.info(\"我的赞列表\", dataRes);\r\n        if (dataRes.status == 1) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          // 进行渲染视图\r\n          myPraiseView.getMyPraiseList(dataRes.data);\r\n\r\n          // 隐藏正在加载的图标\r\n          tmmApp.hideIndicator();\r\n          appFunc.hideToolbar();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          if ('login' in dataRes.data) {\r\n            roleModule.redirectToLogin();\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  refreshMyPraiseList: function() {\r\n    httpService.getMyPraiseList(\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        myPraiseView.refreshMyPraiseList(dataRes.data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * 动画加载分页\r\n   */\r\n  infiniteMyPraiseList: function() {\r\n    if (nextPageLink) {\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n      httpService.getMyPraiseListToPage(\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          log.info('new --infiniteMyPraiseList-- nextPageLink ----', nextPageLink);\r\n          // 调用视图模型的infiniteRecommendList方法进行渲染视图\r\n          myPraiseView.infiniteMyPraiseList(dataRes.data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 1000);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      //tmmApp.showIndicator();\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        // tmmApp.alert('没有更多的数据了');\r\n        $$(\"#myPraise #no-more\").css('display', 'inline-block');\r\n        $$(\"#myPraise #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 1000);\r\n      setTimeout(function() {\r\n        $$(\"#myPraise #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n    }\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '#myPraise .pull-to-refresh-content',\r\n      event: 'refresh',\r\n      handler: myPraise.refreshMyPraiseList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#myPraise .pull-to-refresh-content',\r\n      event: 'infinite',\r\n      handler: myPraise.infiniteMyPraiseList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#myPraise .tmm-shops-detail',\r\n      event: 'click',\r\n      handler: shopModule.initDetail\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = myPraise;\r\n"},{"id":110,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","name":"./src/modules/createAct/activity.js","index":110,"index2":125,"size":56685,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"../createAct/activity","loc":"10:14-46"}],"source":"/**\r\n * @method Activity\r\n * @description  觅趣相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-11-06T15:41:43+0800\r\n */\r\nvar httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  activityViewModel = require('./activityView'),\r\n  my_act_tpl = require('./my-create-act.tpl.html'),\r\n  selectDayTpl = require('./select-day.tpl.html'),\r\n  journeyListTpl = require('./journey-list.tpl.html'),\r\n  journeyListItemTpl = require('./journey-list-item.tpl.html'),\r\n  seekfunDetail = require('./seekfun-detail.tpl.html'),\r\n  editActNameTpl = require('./edit-act-name.tpl.html'),\r\n  editActNumTpl = require('./edit-act-num.tpl.html'),\r\n  editActTourPriceTpl = require('./edit-act-tour-price.tpl.html'),\r\n  roleModule = require('../role/role'),\r\n  shopModule = require('../shop/shop'),\r\n  selectDistination = require('../search/selectDistination'),\r\n  paymentTpl = require('./my-create-act-pay.tpl.html'),\r\n  bridge = require('../utils/pageBridge'),\r\n  act_setting_tpl = require('./my-create-act-info.tpl.html'),\r\n  activeOrder = require('./activeOrderCtrl');\r\n\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 选择标签页的url\r\n * @type {String}\r\n */\r\nvar selectUrl = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\nvar moreLoading = false;\r\n\r\nvar actStateShopDetailLink = '';\r\nvar shopDetailCon = '';\r\n\r\n// 数据模型\r\nvar model = {};\r\nvar orderListModel = null;\r\n\r\n/* 需要提交的数据 */\r\nvar goOffTime = '';\r\nvar lineId = '';\r\nvar payType = '';\r\n\r\n/* 是否已经更改了出游日期 */\r\nvar editGoTime = '';\r\n\r\n/*需要更换线路的觅趣id*/\r\nvar activeId = \"\";\r\n\r\n/*选择行程模块*/\r\nvar journeryListModule = JourneyList();\r\n/* 支付页面模块 */\r\nvar paymentModel = Payment();\r\n/* 提交觅趣觅趣表单模块 */\r\nvar seekfunFormModel = SeekfunForm();\r\n/* 切换线路 */\r\nvar changeLineFromPage = '0';\r\n\r\nfunction goActOrderCtrl() {\r\n  $$(document).off('pageAfterBack', '.page[data-page=\"act-order-A-detail\"]', autoRefreshIndexList);\r\n  $$(document).off('pageAfterBack', '.page[data-page=\"order-detail\"]', autoRefreshIndexList);\r\n  $$(document).on('pageAfterBack', '.page[data-page=\"act-order-A-detail\"]', autoRefreshIndexList);\r\n  $$(document).on('pageAfterBack', '.page[data-page=\"order-detail\"]', autoRefreshIndexList);\r\n  activeOrder.call(this);\r\n}\r\n\r\nfunction autoRefreshIndexList() {\r\n  $$(document).off('pageAfterBack', '.page[data-page=\"act-order-A-detail\"]', autoRefreshIndexList);\r\n  $$(document).off('pageAfterBack', '.page[data-page=\"order-detail\"]', autoRefreshIndexList);\r\n  tmmApp.pullToRefreshTrigger('.my-activity .pull-to-refresh-content');\r\n}\r\n\r\n/*显示日期选择页面*/\r\nfunction addAct() {\r\n  goOffTime = '';\r\n  tmmApp.getCurrentView().router.load({\r\n    content: selectDayTpl\r\n  });\r\n\r\n  showCalendar()\r\n}\r\n\r\n\r\n/* 跳过选择日期到选择行程页面 */\r\nfunction skipGoOffTime() {\r\n  goOffTime = '';\r\n  var seekfunTitle = \"\";\r\n  var seekfunChangeLine = 0;\r\n\r\n  if ($$(this).attr('data-id')) {\r\n    activeId = $$(this).attr('data-id');\r\n    seekfunTitle = \"更换行程\";\r\n    seekfunChangeLine = 1;\r\n    changeLineFromPage = '1';\r\n  } else {\r\n    seekfunTitle = \"选择行程\";\r\n    changeLineFromPage = '0';\r\n  }\r\n  $$('#calendar-inline-container .picker-calendar-day-selected').removeClass('picker-calendar-day-selected');\r\n  journeryListModule.getList(seekfunTitle, seekfunChangeLine);\r\n}\r\n\r\n/* 选择日期到选择行程页面 */\r\nfunction nextGoJourney() {\r\n  if (goOffTime) {\r\n    changeLineFromPage = '0';\r\n    journeryListModule.getList(\"选择行程\", \"0\");\r\n  } else {\r\n    tmmApp.alert('请选择出游日期！', '');\r\n  }\r\n}\r\n\r\n/* 选择行程页面到支付页面 */\r\nfunction nextGoPayment() {\r\n  lineId = $$('.journey-list-page input[name=\"item-radio\"]:checked').val();\r\n\r\n  if (lineId) {\r\n\r\n    paymentModel.goPage();\r\n\r\n  } else {\r\n    tmmApp.alert('请选择行程！', '');\r\n  }\r\n}\r\n\r\n//更换行程\r\nfunction changeLine() {\r\n  lineId = $$('.journey-list-page input[name=\"item-radio\"]:checked').val();\r\n  if (lineId) {\r\n    var editUrl = \"/index.php?r=api/actives/UpdateThrand&id=\";\r\n    var data = {\r\n      \"actives_thrand\": lineId\r\n    }\r\n    httpService.editActInfo(\r\n      editUrl,\r\n      data,\r\n      activeId,\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          tmmApp.alert('修改觅趣线路成功!');\r\n          Activity.refreshActivityList();\r\n          var oDiv = document.createElement('div');\r\n          /*oDiv.setAttribute('data-link', dataRes.data.link);*/\r\n          oDiv.setAttribute('data-link', seekfunDetailLink);\r\n          oDiv.type = 2;\r\n          goSeekfunDetail.call(oDiv);\r\n\r\n          activeId = '';\r\n          lineId = '';\r\n        } else {\r\n          if (dataRes.form) {\r\n            for (var msgName in dataRes.form) {\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  } else {\r\n    tmmApp.alert('请选择需要更换的行程！', '');\r\n  }\r\n}\r\n\r\n\r\n/*\r\n  *觅趣提交审核\r\n  *暂无接口，用修改觅趣信息替代\r\n*/\r\nfunction changeActExamine(model) {\r\n  var actData = {\r\n    \"actives_thrand\": 0, //线路ID 点为0\r\n    \"is_insurance\": 1, //保险1=确认0=取消\r\n    \"shops_info\": '', //觅趣对应点的信息====多点\r\n    \"Actives\": { //觅趣信息\r\n      \"actives_type\": 0, //0=旅游觅趣1=农产品觅趣\r\n      \"tour_type\": 1, //-1=农产品觅趣,0=多个点,1=一条线\r\n      \"number\": 0, //觅趣数量\r\n      \"price\": 0.00, //觅趣单价(农产品传值)\r\n      \"tour_price\": 0.00, //服务费\r\n      \"remark\": \"\", //旅游觅趣备注\r\n      \"start_time\": \"\", //报名开始日期\r\n      \"end_time\": \"\", //报名截止时间\r\n      \"go_time\": '', //出游日期     没填传 空值\r\n      \"is_organizer\": 1, //是否组织者 1=是 0=不是\r\n      \"is_open\": 1, //是否开放显示 1=开放 0=不开放\r\n      \"pay_type\": 0 //付款方式 0=AA付款 1=全额付款\r\n    },\r\n    \"Shops\": {\r\n      \"name\": \"\" //商品名称\r\n    },\r\n    \"Pro\": { //选中项目  线路ID不为0时，可传空\r\n    },\r\n    \"ProFare\": { //选中项目对应价格  线路ID不为0时，可传空\r\n    }\r\n  };\r\n  \r\n  actData.actives_thrand = model.thrand_id;\r\n  actData.Actives.number = model.actives_info.number.value;\r\n  actData.Actives.tour_price = model.actives_info.tour_price.value;\r\n  actData.Actives.start_time = model.actives_time.start_time;\r\n  actData.Actives.end_time = model.actives_time.end_time;\r\n  actData.Actives.is_organizer = model.is_organizer.value;\r\n  actData.Actives.is_open = model.actives_is_open.value;\r\n  actData.Actives.pay_type = model.actives_pay_type.value;\r\n  if(model.actives_time.go_time == \"出游日期未定\"){\r\n    actData.Actives.go_time = \"\";\r\n  } else {\r\n    actData.Actives.go_time = model.actives_time.go_time;\r\n  }\r\n  actData.Actives.remark = model.actives_info.remark;\r\n  actData.Shops.name = model.name;\r\n\r\n  var activeId = model.actives_id;\r\n  // 创建旅游觅趣（线）\r\n  tmmApp.showPreloader('正在提交中...');\r\n  httpService.actUpdate(\r\n    activeId,\r\n    actData,\r\n    function(dataRes, statusCode) {\r\n      \r\n      if (dataRes.status == 1) {\r\n        Activity.refreshActivityList();\r\n        /*var oDiv = document.createElement('div');\r\n        oDiv.setAttribute('data-link', dataRes.data.link);\r\n        oDiv.type = 2;\r\n        goSeekfunDetail.call(oDiv);*/\r\n        if($$(\"body\").find('.tmm-examine').hasClass(\"tmm-seekfun-btn\")){\r\n          $$('.tmm-seekfun-btn').css('display', 'none');\r\n        }\r\n        tmmApp.alert('觅趣提交审核成功!');\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (var msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('觅趣提交审核失败!');\r\n        }\r\n      }\r\n      tmmApp.hidePreloader();\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.hidePreloader();\r\n      tmmApp.alert('网络超时，请重试');\r\n\r\n    }\r\n  );\r\n}\r\n\r\nfunction changeActExamineDetail() {\r\n  changeActExamine(model);\r\n}\r\n\r\n/* 选择行程模块 */\r\nfunction JourneyList() {\r\n  var model = [];\r\n  var link = httpService.apiLineListIndex;\r\n  var nextPage = '';\r\n  var activeElment = null;\r\n  var pageContent = null;\r\n  var tabElement = null;\r\n  var loading = false; // 加载flag\r\n  var isSortForDistance = true;\r\n\r\n  /**  绑定事件函数  **/\r\n\r\n  /* 绑定二级导航栏目 */\r\n  function bindEvent() {\r\n    // 帮点下拉刷新，加载更多事件\r\n    pageContent = $$('.journey-list-page .pull-to-refresh-content');\r\n    pageContent.on('refresh', refreshList);\r\n    pageContent.on('infinite', infiniteList);\r\n    // Tab切换事件\r\n    tabElement = $$('.tmm-journey-subnavbar .subnav-item');\r\n    activeElment = $$(tabElement[0]);\r\n    tabElement.on('click', changeTab);\r\n  }\r\n\r\n  /* 绑定下拉菜单 加载更多*/\r\n  function bindSelectedEvent() {\r\n    $$('#tmm-journey-popularity').on('click', journeyPopularitySelect);\r\n    $$('#tmm-journey-distance').on('click', journeyDistanceSelect);\r\n\r\n  }\r\n\r\n  /** 触发事件函数 **/\r\n\r\n  // 刷新页面\r\n  function refreshList() {\r\n\r\n    getPageDate(link, renderList);\r\n\r\n  }\r\n\r\n  // 加载更多\r\n  function infiniteList() {\r\n    // alert(nextPage)\r\n    if (nextPage) {\r\n      if (loading) return;\r\n      loading = true;\r\n      getPageDate(nextPage, function(data) {\r\n        model.list_data = model.list_data.concat(data.list_data);\r\n        nextPage = data.page.next;\r\n\r\n        addMoreList(data)\r\n        loading = false;\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  function backfromPage() {\r\n    var address = bridge.fire('selectDistiantion');\r\n    if (address) {\r\n      link = httpService.apiLineList;\r\n      isSortForDistance = true;\r\n      $$(tabElement[0]).find('span').html(address);\r\n      tmmApp.pullToRefreshTrigger(pageContent);\r\n      $$(document).off('pageAfterBack', '.page[data-page=\"select-distination\"]', backfromPage);\r\n      $$(document).off('pageAfterBack', '.page[data-page=\"select-search-distination\"]', backfromPage);\r\n    }\r\n  }\r\n\r\n  // Tab切换\r\n  function changeTab(ev) {\r\n    var self = $$(this);\r\n\r\n    if ($$(this).hasClass('distance')) {\r\n      // bridge.add(refreshList);\r\n      $$(document).on('pageAfterBack', '.page[data-page=\"select-distination\"]', backfromPage);\r\n      $$(document).on('pageAfterBack', '.page[data-page=\"select-search-distination\"]', backfromPage);\r\n\r\n      selectDistination.init();\r\n    } else if ($$(this).hasClass('popularity')) {\r\n      var popoverHTML = '<div class=\"popover journey-subnavbar-popover\">' +\r\n        '<div class=\"popover-inner\">' +\r\n        '<div class=\"list-block\">' +\r\n        '<ul>' +\r\n        '<li><a href=\"#\" id=\"tmm-journey-popularity\" class=\"list-button item-link\">按人气</a></li>' +\r\n        '<li><a href=\"#\" id=\"tmm-journey-distance\" class=\"list-button item-link\">按距离</a></li>' +\r\n        '</ul>' +\r\n        '</div>' +\r\n        '</div>' +\r\n        '</div>';\r\n      tmmApp.popover(popoverHTML, self);\r\n      bindSelectedEvent();\r\n    }\r\n    activeElment.removeClass('active');\r\n    activeElment = self;\r\n    activeElment.addClass('active');\r\n  }\r\n\r\n  // 点击距离排序触发函数\r\n  function journeyDistanceSelect() {\r\n    isSortForDistance = true;\r\n    $$(tabElement[1]).find('span').html('按距离');\r\n    link = httpService.apiLineList;\r\n    tmmApp.pullToRefreshTrigger(pageContent);\r\n  }\r\n\r\n  // 点击按照人气排序\r\n  function journeyPopularitySelect() {\r\n    isSortForDistance = false;\r\n    $$(tabElement[1]).find('span').html('按人气');\r\n    link = httpService.apiPopularityList;\r\n    tmmApp.pullToRefreshTrigger(pageContent);\r\n  }\r\n\r\n\r\n  /** 其他函数 **/\r\n\r\n  /* 获取数据 */\r\n  function getPageDate(url, successFn) {\r\n\r\n    httpService.get(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          \r\n          successFn(dataRes.data);\r\n\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n\r\n        setTimeout(function() {\r\n          tmmApp.pullToRefreshDone();\r\n\r\n        }, 250);\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试', '');\r\n\r\n        setTimeout(function() {\r\n          tmmApp.pullToRefreshDone();\r\n\r\n        }, 250);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  // 加载更多渲染页面\r\n  function addMoreList(model) {\r\n    for (var x in model.list_data) {\r\n      model.list_data[x].isSortForDistance = isSortForDistance;\r\n    }\r\n    var output = appFunc.renderTpl(journeyListItemTpl, model);\r\n\r\n    $$('.journey-list-page .journery-list').append(output);\r\n  }\r\n\r\n  // 重新渲染数据\r\n  function renderList(data) {\r\n    tmmApp.closeModal();\r\n\r\n    model = data;\r\n    nextPage = data.page.next;\r\n\r\n    for (var x in model.list_data) {\r\n      data.list_data[x].isSortForDistance = isSortForDistance;\r\n    }\r\n    var output = appFunc.renderTpl(journeyListItemTpl, data);\r\n\r\n    $$('.journey-list-page .journery-list').html(output);\r\n  }\r\n\r\n\r\n  return {\r\n    getList: function(seekfunTitle, seekfunChangeLine) {\r\n\r\n      tmmApp.showIndicator();\r\n      link = httpService.apiLineList;\r\n      getPageDate(link, function(data) {\r\n        model = data;\r\n        nextPage = data.page.next;\r\n        for (var x in model.list_data) {\r\n          model.list_data[x].isSortForDistance = isSortForDistance;\r\n        }\r\n        model.seekfunTitle = seekfunTitle;\r\n        model.seekfunChangeLine = seekfunChangeLine;\r\n        var output = appFunc.renderTpl(journeyListTpl, model);\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n        bindEvent();\r\n      })\r\n\r\n    },\r\n\r\n  }\r\n\r\n}\r\n\r\n/* 支付选择页面模块 */\r\nfunction Payment() {\r\n  function bindEvent() {\r\n    $$('#create-act-pay-type .pay-type-pos').on('click', selectPayment);\r\n    $$('.create-act-pay-type-back').on('click', goJourneyPage);\r\n  }\r\n\r\n  function goJourneyPage() {\r\n    tmmApp.getCurrentView().router.back({\r\n      force: true,\r\n      pageName: 'journey-list'\r\n    })\r\n  }\r\n\r\n  function selectPayment() {\r\n    payType = $$(this).attr('data-type');\r\n    seekfunFormModel.goPage();\r\n  }\r\n\r\n  return {\r\n    goPage: function() {\r\n      tmmApp.getCurrentView().router.load({\r\n        content: paymentTpl\r\n      });\r\n\r\n      bindEvent();\r\n    }\r\n  }\r\n}\r\n\r\n/* 提交觅趣觅趣表单模块 */\r\nfunction SeekfunForm() {\r\n  var line_start_time = '';\r\n  var line_end_time = '';\r\n\r\n  function clearData() {\r\n    goOffTime = '';\r\n    lineId = '';\r\n    payType = '';\r\n    line_start_time = '';\r\n    line_end_time = '';\r\n  }\r\n\r\n  function bindEvent() {\r\n    $$('#line_create_act').on('click', createAct);\r\n  }\r\n\r\n  function selectStartAndEndTime() {\r\n    // 出游日期\r\n    var goTimeDate = goOffTime;\r\n    var nowDate = new Date();\r\n    var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n    var _this = $$('#create-act-info .calendar-infotime');\r\n    // 记录多选日期的个数\r\n    var num = 0;\r\n    // 记录出游时间和设置的报名出游两个日期\r\n    var dateStartArr = [];\r\n    // 记录所选择的两个日期\r\n    var dateArr = [];\r\n    // 临时存入显示的字符串格式，如 \"2015.12.05-12.07（共2晚）\"\r\n    var oldStr = '';\r\n    var str = '';\r\n    // 初始化日期控件\r\n    var calenderObj = tmmApp.calendar({\r\n      input: _this,\r\n      monthNames: appFunc.monthNames(),\r\n      dayNames: appFunc.dayNames(),\r\n      dayNamesShort: appFunc.dayNamesShort(),\r\n      dateFormat: 'yyyy.mm.dd',\r\n      multiple: true,\r\n      minDate: preDay,\r\n      cssClass: 'tmm-hoteldate-picker-calendar',\r\n      closeByOutsideClick: false,\r\n      scrollToInput: false,\r\n      onOpen: function() {\r\n        calenderObj.setValue([]);\r\n        appFunc.showToastBootom('请选择报名开始日期');\r\n\r\n        if (goTimeDate !== \"\") {\r\n          dateStartArr.push(goTimeDate);\r\n        }\r\n      },\r\n      onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n        calenderObj.setValue([]);\r\n\r\n        if (goTimeDate !== \"\") {\r\n          dateStartArr.push(appFunc.dateFormt(year, month, day));\r\n          var difStart = appFunc.hotelDay(dateStartArr);\r\n          \r\n          if (difStart > 0) {\r\n            setTimeout(function() {\r\n              tmmApp.alert('报名开始日期必须小于出游日期');\r\n              _this.val(oldStr);\r\n            }, 0);\r\n            dateStartArr = [];\r\n            calenderObj.close();\r\n          } else {\r\n            num++;\r\n          }\r\n        } else {\r\n          num++;\r\n        }\r\n\r\n        if (num == 1) {\r\n          line_start_time = appFunc.dateFormt(year, month, day);\r\n          appFunc.hideToast();\r\n          appFunc.showToastBootom('请选择报名结束日期');\r\n          dateArr.push(appFunc.dateFormt(year, month, day));\r\n          str += appFunc.dateFormtDot(year, month, day, 1);\r\n        }\r\n        if (num == 2) {\r\n          line_end_time = appFunc.dateFormt(year, month, day);\r\n          setTimeout(function() {\r\n\r\n            dateArr.push(appFunc.dateFormt(year, month, day));\r\n            var dif = appFunc.hotelDay(dateArr);\r\n            if (dif <= 0) {\r\n              tmmApp.alert('结束日期必须晚于开始日期');\r\n              _this.val(oldStr);\r\n            } else {\r\n              str += appFunc.dateFormtDot(year, month, day, 3);\r\n              oldStr = str;\r\n              _this.val(str);\r\n              dateArr.push(dif);\r\n            }\r\n            num = 0;\r\n            str = '';\r\n            dateArr = [];\r\n            dateStartArr = [];\r\n          }, 0);\r\n          calenderObj.close();\r\n        }\r\n      },\r\n      onClose: function() {\r\n        appFunc.hideToast();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  function createAct() {\r\n    var actData = {\r\n      \"actives_thrand\": 0, //线路ID 点为0\r\n      \"is_insurance\": 1, //保险1=确认0=取消\r\n      \"shops_info\": '', //觅趣对应点的信息====多点\r\n      \"Actives\": { //觅趣信息\r\n        \"actives_type\": 0, //0=旅游觅趣1=农产品觅趣\r\n        \"tour_type\": 1, //-1=农产品觅趣,0=多个点,1=一条线\r\n        \"number\": 0, //觅趣数量\r\n        \"price\": 0.00, //觅趣单价(农产品传值)\r\n        \"tour_price\": 0.00, //服务费\r\n        \"remark\": \"\", //旅游觅趣备注\r\n        \"start_time\": \"\", //报名开始日期\r\n        \"end_time\": \"\", //报名截止时间\r\n        \"go_time\": '', //出游日期     没填传 空值\r\n        \"is_organizer\": 1, //是否组织者 1=是 0=不是\r\n        \"is_open\": 1, //是否开放显示 1=开放 0=不开放\r\n        \"pay_type\": 0 //付款方式 0=AA付款 1=全额付款\r\n      },\r\n      \"Shops\": {\r\n        \"name\": \"\" //商品名称\r\n      },\r\n      \"Pro\": { //选中项目  线路ID不为0时，可传空\r\n      },\r\n      \"ProFare\": { //选中项目对应价格  线路ID不为0时，可传空\r\n      }\r\n    };\r\n\r\n    var tour_price = '0.00';\r\n    var is_open = 1;\r\n    var userInfo = JSON.parse(appFunc.getLocalUserInfo());\r\n    var is_organizer = userInfo.is_organizer;\r\n    if (userInfo.is_organizer === '1' && userInfo.organizer_status !== '0') { //组织者\r\n      tour_price = $$('#tour_price').val();\r\n    }\r\n\r\n    var name = $$('#name').val();\r\n    var number = $$('#number').val();\r\n    var isChecked = $$('#launch-open').prop('checked');\r\n    var remark = $$('.act-edit .act-edit-content').val();\r\n    if (isChecked) {\r\n      is_open = 0;\r\n    } else {\r\n      is_open = 1;\r\n    }\r\n\r\n    if (name === '') {\r\n      tmmApp.alert('觅趣名称不能为空');\r\n      return;\r\n    }\r\n    if (line_start_time === '') {\r\n      tmmApp.alert('请选择觅趣开始时间');\r\n      return;\r\n    }\r\n    if (line_end_time === '') {\r\n      tmmApp.alert('请选择觅趣结束时间');\r\n      return;\r\n    }\r\n    if (number === '') {\r\n      tmmApp.alert('觅趣参与人数不能为空');\r\n      return;\r\n    }\r\n    if (tour_price === '') {\r\n      tmmApp.alert('服务费不能为空');\r\n      return;\r\n    }\r\n    if (remark === '') {\r\n      tmmApp.alert('觅趣简介不能为空');\r\n      return;\r\n    }\r\n\r\n\r\n    actData.actives_thrand = lineId;\r\n    actData.Actives.number = number;\r\n    actData.Actives.tour_price = tour_price;\r\n    actData.Actives.start_time = line_start_time;\r\n    actData.Actives.end_time = line_end_time;\r\n    actData.Actives.is_organizer = is_organizer;\r\n    actData.Actives.is_open = is_open;\r\n    actData.Actives.pay_type = payType;\r\n    actData.Actives.go_time = goOffTime;\r\n    actData.Actives.remark = remark;\r\n\r\n    actData.Shops.name = name;\r\n    \r\n    // 创建旅游觅趣（线）\r\n    tmmApp.showPreloader('正在提交中...');\r\n\r\n    httpService.actCreate(\r\n      actData,\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n          \r\n          Activity.refreshActivityList();\r\n          var oDiv = document.createElement('div');\r\n          oDiv.setAttribute('data-link', dataRes.data.link);\r\n          oDiv.type = 2;\r\n          goSeekfunDetail.call(oDiv);\r\n\r\n          clearData();\r\n        } else {\r\n          if (dataRes.form) {\r\n            for (var msgName in dataRes.form) {\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        }\r\n        tmmApp.hidePreloader();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hidePreloader();\r\n        tmmApp.alert('网络超时，请重试');\r\n\r\n      }\r\n    );\r\n  }\r\n\r\n  return {\r\n    goPage: function() {\r\n      var data = {\r\n        'userInfo': JSON.parse(appFunc.getLocalUserInfo())\r\n      };\r\n      var output = appFunc.renderTpl(act_setting_tpl, data);\r\n      tmmApp.getCurrentView().router.load({\r\n        content: output\r\n      });\r\n\r\n      var createInfoTime = $$('#create-act-info .calendar-infotime');\r\n      selectStartAndEndTime();\r\n      bindEvent();\r\n    }\r\n  }\r\n}\r\n\r\nvar seekfunDetailLink = '';\r\n\r\n/* 觅镜详情页面 */\r\nfunction goSeekfunDetail() {\r\n  var link = $$(this).attr('data-link');\r\n  var type = 1;\r\n  type = this.type ? this.type : type;\r\n  seekfunDetailLink = link;\r\n  tmmApp.showIndicator();\r\n\r\n  httpService.get(link, function(data) {\r\n\r\n    tmmApp.hideIndicator();\r\n    if (data.status == 1) {\r\n      model = data.data;\r\n      orderListModel = null;\r\n      renderSeekfunDetail(type);\r\n      \r\n    } else {\r\n      tmmApp.alert('没有相关数据', '');\r\n    }\r\n\r\n  }, function(data) {\r\n    tmmApp.hideIndicator();\r\n    tmmApp.alert('网络错误', '');\r\n  })\r\n}\r\n\r\n//获取觅趣详情页的信息\r\nfunction goSeekfunDetailModel() {\r\n  httpService.get(seekfunDetailLink, function(data) {\r\n    tmmApp.hideIndicator();\r\n    if (data.status == 1) {\r\n      model = data.data;\r\n    } else {\r\n      tmmApp.alert('没有相关数据', '');\r\n    }\r\n\r\n  }, function(data) {\r\n    tmmApp.hideIndicator();\r\n    tmmApp.alert('网络错误', '');\r\n  })\r\n}\r\n\r\n//获取觅趣详情页的信息\r\nfunction changeActExamineList(actId) {\r\n  var actLink = $$(this).attr('data-link');\r\n  httpService.get(actLink, function(data) {\r\n    tmmApp.hideIndicator();\r\n    if (data.status == 1) {\r\n      changeActExamine(data.data);\r\n    } else {\r\n      tmmApp.alert('没有相关数据', '');\r\n    }\r\n\r\n  }, function(data) {\r\n    tmmApp.hideIndicator();\r\n    tmmApp.alert('网络错误', '');\r\n  })\r\n}\r\n\r\nfunction getSeekfunData(link) {\r\n  httpService.get(link, function(data) {\r\n    tmmApp.hideIndicator();\r\n    if (data.status == 1) {\r\n      model = data.data;\r\n      orderListModel = null;\r\n    }\r\n  }, function(data) {\r\n    tmmApp.hideIndicator();\r\n    tmmApp.alert('网络错误', '');\r\n  })\r\n}\r\n\r\n/**\r\n * 返回我发起的觅趣模块\r\n * @return {[type]} [description]\r\n */\r\nfunction goBackMyActivityPage() {\r\n  var type = $$(this).attr('data-type');\r\n\r\n  if (type == 1) {\r\n    tmmApp.getCurrentView().router.back();\r\n  } else if (type == 2) {\r\n    tmmApp.getCurrentView().router.back({\r\n      force: true,\r\n      pageName: 'my-activity'\r\n    })\r\n\r\n  }\r\n\r\n}\r\n\r\n/*渲染觅镜详情页面*/\r\nfunction renderSeekfunDetail(type) {\r\n  /*pay_type = $$(this).attr(\"data-type\");\r\n  var data = {\r\n    'userInfo':JSON.parse(appFunc.getLocalUserInfo())\r\n  };*/\r\n  model.userInfo = JSON.parse(appFunc.getLocalUserInfo());\r\n  model.type = type;\r\n  var output = appFunc.renderTpl(seekfunDetail, model);\r\n  tmmApp.getCurrentView().router.load({\r\n    content: output\r\n  });\r\n  //if(model.set_go_time.link !=''){\r\n  if ((model.audit_status.value == '1' && model.actives_status.value == '0' && model.shops_status.value == '1' && model.set_go_time.link != '') || (model.audit_status.value == '1' && model.actives_status.value == '1' && model.shops_status.value == '1' && model.set_go_time.link != '') || (model.audit_status.value == '1' && model.actives_status.value == '2' && model.shops_status.value == '1' && model.set_go_time.link != '')) {\r\n    $$('.tmm-set-act-date').addClass(\"tmm-add-act-date\");\r\n  }\r\n  editActGotime(); //修改出游时间\r\n  editEnrolldate(); //修改觅趣报名时间\r\n  if ($$(\"div\").find('.tmm-set-act-date').hasClass(\"tmm-add-act-date\")) {\r\n    addActgoDate(); //如果没有设置出游日期，设置 \r\n  }\r\n}\r\n\r\n\r\n/*配置日历控件*/\r\nfunction showCalendar() {\r\n    \r\n  var monthNames = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n    dayNames = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n    dayNamesShort = ['日', '一', '二', '三', '四', '五', '六'];\r\n\r\n  var nowDate = new Date();\r\n  var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n  var calendarInline = tmmApp.calendar({\r\n    container: '#calendar-inline-container',\r\n    dayNames: dayNames,\r\n    minDate: preDay,\r\n    dayNamesShort: dayNamesShort,\r\n    toolbarTemplate: '<div class=\"calendar-custom-toolbar\">' +\r\n      '<div class=\"toolbar-inner\">' +\r\n      '<div class=\"left\">' +\r\n      '<a href=\"#\" class=\"link icon-only\"><i class=\"icon icon-back\"></i></a>' +\r\n      '</div>' +\r\n      '<div class=\"center\"></div>' +\r\n      '<div class=\"right\">' +\r\n      '<a href=\"#\" class=\"link icon-only\"><i class=\"icon icon-forward\"></i></a>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '</div>',\r\n    onOpen: function(p) {\r\n      $$('.calendar-custom-toolbar .center').text(p.currentYear + '年' + monthNames[p.currentMonth]);\r\n      $$('.calendar-custom-toolbar .left .link').on('click', function() {\r\n        calendarInline.prevMonth();\r\n      });\r\n      $$('.calendar-custom-toolbar .right .link').on('click', function() {\r\n        calendarInline.nextMonth();\r\n      });\r\n    },\r\n    onMonthYearChangeStart: function(p) {\r\n      $$('.calendar-custom-toolbar .center').text(p.currentYear + '年' + monthNames[p.currentMonth]);\r\n    },\r\n    onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n      goOffTime = appFunc.dateFormt(year, month, day)\r\n\r\n    }\r\n  });\r\n\r\n}\r\n\r\n/* 选项卡切换 */\r\nfunction showTabs(ev) {\r\n  $$(this).find('span').removeClass('active');\r\n  $$(ev.target).addClass('active');\r\n  var link = '';\r\n\r\n  if ($$(ev.target).hasClass('journery')) {\r\n    $$('.seekfun-detail-page .join-block').css('display', 'none');\r\n    $$('.seekfun-detail-page .intro-block').css('display', 'none');\r\n    $$('.seekfun-detail-page .journery-block').css('display', 'block');\r\n  } else if ($$(ev.target).hasClass('join')) {\r\n    if (model.actives_pay_type.value === '1') {\r\n      link = model.actives_info.attend_list;\r\n    } else if (model.actives_pay_type.value === '0') {\r\n      link = model.actives_info.order_list;\r\n    }\r\n    if (orderListModel === null && !!link) {\r\n\r\n      httpService.get(link, function(data) {\r\n        if (data.status == 1) {\r\n\r\n          orderListModel = data.data;\r\n          model.orderListModel = orderListModel;\r\n          joinPeopleTpl();\r\n\r\n        } else {\r\n\r\n        }\r\n        $$('.seekfun-detail-page .intro-block').css('display', 'none');\r\n        $$('.seekfun-detail-page .journery-block').css('display', 'none');\r\n        $$('.seekfun-detail-page .join-block').css('display', 'block');\r\n      }, function(data) {\r\n        $$('.seekfun-detail-page .intro-block').css('display', 'none');\r\n        $$('.seekfun-detail-page .journery-block').css('display', 'none');\r\n        $$('.seekfun-detail-page .join-block').css('display', 'block');\r\n      })\r\n    } else {\r\n      $$('.seekfun-detail-page .intro-block').css('display', 'none');\r\n      $$('.seekfun-detail-page .journery-block').css('display', 'none');\r\n      $$('.seekfun-detail-page .join-block').css('display', 'block');\r\n    }\r\n\r\n  } else if ($$(ev.target).hasClass('intro')) {\r\n    $$('.seekfun-detail-page .join-block').css('display', 'none');\r\n    $$('.seekfun-detail-page .journery-block').css('display', 'none');\r\n    $$('.seekfun-detail-page .intro-block').css('display', 'block');\r\n  }\r\n}\r\n\r\n/* 加载更多的div */\r\nvar loadMoreDiv = null;\r\n/** @type {String} 参与人数加载更多的连接 */\r\nvar loadMoreJoinLink = '';\r\n\r\n/*参与人html页面*/\r\nfunction joinPeopleTpl() {\r\n  loadMoreDiv = document.createElement('div');\r\n  loadMoreDiv.className = 'loadmore';\r\n  loadMoreDiv.innerHTML = '点击加载更多';\r\n  loadMoreDiv.removeEventListener('click', getMoreJoinData, false);\r\n  loadMoreDiv.addEventListener('click', getMoreJoinData, false);\r\n  var html = '<div class=\"join-first-item\">' +\r\n    '{{#js_compare \"this.actives_pay_type.value === \\'1\\'\"}}' +\r\n    //代付 A\r\n    '<p class=\"txt\">已参与人数：<span>{{orderListModel.people}}成人  {{orderListModel.children}}儿童</span></p>' +\r\n    '{{/js_compare}}' +\r\n    //自费 AA\r\n    '{{#js_compare \"this.actives_pay_type.value === \\'0\\'\"}}' +\r\n    '<p class=\"txt\">已参与人数：<span>{{js \"this.actives_info.number.value - this.actives_info.order_number.value\"}}/{{actives_info.number.value}}</span></p>' +\r\n    '<p class=\"txt\">费用总额：<span>{{actives_info.total.value}}元</span></p>' +\r\n    '{{/js_compare}}' +\r\n\r\n    '<span class=\"share-invite invite\">邀请好友加入</span>' +\r\n\r\n    '</div>' +\r\n    //代付 A\r\n    '{{#js_compare \"this.actives_pay_type.value === \\'1\\'\"}}' +\r\n    '<div class=\"join-list\">' +\r\n    '{{#each orderListModel.list_data}}' +\r\n    //主要联系人\r\n    '{{#js_compare \"this.is_main === 1\"}}' +\r\n    '<div class=\"join-item\" style=\"margin:0px;\">' +\r\n    '<div class=\"item-top item-pepole\">' +\r\n    '<span class=\"time\">主要联系人</span>' +\r\n    '</div>' +\r\n    '<div class=\"item-inner\">' +\r\n    '<p class=\"tit\"><span class=\"name\">{{this.name}}</span></p>' +\r\n    '<p class=\"describe\"><span class=\"join-num\">手机：{{this.phone}}</p>' +\r\n    '</div>' +\r\n    '</div>' +\r\n    '{{/js_compare}}' +\r\n    //联系人列表\r\n    '{{#js_compare \"this.is_main === 0\"}}' +\r\n    '<div class=\"join-item\" style=\"margin:0px;\">' +\r\n    '<div class=\"item-top item-pepole\">' +\r\n    '<span class=\"time\">{{this.add_time}}</span><span data-link=\"{{this.deletelink}}\" data-name=\"{{this.name}}\" class=\"delete-join-people\">删除</span>' +\r\n    '</div>' +\r\n    '<div class=\"item-inner\">' +\r\n    '<p class=\"tit\"><span class=\"name\">{{this.name}}</span><span class=\"phone\">{{this.phone}}</span></p>' +\r\n    '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.people}}成人</span>{{#js_compare \"this.number - this.people > \\'0\\'\"}}<span class=\"order-price\">{{js \"this.number - this.people\"}}儿童</span>{{/js_compare}}</p>' +\r\n    '</div>' +\r\n    '</div>' +\r\n    '{{/js_compare}}' +\r\n    '{{/each}}' +\r\n    '</div>'+\r\n    '{{/js_compare}}'+\r\n    //自费 AA\r\n    '{{#js_compare \"this.actives_pay_type.value === \\'0\\'\"}}' +\r\n    '<div class=\"join-list\">' +\r\n    '{{#each orderListModel.list_data}}' +\r\n    '<div class=\"join-item\">' +\r\n    '<div class=\"item-top item-pepole\">' +\r\n    '<span class=\"time\">{{this.add_time}}</span><span class=\"status green\">{{this.status.order_status.name}}</span>' +\r\n    '</div>' +\r\n    '<div class=\"item-inner\">' +\r\n    '<p class=\"tit\"><span class=\"name\">{{this.main_retinue.name}}</span><span class=\"phone\">{{this.main_retinue.phone}}</span></p>' +\r\n    '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.user_go_count}}人</span><span class=\"order-price\">订单金额：{{this.order_price}}元</span></p>' +\r\n    '</div>' +\r\n    '</div>' +\r\n    '{{/each}}' +\r\n    '</div>'+\r\n    '{{/js_compare}}';\r\n\r\n\r\n  var output = appFunc.renderTpl(html, model);\r\n  console.log(\"活动加载出行人员\", model);\r\n  $$('.seekfun-detail-page .join-block').html(output).append(loadMoreDiv);\r\n\r\n  loadMoreJoinLink = model.orderListModel.page.next;\r\n  if (loadMoreJoinLink) {\r\n    loadMoreDiv.style.display = 'block';\r\n  } else {\r\n    loadMoreDiv.style.display = 'none';\r\n  }\r\n\r\n  $$('.share-invite').off('click', shareMsg);\r\n  $$('.share-invite').on('click', shareMsg);\r\n  $$('.delete-join-people').on('click', deletePepole);\r\n  $$('.delete-join-people').on('click', deletePepole);\r\n\r\n  // myApp.detachInfiniteScroll(container)\r\n  // tmmApp.detachInfiniteScroll('.seekfun-detail-page .join-block');\r\n  // tmmApp.attachInfiniteScroll('.seekfun-detail-page .join-block');\r\n}\r\n\r\n// 分享\r\nfunction shareMsg() {\r\n  var link = httpService.apiUrl + '/index.php?r=site/share&share=' + model.shops.value;\r\n  appFunc.shareMsg(model.name, '来自田觅觅的觅趣分享', model.image, link);\r\n}\r\n\r\n// 删除参与人\r\nfunction deletePepole() {\r\n  var self = this;\r\n  var link = $$(self).attr('data-link');\r\n  var name = $$(self).attr('data-name');\r\n  tmmApp.confirm(\"确认删除参与人\"+ name +\"吗？\", function() {\r\n    httpService.get(link, function(data) {\r\n      if (data.status == 1) {\r\n        $$(self).parent().parent().remove();\r\n      }\r\n    }, function(data) {\r\n\r\n    });\r\n  })\r\n\r\n}\r\n\r\n/**\r\n * 参与人加载更多方法\r\n * @return {[type]} [description]\r\n */\r\nfunction getMoreJoinData(link) {\r\n  var itemHtml = '{{#each list_data}}' +\r\n    '<div class=\"join-item\">' +\r\n    '<div class=\"item-top\">' +\r\n    '<span class=\"time\">{{this.add_time}}</span><span class=\"status green\">{{this.status.order_status.name}}</span>' +\r\n    '</div>' +\r\n    '<div class=\"item-inner\">' +\r\n    '<p class=\"tit\"><span class=\"name\">{{this.main_retinue.name}}</span><span class=\"phone\">{{this.main_retinue.phone}}</span></p>' +\r\n    '<p class=\"describe\"><span class=\"join-num\">参与人数：{{this.user_go_count}}人</span><span class=\"order-price\">订单金额：{{this.order_price}}元</span></p>' +\r\n    '</div>' +\r\n    '</div>' +\r\n    '{{/each}}';\r\n    loadMoreDiv.innerHTML = '努力加载中...';\r\n    // $$('.seekfun-detail-page .join-block .join-list').append();\r\n    httpService.get(link, function(data) {\r\n        if (data.status === 1) {\r\n            var output = appFunc.renderTpl(itemHtml, data.data);\r\n            $$('.seekfun-detail-page .join-block .join-list').append(output);\r\n            loadMoreJoinLink = data.data.page.next;\r\n        }\r\n        loadMoreDiv.innerHTML = '点击加载更多';\r\n    }, function(data) {\r\n        loadMoreDiv.innerHTML = '点击加载更多';\r\n    })\r\n}\r\n\r\n\r\n/*觅趣列表确定出游日期*/\r\nfunction activityGoTime(ele) {\r\n  var nowDate = new Date();\r\n  var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n  var id = $$(ele).attr('data-id');\r\n  var goTimeLink = $$(ele).attr('data-link');\r\n\r\n  tmmApp.calendar({\r\n    input: ele,\r\n    closeOnSelect: true,\r\n    minDate: preDay,\r\n    monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n    dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n    dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\r\n    onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n      var goTime = appFunc.dateFormt(year, month, day);\r\n      setTimeout(function() {\r\n        tmmApp.confirm('出游日期确认为：' + goTime, '', function() {\r\n          var data = {\r\n            \"Actives[go_time]=\": goTime\r\n          };\r\n          httpService.setActityGoTime(\r\n            goTimeLink,\r\n            data,\r\n            function(dataRes, statusCode) {\r\n              if (dataRes.status == 1) {\r\n                tmmApp.alert('出游日期确认成功!');\r\n                Activity.refreshActivityList();\r\n                if ($$(\"div\").find('.tmm-set-act-date').hasClass(\"tmm-add-act-date\")) {\r\n                  $$('.normal-group').find(\".tmm-set-act-date\").remove();\r\n                  $$('.tmmGoTime').append('<div class=\"normal-cell\">' + goTime + '</div>');\r\n                }\r\n\r\n              } else {\r\n                if (dataRes.form) {\r\n                  for (var msgName in dataRes.form) {\r\n                    tmmApp.alert(dataRes.form[msgName][0]);\r\n                    break;\r\n                  }\r\n                } else {\r\n                  tmmApp.alert('网络超时，请重试');\r\n                }\r\n              }\r\n            },\r\n            function(dataRes, statusCode) {\r\n              tmmApp.alert('网络超时，请重试');\r\n            });\r\n        });\r\n        /*if($$('body').find(\".modal-overlay\")){\r\n          $$('body').find(\".modal-overlay\").remove();\r\n        }*/\r\n      }, 80);\r\n    }\r\n\r\n  });\r\n}\r\n\r\n/*显示选择时间时的遮罩层*/\r\nfunction showModalList() {\r\n  $$('body').find(\".modal-overlay\").remove();\r\n  if ($$('body').find(\".modal-overlay\").hasClass('tmm-picker-calendar')) {\r\n    $$(\".modal-overlay\").addClass(\"modal-overlay-visible\");\r\n  } else {\r\n    $$('body').append('<div class=\"modal-overlay modal-overlay-visible tmm-picker-calendar\"></div>');\r\n  }\r\n}\r\n\r\nvar self = null;\r\n\r\n/*显示修改觅趣名称页面*/\r\nfunction editActNamePage() {\r\n  self = this;\r\n  var data = {\r\n    'name': model.name\r\n  };\r\n  var output = appFunc.renderTpl(editActNameTpl, data);\r\n  tmmApp.getCurrentView().router.load({\r\n    content: output\r\n  });\r\n}\r\n\r\nfunction editActName() {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var name = $$('#name').val();\r\n  if (name == '') {\r\n    tmmApp.alert('觅趣名称不能为空');\r\n    return;\r\n  }\r\n  var editUrl = \"/index.php?r=api/actives/UpdateShopsName&id=\";\r\n  var data = {\r\n    \"Shops\": {\r\n      \"name\": name //商品名称\r\n    }\r\n  };\r\n  httpService.editActInfo(\r\n    editUrl,\r\n    data,\r\n    editActId,\r\n    function(dataRes, statusCode) {\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('修改觅趣名称成功!');\r\n        Activity.refreshActivityList();\r\n        getSeekfunData(seekfunDetailLink);\r\n        tmmApp.getCurrentView().router.back();\r\n        self.innerHTML = name;\r\n        goSeekfunDetailModel();\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (var msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    }\r\n  );\r\n}\r\n\r\n/*显示修改觅趣参与人数页面*/\r\n\r\nfunction editActNumPage() {\r\n  self = this;\r\n  var data = {\r\n    'num': model.actives_info.number.value\r\n  };\r\n  var output = appFunc.renderTpl(editActNumTpl, data);\r\n  tmmApp.getCurrentView().router.load({\r\n    content: output\r\n  });\r\n}\r\n\r\nfunction editActNum() {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var num = $$('#num').val();\r\n  if (num == '') {\r\n    tmmApp.alert('觅趣参与人数不能为空');\r\n    return;\r\n  }\r\n  var editUrl = \"/index.php?r=api/actives/UpdateNumber&id=\";\r\n\r\n  var data = {\r\n    \"Actives\": {\r\n      \"number\": num //觅趣数量\r\n    }\r\n  };\r\n  httpService.editActInfo(\r\n    editUrl,\r\n    data,\r\n    editActId,\r\n    function(dataRes, statusCode) {\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('修改觅趣参与人数成功!');\r\n        Activity.refreshActivityList();\r\n        getSeekfunData(seekfunDetailLink);\r\n        tmmApp.getCurrentView().router.back();\r\n        self.innerHTML = num + '人';\r\n        goSeekfunDetailModel();\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    }\r\n  );\r\n}\r\n\r\n/*显示修改服务费页面*/\r\n\r\nfunction editActTourPricePage() {\r\n  self = this;\r\n  var data = {\r\n    'tourPrice': model.actives_info.tour_price.value\r\n  };\r\n  var output = appFunc.renderTpl(editActTourPriceTpl, data);\r\n  tmmApp.getCurrentView().router.load({\r\n    content: output\r\n  });\r\n}\r\n\r\nfunction editActTourPrice() {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var tour_price = $$('#tour-price').val();\r\n  if (tour_price == '') {\r\n    tmmApp.alert('服务费不能为空');\r\n    return;\r\n  }\r\n  var editUrl = \"/index.php?r=api/actives/UpdateTourPrice&id=\";\r\n\r\n  var data = {\r\n    \"Actives\": {\r\n      \"tour_price\": tour_price //服务费\r\n    }\r\n  };\r\n  httpService.editActInfo(\r\n    editUrl,\r\n    data,\r\n    editActId,\r\n    function(dataRes, statusCode) {\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('修改服务费成功!');\r\n        Activity.refreshActivityList();\r\n        getSeekfunData(seekfunDetailLink);\r\n        tmmApp.getCurrentView().router.back();\r\n        self.innerHTML = tour_price + '元/人';\r\n        goSeekfunDetailModel();\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    }\r\n  );\r\n}\r\n/*编辑付款方式*/\r\nfunction editActPay() {\r\n  var buttons = [{\r\n    text: '选择付款方式',\r\n    color: 'title',\r\n  }, {\r\n    text: '代付',\r\n    color: 'payYellow',\r\n    onClick: function() {\r\n      editActPayType(1);\r\n    }\r\n  }, {\r\n    text: '自费',\r\n    color: 'payGreen',\r\n    onClick: function() {\r\n      editActPayType(0);\r\n    }\r\n  }];\r\n  tmmApp.actions(buttons);\r\n\r\n  $$(\".actions-modal-group\").addClass(\"tmmAPP-pay\");\r\n  var isRemove = $$(\".actions-modal\").hasClass('modal-out');\r\n  if (isRemove) {\r\n    $$(\".actions-modal-group\").removeClass('tmmAPP-pay');\r\n  }\r\n}\r\n\r\n/*编辑付款方式提交数据*/\r\nfunction editActPayType(payType) {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var editUrl = \"/index.php?r=api/actives/UpdatePayType&id=\";\r\n\r\n  var data = {\r\n    \"Actives\": {\r\n      \"pay_type\": payType //付款方式 0=AA付款 1=全额付款\r\n    }\r\n  };\r\n  httpService.editActInfo(\r\n    editUrl,\r\n    data,\r\n    editActId,\r\n    function(dataRes, statusCode) {\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('修改付款方式成功!');\r\n        Activity.refreshActivityList();\r\n        getSeekfunData(seekfunDetailLink);\r\n        if (payType == 1) {\r\n          document.getElementById(\"tmm-edit-act-pay\").innerHTML = \"代付\"\r\n        } else if (payType == 0) {\r\n          document.getElementById(\"tmm-edit-act-pay\").innerHTML = \"自费\"\r\n        }\r\n        goSeekfunDetailModel();\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    }\r\n  );\r\n}\r\n\r\n/*编辑觅趣公开性*/\r\nfunction editActOpen() {\r\n  var buttons = [{\r\n    text: '选择觅趣公开性',\r\n    color: 'title',\r\n  }, {\r\n    text: '私密',\r\n    color: 'payYellow',\r\n    onClick: function() {\r\n      editActOpenType(0);\r\n    }\r\n  }, {\r\n    text: '公开',\r\n    color: 'payGreen',\r\n    onClick: function() {\r\n      editActOpenType(1);\r\n    }\r\n  }];\r\n  tmmApp.actions(buttons);\r\n\r\n  $$(\".actions-modal-group\").addClass(\"tmmAPP-pay\");\r\n  var isRemove = $$(\".actions-modal\").hasClass('modal-out');\r\n  if (isRemove) {\r\n    $$(\".actions-modal-group\").removeClass('tmmAPP-pay');\r\n  }\r\n}\r\n\r\n/*编辑觅趣公开性提交数据*/\r\nfunction editActOpenType(isOpen) {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var editUrl = \"/index.php?r=api/actives/UpdateIsOpen&id=\";\r\n\r\n  var data = {\r\n    \"Actives\": {\r\n      \"is_open\" : isOpen   //是否开放显示 1=开放 0=不开放\r\n    }\r\n  };\r\n  httpService.editActInfo(\r\n    editUrl,\r\n    data,\r\n    editActId,\r\n    function(dataRes, statusCode) {\r\n      if (dataRes.status == 1) {\r\n        tmmApp.alert('觅趣提交审核成功!');\r\n        Activity.refreshActivityList();\r\n        getSeekfunData(seekfunDetailLink);\r\n        if (isOpen == 0) {\r\n          document.getElementById(\"tmm-edit-act-open\").innerHTML = \"私密\";\r\n        } else if (isOpen == 1) {\r\n          document.getElementById(\"tmm-edit-act-open\").innerHTML = \"公开\";\r\n        }\r\n        goSeekfunDetailModel();\r\n      } else {\r\n        if (dataRes.form) {\r\n          for (msgName in dataRes.form) {\r\n            tmmApp.alert(dataRes.form[msgName][0]);\r\n            break;\r\n          }\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      }\r\n    },\r\n    function(dataRes, statusCode) {\r\n      tmmApp.alert('网络超时，请重试');\r\n    }\r\n  );\r\n}\r\n\r\n//修改出游时间\r\nfunction editActGotime() {\r\n  var editActId = model.actives_id; //觅趣的id\r\n  var goTime = \"\";\r\n  var editUrl = \"/index.php?r=api/actives/UpdateGoTime&id=\";\r\n  var nowDate = new Date();\r\n  var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n\r\n  tmmApp.calendar({\r\n    input: '#tmm-edit-act-goDate',\r\n    closeOnSelect: true,\r\n    minDate: preDay,\r\n    monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n    dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n    dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\r\n    onDayClick: function(p, dayContainer, year, month, day) {\r\n      var goTime = appFunc.dateFormt(year, month, day);\r\n      setTimeout(function() {\r\n        tmmApp.confirm('出游日期确认修改为：' + goTime, '', function() {\r\n          var data = {\r\n            \"Actives\": {\r\n              \"go_time\": goTime //付款方式 0=AA付款 1=全额付款\r\n            }\r\n          };\r\n          httpService.editActInfo(\r\n            editUrl,\r\n            data,\r\n            editActId,\r\n            function(dataRes, statusCode) {\r\n              if (dataRes.status == 1) {\r\n                editGoTime = goTime;\r\n                tmmApp.alert('修改出游日期成功!');\r\n                Activity.refreshActivityList();\r\n                getSeekfunData(seekfunDetailLink);\r\n                document.getElementById(\"tmm-edit-act-goDate\").innerHTML = goTime;\r\n                goSeekfunDetailModel();\r\n              } else {\r\n                if (dataRes.form) {\r\n                  for (var msgName in dataRes.form) {\r\n                    tmmApp.alert(dataRes.form[msgName][0]);\r\n                    break;\r\n                  }\r\n                } else {\r\n                  tmmApp.alert('网络超时，请重试');\r\n                }\r\n              }\r\n            },\r\n            function(dataRes, statusCode) {\r\n              tmmApp.alert('网络超时，请重试');\r\n            }\r\n          );\r\n        });\r\n      }, 80);\r\n    }\r\n\r\n  });\r\n}\r\n\r\n//修改觅趣报名时间\r\nfunction editEnrolldate() {\r\n  var edit_line_start_time = '';\r\n  var edit_line_end_time = '';\r\n  // 出游日期\r\n  var goTimeDate = '';\r\n  if (editGoTime !== '') {\r\n    goTimeDate = editGoTime;\r\n  } else {\r\n    goTimeDate = model.actives_time.go_time;\r\n  }\r\n\r\n  var nowDate = new Date();\r\n  var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n  var _this = $$('#seekfun-detail #tmm-edit-act-enroll');\r\n  var num = 0;\r\n  var dateStartArr = [];\r\n  var dateArr = [];\r\n  var oldStr = '';\r\n  var str = '';\r\n  var calenderObj = tmmApp.calendar({\r\n    input: _this,\r\n    monthNames: appFunc.monthNames(),\r\n    dayNames: appFunc.dayNames(),\r\n    dayNamesShort: appFunc.dayNamesShort(),\r\n    dateFormat: 'yyyy.mm.dd',\r\n    multiple: true,\r\n    minDate: preDay,\r\n    cssClass: 'tmm-hoteldate-picker-calendar',\r\n    closeByOutsideClick: false,\r\n    scrollToInput: false,\r\n    onOpen: function() {\r\n      calenderObj.setValue([]);\r\n      appFunc.showToastBootom('请选择报名开始日期');\r\n\r\n      if (goTimeDate !== \"\") {\r\n        dateStartArr.push(goTimeDate);\r\n      }\r\n    },\r\n    onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n      calenderObj.setValue([]);\r\n\r\n      if (goTimeDate !== \"\") {\r\n        dateStartArr.push(appFunc.dateFormt(year, month, day));\r\n        var difStart = appFunc.hotelDay(dateStartArr);\r\n\r\n        if (difStart >= 0) {\r\n          setTimeout(function() {\r\n            tmmApp.alert('报名开始日期必须小于出游日期');\r\n            _this.val(oldStr);\r\n          }, 0);\r\n          dateStartArr = [];\r\n          calenderObj.close();\r\n        } else {\r\n          num++;\r\n        }\r\n      } else {\r\n        num++;\r\n      }\r\n\r\n      if (num == 1) {\r\n        edit_line_start_time = appFunc.dateFormt(year, month, day);\r\n        appFunc.hideToast();\r\n        appFunc.showToastBootom('请选择报名结束日期');\r\n        dateArr.push(appFunc.dateFormt(year, month, day));\r\n        str += appFunc.dateFormtDot(year, month, day, 1);\r\n      }\r\n      if (num == 2) {\r\n        edit_line_end_time = appFunc.dateFormt(year, month, day);\r\n        setTimeout(function() {\r\n\r\n          dateArr.push(appFunc.dateFormt(year, month, day));\r\n          var dif = appFunc.hotelDay(dateArr);\r\n          if (dif <= 0) {\r\n            tmmApp.alert('结束日期必须晚于开始日期');\r\n            _this.val(oldStr);\r\n          } else {\r\n            str += appFunc.dateFormtDot(year, month, day, 3);\r\n            oldStr = str;\r\n            _this.val(str);\r\n            dateArr.push(dif);\r\n            //提交数据\r\n            tmmApp.confirm('报名日期确认修改为：' + str, '', function() {\r\n              var editActId = model.actives_id; //觅趣的id\r\n              var editUrl = \"/index.php?r=api/actives/UpdateStartEndTime&id=\";\r\n              var data = {\r\n                \"Actives\": {\r\n                  \"start_time\": edit_line_start_time, //报名开始时间\r\n                  \"end_time\": edit_line_end_time, //报名截止时间\r\n                }\r\n              };\r\n              httpService.editActInfo(\r\n                editUrl,\r\n                data,\r\n                editActId,\r\n                function(dataRes, statusCode) {\r\n                  if (dataRes.status == 1) {\r\n                    tmmApp.alert('修改报名日期成功!');\r\n                    document.getElementById(\"tmm-edit-act-enroll\").innerHTML = edit_line_start_time + \" 至 \" + edit_line_end_time;\r\n                    edit_line_start_time = '';\r\n                    edit_line_end_time = '';\r\n                    Activity.refreshActivityList();\r\n                    goSeekfunDetailModel();\r\n                  } else {\r\n                    if (dataRes.form) {\r\n                      for (var msgName in dataRes.form) {\r\n                        tmmApp.alert(dataRes.form[msgName][0]);\r\n                        break;\r\n                      }\r\n                    } else {\r\n                      tmmApp.alert('网络超时，请重试');\r\n                    }\r\n                  }\r\n                },\r\n                function(dataRes, statusCode) {\r\n                  tmmApp.alert('网络超时，请重试');\r\n                }\r\n              );\r\n            });\r\n            //提交数据结束\r\n          }\r\n          num = 0;\r\n          str = '';\r\n          dateArr = [];\r\n          dateStartArr = [];\r\n        }, 0);\r\n        calenderObj.close();\r\n      }\r\n    },\r\n    onClose: function() {\r\n      appFunc.hideToast();\r\n    }\r\n  });\r\n\r\n\r\n}\r\n\r\n//如果出游日期未设置，添加\r\nfunction addActgoDate() {\r\n  var goTimeLink = $$(\".tmm-add-act-date\");\r\n  activityGoTime(goTimeLink);\r\n}\r\n\r\n/* 到达线路详情页面 */\r\nfunction goLineDeitalPage() {\r\n  var self = $$(this);\r\n  bridge.add('goLineDeital', function() {\r\n    lineId = self.attr('data-id');\r\n\r\n    paymentModel.goPage();\r\n  });\r\n  self.attr('data-changeline', changeLineFromPage);\r\n  shopModule.initDetail.call(this);\r\n}\r\n\r\n/**\r\n * 去代付页面\r\n * @return {[type]} [description]\r\n */\r\nfunction payActivityForA() {\r\n    var link = $$(this).attr('data-link') + '&id=' + $$(this).attr('data-id');\r\n\r\n}\r\n\r\n\r\nvar Activity = {\r\n  loadActivity: function() {\r\n\r\n    if (!appFunc.getLocalUserInfo()) {\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n\r\n    var userInfo = JSON.parse(appFunc.getLocalUserInfo());\r\n    if (userInfo.phone === undefined || userInfo.phone == 'undefined' || userInfo.phone === '' || userInfo.phone == {}) {\r\n      roleModule.redirectToLogin();\r\n      return;\r\n    }\r\n\r\n    Activity.bindEvent();\r\n\r\n\r\n    httpService.getOrderActivesList(\r\n      '',\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          nextPageLink = dataRes.data.page.next;\r\n          var renderData = {\r\n            'actList': dataRes.data.list_data\r\n          };\r\n\r\n          var output = appFunc.renderTpl(my_act_tpl, renderData);\r\n\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n\r\n          appFunc.hideToolbar();\r\n          if ($$('#tmm-my-activity-page .activityGoTimeSel') != null) {\r\n            $$.each($$('#tmm-my-activity-page .activityGoTimeSel'), function(index, value) {\r\n              activityGoTime(value);\r\n            });\r\n          }\r\n          tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          if ('login' in dataRes.data) {\r\n            roleModule.redirectToLogin();\r\n          } else {\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试', '');\r\n        tmmApp.pullToRefreshDone();\r\n      }\r\n    );\r\n  },\r\n\r\n  refreshActivityList: function() {\r\n\r\n    httpService.getOrderActivesList(\r\n      '',\r\n      function(dataRes, statusCode) {\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        activityViewModel.refreshActivityList(dataRes.data);\r\n        if ($$('#tmm-my-activity-page .activityGoTimeSel') != null) {\r\n          $$.each($$('#tmm-my-activity-page .activityGoTimeSel'), function(index, value) {\r\n            activityGoTime(value);\r\n          });\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n        tmmApp.pullToRefreshDone();\r\n      }\r\n    );\r\n  },\r\n\r\n  infiniteActivityList: function() {\r\n    if (nextPageLink) {\r\n      if (loading) return;\r\n      loading = true;\r\n      tmmApp.showIndicator();\r\n\r\n      httpService.getOrderActivesList(\r\n        nextPageLink,\r\n        function(dataRes, statusCode) {\r\n          nextPageLink = dataRes.data.page.next;\r\n          activityViewModel.infiniteActivityList(dataRes.data);\r\n          if ($$('#tmm-my-activity-page .activityGoTimeSel') != null) {\r\n            $$.each($$('#tmm-my-activity-page .activityGoTimeSel'), function(index, value) {\r\n              activityGoTime(value);\r\n            });\r\n          }\r\n          setTimeout(function() {\r\n            tmmApp.hideIndicator();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n\r\n      setTimeout(function() {\r\n        tmmApp.hideIndicator();\r\n        moreLoading = false;\r\n        $$(\"#tmm-my-activity-page #no-more\").css('display', 'block');\r\n        $$(\"#tmm-my-activity-page #no-more\").text(\"没有更多了\");\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 300);\r\n      setTimeout(function() {\r\n        $$(\"#tmm-my-activity-page #no-more\").hide();\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 500);\r\n    }\r\n  },\r\n\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '#add-actfunning',\r\n      event: 'click',\r\n      handler: addAct\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-my-activity-cancel',\r\n      event: 'click',\r\n      handler: appFunc.activityRefund\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.go-seekfun-detail',\r\n      event: 'click',\r\n      handler: goSeekfunDetail\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.skip-day .skip-btn',\r\n      event: 'click',\r\n      handler: skipGoOffTime\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-seekfun-changeLine',\r\n      event: 'click',\r\n      handler: skipGoOffTime\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.seekfun-detail-page .seekfun-tabs',\r\n      event: 'click',\r\n      handler: showTabs\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#next-go-journey',\r\n      event: 'click',\r\n      handler: nextGoJourney\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#sel-pay-type',\r\n      event: 'click',\r\n      handler: nextGoPayment\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.seekfun-detail-back',\r\n      event: 'click',\r\n      handler: goBackMyActivityPage\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.select-journery-item',\r\n      event: 'click',\r\n      handler: goLineDeitalPage\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-activity-page .pull-to-refresh-content',\r\n      event: 'refresh',\r\n      handler: Activity.refreshActivityList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-activity-page .pull-to-refresh-content',\r\n      event: 'infinite',\r\n      handler: Activity.infiniteActivityList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.activityGoTimeSel',\r\n      event: 'click',\r\n      handler: showModalList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.payActivityMoney',\r\n      event: 'click',\r\n      handler: goActOrderCtrl\r\n    },{\r\n      element: 'body',\r\n      selector: '#myView .tmm-add-act-date',\r\n      event: 'click',\r\n      handler: showModalList\r\n    }, {\r\n      element: 'html',\r\n      selector: '#tmm-edit-act-goDate',\r\n      event: 'click',\r\n      handler: showModalList\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-edit-act-name',\r\n      event: 'click',\r\n      handler: editActNamePage\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#edit-title',\r\n      event: 'click',\r\n      handler: editActName\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-edit-act-num',\r\n      event: 'click',\r\n      handler: editActNumPage\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#edit-num',\r\n      event: 'click',\r\n      handler: editActNum\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-edit-act-tour-price',\r\n      event: 'click',\r\n      handler: editActTourPricePage\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#edit-tour-price',\r\n      event: 'click',\r\n      handler: editActTourPrice\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-edit-act-pay',\r\n      event: 'click',\r\n      handler: editActPay\r\n    }, { //编辑公开性\r\n      element: '#myView',\r\n      selector: '#tmm-edit-act-open',\r\n      event: 'click',\r\n      handler: editActOpen\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.tmm-journeylist-changeLine',\r\n      event: 'click',\r\n      handler: changeLine\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-examine-status',\r\n      event: 'click',\r\n      handler: changeActExamineDetail\r\n    }, {\r\n      element: 'body',\r\n      selector: '.tmm-examine-status-list',\r\n      event: 'click',\r\n      handler: changeActExamineList\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = Activity;\r\n"},{"id":111,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","name":"./src/modules/createAct/activityView.js","index":111,"index2":107,"size":1038,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./activityView","loc":"10:22-47"}],"source":"var log = require('../utils/log'),\r\n  httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc'),\r\n  my_act_tpl_list = require('./my-create-act-list.tpl.html');\r\n\r\n\r\n\r\nvar activityView = {\r\n\r\n  refreshActivityList: function(dataRes) {\r\n    var renderData = {\r\n      'actList': dataRes.list_data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(my_act_tpl_list, renderData);\r\n\r\n    $$('#tmm-my-activity-page').find('.tmm-activity-card-list').html(output);\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n\r\n  },\r\n\r\n  infiniteActivityList: function(dataRes) {\r\n    var renderData = {\r\n      'actList': dataRes.list_data\r\n    };\r\n\r\n    var output = appFunc.renderTpl(my_act_tpl_list, renderData);\r\n\r\n    $$('#tmm-my-activity-page').find('.tmm-activity-card-list').append(output);\r\n    tmmApp.initImagesLazyLoad(tmmApp.getCurrentView().activePage.container);\r\n  }\r\n}\r\n\r\nmodule.exports = activityView;\r\n"},{"id":112,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act-list.tpl.html","name":"./src/modules/createAct/my-create-act-list.tpl.html","index":112,"index2":106,"size":5861,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":111,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activityView.js","module":"./src/modules/createAct/activityView.js","moduleName":"./src/modules/createAct/activityView.js","type":"cjs require","userRequest":"./my-create-act-list.tpl.html","loc":"4:20-60"}],"source":"module.exports = \"{{#each actList}}\\r\\n        <div class=\\\"journery-item\\\">\\r\\n          <div class=\\\"con-inner go-seekfun-detail\\\" data-link=\\\"{{link}}\\\">\\r\\n            <div class=\\\"pic\\\">\\r\\n            {{#if image}}\\r\\n              <img src=\\\"{{image}}\\\">\\r\\n            {{else}}\\r\\n              <img src=\\\"\" + require(\"../../styles/images/default.jpg\") + \"\\\">\\r\\n            {{/if}}\\r\\n            </div>\\r\\n            <div class=\\\"describe\\\">\\r\\n              <p class=\\\"tit\\\">{{name}}</p>\\r\\n              <p class=\\\"price\\\">￥{{price}}起/人\\r\\n                {{#js_compare \\\"this.audit_status.value =='1'\\\"}}　参与人数：{{js \\\"this.actives_info.number.value - this.actives_info.order_number.value\\\"}}/{{actives_info.number.value}}\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n              <p class=\\\"tour-day\\\">出游日期：\\r\\n                {{#js_compare \\\"this.go_time_value =='0'\\\"}}\\r\\n                  待定\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.go_time_value =='1'\\\"}}\\r\\n                  {{go_time}}\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n\\r\\n              <!--显示觅趣状态 1上线-->\\r\\n              <p class=\\\"status\\\">\\r\\n                {{#js_compare \\\"(this.audit_status.value =='-2' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='' && this.shops_status.value =='0')\\\"}}\\r\\n                  审核未通过\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='0') || (this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='0')\\\"}}\\r\\n                  待上线\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1') || (this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1')\\\"}}\\r\\n                  未开始\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='-1' && this.shops_status.value =='1'\\\"}}\\r\\n                  已取消\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n              \\r\\n              <p class=\\\"status orange\\\">\\r\\n                {{#js_compare \\\"this.audit_status.value =='0' && this.audit_status.value =='0' && this.shops_status.value =='0'\\\"}}\\r\\n                  待审核\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n\\r\\n              {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='1'\\\"}}\\r\\n                <p class=\\\"status green\\\">报名中</p>\\r\\n              {{/js_compare}}\\r\\n\\r\\n              {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='1'\\\"}}\\r\\n                <p class=\\\"status red\\\">报名结束</p>\\r\\n              {{/js_compare}}\\r\\n              <!--显示觅趣状态-->\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          {{#js_compare \\\"this.audit_status.value =='-1' || this.audit_status.value == '-4'\\\"}}\\r\\n          <div class=\\\"act-fail\\\">\\r\\n            <div class=\\\"act-fail-title\\\">审核未通过原因</div>\\r\\n            <div class=\\\"act-fail-res\\\">{{audit_status.info}}</div>\\r\\n          </div>\\r\\n          {{/js_compare}}\\r\\n          \\r\\n\\r\\n          <!--根据条件显示按钮 -->\\r\\n          <div class=\\\"con-footer\\\">\\r\\n          {{#js_compare \\\"(this.audit_status.value =='-2' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='0' && this.shops_status.value =='0')\\\"}}\\r\\n            \\r\\n              <span class=\\\"outline-button\\\" style=\\\"display:none;\\\">删除</span>\\r\\n              <span class=\\\"outline-button tmm-examine-status-list\\\" data-link=\\\"{{link}}\\\">提交审核</span>\\r\\n           \\r\\n          {{/js_compare}}\\r\\n\\r\\n          \\r\\n\\r\\n          {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1') || (this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='1')\\\"}}\\r\\n           \\r\\n              <span class=\\\"outline-button tmm-my-activity-cancel\\\">取消觅趣</span>\\r\\n              {{#js_compare \\\"this.set_go_time.link !=''\\\"}}\\r\\n                <span class=\\\"outline-button activityGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{set_go_time.link}}\\\">确认出游时间</span>\\r\\n              {{/js_compare}}\\r\\n           \\r\\n          {{/js_compare}}\\r\\n\\r\\n          {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='1' && this.set_go_time.link !=''\\\"}}\\r\\n            \\r\\n              <span class=\\\"outline-button activityGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{set_go_time.link}}\\\">确认出游时间</span>\\r\\n            \\r\\n          {{/js_compare}}\\r\\n\\r\\n          {{#js_compare \\\"this.shops_status.value == 1&& this.audit_status.value == 1 && this.attend.number > 0 && (this.actives_status.value == 1 || this.actives_status.value == 2) && this.actives_info.order_count.value == 0 && this.pay_type.value == 1 && this.order.link\\\"}}\\r\\n              <span class=\\\"outline-button payActivityMoney\\\" data-link=\\\"{{link}}\\\" data-orderlink=\\\"{{order.link}}\\\" data-id=\\\"{{order.value}}\\\" data-time=\\\"{{go_time_value}}\\\" data-type=\\\"{{order.type}}\\\">支付费用</span>\\r\\n          {{/js_compare}}\\r\\n          </div>\\r\\n          <!--根据条件显示按钮 -->\\r\\n        </div>\\r\\n        {{/each}}\";"},{"id":113,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/jpg!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\default.jpg","name":"./src/styles/images/default.jpg","index":113,"index2":105,"size":2877,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":112,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act-list.tpl.html","module":"./src/modules/createAct/my-create-act-list.tpl.html","moduleName":"./src/modules/createAct/my-create-act-list.tpl.html","type":"cjs require","userRequest":"../../styles/images/default.jpg","loc":"1:318-360"},{"moduleId":114,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act.tpl.html","module":"./src/modules/createAct/my-create-act.tpl.html","moduleName":"./src/modules/createAct/my-create-act.tpl.html","type":"cjs require","userRequest":"../../styles/images/default.jpg","loc":"1:1308-1350"}],"source":"module.exports = \"data:image/jpg;base64,/9j/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAgEBAgICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//dAAQACv/uAA5BZG9iZQBkwAAAAAH/wAARCABGAFADABEAAREBAhEB/8QBogAAAAcBAQEBAQAAAAAAAAAABAUDAgYBAAcICQoLAQACAgMBAQEBAQAAAAAAAAABAAIDBAUGBwgJCgsQAAIBAwMCBAIGBwMEAgYCcwECAxEEAAUhEjFBUQYTYSJxgRQykaEHFbFCI8FS0eEzFmLwJHKC8SVDNFOSorJjc8I1RCeTo7M2F1RkdMPS4ggmgwkKGBmElEVGpLRW01UoGvLj88TU5PRldYWVpbXF1eX1ZnaGlqa2xtbm9jdHV2d3h5ent8fX5/c4SFhoeIiYqLjI2Oj4KTlJWWl5iZmpucnZ6fkqOkpaanqKmqq6ytrq+hEAAgIBAgMFBQQFBgQIAwNtAQACEQMEIRIxQQVRE2EiBnGBkTKhsfAUwdHhI0IVUmJy8TMkNEOCFpJTJaJjssIHc9I14kSDF1STCAkKGBkmNkUaJ2R0VTfyo7PDKCnT4/OElKS0xNTk9GV1hZWltcXV5fVGVmZ2hpamtsbW5vZHV2d3h5ent8fX5/c4SFhoeIiYqLjI2Oj4OUlZaXmJmam5ydnp+So6SlpqeoqaqrrK2ur6/9oADAMAAAERAhEAPwD94v8AnuaD5k9ABnHOQtVldQyMrqagMpqpI6iviDjSrsaV2NK6hpWhoeh7HGldjSuxpWqioWo5FSwWu5UbFgOpAPXGlbxpXY0r/9D94UiCSN42JCupUkdRXuO2xzj3ISe2ju7O7ECxtLDM1ZZRX0VQVKspNeMhqAxp8I/BVO8UNilRXpXenh3xVIoEu7W6ku7xJJZ7+b0TFas8trbWkTARSNyosL0NdtzuCMUp5ih2KpdexMnK8jaRjGAzIm8kYXYNBT9nfdfp33xSirZrh4I3ukjjnarFIiSoQmsZIO6yFftDoD9wVV8UP//R/eLnHt7sVdirsVdXFXYq7pirgabjY+2KuxV2Kv8A/9L94MTmSKOQqULorFCa8SR2PdT1B7gjOPchUxQ7FXzZ/wA5N32uWvlfyPZ6F5r1LyZca9+aPlrQLrXtN1O80prOw1TTteimku7ixubSV7GCRUmkRnCExAmhAIsx1ZsXszj+h84f85E6H5y/J+28sXegfnZ+aOo/pt7y2ubDWPOurNeiSzigka/szZXVoPqTGbgyMjNGxX425Gk4ES5gM4ES5gPnW888/nbYaNpGv3nnz8yINH8wPqUWj30nnDzEIL9tKlit9QEJ/SZqLeaYIa0qa06HJ1C6oWyqO+wfY/8Azhf5t81eaV/MceZvM3mHzF9QHk76j+ntZ1HVvqf1n/FH1n6p+kLm4+ri4+rx8+HHnwWteIpXlAFU1SfcuUsEHfXkdhbNcOC5rwijFaySnoCQCERRux7D3xShNI1GXUIpDMsfKIhTLEOKMT+yyVPF6bjsQD8sVf/T/eLnHt7qYq7FXx7/AM5s/wDkq/L/AP5sHSv/ABHPNeW4vq+DZj+r4PlfUfyN1uX8k9E/NXVr/U5L59Rgnvba4aa+bT/IF20NnYX8NvI5ld7ef/SQiMqG0uATx4HJ8Q4+EMuL1UH25+Zv5Q6F5x/I+z8q+UYoZ/8ADujWOreRriHg5u5LKy9SJVmUL6x8wWUrqzEhXmmWRqlcqjIidlgJVK3hn/OC6srfmorKVZT5JVlYEMpB83gqQaEEEbjJ5ejLJ0foDlLU77j7EAg/MGoOKtBVWvFUQE8iERUBY7ciFABNB1xV/9T94blhG5jBLhSVAAJqPAHYmlaZx7kJdatK0wYFwpP71TUjiB8Qkr8IepHGgHXrXoqmeKHzt/zkv5F8zef/ACV5e0ryvoP+JLqw886TrOoaV+lNP0f19JtdJ162ux9e1G7s4o/UkvI4/gZpB6nIKQpInjIB37mcCAd+5jd15m/5yGvNIuNBuP8AnHry8+j3OnSaTNp/+PPLS2zadNbG0ezEa6sFWE2zFABSi9MNQu+Ldaj3/Yxn8u7z/nJvyD5UsPKY/KKw1600l7iLTbu+89eV4ru302SZpbbT5Wi1llnWyDlEei/uwq8QFGGXhk3aSIk3f2M4/ILyZ5z8v+aPzZ8yebPJdv5HTzrfeWtRsNLtda0nWrb61bDzFJrJgk0y8umgja71BZQsioB63FKhTQTIIABukSIoAG3034bgE9ASAT8gdzlbF2KHYq//1f3i5x7e7+O5xVSnnhto2mnkWONdqkirMa8Y0BpykelFHc4qg9N1KPUopXWJ4JIJPTkikIYgNUxuCKbMo3FPhbbfFKYHp933V3/DFDQ3IPcdTuPo398UrsUJBqEV414pj5NE5oBvTiPshSNk3/HFKeoHCIJCDIEAcju39gxVdih//9b94MM0VzDHcW7iSCZQ0bjuDvxb+V16MDuDnHuQqYoWuiSI0ciLJG6lXRhUFSKH3U0OxFCMVQlhp9vp0TxW/JvUkaR5JKGRv99xlh1SFdh49TucUo3FDsVdirqkV369ff54q7FUNFcrJc3NmwCXFuVkRK7z2kiBo7iMHcgNyVwPske+KX//1/3fR2ttC8kkMEcLytzkMfJVdz1dkDenyNdyAK5x7kK+KHYq7FXYq7FXYq7FXYqoy21vO0TzQpJJCSYZDyWSInqEdGVgrdxWhxS//9D/2Q==\""},{"id":114,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act.tpl.html","name":"./src/modules/createAct/my-create-act.tpl.html","index":114,"index2":108,"size":6979,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./my-create-act.tpl.html","loc":"11:15-50"}],"source":"module.exports = \"<!-- 我发起的觅趣 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-my-activity-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">我发起的觅趣</div>\\r\\n    <div class=\\\"right tmm-act-right\\\" id=\\\"add-actfunning\\\">\\r\\n      <!-- 新增 -->\\r\\n      <i class=\\\"icon ticon-add\\\" style=\\\"color:red;\\\"></i>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"my-activity\\\" class=\\\"page\\\" id=\\\"tmm-my-activity-page\\\">\\r\\n    <div data-distance=\\\"50\\\" class=\\\"page-content pull-to-refresh-content infinite-scroll\\\" style=\\\"padding-bottom:0px;\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-activity-card-list\\\">\\r\\n\\r\\n\\r\\n        {{#each actList}}\\r\\n        <div class=\\\"journery-item\\\">\\r\\n          <div class=\\\"con-inner go-seekfun-detail\\\" data-link=\\\"{{link}}\\\">\\r\\n            <div class=\\\"pic\\\">\\r\\n            {{#if image}}\\r\\n              <img src=\\\"{{image}}\\\">\\r\\n            {{else}}\\r\\n              <img src=\\\"\" + require(\"../../styles/images/default.jpg\") + \"\\\">\\r\\n            {{/if}}\\r\\n            </div>\\r\\n            <div class=\\\"describe\\\">\\r\\n              <p class=\\\"tit\\\">{{name}}</p>\\r\\n              <p class=\\\"price\\\">￥{{price}}起/人\\r\\n                {{#js_compare \\\"this.audit_status.value =='1'\\\"}}　参与人数：{{js \\\"this.actives_info.number.value - this.actives_info.order_number.value\\\"}}/{{actives_info.number.value}}\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n              <p class=\\\"tour-day\\\">出游日期：\\r\\n                {{#js_compare \\\"this.go_time_value =='0'\\\"}}\\r\\n                  待定\\r\\n                {{/js_compare}}\\r\\n                {{#js_compare \\\"this.go_time_value =='1'\\\"}}\\r\\n                  {{go_time}}\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n\\r\\n              <!--显示觅趣状态 1上线-->\\r\\n              <p class=\\\"status\\\">\\r\\n                {{#js_compare \\\"(this.audit_status.value =='-2' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='' && this.shops_status.value =='0')\\\"}}\\r\\n                  审核未通过\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='0') || (this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='0')\\\"}}\\r\\n                  待上线\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1') || (this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1')\\\"}}\\r\\n                  未开始\\r\\n                {{/js_compare}}\\r\\n\\r\\n                {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='-1' && this.shops_status.value =='1'\\\"}}\\r\\n                  已取消\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n              \\r\\n              <p class=\\\"status orange\\\">\\r\\n                {{#js_compare \\\"this.audit_status.value =='0' && this.audit_status.value =='0' && this.shops_status.value =='0'\\\"}}\\r\\n                  待审核\\r\\n                {{/js_compare}}\\r\\n              </p>\\r\\n\\r\\n              {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='1'\\\"}}\\r\\n                <p class=\\\"status green\\\">报名中</p>\\r\\n              {{/js_compare}}\\r\\n\\r\\n              {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='1'\\\"}}\\r\\n                <p class=\\\"status red\\\">报名结束</p>\\r\\n              {{/js_compare}}\\r\\n              <!--显示觅趣状态-->\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          {{#js_compare \\\"this.audit_status.value =='-1' || this.audit_status.value == '-4'\\\"}}\\r\\n          <div class=\\\"act-fail\\\">\\r\\n            <div class=\\\"act-fail-title\\\">审核未通过原因</div>\\r\\n            <div class=\\\"act-fail-res\\\">{{audit_status.info}}</div>\\r\\n          </div>\\r\\n          {{/js_compare}}\\r\\n          \\r\\n\\r\\n          <!--根据条件显示按钮 -->\\r\\n          <div class=\\\"con-footer\\\">\\r\\n          {{#js_compare \\\"(this.audit_status.value =='-2' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='0' && this.shops_status.value =='0')\\\"}}\\r\\n            \\r\\n              <span class=\\\"outline-button\\\" style=\\\"display:none;\\\">删除</span>\\r\\n              <span class=\\\"outline-button tmm-examine-status-list\\\" data-link=\\\"{{link}}\\\">提交审核</span>\\r\\n           \\r\\n          {{/js_compare}}\\r\\n\\r\\n          \\r\\n\\r\\n          {{#js_compare \\\"(this.audit_status.value =='1' && this.actives_status.value =='0' && this.shops_status.value =='1') || (this.audit_status.value =='1' && this.actives_status.value =='1' && this.shops_status.value =='1')\\\"}}\\r\\n           \\r\\n              <span class=\\\"outline-button tmm-my-activity-cancel\\\">取消觅趣</span>\\r\\n              {{#js_compare \\\"this.set_go_time.link !=''\\\"}}\\r\\n                <span class=\\\"outline-button activityGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{set_go_time.link}}\\\">确认出游时间</span>\\r\\n              {{/js_compare}}\\r\\n           \\r\\n          {{/js_compare}}\\r\\n\\r\\n          {{#js_compare \\\"this.audit_status.value =='1' && this.actives_status.value =='2' && this.shops_status.value =='1' && this.set_go_time.link !=''\\\"}}\\r\\n            \\r\\n              <span class=\\\"outline-button activityGoTimeSel\\\" data-id=\\\"{{value}}\\\" data-link=\\\"{{set_go_time.link}}\\\">确认出游时间</span>\\r\\n            \\r\\n          {{/js_compare}}\\r\\n\\r\\n          {{#js_compare \\\"this.shops_status.value == 1&& this.audit_status.value == 1 && this.attend.number > 0 && (this.actives_status.value == 1 || this.actives_status.value == 2) && this.actives_info.order_count.value == 0 && this.pay_type.value == 1 && this.order.link\\\"}}\\r\\n              <span class=\\\"outline-button payActivityMoney\\\" data-link=\\\"{{link}}\\\" data-orderlink=\\\"{{order.link}}\\\" data-id=\\\"{{order.value}}\\\" data-time=\\\"{{go_time_value}}\\\" data-type=\\\"{{order.type}}\\\">支付费用</span>\\r\\n          {{/js_compare}}\\r\\n          </div>\\r\\n          <!--根据条件显示按钮 -->\\r\\n        </div>\\r\\n        {{/each}}\\r\\n\\r\\n\\r\\n      </div>\\r\\n      \\r\\n      <div id=\\\"no-more\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <!--添加内容 -->\\r\\n</div>\\r\\n\";"},{"id":115,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\select-day.tpl.html","name":"./src/modules/createAct/select-day.tpl.html","index":115,"index2":110,"size":1198,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./select-day.tpl.html","loc":"12:17-49"}],"source":"module.exports = \"<!-- 出游时间 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">选择出游日期</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <img src=\\\"\" + require(\"../../styles/images/arrow.png\") + \"\\\"  id=\\\"next-go-journey\\\">\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"select-day\\\" class=\\\"page select-day-page\\\" >\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"content-block-inner\\\" style=\\\"margin-top: -5px;margin-bottom: 10px; padding: 0;margin-left: 0px;\\\">\\r\\n        <div id=\\\"calendar-inline-container\\\"></div>\\r\\n      </div>\\r\\n  \\r\\n      <div class=\\\"skip-day\\\">\\r\\n        <div class=\\\"tit\\\">还没决定出游日期 <span class=\\\"skip-btn\\\">跳过</span></div>\\r\\n        <div class=\\\"txt\\\">还没决定出游日期？无需担心，您可以先规划行程，后续可添加出游日期。\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n      <div class=\\\"act-indicator\\\">\\r\\n        <span class=\\\"active\\\"></span><span></span><span></span><span></span>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":116,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\arrow.png","name":"./src/styles/images/arrow.png","index":116,"index2":109,"size":517,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\select-day.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":115,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\select-day.tpl.html","module":"./src/modules/createAct/select-day.tpl.html","moduleName":"./src/modules/createAct/select-day.tpl.html","type":"cjs require","userRequest":"../../styles/images/arrow.png","loc":"1:349-389"},{"moduleId":117,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\journey-list.tpl.html","module":"./src/modules/createAct/journey-list.tpl.html","moduleName":"./src/modules/createAct/journey-list.tpl.html","type":"cjs require","userRequest":"../../styles/images/arrow.png","loc":"1:418-458"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAARQAAAEUBOP42OwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADiSURBVDiNrdIxTkJREIXh/xl6ormxEqwpaACNU0kBxM7pcQEugT2wDRZweyiguglRO61soGVCcAWP5pEQAoXv3mlP8uVMcrI8z0l5V0m1MqCpvJtKMxkIDIGFqbRSgW/AHzAzlXY06HxYAc/ArkA7sQ1xPqyBLrAFpqbyEAVeQB8BstgdmsodMAccMMg2r08j4CVKhVugAXwnH3byl6MamkoNWBww58OyNGgq9aLZDdB3PiwBKpHYdYF9HLJ/g6ZyX2BVoOd8+DzOyzScHGFfp2EZcAz8Oh9+zoXRszm95MPeA0a6S8iGt+yzAAAAAElFTkSuQmCC\""},{"id":117,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\journey-list.tpl.html","name":"./src/modules/createAct/journey-list.tpl.html","index":117,"index2":111,"size":3068,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./journey-list.tpl.html","loc":"13:19-53"}],"source":"module.exports = \"<!-- 行程列表 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">{{seekfunTitle}}</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      {{#js_compare \\\"this.seekfunChangeLine == '0'\\\"}}\\r\\n      <img src=\\\"\" + require(\"../../styles/images/arrow.png\") + \"\\\" id=\\\"sel-pay-type\\\">\\r\\n      {{/js_compare}}\\r\\n    </div>\\r\\n    \\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"journey-list\\\" class=\\\"page journey-list-page\\\" style=\\\"padding-top: 40px;\\\">\\r\\n    <div class=\\\"tmm-journey-subnavbar\\\">\\r\\n      \\r\\n      <div class=\\\"subnav-item distance active\\\"><span>{{js \\\"this.orientation.value ? this.orientation.value.address_info.name : (this.location.value ? this.location.value.address_info.name : '选择')\\\"}}</span></div>\\r\\n      <div class=\\\"subnav-item popularity \\\"><span>按人气</span></div>\\r\\n      \\r\\n    </div>\\r\\n\\r\\n    \\r\\n\\r\\n    <div class=\\\"page-content pull-to-refresh-content infinite-scroll\\\" style=\\\"padding-top:40px;\\\">\\r\\n\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n  \\r\\n    <p style=\\\"position:absolute; top: 80px; left:0;width:100%;text-align:center;\\\"> 没有更多数据了 </p>\\r\\n    <div class=\\\"journery-list\\\">\\r\\n    {{#each list_data}}\\r\\n      <div class=\\\"journery-item\\\">\\r\\n        <div class=\\\"con-inner select-journery-item\\\" data-select=\\\"1\\\" data-link=\\\"{{link}}\\\" data-id=\\\"{{value}}\\\" data-type=\\\"{{classliy.value}}\\\">\\r\\n          <div class=\\\"pic\\\">\\r\\n            <img src=\\\"{{image}}\\\" alt=\\\"{{name}}\\\">\\r\\n          </div>\\r\\n          <div class=\\\"describe\\\">\\r\\n            <p class=\\\"tit\\\">{{name}}</p>\\r\\n            <p class=\\\"price\\\">￥{{price}} 起/人 {{day_num}}天行程</p>\\r\\n            <p class=\\\"price\\\">{{#if this.isSortForDistance}}距离：{{distance}}{{else}} 人气：{{brow}}{{/if}}</p>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- <label class=\\\"item-select\\\">\\r\\n          <input type=\\\"radio\\\" name=\\\"item-radio\\\" value=\\\"{{value}}\\\" >\\r\\n        </label> -->\\r\\n        <label class=\\\"label-checkbox item-content item-select\\\">\\r\\n          <input type=\\\"radio\\\" name=\\\"item-radio\\\" value=\\\"{{value}}\\\">\\r\\n          <div class=\\\"item-media\\\">\\r\\n            <i class=\\\"icon icon-form-checkbox\\\"></i>\\r\\n          </div>\\r\\n        </lable>\\r\\n      </div>\\r\\n    {{/each}}\\r\\n    </div>\\r\\n    </div>\\r\\n    {{#js_compare \\\"this.seekfunChangeLine == '1'\\\"}}\\r\\n      <div class=\\\"tmm-seekfun-btn\\\">\\r\\n        <span class=\\\"outline-button tmm-journeylist-changeLine\\\">确认更换行程</span>\\r\\n      </div>\\r\\n    {{/js_compare}}\\r\\n    {{#js_compare \\\"this.seekfunChangeLine == '0'\\\"}}\\r\\n    <div class=\\\"act-indicator\\\"><span class=\\\"active\\\"></span><span class=\\\"active\\\"></span><span></span><span></span></div>\\r\\n    {{/js_compare}}\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":118,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\journey-list-item.tpl.html","name":"./src/modules/createAct/journey-list-item.tpl.html","index":118,"index2":112,"size":972,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./journey-list-item.tpl.html","loc":"14:23-62"}],"source":"module.exports = \"{{#each list_data}}\\r\\n<div class=\\\"journery-item\\\">\\r\\n  <div class=\\\"con-inner select-journery-item\\\" data-select=\\\"1\\\" data-link=\\\"{{link}}\\\" data-id=\\\"{{value}}\\\" data-type=\\\"{{classliy.value}}\\\">\\r\\n    <div class=\\\"pic\\\">\\r\\n      <img src=\\\"{{image}}\\\" alt=\\\"{{name}}\\\">\\r\\n    </div>\\r\\n    <div class=\\\"describe\\\">\\r\\n      <p class=\\\"tit\\\">{{name}}</p>\\r\\n      <p class=\\\"price\\\">￥{{price}} 起/人 {{day_num}}天行程</p>\\r\\n      <p class=\\\"price\\\">{{#if isSortForDistance}}距离：{{distance}}{{else}} 人气：{{brow}}{{/if}}</p>\\r\\n    </div>\\r\\n  </div>\\r\\n  <!-- <label class=\\\"item-select\\\">\\r\\n    <input type=\\\"radio\\\" name=\\\"item-radio\\\" value=\\\"{{value}}\\\" >\\r\\n  </label> -->\\r\\n  <label class=\\\"label-checkbox item-content item-select\\\">\\r\\n    <input type=\\\"radio\\\" name=\\\"item-radio\\\" value=\\\"{{value}}\\\">\\r\\n    <div class=\\\"item-media\\\">\\r\\n      <i class=\\\"icon icon-form-checkbox\\\"></i>\\r\\n    </div>\\r\\n  </lable>\\r\\n</div>\\r\\n{{/each}}\\r\\n\";"},{"id":119,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\seekfun-detail.tpl.html","name":"./src/modules/createAct/seekfun-detail.tpl.html","index":119,"index2":114,"size":9865,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./seekfun-detail.tpl.html","loc":"15:18-54"}],"source":"module.exports = \"<!-- 觅趣详情 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"seekfun-detail-back link\\\" data-type=\\\"{{type}}\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣详情</div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div data-page=\\\"seekfun-detail-create infinite-scroll\\\" class=\\\"page seekfun-detail-page\\\" id=\\\"seekfun-detail\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"seekfun-banner\\\">\\r\\n        {{#if image}}\\r\\n        <img src=\\\"{{image}}\\\" class=\\\"commond_bg\\\">\\r\\n        {{else}}\\r\\n        <img src=\\\"\" + require(\"../../styles/images/defaultbig.jpg\") + \"\\\">\\r\\n        {{/if}}\\r\\n        <div class=\\\"seekfun-tabs\\\">\\r\\n          <span class=\\\"tab-item journery active\\\">行程</span>\\r\\n          <span class=\\\"tab-item join\\\">参与人</span>\\r\\n          <span class=\\\"tab-item intro\\\">概要</span>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!-- 行程 -->\\r\\n      <div class=\\\"journery-block\\\">\\r\\n      {{#each items_fare}}\\r\\n        <div class=\\\"seekfun-item\\\">\\r\\n\\r\\n          {{#if @key%2}}\\r\\n          <div class=\\\"day-tit\\\">\\r\\n            <div class=\\\"tit\\\" style=\\\"margin-top: 20px;margin-left: -10px;\\\">{{mergeDay @key}}</div>\\r\\n          </div>\\r\\n          {{/if}}\\r\\n\\r\\n          {{#each this}}\\r\\n            {{#each this}}\\r\\n              {{#each fare}}\\r\\n              <div class=\\\"day-item\\\">\\r\\n                <span class=\\\"img\\\">\\r\\n                  <i class=\\\"icon ticon-type{{../classliy.value}}\\\"></i>\\r\\n                </span>\\r\\n                <div class=\\\"describe\\\">\\r\\n                  <div class=\\\"tit\\\">{{../name}}</div>\\r\\n                  {{#js_compare \\\"this.room_number != '0'\\\"}}\\r\\n                  <div class=\\\"txt\\\">{{name}} 　{{room_number}}人间　￥{{price}}</div>\\r\\n                  {{/js_compare}}\\r\\n                  {{#js_compare \\\"this.room_number == '0'\\\"}}\\r\\n                  <div class=\\\"txt\\\">{{name}} 　{{info}}　￥{{price}}</div>\\r\\n                  {{/js_compare}}\\r\\n                </div>\\r\\n              </div>\\r\\n              {{/each}}\\r\\n            {{/each}}\\r\\n          {{/each}}\\r\\n        </div>\\r\\n        {{/each items_fare}}\\r\\n        </div>\\r\\n      <!-- 参与人 -->\\r\\n      <div class=\\\"join-block\\\" >\\r\\n        <p style=\\\"text-align: center;margin-top: 20px;\\\">您还没有参与人哦！</p>\\r\\n      </div>\\r\\n      <!-- 概要 -->\\r\\n      <!-- 可以编辑 -->\\r\\n      {{#js_compare \\\"this.audit_status.value == '-2' || this.audit_status.value == '-1'\\\"}}\\r\\n      <div class=\\\"intro-block\\\">\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣名称\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-name\\\">\\r\\n            {{name}}\\r\\n            </div>\\r\\n            <!-- <i class=\\\"icon ticon-arrow-right arrow\\\"></i> -->\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group tmm-goTime\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            出游日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell tmm-set-act-date\\\" id=\\\"tmm-edit-act-goDate\\\" name=\\\"tmm-set-act-date\\\" data-id=\\\"{{shops.value}}\\\" data-link=\\\"{{set_go_time.link}}\\\">\\r\\n              {{actives_time.go_time}}\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            付款方式\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-pay\\\">\\r\\n              {{#js_compare \\\"this.actives_pay_type.value == '1'\\\"}} 代付 {{/js_compare}} {{#js_compare \\\"this.actives_pay_type.value == '0'\\\"}} 自费 {{/js_compare}}\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣报名日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-enroll\\\">\\r\\n              {{actives_time.start_time}} 至 {{actives_time.end_time}}\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣参与人数\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-num\\\">\\r\\n              {{actives_info.number.value}}人\\r\\n              <!-- <i class=\\\"icon ticon-arrow-right arrow\\\"></i> -->\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        {{#js_compare \\\"this.userInfo.is_organizer == 1 && this.userInfo.organizer_status != 0\\\"}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            服务费（交通、导服及其他）\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-tour-price\\\">\\r\\n              {{actives_info.tour_price.value}}元/人\\r\\n              <!-- <i class=\\\"icon ticon-arrow-right arrow\\\"></i> -->\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        {{/js_compare}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣公开性\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            <div class=\\\"arrow-cell\\\" id=\\\"tmm-edit-act-open\\\">\\r\\n              {{#js_compare \\\"this.actives_is_open.value == '1'\\\"}} 公开 {{/js_compare}} {{#js_compare \\\"this.actives_is_open.value == '0'\\\"}} 私密 {{/js_compare}}\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            创建日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_time.add_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣简介\\r\\n          </div>\\r\\n          <div class=\\\"editer-con\\\" id=\\\"tmm-edit-act-intro\\\">\\r\\n            {{actives_info.remark}}\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n      <!-- 可以编辑完成 -->\\r\\n      <!-- 不可以编辑 -->\\r\\n      {{#js_compare \\\"this.audit_status.value != '-2' && this.audit_status.value != '-1'\\\"}}\\r\\n      <div class=\\\"intro-block\\\">\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣名称\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{name}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group tmmGoTime\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            出游日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell tmm-set-act-date\\\" data-id=\\\"{{shops.value}}\\\" name=\\\"tmm-set-act-date\\\" data-link=\\\"{{set_go_time.link}}\\\">\\r\\n            {{actives_time.go_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            付款方式\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{#js_compare \\\"this.actives_pay_type.value == '1'\\\"}} 代付 {{/js_compare}} {{#js_compare \\\"this.actives_pay_type.value == '0'\\\"}} 自费 {{/js_compare}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣报名日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_time.start_time}} 至 {{actives_time.end_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣参与人数\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{js \\\"this.actives_info.number.value - this.actives_info.order_number.value\\\"}}/{{actives_info.number.value}}人\\r\\n          </div>\\r\\n        </div>\\r\\n        {{#js_compare \\\"this.userInfo.is_organizer == 1 && this.userInfo.organizer_status != 0\\\"}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            服务费（交通、导服及其他）\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_info.tour_price.value}}元/人\\r\\n          </div>\\r\\n        </div>\\r\\n        {{/js_compare}}\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣公开性\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{#js_compare \\\"this.actives_is_open.value == '1'\\\"}} 公开 {{/js_compare}} {{#js_compare \\\"this.actives_is_open.value == '0'\\\"}} 私密 {{/js_compare}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            创建日期\\r\\n          </div>\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            {{actives_time.add_time}}\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"normal-group\\\">\\r\\n          <div class=\\\"normal-cell\\\">\\r\\n            觅趣简介\\r\\n          </div>\\r\\n          <div class=\\\"editer-con\\\">\\r\\n            {{actives_info.remark}}\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n      <!-- 不可以编辑完成 -->\\r\\n    </div>\\r\\n\\r\\n    <!--审核不通过 觅趣未开始 下线-->\\r\\n    {{#js_compare \\\"(this.audit_status.value =='-1' && this.actives_status.value =='0' && this.shops_status.value =='0') || (this.audit_status.value =='-1' && this.actives_status.value =='' && this.shops_status.value =='0')\\\"}}\\r\\n      <div class=\\\"tmm-examine tmm-seekfun-btn\\\">\\r\\n        <span class=\\\"outline-button tmm-seekfun-changeLine\\\" data-id=\\\"{{actives_id}}\\\">更换行程</span><span class=\\\"outline-button tmm-examine-status\\\">提交审核</span>\\r\\n      </div>\\r\\n    {{/js_compare}}\\r\\n\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":120,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/jpg!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\defaultbig.jpg","name":"./src/styles/images/defaultbig.jpg","index":120,"index2":113,"size":82,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":["styles/images/6161dd37.defaultbig.jpg"],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\seekfun-detail.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":119,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\seekfun-detail.tpl.html","module":"./src/modules/createAct/seekfun-detail.tpl.html","moduleName":"./src/modules/createAct/seekfun-detail.tpl.html","type":"cjs require","userRequest":"../../styles/images/defaultbig.jpg","loc":"1:717-762"}],"source":"module.exports = __webpack_public_path__ + \"styles/images/6161dd37.defaultbig.jpg\""},{"id":121,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\edit-act-name.tpl.html","name":"./src/modules/createAct/edit-act-name.tpl.html","index":121,"index2":115,"size":802,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./edit-act-name.tpl.html","loc":"16:19-54"}],"source":"module.exports = \"<!-- 添加银行卡 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">觅趣名称</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"edit-act-name\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content tmm-edit-act\\\">\\r\\n      <div class=\\\"edit-title edit-tit-name\\\">\\r\\n        <input name=\\\"name\\\" required id=\\\"name\\\" class=\\\"content-txt title-width\\\" type=\\\"text\\\" value=\\\"{{name}}\\\">\\r\\n      </div>\\r\\n      \\r\\n      <span class=\\\"card-btn\\\" id=\\\"edit-title\\\">完成</span>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":122,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\edit-act-num.tpl.html","name":"./src/modules/createAct/edit-act-num.tpl.html","index":122,"index2":116,"size":785,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./edit-act-num.tpl.html","loc":"17:18-52"}],"source":"module.exports = \"<!-- 添加银行卡 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">觅趣参与人数</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"add-bank\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content tmm-edit-act\\\">\\r\\n      <div class=\\\"edit-title\\\">\\r\\n        <input name=\\\"num\\\" required class=\\\"content-txt num-width\\\" type=\\\"text\\\" id=\\\"num\\\" value=\\\"{{num}}\\\">&nbsp;人\\r\\n      </div>\\r\\n      \\r\\n      <span class=\\\"card-btn\\\" id=\\\"edit-num\\\">完成</span>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":123,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\edit-act-tour-price.tpl.html","name":"./src/modules/createAct/edit-act-tour-price.tpl.html","index":123,"index2":117,"size":809,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./edit-act-tour-price.tpl.html","loc":"18:24-65"}],"source":"module.exports = \"<!-- 添加银行卡 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">服务费</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"add-bank\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content tmm-edit-act\\\">\\r\\n      <div class=\\\"edit-title\\\">\\r\\n        <input name=\\\"tour_price\\\" required class=\\\"content-txt num-width\\\" type=\\\"text\\\" id=\\\"tour-price\\\" value=\\\"{{tourPrice}}\\\">&nbsp;元\\r\\n      </div>\\r\\n      \\r\\n      <span class=\\\"card-btn\\\" id=\\\"edit-tour-price\\\">完成</span>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":124,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act-pay.tpl.html","name":"./src/modules/createAct/my-create-act-pay.tpl.html","index":124,"index2":118,"size":1139,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./my-create-act-pay.tpl.html","loc":"22:15-54"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"create-act-pay-type-back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">选择付款方式</div>\\r\\n    <div class=\\\"right tmm-financing-right\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!--付款方式的选择-->\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"create-act-pay-type\\\" class=\\\"page\\\" id=\\\"create-act-pay-type\\\">\\r\\n    <div class=\\\"page-content tmm-act-pay-type\\\">\\r\\n      \\r\\n      <div class=\\\"pay-type-pos\\\" data-type=\\\"1\\\">\\r\\n        <div class=\\\"pay-cir pay-cir-all\\\">代付</div>\\r\\n        <div class=\\\"pay-info\\\">发起人统一支付费用</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"pay-type-pos\\\" data-type=\\\"0\\\">\\r\\n        <div class=\\\"pay-cir pay-cir-aa\\\">自费</div>\\r\\n        <div class=\\\"pay-info\\\">参与人自己支付费用</div>\\r\\n      </div>\\r\\n    </div>\\r\\n      <div class=\\\"act-indicator\\\">\\r\\n        <span class=\\\"active\\\"></span><span class=\\\"active\\\"></span><span class=\\\"active\\\"></span><span></span>\\r\\n      </div>\\r\\n\\r\\n  </div>\\r\\n</div>\";"},{"id":125,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\my-create-act-info.tpl.html","name":"./src/modules/createAct/my-create-act-info.tpl.html","index":125,"index2":119,"size":3049,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./my-create-act-info.tpl.html","loc":"24:20-60"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">填写觅趣信息</div>\\r\\n    <div class=\\\"right\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!--付款方式的选择-->\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"create-act-info\\\" class=\\\"page\\\" id=\\\"create-act-info\\\">\\r\\n    <div class=\\\"page-content tmm-launch-act-info\\\" style=\\\"padding-bottom: 0px;\\\">\\r\\n      \\r\\n      <div class=\\\"launch-act-info\\\">\\r\\n        <div class=\\\"launch-info-title\\\">觅趣名称：</div>\\r\\n        <div class=\\\"launch-info-content launch-info-time\\\">\\r\\n          <input name=\\\"name\\\" required id=\\\"name\\\" class=\\\"conten-txt\\\" type=\\\"text\\\" style=\\\"text-align: right;\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"launch-act-info\\\">\\r\\n        <div class=\\\"launch-info-title\\\">报名开始与结束：</div>\\r\\n        <div class=\\\"launch-info-time launch-info-content\\\">\\r\\n          <input type=\\\"text\\\" placeholder=\\\"年/月/日 >\\\" readonly class=\\\"conten-txt calendar-infotime\\\" style=\\\"text-align:right;\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"launch-act-info\\\">\\r\\n        <div class=\\\"launch-info-title\\\">觅趣参与人数：</div>\\r\\n        <div class=\\\"launch-info-content\\\">\\r\\n          <input name=\\\"number\\\" id=\\\"number\\\" required class=\\\"conten-txt\\\" type=\\\"text\\\" style=\\\"width: 130px;\\\">人\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      {{#js_compare \\\"this.userInfo.is_organizer == 1 && this.userInfo.organizer_status != 0\\\"}}\\r\\n      <div class=\\\"launch-act-info\\\">\\r\\n        <div class=\\\"launch-info-title\\\">服务费：</div>\\r\\n        <div class=\\\"launch-info-content\\\">\\r\\n           <input name=\\\"tour_price\\\" id=\\\"tour_price\\\" required class=\\\"conten-txt\\\" type=\\\"text\\\" >元/人\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"launch-intr\\\">注：<span class=\\\"intr-cont\\\">代理商创办此觅趣时所获得的服务费用</span></div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n      <div class=\\\"launch-act-info\\\">\\r\\n        <div class=\\\"launch-info-title\\\">觅趣公开性：</div>\\r\\n        <div class=\\\"launch-info-content\\\">\\r\\n          <label class=\\\"lab-check\\\">\\r\\n            <input class=\\\"conten-txt\\\" type=\\\"checkbox\\\" id=\\\"launch-open\\\"  style=\\\"height: 13px; display:none;\\\"><i style=\\\"\\\" class=\\\"launch-open-check\\\"></i>&nbsp;私密\\r\\n          </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n      <div class=\\\"launch-intr\\\">注：<span class=\\\"intr-cont\\\">私密觅趣需要发起人邀请参与人加入</span></div>\\r\\n\\r\\n      <div class=\\\"act-edit\\\">\\r\\n        <p>觅趣简介：</p>\\r\\n        <textarea class=\\\"act-edit-content\\\" rows=\\\"5\\\"></textarea>\\r\\n      </div>\\r\\n\\r\\n    <div class=\\\"tmm-card-btn\\\">\\r\\n      <span class=\\\"card-btn\\\" id=\\\"line_create_act\\\">完成</span>\\r\\n    </div>\\r\\n     \\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"act-indicator\\\">\\r\\n      <span class=\\\"active\\\"></span><span class=\\\"active\\\"></span><span class=\\\"active\\\"></span><span class=\\\"active\\\"></span>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":126,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","name":"./src/modules/createAct/activeOrderCtrl.js","index":126,"index2":124,"size":8042,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":110,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activity.js","module":"./src/modules/createAct/activity.js","moduleName":"./src/modules/createAct/activity.js","type":"cjs require","userRequest":"./activeOrderCtrl","loc":"25:16-44"}],"source":"var ViewController = require('../app/ViewController'),\r\n  appFunc = require('../utils/appFunc'),\r\n  tpl = require('./ceateActA.tpl.html'),\r\n  orderTpl = require('../order/act-order.tpl.html'),\r\n  participant = require('./participantCtrl'),\r\n  httpService = require('../services/httpService');\r\n\r\n\r\n\r\nfunction OrderDetail(opts) {\r\n  ViewController.call(this, opts);\r\n  this.go_time = '';\r\n  this.main_name = '';\r\n\r\n}\r\n\r\nOrderDetail.prototype = appFunc.extend({}, ViewController.prototype, {\r\n  constructor: OrderDetail,\r\n  pageWillDisplay: function() {\r\n    this.model.total_price = this.countPrice(this.model.items_fare);\r\n    this.model.userInfo = JSON.parse(appFunc.getLocalUserInfo());\r\n    if (this.opts.isSetTime === '1') {\r\n      this.go_time = this.model.actives_time.go_time;\r\n    }\r\n    if (this.model.actives_info.attend.main.link) {\r\n      this.model.canSetName = true;\r\n    } else {\r\n      this.model.canSetName = false;\r\n    }\r\n  },\r\n  pageEndDisplay: function() {\r\n    if (this.opts.isSetTime === '0') {\r\n      this.selectTime();\r\n    }\r\n\r\n    this.bind('.act-order-A-detail', 'click', this);\r\n    // this.bind('.act-order-A-detail .submit-btn', this.submit.bind(this));\r\n  },\r\n\r\n  handleEvent: function(ev) {\r\n    var ele = $$(ev.target);\r\n    if (ele.hasClass('submit-btn')) {\r\n      this.submit();\r\n    } else if (ele.hasClass('set-main-name')) {\r\n      this.setMainName(ele);\r\n    } else if (ele.hasClass('show-people')) {\r\n      this.showPeopole();\r\n\r\n    }\r\n  },\r\n\r\n  setMainName: function(ele) {\r\n    var self = this;\r\n    if (self.model.actives_info.attend.main.link) {\r\n      tmmApp.prompt('请输入联系人姓名', function(value) {\r\n        httpService.post(self.model.actives_info.attend.main.link, {\r\n          \"Attend\": {\r\n            \"name\": value\r\n          }\r\n        }, function(data) {\r\n          \r\n          if (data.status == 1) {\r\n            self.model.main_name = value;\r\n            ele.html(self.model.main_name);\r\n          } else {\r\n            if (data.form) {\r\n              for (var msg in data.form) {\r\n                tmmApp.alert(data.form[msg][0]);\r\n                break;\r\n              }            \r\n            }\r\n          }\r\n        }, function(data) {\r\n\r\n        })\r\n      })\r\n\r\n    } else {\r\n\r\n    }\r\n  },\r\n\r\n  showPeopole: function() {\r\n    participant(this.model.actives_info.attend_list);\r\n\r\n  },\r\n  countPrice: function(items) {\r\n    var total = 0;\r\n\r\n    for (var x1 in items) {\r\n      for (var x2 in items[x1]) {\r\n        for (var x3 in items[x1][x2]) {\r\n          if (items[x1][x2][x3].classliy.value === '1' || items[x1][x2][x3].classliy.value === '3') {\r\n            for (var attr in items[x1][x2][x3].fare) {\r\n\r\n              if (items[x1][x2][x3].fare[attr].info == '成人') {\r\n                items[x1][x2][x3].fare[attr].number = this.model.actives_info.attend.people;\r\n              } else if (items[x1][x2][x3].fare[attr].info == '儿童') {\r\n                items[x1][x2][x3].fare[attr].number = this.model.actives_info.attend.children;\r\n\r\n              }\r\n              items[x1][x2][x3].fare[attr].count = items[x1][x2][x3].fare[attr].number * items[x1][x2][x3].fare[attr].price;\r\n              total += items[x1][x2][x3].fare[attr].count;\r\n            }\r\n          } else if (items[x1][x2][x3].classliy.value === '2') {\r\n            for (var attr in items[x1][x2][x3].fare) {\r\n\r\n              items[x1][x2][x3].fare[attr].number = Math.ceil(this.model.actives_info.attend.people / items[x1][x2][x3].fare[attr].room_number);\r\n\r\n              items[x1][x2][x3].fare[attr].count = items[x1][x2][x3].fare[attr].number * items[x1][x2][x3].fare[attr].price;\r\n              total += items[x1][x2][x3].fare[attr].count;\r\n\r\n            }\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    total += this.model.actives_info.tour_price.value * this.model.actives_info.attend.number;\r\n    return total.toFixed(2);\r\n  },\r\n\r\n  showPeople: function() {\r\n\r\n  },\r\n\r\n  selectTime: function(e) {\r\n    var self = this;\r\n    var oInput = document.querySelector('.act-order-A-detail .selectday-input');\r\n\r\n    var nowDate = new Date();\r\n    var preDay = nowDate.setDate(nowDate.getDate() - 1);\r\n\r\n    tmmApp.calendar({\r\n      input: oInput,\r\n      closeOnSelect: true,\r\n      minDate: preDay,\r\n      monthNames: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\r\n      dayNames: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\r\n      dayNamesShort: ['日', '一', '二', '三', '四', '五', '六'],\r\n      onDayClick: function(p, dayContainer, year, month, day) {\r\n\r\n        self.go_time = appFunc.dateFormt(year, month, day);\r\n        oInput.innerHTML = self.go_time;\r\n      }\r\n\r\n    });\r\n  },\r\n\r\n\r\n\r\n  /**\r\n   * 提交订单\r\n   * @return {[type]} [description]\r\n   */\r\n  submit: function() {\r\n    var url = httpService.apiSubmitOrderForA;\r\n    var self = this;\r\n    var token = {\r\n      \"Order\": {\r\n        \"order_price\": self.model.total_price,\r\n        \"go_time\": self.go_time\r\n      },\r\n      \"OrderShops\": {\r\n        \"shops_id\": self.model.actives_id\r\n      },\r\n      \"Attend\": {\r\n        \"name\": self.main_name\r\n      }\r\n    }\r\n    if (self.opts.type === '1') {\r\n      self.payId = self.model.actives_info.order.value;\r\n      self.payOrder()\r\n    } else if (self.opts.type === '0') {\r\n      if (self.go_time === '') {\r\n        tmmApp.alert('请设置出游时间');\r\n        return;\r\n      }\r\n      httpService.post(url, token, function(data) {\r\n        if (data.status == 1) {\r\n          self.payId = data.data.id.value;\r\n          self.paylink = data.data.link;\r\n          self.payOrder();\r\n        } else {\r\n\r\n        }\r\n\r\n      }, function(data) {\r\n        tmmApp.alert('网络错误')\r\n      })\r\n    }\r\n\r\n\r\n\r\n  },\r\n\r\n  payOrder: function() {\r\n    var self = this;\r\n    \r\n\r\n    appFunc.payOrder(self.payId, self.model.total_price, function(data) {\r\n      if (data.status == 1) {\r\n\r\n        if (tmmApp.device.iphone || tmmApp.device.ios || tmmApp.device.ipad) { //ios\r\n          connectWebViewJavascriptBridge(function(bridge) {\r\n            bridge.callHandler('ObjcCallback', {\r\n              'PayCode': data.data.alipay\r\n            }, function(response) {})\r\n          });\r\n        } else if (tmmApp.device.android) {\r\n          var str = window.jsObj.payMoney(data.data.alipay);\r\n        }\r\n\r\n      } else {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('支付失败，请重试');\r\n      }\r\n      tmmApp.hideIndicator();\r\n    }, function(data) {\r\n      tmmApp.hideIndicator();\r\n      tmmApp.alert('网络超时，请重试');\r\n    }, function(data) {\r\n      \r\n      self.refreshPage(data.data.status.type.link, self.payId)\r\n    });\r\n  },\r\n\r\n  refreshPage: function(url, id) {\r\n    // tmmApp.getCurrentView().router.back({\r\n    //   force: true,\r\n    //   pageName: 'myView',\r\n    //   animatePages: false\r\n    // });\r\n    \r\n    httpService.getOrderDetail(\r\n      url,\r\n      function(dataRes, statusCode) {\r\n        \r\n        var hasRetinue = 0;\r\n        for (var i = 0; i < dataRes.data.retinue.length; i++) {\r\n          if (dataRes.data.retinue[i].is_main == 0) {\r\n            hasRetinue = 1;\r\n            break;\r\n          }\r\n        }\r\n        if (dataRes.status == 1) {\r\n          var data = {\r\n            orderObj: dataRes.data,\r\n            hasRetinue: hasRetinue,\r\n            orderOwn: {\r\n              'type': 3,\r\n              'url': url\r\n            }\r\n          };\r\n\r\n          var output = appFunc.renderTpl(orderTpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n            reload: true,\r\n          });\r\n\r\n        } else {\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        \r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  }\r\n})\r\n\r\nfunction main() {\r\n  var link = $$(this).attr('data-link');\r\n  var orderlink = $$(this).attr('data-shoplink');\r\n  var isSetTime = $$(this).attr('data-time');\r\n  var type = $$(this).attr('data-type');\r\n\r\n  var orderDetail = new OrderDetail({\r\n    link: link,\r\n    orderlink: orderlink,\r\n    tpl: tpl,\r\n    isSetTime: isSetTime,\r\n    type: type\r\n  });\r\n}\r\n\r\nmodule.exports = main;\r\n"},{"id":127,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\ViewController.js","name":"./src/modules/app/ViewController.js","index":127,"index2":120,"size":1606,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"../app/ViewController","loc":"1:21-53"},{"moduleId":129,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","module":"./src/modules/createAct/participantCtrl.js","moduleName":"./src/modules/createAct/participantCtrl.js","type":"cjs require","userRequest":"../app/ViewController","loc":"2:19-51"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  httpService = require('../services/httpService');\r\n\r\nfunction extend(newObj, oldObj) {\r\n  for (var attr in oldObj) {\r\n    newObj[attr] = oldObj[attr];\r\n  }\r\n  return newObj;\r\n}\r\n\r\nfunction ViewController(opts) {\r\n  this.model = {};\r\n  this.opts = {};\r\n  this.opts = opts === undefined ? {} : extend(this.opts, opts);\r\n\r\n  this.init();\r\n  this.getData();\r\n}\r\n\r\nViewController.prototype = {\r\n  constructor: ViewController,\r\n  init: function(opts) {\r\n    this.opts = opts === undefined ? this.opts : extend(this.opts, opts);\r\n  },\r\n  bind: function(selector,type, fn) {\r\n    var aDOM = document.querySelectorAll(selector);\r\n    for (var i=0,len=aDOM.length; i<len; i++) {\r\n      aDOM[i].addEventListener(type, fn, false);\r\n    }\r\n  },\r\n  getData: function(sfn, efn) {\r\n    var self = this;\r\n    if (self.opts.link) {\r\n      httpService.get(self.opts.link, function(data) {\r\n\r\n        if (data.status === 1) {\r\n          self.model = data.data;\r\n          self.renderPage();\r\n          sfn && sfn(data);\r\n        } else {\r\n          efn && efn(data)\r\n        }\r\n      }, function(data){\r\n        efn && efn(data)\r\n      });\r\n    } else {\r\n      self.renderPage()\r\n    }\r\n  },\r\n  renderPage: function() {\r\n    this.pageWillDisplay();\r\n    var output = appFunc.renderTpl(this.opts.tpl, this.model);\r\n    tmmApp.getCurrentView().router.load({\r\n      content: output\r\n    })\r\n    this.pageEndDisplay();\r\n  },\r\n  pageWillDisplay: function() {\r\n    \r\n  },\r\n  pageEndDisplay: function() {\r\n\r\n  },\r\n  destroy: function(){\r\n    \r\n  }\r\n}\r\n\r\n\r\nmodule.exports = ViewController"},{"id":128,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\ceateActA.tpl.html","name":"./src/modules/createAct/ceateActA.tpl.html","index":128,"index2":121,"size":3776,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"./ceateActA.tpl.html","loc":"3:8-39"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">提交订单</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"act-order-A-detail\\\" class=\\\"page page-order act-order-A-detail\\\" id=\\\"tmm-order-line-detail\\\">\\r\\n    <div class=\\\"page-content tmm-order-detail\\\">\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">出游日期</div>\\r\\n      <div class=\\\"list-block selectday\\\" style=\\\"line-height:44px;background-color: #fff;padding-left: 16px;\\\">\\r\\n        {{#if actives_time.go_time_value}}\\r\\n        <div class=\\\"row tmm-order-status\\\">\\r\\n          <div>{{actives_time.go_time}}</div>\\r\\n        </div>\\r\\n        {{else}}\\r\\n        <div class=\\\"row tmm-order-status\\\" style=\\\"height: 44px;\\\">\\r\\n          <input style=\\\"margin-top: 12px;height: 20px;font-size: 16px;\\\" type=\\\"text\\\" class=\\\"selectday-input\\\" value=\\\"{{actives_time.go_time}}\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n      </div>\\r\\n      <!--项目列表-->\\r\\n      <div class=\\\"content-block-title tmm-content-title\\\">项目列表</div>\\r\\n      <div class=\\\"list-block tmm-list-block tmm-retinue-top-border tmm-retinue-bottom-border\\\">\\r\\n        {{#each items_fare}} {{#if @key%2}}\\r\\n        <div class=\\\"tmm-day-num\\\" style=\\\"line-height: 44px;text-align: center;\\\">{{mergeDay @key}}</div>\\r\\n        {{/if}} {{#each this}} {{#each this}}\\r\\n        <ul class=\\\"tmm-order-ul-before\\\">\\r\\n          <li class=\\\"tmm-item-li clearfix b-border\\\">\\r\\n            <div class=\\\"tmm-item-title\\\">\\r\\n              {{name}}\\r\\n            </div>\\r\\n            <div class=\\\"tmm-order-item-content\\\">\\r\\n              {{#each fare}} {{#js_compare \\\"this.number != '0' \\\"}}\\r\\n              <div class=\\\"tmm-item-fare\\\">\\r\\n                <div class=\\\"tmm-fare-first w_40\\\">{{name}}</div>\\r\\n                {{#js_compare \\\"this.room_number == '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{info}}</span> {{/js_compare}} {{#js_compare \\\"this.room_number != '0' \\\"}}\\r\\n                <span class=\\\"w_20\\\">{{room room_number}}</span> {{/js_compare}}\\r\\n                <span class=\\\"w_10\\\">{{number}}</span>\\r\\n                <span class=\\\"w_25\\\">￥{{price}}</span>\\r\\n              </div>\\r\\n              {{/js_compare}} {{/each}}\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        {{/each}} {{/each}} {{/each}}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"order-block\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">主要联系人</div>\\r\\n\\r\\n        <div class='order-cell {{#if canSetName}}arrow-cell set-main-name{{/if}}'>{{actives_info.attend.main.name}}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"order-block\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">出行人员信息</div>\\r\\n        <div class=\\\"order-cell arrow-cell show-people\\\">成人{{actives_info.attend.people}}，儿童{{actives_info.attend.children}}</div>\\r\\n      </div>\\r\\n\\r\\n\\r\\n      {{#js_compare \\\"this.userInfo.is_organizer == 1 && this.userInfo.organizer_status != 0\\\"}}\\r\\n      <div class=\\\"order-block\\\">\\r\\n        <div class=\\\"content-block-title tmm-content-title\\\">\\r\\n          服务费（交通、导服及其他）\\r\\n        </div>\\r\\n        <div class=\\\"order-cell\\\">\\r\\n          {{actives_info.tour_price.value}}元/人\\r\\n        </div>\\r\\n      </div>\\r\\n      {{/js_compare}}\\r\\n\\r\\n    </div>\\r\\n      <div class=\\\"sub-toolbar\\\">\\r\\n        <span class=\\\"toolbar-item price\\\">￥ {{total_price}}</span>\\r\\n        <span class=\\\"toolbar-item\\\"><span class=\\\"submit-btn\\\">确认支付</span></span>\\r\\n      </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":129,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","name":"./src/modules/createAct/participantCtrl.js","index":129,"index2":123,"size":1773,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":126,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\activeOrderCtrl.js","module":"./src/modules/createAct/activeOrderCtrl.js","moduleName":"./src/modules/createAct/activeOrderCtrl.js","type":"cjs require","userRequest":"./participantCtrl","loc":"5:16-44"}],"source":"var httpService = require('../services/httpService'),\r\n  ViewController = require('../app/ViewController'),\r\n  appFunc = require('../utils/appFunc'),\r\n  participantTpl = require('./participant.tpl.html');\r\n\r\n\r\nfunction ParticipantCtrl(opts) {\r\n  ViewController.call(this, opts);\r\n  this.loading = false;\r\n}\r\n\r\nParticipantCtrl.prototype = appFunc.extend({}, ViewController.prototype, {\r\n  constructor: ParticipantCtrl,\r\n  pageWillDisplay: function() {\r\n\r\n    this.model.list = [];\r\n    for (var i = 0; i < 10; i++) this.model.list.push(i);\r\n  },\r\n  pageEndDisplay: function() {\r\n    this.bind('.participant .infinite-scroll', 'infinite', this);\r\n  },\r\n  loadMore: function() {\r\n    var self = this;\r\n\r\n    if (self.model.page.next) {\r\n      if (self.loading) return;\r\n      self.loading = true;\r\n      httpService.get(self.model.page.next, function(data) {\r\n        if (data.status == 1) {\r\n          self.model = data.data;\r\n          self.appendItem();\r\n        }\r\n        self.loading = false;\r\n      }, function(data) {\r\n        self.loading = false;\r\n      });\r\n    }\r\n  },\r\n  appendItem: function() {\r\n    var html = '{{#each list_data}}' +\r\n      '<div class=\"participant-list\">' +\r\n      '<div class=\"add-time\">{{add_time}}</div>' +\r\n      '<div class=\"name\">{{name}}　{{phone}}</div>' +\r\n      '<div class=\"join-people\">参与人数：{{people}}成人，{{children}}儿童</div>' +\r\n      '</div>' +\r\n      '{{/each}}';\r\n\r\n    var output = appFunc.renderTpl(html, this.model);\r\n    $$('.participant .participant-list').append(output);\r\n\r\n\r\n  },\r\n\r\n  handleEvent: function(ev) {\r\n    if (ev.type == 'infinite') {\r\n      this.loadMore()\r\n    }\r\n  }\r\n\r\n})\r\n\r\nfunction main(link) {\r\n\r\n  new ParticipantCtrl({\r\n    link: link,\r\n    tpl: participantTpl\r\n  });\r\n\r\n}\r\n\r\nmodule.exports = main;\r\n"},{"id":130,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participant.tpl.html","name":"./src/modules/createAct/participant.tpl.html","index":130,"index2":122,"size":845,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":129,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\createAct\\participantCtrl.js","module":"./src/modules/createAct/participantCtrl.js","moduleName":"./src/modules/createAct/participantCtrl.js","type":"cjs require","userRequest":"./participant.tpl.html","loc":"4:19-52"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">觅趣参与人列表</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"participant\\\" class=\\\"page participant\\\">\\r\\n    <div class=\\\"page-content infinite-scroll\\\">\\r\\n\\r\\n\\r\\n\\r\\n      <div class=\\\"participant-list\\\">\\r\\n      {{#each list_data}}\\r\\n        <div class=\\\"add-time\\\">{{add_time}}</div>\\r\\n        <div class=\\\"name\\\">{{name}}　{{phone}}</div>\\r\\n        <div class=\\\"join-people\\\">参与人数：{{people}}成人，{{children}}儿童</div>\\r\\n      {{/each}}\\r\\n      </div>\\r\\n\\r\\n     \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":131,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","name":"./src/modules/my/bank.js","index":131,"index2":142,"size":17709,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"./bank","loc":"12:15-32"}],"source":"/**\r\n * @name bank\r\n * @description 银行卡相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-12-16T17:34:24+0800\r\n */\r\nvar log = require('../utils/log'),\r\n  appFunc = require('../utils/appFunc'),\r\n  httpService = require('../services/httpService'),\r\n  add_bank_tpl = require('./add-bank.tpl.html'),\r\n  verify_phone_tpl = require('./verify-phone.tpl.html'),\r\n  bank_protocol_tpl = require('./bank-protocol.tpl.html'),\r\n  bankcard_management_tpl = require('./bankcard-management.tpl.html'),\r\n  change_verify_phone_tpl = require('./change-verify-phone.tpl.html'),\r\n  change_bank_tpl = require('./change-bank.tpl.html'),\r\n  my_wallet_tpl = require('./my-wallet.tpl.html'),\r\n  my_wallet_content_tpl = require('./my-wallet-content.tpl.html'),\r\n  payPasswd = require('./payPasswd');\r\n\r\n/**\r\n *  定时器\r\n * @type {Object}\r\n */\r\nvar timer = null;\r\n/**\r\n * 短信倒计等待时间\r\n * @type {Number}\r\n */\r\nvar waitTime = 60;\r\n/**\r\n * 标示是进行添加银行卡操作add，还是更换银行卡操作update\r\n * @type {String}\r\n */\r\nvar bank_operation = 'add';\r\n\r\nvar bank = {\r\n  init: function() {\r\n    bank.bindEvent();\r\n  },\r\n  /**\r\n   * @method manageBank\r\n   * @description 管理银行卡(目前暂时只有一张)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T16:24:50+0800\r\n   */\r\n  manageBank: function() {\r\n    bank_operation = 'update';\r\n    httpService.bankCardList(\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          var data = {\r\n            'bankObj': dataRes.data[0]\r\n          };\r\n          var output = appFunc.renderTpl(bankcard_management_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n        } else {\r\n          tmmApp.alert('您还未添加银行卡');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method changeBankcard\r\n   * @description 更换银行卡\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T16:24:26+0800\r\n   */\r\n  changeBankcard: function() {\r\n    tmmApp.showIndicator();\r\n    httpService.getBankList(\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          tmmApp.hideIndicator();\r\n          var data = {\r\n            'bankList': dataRes.data\r\n          };\r\n          var output = appFunc.renderTpl(change_bank_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            'content': output\r\n          });\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n  },\r\n  /**\r\n   * @method updateBankCardNext\r\n   * @description 更换银行卡(第一步)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T16:39:23+0800\r\n   */\r\n  updateBankCardNext: function() {\r\n\r\n    var isChecked = $$('#agree_create').prop('checked');\r\n\r\n    var bank_id = $$('#bank_id').val();\r\n    var bank_name = $$('#bank_name').val();\r\n    var bank_branch = $$('#bank_branch').val();\r\n    var bank_code = $$('#bank_code').val();\r\n    if (bank_id == '') {\r\n      tmmApp.alert('请选择开户行');\r\n      return;\r\n    }\r\n    if (bank_branch == '') {\r\n      tmmApp.alert('开户支行不能为空');\r\n      return;\r\n    }\r\n    if (bank_name == '') {\r\n      tmmApp.alert('开户名不能为空');\r\n      return;\r\n    }\r\n    if (bank_code == '') {\r\n      tmmApp.alert('卡号不能为空');\r\n      return;\r\n    }\r\n    if (!isChecked) {\r\n      tmmApp.alert('请先查看\"银行卡管理协议\"并同意');\r\n      return;\r\n    }\r\n    // 填写的银行卡信息\r\n    var bankCardInfo = {\r\n      \"BankCard\": {\r\n        'bank_id': bank_id, // 开户行id\r\n        'bank_name': bank_name, // 开户名\r\n        'bank_branch': bank_branch, // 开户行支行名称\r\n        'bank_code': bank_code, // 对公银行账号\r\n        'bank_type': '2', // 用户银行类型 1=信用卡 2=借记卡\r\n        'bank_identity': '', // 开户身份证\r\n        \"is_default\": \"0\", // 是否默认 0默认 -1 非默认 \r\n      }\r\n    };\r\n    // 请求更换银行卡\r\n    tmmApp.showIndicator();\r\n    httpService.createBankCard(\r\n      bankCardInfo,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          // 获取用户的手机号\r\n          var data = {\r\n            'phone': appFunc.replacePhone(JSON.parse(appFunc.getLocalUserInfo()).phone)\r\n          };\r\n          // 跳到下一步短信验证\r\n          var output = appFunc.renderTpl(change_verify_phone_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n          if (timer) {\r\n            clearTimeout(timer);\r\n          }\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method updateBankCardFinish\r\n   * @description 更换银行卡，验证短信(完成)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T16:59:45+0800\r\n   */\r\n  updateBankCardFinish: function() {\r\n    var sms_code = $$('#sms_code').val();\r\n\r\n    if (sms_code == '') {\r\n      tmmApp.alert('验证码不能为空');\r\n      return;\r\n    }\r\n    \r\n    // 验证短信\r\n    tmmApp.showIndicator();\r\n    httpService.bankcardSms({\r\n        \"User\": {\r\n          \"sms\": sms_code // 短信验证码\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          waitTime = 60;\r\n          bank.backToWallet();\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method backToWallet\r\n   * @return   {[type]}                 [description]\r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T17:07:17+0800\r\n   */\r\n  backToWallet: function() {\r\n    var noBank = true;\r\n    // 查询钱包信息\r\n    var getWalletinfo = function() {\r\n      httpService.getBurseInfo(\r\n        function(dataRes, statusCode) {\r\n          if (dataRes.status == 1) {\r\n            appFunc.hideToolbar();\r\n            tmmApp.hideIndicator();\r\n            var data = {\r\n              'walletObj': dataRes.data,\r\n              'noBank': noBank\r\n            };\r\n\r\n            // 添加银行卡时，更新回退视图\r\n            if (bank_operation == 'add') {\r\n              var output = appFunc.renderTpl(my_wallet_content_tpl, data);\r\n              $$('#myView').find('.tmm-my-wallet-page').html(output);\r\n              // 回退到“我的钱包页面”，并更新数据\r\n              tmmApp.getCurrentView().router.back({\r\n                'pageName': 'my-wallet',\r\n                'force': true\r\n              });\r\n              // 初始化银行管理模块\r\n              bank.init();\r\n            }\r\n            // 更换银行卡，更新回退视图\r\n            if (bank_operation == 'update') {\r\n              // 由于层级页面太多，所以需要删除缓存的上层页面，只留上的“我的”那一层\r\n              appFunc.removeCachedPage('myView', 'bank-card-manage');\r\n              appFunc.removeCachedPageNavbar('myView', 'bank-card-manage-navbar');\r\n              appFunc.removeCachedPage('myView', 'my-wallet');\r\n              appFunc.removeCachedPageNavbar('myView', 'my-wallet-navbar');\r\n              var output = appFunc.renderTpl(my_wallet_tpl, data);\r\n              // 回退重新加载“我的钱包”的页面，\r\n              tmmApp.getCurrentView().router.back({\r\n                'content': output,\r\n                'force': true\r\n              });\r\n            }\r\n\r\n          } else {\r\n            tmmApp.hideIndicator();\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n      );\r\n    };\r\n    // 查询绑定的银行卡信息\r\n    tmmApp.showIndicator();\r\n    httpService.bankCardList(\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          noBank = false;\r\n        }\r\n        getWalletinfo();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method addBank\r\n   * @description 添加银行卡\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T14:35:22+0800\r\n   */\r\n  addBank: function() {\r\n    // log.info('添加银行卡...');\r\n    bank_operation = 'add';\r\n    tmmApp.showIndicator();\r\n    httpService.getBankList(\r\n      function(dataRes, statusCode) {\r\n\r\n        if (dataRes.status == 1) {\r\n          tmmApp.hideIndicator();\r\n          var data = {\r\n            'bankList': dataRes.data\r\n          };\r\n          \r\n          var output = appFunc.renderTpl(add_bank_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output\r\n          });\r\n        } else {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试');\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n\r\n  /**\r\n   * @showBankProtocol\r\n   * @description 银行卡管理协议\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2016-01-04T17:57:46+0800\r\n   */\r\n  showBankProtocol: function() {\r\n    tmmApp.getCurrentView().router.load({\r\n      content: bank_protocol_tpl\r\n    });\r\n  },\r\n  /**\r\n   * @method createBankBefore\r\n   * @description 用户绑定银行卡（第一步）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T11:07:13+0800\r\n   */\r\n  createBankBefore: function() {\r\n    var isChecked = $$('#agree_create').prop('checked');\r\n\r\n    var bank_id = $$('#bank_id').val();\r\n    var bank_name = $$('#bank_name').val();\r\n    var bank_branch = $$('#bank_branch').val();\r\n    var bank_code = $$('#bank_code').val();\r\n\r\n    if (bank_id == '') {\r\n      tmmApp.alert('请选择开户行');\r\n      return;\r\n    }\r\n    if (bank_branch == '') {\r\n      tmmApp.alert('开户支行不能为空');\r\n      return;\r\n    }\r\n    if (bank_name == '') {\r\n      tmmApp.alert('开户名不能为空');\r\n      return;\r\n    }\r\n    if (bank_code == '') {\r\n      tmmApp.alert('卡号不能为空');\r\n      return;\r\n    }\r\n\r\n    if (!isChecked) {\r\n      tmmApp.alert('请先查看\"银行卡管理协议\"并同意');\r\n      return;\r\n    }\r\n    // 填写的银行卡信息\r\n    var bankCardInfo = {\r\n      \"BankCard\": {\r\n        'bank_id': bank_id, // 开户行id\r\n        'bank_name': bank_name, // 开户名\r\n        'bank_branch': bank_branch, // 开户行支行名称\r\n        'bank_code': bank_code, // 对公银行账号\r\n        'bank_type': '2', // 用户银行类型 1=信用卡 2=借记卡\r\n        'bank_identity': '', // 开户身份证\r\n        \"is_default\": \"0\", // 是否默认 0默认 -1 非默认 \r\n      }\r\n    };\r\n\r\n    // 请求绑定银行卡\r\n    tmmApp.showIndicator();\r\n    httpService.createBankCard(\r\n      bankCardInfo,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          var data = {\r\n            'phone': appFunc.replacePhone(JSON.parse(appFunc.getLocalUserInfo()).phone)\r\n          };\r\n          var output = appFunc.renderTpl(verify_phone_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            'content': output\r\n          });\r\n          if (timer) {\r\n            clearTimeout(timer);\r\n          }\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method createBank\r\n   * @description 用户绑定银行卡，短信验证(完成)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T11:06:27+0800\r\n   */\r\n  createBank: function() {\r\n    var sms_code = $$('#sms_code').val();\r\n\r\n    if (sms_code == '') {\r\n      tmmApp.alert('验证码不能为空');\r\n      return;\r\n    }\r\n    // 请求绑定银行卡\r\n    tmmApp.showIndicator();\r\n    httpService.bankcardSms({\r\n        \"User\": {\r\n          \"sms\": sms_code // 短信验证码\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          // my-wallet\r\n          // 重置数据\r\n          waitTime = 60;\r\n          bank.backToWallet();\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('输入有误，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method getSmsCode\r\n   * @description 用户绑定银行账户，获取短信验证码\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-16T11:05:21+0800\r\n   */\r\n  getSmsCode: function() {\r\n    var that = $$(this);\r\n    // 60秒倒计时锁定发送短信按钮\r\n    var getCodeTimeOut = function() {\r\n      if (waitTime === 0) {\r\n        // 60秒到后解锁按钮,使其可点击\r\n        that.removeAttr('disabled');\r\n        // 重置文本信息\r\n        that.html('获取验证码');\r\n        // 重置回60秒\r\n        waitTime = 60;\r\n        if (timer) {\r\n          clearTimeout(timer);\r\n        }\r\n      } else {\r\n        // 锁定按钮,使其不可点击\r\n        that.attr('disabled', true);\r\n        // 倒计时提示文本\r\n        that.html(waitTime + '秒后重试');\r\n        // 倒计时自减\r\n        waitTime--;\r\n        // 每秒回调\r\n        timer = setTimeout(function() {\r\n          getCodeTimeOut();\r\n        }, 1000);\r\n      }\r\n    };\r\n    // 请求获取短信验证码\r\n    httpService.captchaBankCardSms(\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          // 成功后，60秒倒计时锁定发送按钮\r\n          getCodeTimeOut();\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n  /**\r\n   * @description 检测银行卡绑定及更换表单是否可提交\r\n   * 是，可提交; 否，不可提交\r\n   * @author 唐亚敏\r\n   */\r\n  detect: function(){\r\n    var bank_id = $$('#bank_id').val(),\r\n        bank_name = $$('#bank_name').val(),\r\n        bank_branch = $$('#bank_branch').val(),\r\n        bank_code = $$('#bank_code').val(),\r\n        isChecked = $$('#agree_create').prop('checked');\r\n\r\n    if(bank_id != '' && bank_name!='' && bank_branch!=''&& bank_code!='' && isChecked){\r\n\r\n      $$(\"#next_step\").removeClass(\"disabled\");\r\n      $$(\"#update_bankcard_next\").removeClass(\"disabled\");\r\n    }else{\r\n      $$(\"#next_step\").addClass(\"disabled\");\r\n      $$(\"#update_bankcard_next\").addClass(\"disabled\");\r\n    }\r\n\r\n  },\r\n  /**\r\n   * @description 检测短信验证表单是否可提交\r\n   * 是，可提交; 否，不可提交\r\n   * @author 唐亚敏\r\n   */\r\n  smsDetect:function(){\r\n    var sms_code = $$('#sms_code').val();\r\n    if(sms_code!=''){\r\n      $$(\"#update_bankcard_finish\").removeClass(\"disabled\");\r\n      $$(\"#create_bank_end\").removeClass(\"disabled\");\r\n      $$(\"#modify_passwd_end\").removeClass(\"disabled\");\r\n    }else{\r\n      $$(\"#update_bankcard_finish\").addClass(\"disabled\");\r\n      $$(\"#create_bank_end\").addClass(\"disabled\");\r\n      $$(\"#modify_passwd_end\").addClass(\"disabled\");\r\n    }\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '#tmm-add-bank',\r\n      event: 'click',\r\n      handler: bank.addBank\r\n    },{\r\n      element: '#myView',\r\n      selector: '#tmm-my-wallet-pay',\r\n      event: 'click',\r\n      handler: payPasswd.init\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-manage-bank',\r\n      event: 'click',\r\n      handler: bank.manageBank\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#next_step',\r\n      event: 'click',\r\n      handler: bank.createBankBefore\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#create_bank_end',\r\n      event: 'click',\r\n      handler: bank.createBank\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#get_sms_code',\r\n      event: 'click',\r\n      handler: bank.getSmsCode\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#bank_protocol',\r\n      event: 'click',\r\n      handler: bank.showBankProtocol\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#change_bankcard',\r\n      event: 'click',\r\n      handler: bank.changeBankcard\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#update_bankcard_next',\r\n      event: 'click',\r\n      handler: bank.updateBankCardNext\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#update_bankcard_finish',\r\n      event: 'click',\r\n      handler: bank.updateBankCardFinish\r\n    },{\r\n      element: '#myView',\r\n      selector: '#bank_id',\r\n      event: 'change',\r\n      handler: bank.detect  \r\n    },{\r\n      element: 'body',\r\n      selector: '#myView #agree_create',\r\n      event: 'change',\r\n      handler: bank.detect  \r\n    },{\r\n      element: '#myView',\r\n      selector: '.add_input',\r\n      event: 'input',\r\n      handler: bank.detect\r\n    },{\r\n      element: '#myView',\r\n      selector: '#sms_code',\r\n      event: 'input',\r\n      handler: bank.smsDetect\r\n    }];\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = bank;\r\n"},{"id":132,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\add-bank.tpl.html","name":"./src/modules/my/add-bank.tpl.html","index":132,"index2":126,"size":2931,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./add-bank.tpl.html","loc":"11:17-47"}],"source":"module.exports = \"<!-- 添加银行卡 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-add-bank-inner\\\" id=\\\"add-bank-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">添加银行卡</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"add-bank\\\" class=\\\"page tmm-add-bank-page\\\">\\r\\n    <div class=\\\"page-content tmm-add-retinue-page-contnet tmm-add-bank-page-contnet\\\">\\r\\n      <form class=\\\"list-block tmm-myinfo-item-addform tmm-bank-item-addform\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户行</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <select class=\\\"tmm-bank-select\\\" id=\\\"bank_id\\\" name=\\\"bank_id\\\">\\r\\n                  <option value=\\\"\\\">请选择</option>\\r\\n                  {{#each bankList}}\\r\\n                  <option value=\\\"{{value}}\\\">{{name}}</option>\\r\\n                  {{/each}}\\r\\n                </select>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">支行</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_branch\\\" type=\\\"text\\\" name=\\\"bank_branch\\\" placeholder=\\\"开户支行\\\" class=\\\"add_input\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户名</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_name\\\" type=\\\"text\\\" name=\\\"bank_name\\\" placeholder=\\\"开户姓名\\\" class=\\\"add_input\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">卡号</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_code\\\" type=\\\"number\\\" name=\\\"bank_code\\\" placeholder=\\\"卡号\\\" class=\\\"add_input\\\" pattern=\\\"[0-9]*\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"div_protocol\\\">\\r\\n          <input type=\\\"checkbox\\\" class=\\\"checkbox\\\" id=\\\"agree_create\\\">我同意<a href=\\\"###\\\" class=\\\"bank_protocol\\\" id=\\\"bank_protocol\\\">《银行卡管理协议》</a>\\r\\n        </div>\\r\\n        <div class=\\\"f_bottom\\\">\\r\\n          <!-- <button class=\\\"subno_active\\\" type=\\\"button\\\">下一步</button> -->\\r\\n          <button class=\\\"sub_active disabled\\\" type=\\\"button\\\" id=\\\"next_step\\\">下一步</button>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":133,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\verify-phone.tpl.html","name":"./src/modules/my/verify-phone.tpl.html","index":133,"index2":127,"size":2058,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./verify-phone.tpl.html","loc":"12:21-55"},{"moduleId":145,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","module":"./src/modules/my/payPasswd.js","moduleName":"./src/modules/my/payPasswd.js","type":"cjs require","userRequest":"./verify-phone.tpl.html","loc":"4:20-54"}],"source":"module.exports = \"<!-- 验证手机号 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-verify-phone-inner\\\" id=\\\"verify-phone-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">验证手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div  data-page=\\\"verify-phone\\\" class=\\\"page tmm-modify-phone-page tmm-verify-phone-page\\\">\\r\\n    <div class=\\\"set-old-phone-wrap\\\">\\r\\n      <div class=\\\"txt\\\">验证码将发送至手机: {{phone}},请按提示操作。</div>\\r\\n      <form class=\\\"list-block tmm-setPhone-list-Form tmm-verifyPhone-list-Form\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\" style=\\\"display:none;\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title label tmm-setPhone-errlabel\\\">错误信息</div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner tmm-setPhone-item-inner tmm-verifyPhone-item-inner\\\">\\r\\n              <div class=\\\"item-input item-title-con\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"sms_code\\\" id=\\\"sms_code\\\" placeholder=\\\"填写验证码\\\" class=\\\"setPhoneInput\\\" style=\\\"color: #333\\\">\\r\\n                {{#if isPasswd}}\\r\\n                <span class=\\\"activity get_code\\\" id=\\\"get_sms_code_passwd\\\">获取验证码</span>\\r\\n                {{else}}\\r\\n                <span class=\\\"activity get_code\\\" id=\\\"get_sms_code\\\">获取验证码</span>\\r\\n                {{/if}}\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"bg_btn mob_btn\\\">\\r\\n          {{#if isPasswd}}\\r\\n          <button type=\\\"button\\\" class=\\\"sub_btn disabled\\\" id=\\\"modify_passwd_end\\\">完成</button>\\r\\n          {{else}}\\r\\n          <button type=\\\"button\\\" class=\\\"sub_btn disabled\\\" id=\\\"create_bank_end\\\">完成</button>\\r\\n          {{/if}}\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":134,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank-protocol.tpl.html","name":"./src/modules/my/bank-protocol.tpl.html","index":134,"index2":128,"size":1940,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./bank-protocol.tpl.html","loc":"13:22-57"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-bank-protocol-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">银行卡管理协议</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div class=\\\"page tmm-bank-protocol\\\" data-page=\\\"abank-protocol\\\">\\r\\n    <div class=\\\"page-content tmm-bank-protocol-content\\\">\\r\\n      <div>田觅觅-银行卡管理协议（以下简称“本协议”）是田觅觅信息科技有限公司（以下简称“田觅觅”）与田觅觅用户(以下简称“您”)就“银行卡管理服务”（以下简称“本服务”）的使用等相关事项所订立的有效合约。</div>\\r\\n      <div>您通过网络页面点击确认或以其他方式选择接受本协议，即表示您与田觅觅已达成协议并同意接受本协议的全部约定内容。在接受本协议之前，请您仔细阅读本协议的全部内容<span class=\\\"bold\\\">（特别是以粗体下划线标注的内容）。</span>如果您不同意本协议的任意内容，请不要进行后续操作。</div>\\r\\n      <div><span class=\\\"bold\\\">“银行卡管理服务”</span>指通过本服务，您同意将银行卡与您登录的田觅觅账户进行绑定，以便您此次及今后可以通过田觅觅及第三方传输您的支付指令从您的银行卡账户中扣除有关款项给收款方；以便您此次及今后可以通过田觅觅将钱包余额提现至您的银行卡账户中。</div>\\r\\n      <div style=\\\"font-weight: bold;text-decoration: underline;\\\">您应确保您在开通和使用本服务时绑定的银行卡为您本人所有，并确保您将您的田觅觅账户与该银行卡绑定且用其支付的行为合法、有效，未侵犯任何第三方合法权益；否则因此造成田觅觅及其关联公司、持卡人损失的，您应负责赔偿并承担全部法律责任，田觅觅有权采取合理措施减轻该损失，包括但不限于冻结您的田觅觅账户及资金、从您的田觅觅账户扣除相应的款项等。</div>\\r\\n      <div>您同意田觅觅收集您在使用本服务过程中所填写的包括但不限于姓名、银行卡卡号、手机号码、证件号码、证件类型、有效期等信息并有权自己或者委托第三方将上述信息发送至您的发卡银行进行验证，验证通过后，田觅觅就可以为您开通本服务。同时，发卡行与田觅觅保留随时变更上述确认要素作为校验标准的权利。</div>\\r\\n      <div>您应妥善保管银行卡和田觅觅账号信息，包括但不限于银行卡卡号、密码、有效期，田觅觅账号、密码、密保信息、手机校验码等信息。如您遗失银行卡、泄露田觅觅账户密码或相关信息的，您应及时通知发卡行及田觅觅，以减少可能发生的损失。<span class=\\\"bold\\\">因泄露上述银行卡信息、田觅觅账号信息、丢失银行卡等所致损失需由您自行承担。</span></div>\\r\\n      <div>您同意，本协议适用中华人民共和国大陆地区法律。因田觅觅与您就本协议的签订、履行或解释发生争议，双方应努力友好协商解决。<span class=\\\"bold\\\">如协商不成，田觅觅和您同意由人民法院管辖审理双方的纠纷或争议。</span></div>\\r\\n      <div><span class=\\\"bold\\\">本协议内容包括协议正文及所有田觅觅已经发布的或将来可能发布的田觅觅服务的使用规则。所有规则为本协议不可分割的一部分，与协议正文具有相同法律效力。</span>若您在本协议内容发生修订后，继续使用本服务的，则视为您同意最新修订的协议内容；否则您须立即停止使用本服务。</div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":135,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bankcard-management.tpl.html","name":"./src/modules/my/bankcard-management.tpl.html","index":135,"index2":130,"size":1698,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./bankcard-management.tpl.html","loc":"14:28-69"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\" id=\\\"bank-card-manage-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">银行卡管理</div>\\r\\n    <div class=\\\"right tmm-financing-right\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!--银行卡管理-->\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"bank-card-manage\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content tmm-car-canter\\\">\\r\\n      \\r\\n      <div class=\\\"tmm-card-top\\\"><img src=\\\"\" + require(\"../../styles/images/card1.png\") + \"\\\" /></div>\\r\\n      <div class=\\\"list-block tmm-card-canter\\\">\\r\\n        <ul>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-after\\\">真实姓名</div>\\r\\n            <div class=\\\"item-title\\\">{{bankObj.bank_name}}</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner item-inner-it\\\">\\r\\n            <div class=\\\"item-after\\\">开户银行</div>\\r\\n            <div class=\\\"item-title\\\">{{bankObj.bank_value}}{{bankObj.bank_branch}}</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner item-inner-it\\\">\\r\\n            <div class=\\\"item-after\\\">银行卡号</div>\\r\\n            <div class=\\\"item-title\\\">{{bankObj.bank_code_format}}</div>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-card-but\\\">\\r\\n        <span class=\\\"sub_btn\\\" id=\\\"change_bankcard\\\">更换银行卡</span>\\r\\n      </div>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":136,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\card1.png","name":"./src/styles/images/card1.png","index":136,"index2":129,"size":9069,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bankcard-management.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":135,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bankcard-management.tpl.html","module":"./src/modules/my/bankcard-management.tpl.html","moduleName":"./src/modules/my/bankcard-management.tpl.html","type":"cjs require","userRequest":"../../styles/images/card1.png","loc":"1:601-641"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADaCAYAAADjRg0OAAAaOUlEQVR4nO2deZxU1ZXHv13dskgjIGmjcQNFgsiqEnDHiAoaI2JwRmWiZkxUVNyXUScuiahRYzARDUYlk8SZmIiMC6AS/QhqwFFAJSEqKuCGCwqCoES654/ffb7qprq6lrdWne/nU59bdFfXO7x3fu++e++559Q0HX8SRih0A3q4187AN4DuLV7tgS5ABqgDOru/XQt8CTQCa4AvgFUtXu8Cy4Fl7vVJyP+fqqQubgMqgAZggHv1d20v5Pil0jnrffcC/2YNsBR4CXg5q/2gDDuqHhNIcdQBA4F9gX2AA4HtW/nsZ+jO/qZ7vQd8SPNeYAPwKbAJ9Rhr3d92dseqBbYCOgBfw+95GoBtgV2AnqiX6gLs5V7ZvAPMBZ51rxfdsYwCqLFHrDbpBYwERgEH0PzuDrAOWIzu2N5dewkSQ5Q0ALvj92IDgH5AfYvPrUWCmQnMQr2O0QomkM2pBQ4CRiNR9Grx+zfQnfivwBzg72iskEQyQF8k7H3da5cWn1mKxDIdeAr1ZobDBCIywH7ACcD30OOMxxpgNrrbPgq8Fbl1wbIjcDjqFUfQfKz0EfBn4F7gGZIr/MiodoFsD/wA+Hc00+TxFnAf8CDqLSr1mb0O9SrfRTeG7HOwHLgLuBuNY6qSahRILfAd4FT0CFXrfv4u8Cfgj8A8oCkW6+KjBhgG/AsSizf5sAk9gv0GeJgqewSrJoF0Qr3FufjP4f8EZgBT0ONTVV38PNSix7AfAkcCW7ifvwH8AvUqn8VjWrRUg0C+DkwATge2dj9bhkTxW9RzGK2zHXAScBqaTgb4GLgDuBV4Px6zoqGSBdIAXAKMBzq6nz0L/BzN2FhvURy1aGbvfDRuAa3jTAZuIPpp7UjIxG1ACGwNXIseBy5A4piJFvX2A+7HxFEKm9C52w9NG89E5/YCdK4n4vfQFUMlCaQdulivA5ehBbLZ6G53BFocM4LhaXRO90HnuB74D3TuL0AxZhVBpQjkGOBV4CagKxLDcOBQtKBnhMM8dI4PQue8K7oGr6BrknrSLpBeaPZpGprDfwMYgx6nnorRrmpjDjrnY9DK/M7omjzK5pEIqSKtAqkDLkaxT4eheKgrUOzRAzHaVe08gGLArkDX5DB0jS4mpYGxaRTInsBzaOakI7pT9UYD8w0x2mWIDeha9EaD+o7oWj2Hrl2qSJNAtgCuAeYDg9H6xTHAsSiU3EgW76EV+WNQqMpgdO1+gr/wmHjSIpDd0BrGf6L5+CkoSnV6nEYZBTEd2ANds1r0+PVX1MMknjQI5CRgAbA32h33XbSquyZOo4yiWIOu2VHoGu4FvICubaJJskDaA3cCU9E8+yw0AHw4RpuM8ngEXcMZ6JpORdc4sesmSRXITmhe/VQUUHguWpiq6LifKuF9FE19Drq2p6JrvVOcRrVGEgVyCPA8MAQNxA8GJlF94eeVTBMKdByOBvBD0DU/JEabcpI0gZyKHqUa0F1lL7SzzahMnkVjyznoms9CPpAYkiKQGhTsdidaUJqM7iYr4zTKiISV6Frfhq79ncgXauI0yiMJAmkP/AEFuzWiYLcz0fOpUR18CZyFQukbkS/cSwIG73ELpDOa0TgercCORfs1jOrkFrS4uAH4V+QbneI0KE6BbA38Bfg22qF2MAobMaqbB9DgfRXyjccoL0tlWcQlkAYkjiHoGXQ4CkMwDFDc1nDkG/sCT9A8FVNkxCGQBvQfHgSsQCfi5RjsMJLNYrTPZAUKcnwS+U6kRC2QLmirZj+0d+NAtLnGMHLxKvKR15HPzCLix60oBbIlGnTthbKKDEfJyQwjH8vR+HQZ6klmIF+KhKgE0g54CD1Pvo0GX2lP4WlEx1vIZ95GPvQQ8qnQiUIgNSjR2LdRaphRqByAYRTDmyif8IfIl+4mgsXEKAQyETgRWI/CnRdHcEyjMvkb8qH1yKcmhn3AsAVyBnApyql0PDaVa5TPfORLm5BvnRHmwcIUiBeFC9pF9mCIxzKqiwdROAooKvjgsA4UlkB2RFnStwBuB64P6ThG9XIj8q065Gs7hnGQMATSHmWzaEAZ+M4N4RiGAdp0NRf52jRCCG4MQyC34W92GgtsDOEYhgGK+D4ObbraG/leoAQtkHGoWtNGZLjt5zDCZiXytY3I98YF+eVBCmQXfAVfgu0ENKLjWeAi934ymxcqLZmgBFIL/B7V9J6JP3tlGFHxS+R7nZEv1ub/eGEEJZAfo1T476MyZ5ZgwYiaJuAU5IP7oCSDZROEQPZE9Tia0IZ7G3cYcfE+8sEm4HICyAVcrkDqUPVTr7WkbkbcPExznywrq3y5ArkAP5H0RW181jCi4iLkk4ORj5ZMOQLpBVzp3p+J5co1ksMa5JMgHy25iE85ArkN1X64H8uybiSP6fj1SUpeQCxVIKPxKztNKPXghhEyE/ArXY0u5QtKEUh7/NxVE9GznmEkkXdRtStQzq0OxX5BKQKZAPREO7xuKeHvDSNKfoF8tQclPO0UK5Ct0fwywIXA58Ue0DAi5nP8mazLkQ8XTLECuRClXZmLZUE00sMDyGe3Qj5cMMUIZBvgbPc+kGV8w4iQK1w7AflyQRQjkItR2azZwFNF/J1hJIE5wOMoGfbFhf5RoQLZDhjv3lvvYaSVH7t2PPLpNilUIOPRgssMYF7xdhlGIpiHCol2xF9pz0shAqlHxU0ArivNLsNIDF4CkTORb+elEIGcAnRFCRieLt0uw0gEnh93Rb6dl7YEUoefleTm8uwyjMRwk2vPoY1w+LYE8h20v3cFttfDqBweQtnid0U+3iptCcRL6zgZFVo0jEqgESWdgzZSl+YTSE9gBEqnclcwdhlGYrgb+fahyNdzkk8gJ7vfTwM+CtIyw0gAHyHfrkGJRnLSmkBqkEAApgZplWEkiKmu/T6t1BppTSD7AjuhePrHAzcrfPqiPStLUDRnk71CeX0O/N2d674FXZlk8TiqXrUT8vnNaE0gx7n2f9CAJi10BO5AVXPPA/oQQkJj4yvaA7ujc/0SGvh2jNWi4mhEPg6+zzcjl0AywPfc+3tDMCosvDqIp6EZt1tRArHOqPu0V/Cvzu4c/woVtDmdCOsHBoQnkLHk0EMugewPfAOVaX4hPLsC5xbgEJTpeyhaBJqH9iQb4bAOneOzgWHokfwQ/C3ZaWABKjO9HXBAy1/mEsixrr0/RKOCph/qOb4AjgQWxWtOVbIQnfsvUE+yR7zmFIW3+W9My1/kEsgo16Yplc+pKFnx7cCLMdtSzSxCY8BaVIogLXjlAY9o+YuWAtkV2A34gHSFtR/u2j/GaoUB/jP9yFitKI55KNlcL6SBr2gpEK/3eJx0zV559SAWxGqFAXrUggBrdETAl8Bj7n2zXqSlQDzVzw7booDxZk2s3Fv8fOHatE2vP+raw7N/mC2QWuAg9z6Ni4OGUQ6zXHsQWcV3sgUyEO2wehNNlRpGNfEO8v16YJD3w2yB7Odaqy1oVCue738VdpJLILat1qhWPN/PKxDrQYxqxfP9/b0feAJpAHYA1qLoTMOoRv6ONLAD0sRXAhng2sWka/3DMIKkEWkAoD/4Ahno2pejtsgwEoangUHgC6S/a1+K3BzDSBaeBvqDnxPIE0jaA/2a4jbASD2eBpo9YnlVQF+J3BzDSBbeJFUvkEC6oaI4nwEfxmSUYSSFj4HVSBPdMqh2G2gHoWEYsNS1PbIFsiwWUwwjeaxwbY8Mfla5ZfHYYhiJo5lAvEo7Vu/cMMRK126XwS+La+lFDUN4WuieLZBVMRljGEnjY9duncEFZWECMQwPrwdpyABfc/+wNRDDEM0esbxcqp/FZIxhJA1PC1vWoRVDgE9jMiZIcqawNyIn7TFxa1zbPoOfwWFTTMYYRtLwyg12yODXil4bkzGGkTS8R6zaQuqkG0a1Um8CMYw8ZIAN7n2aKgMZRph0cO2GDH4+2zRVBTKMMPHyCm+0RyzDyEMGf/aqc5yGGEaC6OTaTzP4C4RdWvmwYVQb3Vy7NoP23wJ0jckYw0ganhZWZ/BDe7u18mHDqDa8LSAfZ4BP3D+6x2SMYSQNTyCfZPC3F24bkzGGkTS8begrM8Db7h87xGSMYSSN7V37TrZAvhGTMYaRNDwtvJ3Br0e4U0zGGEbS8LTwdgY/o2KvVj5sGNWGp4XldWgv+mo099tAde9NvyrmvzfipwFpYS1ukA6wxLXfjMUkw0gOvV37GvjlD7xkvSYQo9rxNLAEfIF4NREGbPZxw6gumpUj9ASyyLWDIzfHMJLFINcuhM0FMojmtdMNo5qowe8kFoAvhpVowbAzsGv0dhlGIuiFNLACl10xu7d4zrXDIjbKMJLCUNc+7/2gLuuXc4ExwH7A7yI0KklcFbcBRqzs69q53g+ye5A5rj0gMnMMI1kc6FpPC80E8iLafrs7sE2ERhlGEmgA+iINeLXSmwlkE/AMGsmPiNQ0w4ifQ5HvP0NWnuqWU7qzXDsyIqOCYp1r6/N+yogCL6fUF7FaUTyez8/K/mFrAjmcdJUSWO7afrFaYYC/jvBG3k8lixrk8wCPZv+ipUBeBV5HY5A0rarPdu0JsVphAJzo2kfzfipZDEY+/zrwSvYvcq2aP+LaMSEbFSS/Qc+NP8LiyeJkILoGm9A1SQuerz/S8he5BDLNtceGZk7wLAZ+jZ5/Z+DH0xjRMQg5WDt0Lf4WrzlF4fn6tJa/yCWQuSj0pA+wR4hGBc15wF/Qhvv5wCQUFdAp3x8ZZdEJneNfonO+PboG58VpVJH0Rb6+kqwFQo9cAmkE7nfvx4ZnV+BsBI5Cd686YALwVzTD1WSvUF7r3Dk+y53zX7tr4FUMSAPHuXYa8v1mtBa5e59r/410zWZtAE5Hz8KTUDdv1XvD459oUDsJjf1Ox683kwZqgHHu/X05P9B0/Emt/eFSYBfgILKW3g2jgjgQeAp4E0Wxb1adt7UepAm4x73PqSDDqAC+79qptFK6Ot/mqP9Cz2THYSvURuVRj3y7EQkkJ/kEsgJ4zH3RyQEaZhhJ4CS0Oeox5Os5aWt77e2uPYN0DdYNIx81wHj3/o58H2xLIA+jwXpf4Nvl22UYieBg5NNLgYfyfbAtgTQCk937NC3+GEY+znft7eRY+8imkAwm96DUpEdgcU5G+hmAfHk1cHdbHy5EIKtRL1IDXFKWaYYRP5cgX74dvz5nq7S2UNiSBmAZCkT7JumK9TcMj13Qyv9GoAcFJGovNEnch8AUFG9zVWm2GUbsXIl8+E4KrGJQaA8Cqtu2FIWUD8DP52sYaaAv8BLaCtwLeK+QPyomzeh7wK1ALXBNsdYZRsxcjXz3VgoUBxSfh/dnqGz0GCwDo5EehqFNUZ8gHy6YYgXyCXA9mgW4BVtdN5JPtq9ej3y4YErJ5D4JVd8Zhh9LbxhJ5UTkq68h3y2KUgTyBf6q+nVYpK+RXOpRrwHy2aJzdZVaC+QR99oe+GmJ32EYYXMN8tGZ5MhYUgjlFMs5F22vPAvYu4zvMYww2BvlJfjctSVRjkCW4k+deYuIhpEE6pBP1iIfXZr/461Tbrm1m1H5tsHAxWV+l2EExYXIJxcBN5XzReUK5EvgVJTd4krSla7UqEz6oXAozze/LOfLgijY+QIaqLdD+9jb5/+4YYRGe+APrv0J8s2yCKqi7bUogVg//Gk1w4ia61Gc4Dzkk2UTlEA2oRQq64BzgKMD+l7DKJSjke+tQwkPN+X/eGEEWRN9KdoIX4N2IfYI8LsNIx89kM95yRhKnrVqSZACAVXHvQvoBvwJjUsMI0zaIV/rhrbQBlqhOWiBAJwNLEQLNVNC+H7DyGYK8rWFaNE6UMIQyAYUWvwhSs51fv6PG0bJnId87EPkc4Enzg5DIKBkwMeivb8/Aw4L6ThG9XIYcCPysWORzwVOWAIBFSM5Ay333wf0D/FYRnXRH/lULfKxzQrfBEWYAgENmq4HuqCijr1CPp5R+eyCyux1Qb7VZm6rcghbIACXodXN7VDYcUMExzQqkwZ0o90B+dRlYR8wCoE0AT8AnkA9yKNA1wiOa1QWXfGfQp5APpWzpkeQRCEQ0EDqaBQCMBiYhbpIwyiELshnBiMfGk1EdRCjEggoBGAk8DwwFGWO7xzh8Y100hllYB+Kgg9HAmujOniUAgFYAxyO4vT3Bx5HK6CGkYtuyEcOQD5zGPKhyIhaIAAfA4eilc+h6HlymxjsMJLNNsg3hiJfOQz5TqTEIRCAj4BD0PPkIFRptEdMthjJowfyiUHAc8hXCsqlGzRxCQSUwOtQYDbQB+0n2TNGe4xksCfyhT7AX5A4ikr2FiRxCgQ0cD8SuBfYFt01RsVqkREnI5EPbIt84gjkI7ERt0BA03Xj0A6wejRjYQGO1cf5aGazHpiIfCKSqdx8JCVVTxNwBQo4ux1lSxkM/BDlNao02qOZmQPQc/Zu6K5Zj87FZ8A7aOPPAmAO8CxKjlFpdED1Osah/98Z7t+JoJj6IFFxANoA83U07z2WkCI1Y+BbwJlo0bTYhdJVwJ/RDeTFgO2Ki54o6HBv4AN0refEalELkigQUKzNNGAIqiN3CjA9VovKYxgKzd4/62cvAE+imbzXgLfRAlgNWhzbEegN7IMGqtnR0DNQj7swbMNDZDTaJtsVLR6PAd6K1aIcJFUgoK53EvAj9+9foYRgRScgjpGtgJ+juKEaNI9/B4pAfb3I7+oDnOa+aytUvvhWFLAX+EahEGmPkrl5u/+moGQLiXyUTrJAPMaiZ9IuwGKUPSUNd86BqNfrgRz45yg8u9xZma6o95gAbIFK4Y1GvVDSGYxyp/UDPkVjzPtitagNkjCL1RZ/Qid2Pjqx84Efk5wJhlwcCTyNxPEcmtu/gmCmLFejnnQo8DdUe28+GrsllTp0zbKv4SASLg5Ih0BAg/T9gcvRLM/VyPGGxGlUKxyJxk/1wG+BA4F/hHCchWhs8wCKWZrpjpU0hqBrdTW6dpeja5mKiZe0CASUY3UiOuEL8UOff0lyQueHortiO/RIdTLhjpnWoUfQe4BOwIOojn0S6IKujbfFYRGaxZtImflyoyRNAvF4CTnipWhgdxawBA1e4/z/dEfTsFuigfgFER13E0rSPA055f8iscRFBl2LJejafI6u1bdI4fR0GgUCWlC6AdgDrb5uhxLWPQ8Mj8mmO9D09Bw0KxMljSjd5kuoB7k54uN7DEfX4C50TR5G1+gGUrrImVaBeCwDjgKOQavOg9HawnSizaIyCvge2qtwIvGESKx3x/4cTY3vG+Gx+6Nz/iS6BkvRNTkKXaPUknaBeExHd6oL0VrD0eiZ94/A7iEfO4N/x/4JWvCLi8Vo7FNDkfXAS6QPOseL0Dn/BF2DPUj3wu5XpGEdpFi6oot0DppJagTuRw7zfAjHOxo5w3IUUxX3o0Q9miH6GpoteiaEY+wFXIIStmXQZMEktAC4OoTjxUal9CDZrEZrDj2RKDagmZ7/QzvURqE7bFCMd+3NxC8OkLPe4d6fHeD31qBz9wS60YxF5/Zn6FxfQYWJAyqzB2nJNihAcDy6q4JWnaeg6dFVZXz3tuiR6kv3fhsUUxR3EaEdUY+2Adn0WRnf1R3Fwv0I9ZCgHaGTgdtQkGHFUok9SEs+QPUTd0bhGUvRhb4ROffvgBEojWWxHOH+bhZayX4OuA44rmyry+MttCtvSxToWCy16Jz8Dp2jG9E5ex2dw53ROa1ocUB1CMRjPVq4+ibauTYdxTKNQ5kzVqBn6GIKkR7k2t7u+7qghcIZwZhcFrNdW8zq+iB0DlagczIOnaPp6Jz1RudwfXBmJptqeMTKxw7o8eEENCPj8SZyiulokNtaOa8XUU083GcuQ3fb0DP+FcAoJNQnaL0XqQX2Q8GOo9FYwuMfaNvrPcQ7Mxcr1S6QbIagO+ZYtMjlsQolD3gc3ZWXuZ/XoAHxlu4zJwCPRWRrIfQE3kCOnj3V3QMlyxiBhNM963fvoeDQ36NJjarHBLI5GRQW4d1VW8Y2nQf8Ag1+30e9yDEkL/guA3Sk+QD9XOCWFp97FQU8TkdjqMZIrEsJSQ4Zj4tGFGA3D8UQ9UJ32xHAwWiPOMD2wH+jOKgkPpM3svns1QK0kPok6g1nE2DBy0rEepDiqEXji0Z0d076Tr5OaEx0LUoC4c3UBVIiuRqoplmsINiE/wjiiSPOyNl87INCQE5Dj4Ig+00cRVDT1JSECZeUccLJ3rsPUFGXLmgLaRJohzYnXYR6jLeAnQC4d2psRqUV60HK4z3X9o7VCp8BaKB9Kf7jVBr2qicWE0h5LHLtPrFaITFcgsQxEK14z3S/W9TaHxltYwIpj6dcW0o4R5AMRAPxdiix3ED8bchPtfZHRtvYNG95zECD3pEozD6uaNYF6LHqZVTHb0eU0GE9WuQ0SsR6kPJYiRywPdryGic3IXGA8k1lUCLwciJ5qx4TSPlMdu15KLAvbupRAmhQNkqjDEwg5fMQyuDRE+07iZtL0b6XZ1DyOqMMTCDl04if4ucqFCEcF/2QLU1IKEaZmECCYSba994F+AOaTYqaLd2xO6DdktZ7BIAJJDhOQwuHB6IEBlGSQbv/BqDo3KiS1lU8JpDgWIXC3tcDpxNd8rZa4DdoL/walGXFZq4CwgQSLPPRfvSNqObeVDQFHBb1aIPTKUgU3yWcRNlViwkkeB5Bd/N1wEkoFWmfvH9RGl7y7mNQwrZRJKx8WSVgAgmHR1CWk2Vod+IC4Kfojl8uXdGi4HyUwXAJSuY9N4DvNlpgAgmPRSgm6m40s3Q5Esy1wK4lfF9flFZ0ORqE16ISbHthEbuhYftBSsHfD1IouYp4Po+SPLyAZp7ewS/iuRWKp9oNJaEegdY4PB5D6xzFlaKz/SBFY8GK0TAPPXINQxkej0alj/cu4js+RjVAbsNC2CPDBBItXjKIDmi9ZH802N4NZUnpjFbB1wHvokenhWh88TTJyP1bVfw/AjW+DkDFX4UAAAAASUVORK5CYII=\""},{"id":137,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\change-verify-phone.tpl.html","name":"./src/modules/my/change-verify-phone.tpl.html","index":137,"index2":131,"size":1664,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./change-verify-phone.tpl.html","loc":"15:28-69"}],"source":"module.exports = \"<!-- 验证手机号 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-verify-phone-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">验证手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"change-verify-phone\\\" class=\\\"page tmm-modify-phone-page tmm-verify-phone-page\\\">\\r\\n    <div class=\\\"set-old-phone-wrap\\\">\\r\\n      <div class=\\\"txt\\\">验证码将发送至手机: {{phone}},请按提示操作。</div>\\r\\n      <form class=\\\"list-block tmm-setPhone-list-Form tmm-verifyPhone-list-Form\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\" style=\\\"display:none;\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title label tmm-setPhone-errlabel\\\">错误信息</div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner tmm-setPhone-item-inner tmm-verifyPhone-item-inner\\\">\\r\\n              <div class=\\\"item-input item-title-con\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"sms_code\\\" id=\\\"sms_code\\\" placeholder=\\\"填写验证码\\\" class=\\\"setPhoneInput\\\">\\r\\n                <span class=\\\"activity get_code\\\" id=\\\"get_sms_code\\\">获取验证码</span>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"bg_btn mob_btn\\\">\\r\\n          <button type=\\\"button\\\" class=\\\"sub_btn disabled\\\" id=\\\"update_bankcard_finish\\\">完成</button>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":138,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\change-bank.tpl.html","name":"./src/modules/my/change-bank.tpl.html","index":138,"index2":132,"size":2840,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./change-bank.tpl.html","loc":"16:20-53"}],"source":"module.exports = \"<!-- 添加银行卡 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-add-bank-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">更换银行卡</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"change-bank\\\" class=\\\"page tmm-add-bank-page\\\">\\r\\n    <div class=\\\"page-content tmm-add-retinue-page-contnet tmm-add-bank-page-contnet\\\">\\r\\n      <form class=\\\"list-block tmm-myinfo-item-addform tmm-bank-item-addform\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户行</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <select class=\\\"tmm-bank-select\\\" id=\\\"bank_id\\\" name=\\\"bank_id\\\">\\r\\n                  <option value=\\\"\\\">请选择</option>\\r\\n                  {{#each bankList}}\\r\\n                  <option value=\\\"{{value}}\\\">{{name}}</option>\\r\\n                  {{/each}}\\r\\n                </select>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">支行</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_branch\\\" type=\\\"text\\\" name=\\\"bank_branch\\\" placeholder=\\\"开户支行\\\" class=\\\"add_input\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户名</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_name\\\" type=\\\"text\\\" name=\\\"bank_name\\\" placeholder=\\\"开户姓名\\\" class=\\\"add_input\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">卡号</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input id=\\\"bank_code\\\" type=\\\"number\\\" name=\\\"bank_code\\\" placeholder=\\\"卡号\\\" class=\\\"add_input\\\" pattern=\\\"[0-9]*\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"div_protocol\\\">\\r\\n          <input type=\\\"checkbox\\\" class=\\\"checkbox\\\" id=\\\"agree_create\\\">我同意<a href=\\\"###\\\" class=\\\"bank_protocol\\\" id=\\\"bank_protocol\\\">《银行卡管理协议》</a>\\r\\n        </div>\\r\\n        <div class=\\\"f_bottom\\\">\\r\\n          <button class=\\\"sub_active disabled\\\" type=\\\"button\\\" id=\\\"update_bankcard_next\\\">下一步</button>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":139,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","name":"./src/modules/my/my-wallet.tpl.html","index":139,"index2":137,"size":3282,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"./my-wallet.tpl.html","loc":"14:18-49"},{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./my-wallet.tpl.html","loc":"17:18-49"},{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"./my-wallet.tpl.html","loc":"14:18-49"}],"source":"module.exports = \"<div class=\\\"navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\" id=\\\"my-wallet-navbar\\\">\\r\\n  </div>\\r\\n</div>\\r\\n<!-- 我的钱包 -->\\r\\n<div class=\\\"pages navbar-through\\\">\\r\\n  <div  data-page=\\\"my-wallet\\\" class=\\\"page no-navbar no-toolbar tmm-my-wallet-page\\\">\\r\\n    <div class=\\\"tmm-my-wallet-bg\\\">\\r\\n      <div class=\\\"tmm-my-wallet-navbar\\\">\\r\\n        <div class=\\\"left\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n            <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n          </a>\\r\\n        </div>\\r\\n        <div class=\\\"hede sliding\\\">钱包</div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-my-wallet-content\\\">\\r\\n        <div class=\\\"tmm-conter-balance\\\">{{walletObj.money_format}}</div>\\r\\n        <div class=\\\"tmm-balance-up\\\">余额(元)</div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"list-block tmm-monye-mag tmm-mag-but\\\">\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-content\\\" id=\\\"tmm-my-draw-menoy\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/tx.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">提现</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"list-block tmm-monye-mag\\\">\\r\\n      <ul>\\r\\n        <li>\\r\\n          {{#if noBank}}\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-add-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n          {{else}}\\r\\n          <!--已添加银行卡-->\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-manage-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n          {{/if}}\\r\\n          <!-- <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-manage-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a> -->\\r\\n        </li>\\r\\n      </ul>\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-my-trade\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/jyjl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">交易记录</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-my-wallet-pay\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/zfgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">支付管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":140,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\tx.png","name":"./src/styles/images/tx.png","index":140,"index2":133,"size":1685,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/tx.png","loc":"1:1021-1058"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/tx.png","loc":"1:766-803"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAqCAYAAADI3bkcAAAEl0lEQVRYhb2ZTWhcVRTHf2ObpJqPJmk0aQsSaIg2NEmtDbYW/IigCLrSLgXdWNCFm+4VdGewFURRUFFcWKQq1HanRgWraDsabK022gpqbSs2NfYjTuJzcf7XO528j/veTP3DcMjcc/7nP/fde+55NyXqQwuwGRgHRoDrgWuAdo3PAqeAI8AU8AGwH5irM29ubABeBGaAKOdnRrEb/g+ho8C+GgFTwDPAVmyWu4Al+nTpu63ymaqJ3SfOhmMZsAOoKNFZYAIYKsA1BDwtjkicO5SjIRgAylXkzwLdDeDtFpebhLJy1YUxbNNEwPfAjfUSxmCjuCPgtHIWwk3YLndrraMR6hLQgd8bs8qdC2vwM/sm0NRIdQloUq5IudeEBi4DDuJntvlyqEtAM36mDxK4EScU8AOw/LJJS8ZyYFoaJrKch7FdO0+xxd8lji3YOhwCegrwjElDBVhXPVCqcdwD3AM8DzwaSF7Civ9moDfB53fgM+wx/xPI+5w0vAfcGyd4FKuFF4B+rMRkoQc7xZzQc8BP2PG7BNv91wKtGj8JvKUfkIWrgePAldgx/hUidXgcexQvALsDCFcDDwKdwB/Y09kDfIOt/2ngEDazJ4GVEjEsIbMZ/OexRmqT/t4LfoabgN+w02cUO/PT0A5sA9qwor+b7A6sBbgPGAT+whqgLNEjwNfYhPQBlSs0sEliDwWIBbhbYo8DuwLEIp9dimkTRxampKkb2yM4wbfLvh9A0gusxXbxu8BCQIzDAvCOYteSvEmr4TTdBl7wetn9AQTrsaVUxjZXXpxVbKkqbxo+rcr7n+BB2SMBBP2y34bpi8XhGq40OE2D4AX3yf4cQOBay19DlCXgRA1XGn6R7QUvuE02a9eCb4T+TvFxbxRJcJs0pE9xmtrBC3bklQCCi7KtqV7pcLEXAnzdxDSDF3xGtjOA4JTsqiBp8Vhdw5WGLtkZ8ILdbu9b5L4Y07IjQdLi4WKnU70MK2VPgxf8Yw4RU1gdHaLYLK9S7Dxhh9Sw7FHwgsuyIe9sf2L9QQm4n3xruVUxJeBzcWXBaSqDF/yx7J2BiSexEtiNNUAhPW+PfLsV+2FgrnHZT+DS5ucEsAK4DmtostAKPICaEqyZcW2jqzqOvwdrlpqwzu11rBXNQj+2XM+JY87NcAU74wEeCiBCJK8CB7BHO5/iW8Hq6QHglUCxAA9jP/ptYhqsjdjMnCGsvKUh6+AIQae0RPieeBH2yuGpOpM1QvCT4phMcxrDWsA5fDkpgnoFr5OGBQIuVXYq2ZfYW0IR1CP4KuWOpCUTrcB3CniDxW/WISgquIS9lUTSEFzjB/ALfif5RRcRXMI/3RkK3GSOY2+uEVa+8iyPvIJbgJcVcx5/WOTGLfiZLhN+gZ1H8ADwBb6k3ppT4yKMYKeN+/V3xPh8hDUy7v8W1YJv0NhkTNxd+Kd4lPo6wEvQCbwm4m0x4+7G8SKwvUrwdn3nbkJr8ZjGXqK+F4JEdCV8vxR4An/9X/2paGxpQuyKhirMiS3AMbzYY8DNjUxQAoiiYjW+VIqtdh3Y/VwEPEJMz1tPvn8B1AZCTxPqTAIAAAAASUVORK5CYII=\""},{"id":141,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\yhkgl.png","name":"./src/styles/images/yhkgl.png","index":141,"index2":134,"size":385,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:1496-1536"},{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:1877-1917"},{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:2235-2275"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:1241-1281"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:1622-1662"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/yhkgl.png","loc":"1:1980-2020"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAqCAYAAADI3bkcAAAAyUlEQVRYhe2YTQqDMBBGn+IZWqHr/hyzB6qlm55LtN3bRVKwCmqFMQl8DwZGScJjhIAfCCGCcAYqoAW6yKr1bsev7AWoIxCbqxo4Adz9iydwWPA1tmYHPHCON4CXfygDSs1R4hybzDcAWTifRXQAeWiLf5GwNRK2pn9LJEFyEy56ve5hCyRsjYStkbA1xfwSrivPXrtvkuQmrD8OayRsjYStyYG372MPUsDlbD9R1T6U0QSjqCq5MBBclFkBTQRiw2oYxK1CiA35AOYFugFFhFxYAAAAAElFTkSuQmCC\""},{"id":142,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\jyjl.png","name":"./src/styles/images/jyjl.png","index":142,"index2":135,"size":1113,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/jyjl.png","loc":"1:2630-2669"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/jyjl.png","loc":"1:2375-2414"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAqCAYAAADI3bkcAAAC60lEQVRYhdWZzU4TURTHfxiLmAgLYaNuETWIlYJBNxh5B/EBfBFfQBBcmbDXRDcaJCGauNQdQk2M9QEMBgmm3SiEcXH/hzs0zEc702n9JZM7vR/n/Du5M/fcc/vIRj9wB7gH3ADGgAvAObU3gB9ADdgCPgAfgb8Z/bbMJPAM+AUELV67GjtZhNAysAYchgRUgSfAA7Wfxz35ft2XgXn1qYbGHcpWuRNCB4AFYF/OGvo90YatCY1tyNY+sCgfuTAKbISMLwPDOdgdlq0D2d6Qr0zcAn7KYA2YzmrwBKZlOwB2gJl2Dc0AdRlaA4byUBfBkHwE8tmy6FH8k30BlPJUF0FJvgL5Tj09BvBz9g3ubS+Kfvm0OZ3qRVzQgO90dhpEMSTfAfA4qXMZ9yU4AKY6qyuWKWnYx62gkbzF/bOnBYhKYhmnZTWqwyRu9akDIwWJimMEp+WQiGV8BfePFmOMtBo3pL2isPdppbnhDLCnxus9JHhc7XvSeMSsGr7EDO4WFjDNApxS5ZzKd91QlMB7lXPgBVuI96lwOcmYpjJ4wWMqvxYuJxnTNBau3MHNk174nDUzjI/kOK3KQZX1hMGPUjhI06cVTNMg+ClhxH1ieor/ZkrYE95WebEbihK4pHIbvOCaymuFy0nmqsoaeMGbKm8XLicZ07QZrrSluVq4nGS2cNruhivDwc94zOA8A5s0WPDzWxqPpsQf4JXuH2Z0kiem5SVO4zEq+G12L3zeLIAPiNmuravDckGi4ljCaVmP63ST3tuEJiYLbVtSo3vbfEtdLaQZcBafSHlNMVkfoySfAfBZWlIRTlU9x0d1naTtVJUxg8/hrlJcMrBBxgymRXI1OvMi5pZuNS5zPKG9RH4J7SV8Vn+Dpm1QFgZwCRYzXscl6uJyGFGMa6wtCrkfGYSxQ5lwrFCVw3n8oUxJlx3K3FefatPYjh3KNFPBHV3tEh/4nHTZsVelHcd9GYU3Hyxe4eSDxW/kdLD4D3C3IF5ZpQX0AAAAAElFTkSuQmCC\""},{"id":143,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\zfgl.png","name":"./src/styles/images/zfgl.png","index":143,"index2":136,"size":721,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":139,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet.tpl.html","module":"./src/modules/my/my-wallet.tpl.html","moduleName":"./src/modules/my/my-wallet.tpl.html","type":"cjs require","userRequest":"../../styles/images/zfgl.png","loc":"1:3024-3063"},{"moduleId":144,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","module":"./src/modules/my/my-wallet-content.tpl.html","moduleName":"./src/modules/my/my-wallet-content.tpl.html","type":"cjs require","userRequest":"../../styles/images/zfgl.png","loc":"1:2769-2808"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAqCAYAAADI3bkcAAABw0lEQVRYhe3YMWsUQRiH8d9pQIUQEdFoYQSxs4qpbEWF2IiFYGWhIthZmE7wGwiClX4AK8uIWIokNloEO9EiSIwpokEU0hiLfaMrrLfe7kwuxT4wXDPv/332bmZu2J727ME5nMZJHMde7MYqlvEWc5jF+wQ9G3EE9/EVGwOMOVzCjq0SHcEd/ChJvMZdnMEExrALBzGFa3iMtVLNPE7klj2MF6WmTzA5QP0obmIx6tcxk9jxN8fwIRotKdZtU0ZxDz8j7yF6bQXLHMC7CH+j+KZTcBHfI/dBokw9PIvQBexLFRycVSyNDVxJEXgjwr7gaIrACq5HjzUtf70xrEj49H146s96bsztCHkl8aaoYFKxCddxqGnI5ka7kEiqjtnod6tJ8VQUr2BnQql+XI6ez5sUz0Txo5RGNYxHz2//mjDSp/hUfL5MaVTDZy3O4wXF0w7y1ztUVhXC+4ctUse04q4wyJUxx1gKl1q2g2xZupbNycOm0mPLbv2p6IRz0wnnphMOrsZITr/LTxsmMuV2SyI7nXBuOuHc5DrWFjPlVtLdh1PSCeemE85N1bH2SfFSeTucFMv/M+m8QnrY7yQ+hstf/AKRk8zp/XqBogAAAABJRU5ErkJggg==\""},{"id":144,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my-wallet-content.tpl.html","name":"./src/modules/my/my-wallet-content.tpl.html","index":144,"index2":138,"size":3005,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./my-wallet-content.tpl.html","loc":"18:26-65"}],"source":"module.exports = \"   <div class=\\\"tmm-my-wallet-bg\\\">\\r\\n      <div class=\\\"tmm-my-wallet-navbar\\\">\\r\\n        <div class=\\\"left\\\">\\r\\n          <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n            <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n          </a>\\r\\n        </div>\\r\\n        <div class=\\\"hede sliding\\\">钱包</div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-my-wallet-content\\\">\\r\\n        <div class=\\\"tmm-conter-balance\\\">{{walletObj.money_format}}</div>\\r\\n        <div class=\\\"tmm-balance-up\\\">余额(元)</div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"list-block tmm-monye-mag tmm-mag-but\\\">\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-content\\\" id=\\\"tmm-my-draw-menoy\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/tx.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">提现</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"list-block tmm-monye-mag\\\">\\r\\n      <ul>\\r\\n        <li>\\r\\n          {{#if noBank}}\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-add-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n          {{else}}\\r\\n          <!--已添加银行卡-->\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-manage-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n          {{/if}}\\r\\n          <!-- <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-manage-bank\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/yhkgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">银行卡管理</div>\\r\\n            </div>\\r\\n          </a> -->\\r\\n        </li>\\r\\n      </ul>\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-my-trade\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/jyjl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">交易记录</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <ul>\\r\\n        <li>\\r\\n          <a href=\\\"#\\\" class=\\\"item-link item-content\\\" id=\\\"tmm-my-wallet-pay\\\">\\r\\n            <div class=\\\"tmm-xiao-tu\\\"><img src=\\\"\" + require(\"../../styles/images/zfgl.png\") + \"\\\"></div>\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">支付管理</div>\\r\\n            </div>\\r\\n          </a>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\";"},{"id":145,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","name":"./src/modules/my/payPasswd.js","index":145,"index2":141,"size":7778,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":131,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\bank.js","module":"./src/modules/my/bank.js","moduleName":"./src/modules/my/bank.js","type":"cjs require","userRequest":"./payPasswd","loc":"19:14-36"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  httpService = require('../services/httpService'),\r\n  payManageTpl = require('./pay-manage.tpl.html'),\r\n  verfityPhoneTpl = require('./verify-phone.tpl.html'),\r\n  setPasswdTpl = require('./setPasswd.tpl.html');\r\n\r\nvar type = 'passwd';\r\nvar info = {};\r\nvar modifyMessage = {\r\n  '-3': '设置支付密码',\r\n  '-2': '设置支付密码',\r\n  '-1': '设置支付密码',\r\n  '0': '设置支付密码',\r\n  '1': '设置支付密码'\r\n};\r\nvar passwd = '';\r\nvar oldPasswd = '';\r\nvar step = 1;\r\nvar timer = null;\r\n\r\nvar payPasswd = {\r\n  init: function() {\r\n    info = {\r\n      type: {},\r\n      data: {}\r\n    };\r\n    payPasswd.showView();\r\n    payPasswd.bindEvent();\r\n\r\n  },\r\n  showView: function() {\r\n    tmmApp.showIndicator();\r\n    httpService.getPayPasswd(function(data) {\r\n      tmmApp.hideIndicator();\r\n\r\n      if (data.status == 1) {\r\n\r\n        info.data = data.data;\r\n\r\n        info.type.status = data.data.value;\r\n        info.type.value = modifyMessage[data.data.value];\r\n        var output = appFunc.renderTpl(payManageTpl, info)\r\n        tmmApp.getCurrentView().router.load({\r\n          content: output\r\n        });\r\n      } else {\r\n        // tmmApp.alert('');\r\n      }\r\n    }, function() {\r\n      tmmApp.hideIndicator();\r\n    })\r\n\r\n  },\r\n\r\n  showVerifyPhone: function() {\r\n\r\n    var dataVerifyPhone = {\r\n      'phone': appFunc.replacePhone(JSON.parse(appFunc.getLocalUserInfo()).phone),\r\n      'isPasswd': true\r\n    }\r\n    httpService.getIsvalidate(function(data) {\r\n\r\n      if (data.status == 1) {\r\n        if (data.data.value == 1) {\r\n          payPasswd.setPasswd('current');\r\n        } else {\r\n          var output = appFunc.renderTpl(verfityPhoneTpl, dataVerifyPhone);\r\n          tmmApp.getCurrentView().router.load({\r\n            content: output,\r\n          });\r\n        }\r\n      }\r\n    }, function(data) {\r\n      var output = appFunc.renderTpl(verfityPhoneTpl, dataVerifyPhone);\r\n      tmmApp.getCurrentView().router.load({\r\n        content: output,\r\n      });\r\n    });\r\n\r\n\r\n  },\r\n\r\n  getPhoneCode: function() {\r\n    var self = this;\r\n\r\n    httpService.getPhoneCode(info.data.sms_link, function(data) {\r\n\r\n      if (data.status == 1) {\r\n        payPasswd.wait60button(self);\r\n      } else {\r\n        if ('phone' in data.form) {\r\n          tmmApp.alert(data.form['phone'][0]);\r\n        }\r\n      }\r\n    }, function(data) {\r\n\r\n    });\r\n  },\r\n\r\n  updatePhoneCode: function() {\r\n\r\n    var sms_code = $$('#sms_code').val();\r\n    if (sms_code == '') {\r\n      tmmApp.alert('验证码不能为空');\r\n      return;\r\n    }\r\n\r\n    clearInterval(timer);\r\n    timer = null;\r\n\r\n    var token = {\r\n      \"Password\": {\r\n        \"sms\": sms_code\r\n      }\r\n    }\r\n\r\n    httpService.updatePayPasswd(info.data.validate, token, function(data) {\r\n\r\n      if (data.status == 1) {\r\n        payPasswd.setPasswd();\r\n      } else {\r\n        if ('Password_sms' in data.form) {\r\n          tmmApp.alert(data.form['Password_sms'][0]);\r\n        } else {\r\n          tmmApp.alert('短信验证码 错误')\r\n        }\r\n      }\r\n    }, function(data) {\r\n\r\n      tmmApp.alert('网络错误');\r\n    })\r\n\r\n  },\r\n\r\n  setPasswd: function(current) {\r\n    if (current == 'current') {\r\n      tmmApp.getCurrentView().router.load({\r\n        content: setPasswdTpl,\r\n      });\r\n    } else {\r\n      tmmApp.getCurrentView().router.load({\r\n        content: setPasswdTpl,\r\n        reload: true\r\n      });\r\n    }\r\n\r\n    var container = tmmApp.getCurrentView().activePage.container;\r\n    var keyboard = appFunc.keyboard(container);\r\n    // 初始化\r\n    passwd = '';\r\n    oldPasswd = '';\r\n    step = 1;\r\n    keyboard.getTap(function(index) {\r\n      payPasswd.passwd2box(index);\r\n    });\r\n  },\r\n\r\n  passwd2box: function(index) {\r\n\r\n    if (passwd.length >= 6) {\r\n      if (index == 12) {\r\n        passwd = passwd.substr(0, passwd.length - 1);\r\n        $$('.passwd-wrap .passwd-item').each(function(index, obj) {\r\n\r\n          if (index < passwd.length) {\r\n            obj.className = 'passwd-item input';\r\n          } else {\r\n            obj.className = 'passwd-item';\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (index == 11) {\r\n        passwd += 0;\r\n      } else if (index == 12) {\r\n\r\n        passwd = passwd.substr(0, passwd.length - 1);\r\n\r\n      } else if (index == 10) {\r\n\r\n      } else {\r\n        passwd += index;\r\n      }\r\n\r\n      $$('.passwd-wrap .passwd-item').each(function(index, obj) {\r\n\r\n        if (index < passwd.length) {\r\n          obj.className = 'passwd-item input';\r\n        } else {\r\n          obj.className = 'passwd-item';\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    payPasswd.checkPasswdConfirm();\r\n\r\n  },\r\n\r\n  wait60button: function(self) {\r\n    var i = 60;\r\n    $$(self).attr('disabled', true);\r\n    i--;\r\n    $$('#get_sms_code_passwd').html(i + '秒后重试');\r\n    clearInterval(timer);\r\n    timer = null;\r\n    timer = setInterval(function() {\r\n      if (i == 0) {\r\n        $$(self).removeAttr('disabled');\r\n        $$(self).html('获取验证码');\r\n        clearInterval(timer);\r\n        timer = null;\r\n      } else {\r\n\r\n        $$(self).html(i + '秒后重试');\r\n        i--\r\n      }\r\n\r\n    }, 1000)\r\n  },\r\n\r\n  confirmPasswd: function() {\r\n\r\n    if ($$(this).attr('data-flag') == 'disable') return;\r\n\r\n    if (passwd == oldPasswd) {\r\n      var token = {\r\n        \"Password\": {\r\n          \"_pwd\": oldPasswd,\r\n          \"_confirm_pwd\": passwd\r\n        }\r\n      }\r\n\r\n      httpService.updatePayPasswd(info.data.link, token, function(data) {\r\n\r\n        var msg = '';\r\n        if (data.status == 1) {\r\n          tmmApp.getCurrentView().router.back();\r\n          payPasswd.showView();\r\n        } else {\r\n          if ('Password__pwd' in data.form) {\r\n            msg = data.form.Password__pwd[0];\r\n          } else if (\"Password__confirm_pwd\" in data.form) {\r\n            msg = data.form.Password__confirm_pwd[0];\r\n          } else {\r\n            msg = '密码验证不通过';\r\n          }\r\n          tmmApp.alert(msg, function(){\r\n            // 密码重置\r\n            payPasswd.resetPasswd();\r\n          });  \r\n\r\n        }\r\n      }, function(data) {\r\n        tmmApp.alert('网络错误');\r\n      })\r\n\r\n    } else {\r\n      tmmApp.alert('两次密码输入不一致，请重新输入', function(){\r\n        payPasswd.resetPasswd();\r\n      });\r\n    }\r\n\r\n  },\r\n\r\n  resetPasswd: function() {\r\n    passwd = '';\r\n    oldPasswd = '';\r\n    step = 1;\r\n    $$('.set-passwd-page .passwd-msg').html('请输入支付密码');\r\n    $$('.set-passwd-page .passwd-button').css('display', 'none');\r\n    payPasswd.passwd2box(10);\r\n  },\r\n\r\n  checkPasswdConfirm: function() {\r\n\r\n    if (step == 1) {\r\n      if (passwd.length == 6) {\r\n        oldPasswd = passwd;\r\n        passwd = '';\r\n        payPasswd.passwd2box(10);\r\n\r\n        step = 2;\r\n        $$('.set-passwd-page .passwd-msg').html('请再次输入支付密码');\r\n        $$('.set-passwd-page .passwd-button').css('display', 'block');\r\n        $$('.set-passwd-page .passwd-button').addClass('disable').attr('data-flag', 'disable');\r\n      }\r\n    } else {\r\n      if (passwd.length == 6) {\r\n        $$('.set-passwd-page .passwd-button').removeClass('disable').attr('data-flag', 'able');\r\n      } else {\r\n        $$('.set-passwd-page .passwd-button').addClass('disable').attr('data-flag', 'disable');\r\n      }\r\n    }\r\n  },\r\n\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '.set-pay-passwd',\r\n      event: 'click',\r\n      handler: payPasswd.showVerifyPhone\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#get_sms_code_passwd',\r\n      event: 'click',\r\n      handler: payPasswd.getPhoneCode\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#modify_passwd_end',\r\n      event: 'click',\r\n      handler: payPasswd.updatePhoneCode\r\n    }, {\r\n      element: '#myView',\r\n      selector: '.set-passwd-page .passwd-button',\r\n      event: 'click',\r\n      handler: payPasswd.confirmPasswd\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = payPasswd;\r\n"},{"id":146,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\pay-manage.tpl.html","name":"./src/modules/my/pay-manage.tpl.html","index":146,"index2":139,"size":748,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":145,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","module":"./src/modules/my/payPasswd.js","moduleName":"./src/modules/my/payPasswd.js","type":"cjs require","userRequest":"./pay-manage.tpl.html","loc":"3:17-49"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-verify-phone-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">支付管理</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"pay-manage\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n    <div class=\\\"table-group\\\" style=\\\"margin-top:35px;\\\">\\r\\n      <div class=\\\"table-cell set-pay-passwd\\\"><span class=\\\"tit\\\">{{type.value}}</span><i class=\\\"icon ticon-arrow-right\\\"></i></div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":147,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\setPasswd.tpl.html","name":"./src/modules/my/setPasswd.tpl.html","index":147,"index2":140,"size":1027,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":145,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\payPasswd.js","module":"./src/modules/my/payPasswd.js","moduleName":"./src/modules/my/payPasswd.js","type":"cjs require","userRequest":"./setPasswd.tpl.html","loc":"5:17-48"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-verify-phone-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">设置支付密码</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"set-pay-passwd\\\" class=\\\"page set-passwd-page\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"passwd-msg\\\">请输入支付密码</div>\\r\\n      <div class=\\\"passwd-wrap\\\">\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n        <div class=\\\"passwd-item\\\"></div>\\r\\n      </div>\\r\\n\\r\\n      <span style=\\\"display:none;\\\" class=\\\"passwd-button disable\\\" data-flag=\\\"disable\\\">确认</span>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":148,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","name":"./src/modules/my/cash.js","index":148,"index2":151,"size":16344,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"./cash","loc":"13:15-32"}],"source":"/**\r\n * @name cash\r\n * @description 提现相关模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-12-18T14:15:10+0800\r\n */\r\nvar log = require('../utils/log'),\r\n  appFunc = require('../utils/appFunc'),\r\n  httpService = require('../services/httpService'),\r\n  recordViewModule = require('./recordView'),\r\n  draw_money_phone_tpl = require('./draw-money-phone.tpl.html'),\r\n  draw_money_success_tpl = require('./draw-money-success.tpl.html'),\r\n  my_wallet_tpl = require('./my-wallet.tpl.html');\r\n\r\n/**\r\n * 下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLink = '';\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loading = false;\r\n/**\r\n * 控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoading = false;\r\n/**\r\n * 交易记录下一的页面链接\r\n * @type {String}\r\n */\r\nvar nextPageLinkTrade = '';\r\n/**\r\n * 交易记录控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar loadingTrade = false;\r\n/**\r\n * 交易记录控制滚动加载的flag\r\n * @type {Boolean}\r\n */\r\nvar moreLoadingTrade = false;\r\n/**\r\n *  定时器\r\n * @type {Object}\r\n */\r\nvar timer = null;\r\n/**\r\n * 短信倒计等待时间\r\n * @type {Number}\r\n */\r\nvar waitTime = 60;\r\n/**\r\n * 保存提现信息\r\n * @type {Object}\r\n */\r\nvar cashInfo = {};\r\n\r\nvar cash = {\r\n  init: function() {\r\n    cash.bindEvent();\r\n  },\r\n  /**\r\n   * @method drawMoney\r\n   * @description 提现申请(第一步)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T17:09:37+0800\r\n   */\r\n  drawMoneyBefore: function() {\r\n    var money = $$('#money').val();\r\n    var cash_money = parseFloat($$('#cash_money').val());\r\n\r\n    if (money == '') {\r\n      tmmApp.alert('提现金额不能为空');\r\n      return;\r\n    }\r\n    if (isNaN(money)) {\r\n      tmmApp.alert('请填写正确的金额');\r\n      return;\r\n    }\r\n    if (money < 100.00) {\r\n      tmmApp.alert('提现金额不能小于100元');\r\n      return;\r\n    }\r\n\r\n    if (money > cash_money) {\r\n      tmmApp.alert('可提现金额不足' + money + '元');\r\n      return;\r\n    }\r\n\r\n    cashInfo.price = money;\r\n\r\n    tmmApp.showIndicator();\r\n    \r\n    httpService.cashBefore(\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n          if (('status' in dataRes) && (dataRes.status == 0)) {\r\n              tmmApp.alert(dataRes.form.Cash_msg);\r\n          } else {\r\n            httpService.cashVerifyPrice({\r\n              'Cash': {\r\n                'price': money //提现金额\r\n              },\r\n            },\r\n            function(dataRes, statusCode) {\r\n              tmmApp.hideIndicator();\r\n              if (dataRes.status == 1) {\r\n                // 获取用户手机号码\r\n                var data = {\r\n                  'phone': appFunc.replacePhone(JSON.parse(appFunc.getLocalUserInfo()).phone)\r\n                };\r\n                var output = appFunc.renderTpl(draw_money_phone_tpl, data);\r\n                tmmApp.getCurrentView().router.load({\r\n                  content: output\r\n                });\r\n                // 清除定时器\r\n                if (timer) {\r\n                  clearTimeout(timer);\r\n                }\r\n              } else {\r\n                // 处理表单错误时的提示\r\n                if (dataRes.form) {\r\n                  for (msgName in dataRes.form) {\r\n                    // 显示错误信息\r\n                    tmmApp.alert(dataRes.form[msgName][0]);\r\n                    break;\r\n                  }\r\n                } else {\r\n                  // 其它错误提醒\r\n                  tmmApp.alert('输入错误，请重试');\r\n                }\r\n              }\r\n            },\r\n            function(dataRes, statusCode) {\r\n              tmmApp.hideIndicator();\r\n              tmmApp.alert('网络超时，请重试');\r\n            })\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n      );\r\n\r\n\r\n  },\r\n  /**\r\n   * @method drawMoneySubmit\r\n   * @description  提现申请（完成）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T18:06:43+0800\r\n   */\r\n  drawMoneySubmit: function() {\r\n    var sms_code = $$('#sms_code_money').val();\r\n\r\n    if (sms_code == '') {\r\n      tmmApp.alert('验证码不能为空');\r\n      return;\r\n    }\r\n\r\n    var data = {\r\n      'Cash': {\r\n        'sms': sms_code,\r\n        'price': cashInfo.price\r\n      }\r\n    };\r\n\r\n    // 请求提现操作\r\n    tmmApp.showIndicator();\r\n    httpService.createCash(\r\n      data,\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          var output = appFunc.renderTpl(draw_money_success_tpl, data);\r\n          tmmApp.getCurrentView().router.load({\r\n            'content': output\r\n          });\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('输入错误，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n  /**\r\n   * @method getSmsCodeMoney\r\n   * @description 用户提现，获取短信验证码\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T18:16:38+0800\r\n   */\r\n  getSmsCodeMoney: function() {\r\n    var that = $$(this);\r\n    // 60秒倒计时锁定发送短信按钮\r\n    var getCodeTimeOut = function() {\r\n      if (waitTime === 0) {\r\n        // 60秒到后解锁按钮,使其可点击\r\n        that.removeAttr('disabled');\r\n        // 重置文本信息\r\n        that.html('获取验证码');\r\n        // 重置回60秒\r\n        waitTime = 60;\r\n        if (timer) {\r\n          clearTimeout(timer);\r\n        }\r\n      } else {\r\n        // 锁定按钮,使其不可点击\r\n        that.attr('disabled', true);\r\n        // 倒计时提示文本\r\n        that.html(waitTime + '秒后重试');\r\n        // 倒计时自减\r\n        waitTime--;\r\n        // 每秒回调\r\n        timer = setTimeout(function() {\r\n          getCodeTimeOut();\r\n        }, 1000);\r\n      }\r\n    };\r\n    // 请求获取短信验证码\r\n    httpService.captchaCash(\r\n      function(dataRes, statusCode) {\r\n        if (dataRes.status == 1) {\r\n          // 成功后，60秒倒计时锁定发送按钮\r\n          getCodeTimeOut();\r\n        } else {\r\n          // 处理表单错误时的提示\r\n          if (dataRes.form) {\r\n            for (msgName in dataRes.form) {\r\n              // 显示错误信息\r\n              tmmApp.alert(dataRes.form[msgName][0]);\r\n              break;\r\n            }\r\n          } else {\r\n            // 其它错误提醒\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        }\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n\r\n  },\r\n  /**\r\n   * @method backToWallet\r\n   * @description 返回钱包\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T10:44:21+0800\r\n   */\r\n  backToWallet: function() {\r\n    var noBank = true;\r\n    // 查询钱包信息\r\n    var getWalletinfo = function() {\r\n      httpService.getBurseInfo(\r\n        function(dataRes, statusCode) {\r\n          if (dataRes.status == 1) {\r\n            appFunc.hideToolbar();\r\n            tmmApp.hideIndicator();\r\n            var data = {\r\n              'walletObj': dataRes.data,\r\n              'noBank': noBank\r\n            };\r\n            // 提现成功，回退到我的钱包\r\n            // 由于层级页面太多，所以需要删除缓存的上层页面，只留上的“我的”那一层\r\n            appFunc.removeCachedPage('myView', 'draw-money');\r\n            appFunc.removeCachedPageNavbar('myView', 'draw-money-navbar');\r\n            appFunc.removeCachedPage('myView', 'my-wallet');\r\n            appFunc.removeCachedPageNavbar('myView', 'my-wallet-navbar');\r\n            var output = appFunc.renderTpl(my_wallet_tpl, data);\r\n            // 回退重新加载“我的钱包”的页面，\r\n            tmmApp.getCurrentView().router.back({\r\n              'content': output,\r\n              'force': true\r\n            });\r\n\r\n\r\n          } else {\r\n            tmmApp.hideIndicator();\r\n            tmmApp.alert('网络超时，请重试');\r\n          }\r\n        },\r\n        function(dataRes, statusCode) {\r\n          tmmApp.hideIndicator();\r\n          tmmApp.alert('网络超时，请重试', '');\r\n        }\r\n      );\r\n    };\r\n    // 查询绑定的银行卡信息\r\n    tmmApp.showIndicator();\r\n    httpService.bankCardList(\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        if (dataRes.status == 1) {\r\n          noBank = false;\r\n        }\r\n        getWalletinfo();\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method tradeRecord\r\n   * @description 交易记录\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-17T17:10:02+0800\r\n   */\r\n  tradeRecord: function() {\r\n    log.info('交易记录...');\r\n    tmmApp.showIndicator();\r\n    httpService.accountLogList(\r\n      '',\r\n      function(dataRes, statusCode) {\r\n\r\n        // 成功后把下一页链接赋值给nextPageLinkTrade\r\n        nextPageLinkTrade = dataRes.data.page.next;\r\n        // 进行渲染视图\r\n        recordViewModule.getTradeRecordList(dataRes.data.list_data);\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        // 绑定事件\r\n        appFunc.bindEvents([{\r\n          element: '#tmm-trade-record-page',\r\n          selector: '.pull-to-refresh-content',\r\n          event: 'refresh',\r\n          handler: cash.refreshTradeRecordList\r\n        }, {\r\n          element: '#tmm-trade-record-page',\r\n          selector: '.pull-to-refresh-content',\r\n          event: 'infinite',\r\n          handler: cash.infiniteTradeRecordList\r\n        }]);\r\n      },\r\n      function(dataRes, statusCode) {\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method refreshdrawMoneyRecordList\r\n   * @description 交易记录（下拉刷新）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:34+0800\r\n   */\r\n  refreshTradeRecordList: function() {\r\n    // 发送获取交易记录请求\r\n    httpService.accountLogList(\r\n      '',\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLinkTrade\r\n        nextPageLinkTrade = dataRes.data.page.next;\r\n        if (nextPageLinkTrade) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        // 进行渲染视图\r\n        recordViewModule.refreshTradeRecordList(dataRes.data.list_data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.pullToRefreshDone();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method infinitedrawMoneyRecordList\r\n   * @description 交易记录（上拉加载）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:51+0800\r\n   */\r\n  infiniteTradeRecordList: function() {\r\n    // 如果还有下一页的数据的时候（即下一页的链接不为空时）才去请求获取数据\r\n    var tipEle = $$('#tmm-trade-record-page .load');\r\n    if (nextPageLinkTrade) {\r\n      // 如果正在获取数据，即滚动加载的事件还没处理完，直接返回\r\n      // 防止重复请求，获取到重复的数据\r\n      if (loadingTrade) return;\r\n      // 正在获取数据，设置flag为true\r\n      loadingTrade = true;\r\n      tipEle.show();\r\n      httpService.accountLogList(\r\n        nextPageLinkTrade,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLinkTrade = dataRes.data.page.next;\r\n          // 调用视图模型的infiniteDrawMoneyRecordList方法进行渲染视图\r\n          recordViewModule.infiniteTradeRecordList(dataRes.data.list_data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tipEle.hide();\r\n            loadingTrade = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tipEle.hide();\r\n          setTimeout(function() {\r\n            tmmApp.alert('网络超时，请重试', '');\r\n            loadingTrade = false;\r\n          }, 100);\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoadingTrade) return;\r\n      moreLoadingTrade = true;\r\n      setTimeout(function() {\r\n        tipEle.show().html('没有更多了');\r\n        moreLoadingTrade = false;\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      // 没有更多数据了，即销毁到滚动加载的事件\r\n      setTimeout(function() {\r\n        tipEle.hide().html('正在加载...');\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n\r\n    }\r\n  },\r\n  /**\r\n   * @method drawMoneyRecord\r\n   * @description 提现记录\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T11:12:59+0800\r\n   */\r\n  drawMoneyRecord: function() {\r\n    // 显示正在加载的图标\r\n    tmmApp.showIndicator();\r\n    httpService.getCashInfo(\r\n      '',\r\n      function(dataRes, statusCode) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        // 进行渲染视图\r\n        recordViewModule.getDrawMoneyRecordList(dataRes.data.list_data);\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        // 绑定事件\r\n        appFunc.bindEvents([{\r\n          element: '#tmm-draw-money-record-page',\r\n          selector: '.pull-to-refresh-content',\r\n          event: 'refresh',\r\n          handler: cash.refreshDrawMoneyRecordList\r\n        }, {\r\n          element: '#tmm-draw-money-record-page',\r\n          selector: '.pull-to-refresh-content',\r\n          event: 'infinite',\r\n          handler: cash.infiniteDrawMoneyRecordList\r\n        }]);\r\n      },\r\n      function(dataRes, statusCode) {\r\n        // 隐藏正在加载的图标\r\n        tmmApp.hideIndicator();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method refreshDrawMoneyRecordList\r\n   * @description 提现记录(下拉刷新)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T16:05:39+0800\r\n   */\r\n  refreshDrawMoneyRecordList: function() {\r\n    // 发送获取提现记录请求\r\n    httpService.getCashInfo(\r\n      '',\r\n      function(dataRes, status) {\r\n        // 成功后把下一页链接赋值给nextPageLink\r\n        nextPageLink = dataRes.data.page.next;\r\n        if (nextPageLink) {\r\n          // 如果还有下一页链接的话，把销毁掉的滚动加载的事件注册回去\r\n          tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n        }\r\n        // 进行渲染视图\r\n        recordViewModule.refreshDrawMoneyRecordList(dataRes.data.list_data);\r\n      },\r\n      function(dataRes, status) {\r\n        tmmApp.pullToRefreshDone();\r\n        tmmApp.alert('网络超时，请重试');\r\n      }\r\n    );\r\n  },\r\n  /**\r\n   * @method infiniteDrawMoneyRecordList\r\n   * @description 提现记录(上拉加载)\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T16:10:38+0800\r\n   */\r\n  infiniteDrawMoneyRecordList: function() {\r\n    log.info('infiniteDrawMoneyRecordList...');\r\n    // 如果还有下一页的数据的时候（即下一页的链接不为空时）才去请求获取数据\r\n    var tipEle = $$('#tmm-draw-money-record-page .tip');\r\n    if (nextPageLink) {\r\n      // 如果正在获取数据，即滚动加载的事件还没处理完，直接返回\r\n      // 防止重复请求，获取到重复的数据\r\n      if (loading) return;\r\n      // 正在获取数据，设置flag为true\r\n      loading = true;\r\n      tipEle.show();\r\n      httpService.getCashInfo(\r\n        nextPageLink,\r\n        function(dataRes, status) {\r\n          // 成功后把下一页链接赋值给nextPageLink\r\n          nextPageLink = dataRes.data.page.next;\r\n          // 调用视图模型的infiniteDrawMoneyRecordList方法进行渲染视图\r\n          recordViewModule.infiniteDrawMoneyRecordList(dataRes.data.list_data);\r\n\r\n          // 获取数据完毕，重置加载flag为false\r\n          setTimeout(function() {\r\n            tipEle.hide();\r\n            loading = false;\r\n          }, 100);\r\n\r\n        },\r\n        function(dataRes, status) {\r\n          tipEle.hide();\r\n          setTimeout(function() {\r\n            tmmApp.alert('网络超时，请重试', '');\r\n            loading = false;\r\n          }, 100);\r\n        }\r\n      );\r\n    } else {\r\n      if (moreLoading) return;\r\n      moreLoading = true;\r\n      setTimeout(function() {\r\n        tipEle.show().html('没有更多了');\r\n        moreLoading = false;\r\n        tmmApp.detachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 100);\r\n      // 没有更多数据了，即销毁到滚动加载的事件\r\n      setTimeout(function() {\r\n        tipEle.hide().html('正在加载...');\r\n        tmmApp.attachInfiniteScroll($$('.infinite-scroll'));\r\n      }, 2000);\r\n\r\n    }\r\n  },\r\n  /**\r\n   * @description 检测短信验证表单是否可提交\r\n   * 是，可提交; 否，不可提交\r\n   * @author 唐亚敏\r\n   */\r\n  smsDetect:function(){\r\n    var sms_code = $$('#sms_code_money').val();\r\n    if(sms_code!=''){\r\n      $$(\"#draw-money-submit\").removeClass(\"disabled\");\r\n    }else{\r\n      $$(\"#draw-money-submit\").addClass(\"disabled\");\r\n    }\r\n  },\r\n  bindEvent: function() {\r\n    var bindings = [{\r\n      element: '#myView',\r\n      selector: '#draw-money-before',\r\n      event: 'click',\r\n      handler: cash.drawMoneyBefore\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#draw-money-submit',\r\n      event: 'click',\r\n      handler: cash.drawMoneySubmit\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#get_sms_code_money',\r\n      event: 'click',\r\n      handler: cash.getSmsCodeMoney\r\n    }, {\r\n      element: '#myView',\r\n      selector: '#tmm-my-wallet-back',\r\n      event: 'click',\r\n      handler: cash.backToWallet\r\n    } ,{\r\n      element: '#myView',\r\n      selector: '#sms_code_money',\r\n      event: 'input',\r\n      handler: cash.smsDetect\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n};\r\n\r\nmodule.exports = cash;\r\n"},{"id":149,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","name":"./src/modules/my/recordView.js","index":149,"index2":147,"size":3323,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"./recordView","loc":"11:21-44"}],"source":"/**\r\n * @name recordView\r\n * @description 记录视图模型模块\r\n * \r\n * @author Moore Mo\r\n * @datetime 2015-12-18T15:14:34+0800\r\n */\r\nvar log = require('../utils/log'),\r\n  appFunc = require('../utils/appFunc'),\r\n  draw_money_record_tpl = require('./draw-money-record.tpl.html'),\r\n  draw_money_record_li_tpl = require('./draw-money-record-li.tpl.html'),\r\n  trade_record_tpl = require('./trade-record.tpl.html'),\r\n  trade_record_li_tpl = require('./trade-record-li.tpl.html');\r\n\r\nvar recordView = {\r\n  /**\r\n   * @method getDrawMoneyRecordList\r\n   * @description 获取提现记录\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-21T14:28:01+0800\r\n   */\r\n  getDrawMoneyRecordList: function(dataRes) {\r\n    var data = {\r\n      'cashRecordList': dataRes\r\n    };\r\n    var output = appFunc.renderTpl(draw_money_record_tpl, data);\r\n    tmmApp.getCurrentView().router.load({\r\n      'content': output\r\n    });\r\n  },\r\n  /**\r\n   * @method refreshdrawMoneyRecordList\r\n   * @description 提现记录（下拉刷新）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:34+0800\r\n   */\r\n  refreshDrawMoneyRecordList: function(dataRes) {\r\n    var data = {\r\n      cashRecordList: dataRes\r\n    };\r\n    var output = appFunc.renderTpl(draw_money_record_li_tpl, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n    $$('#tmm-draw-money-record-page').find('#tmm-draw-money-record-ul').html(output);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n  },\r\n  /**\r\n   * @method infinitedrawMoneyRecordList\r\n   * @description 提现记录（上拉加载）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:51+0800\r\n   */\r\n  infiniteDrawMoneyRecordList: function(dataRes) {\r\n    var data = {\r\n      recommend: dataRes\r\n    };\r\n    var output = appFunc.renderTpl(draw_money_record_li_tpl, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#tmm-draw-money-record-page').find('#tmm-draw-money-record-ul').append(output);\r\n  },\r\n  /**\r\n   * @method getTradeRecordList\r\n   * @description 获取交易记录\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-21T14:29:57+0800\r\n   */\r\n  getTradeRecordList: function(dataRes) {\r\n    var data = {\r\n      'tradeRecordList': dataRes\r\n    };\r\n    var output = appFunc.renderTpl(trade_record_tpl, data);\r\n    tmmApp.getCurrentView().router.load({\r\n      'content': output\r\n    });\r\n  },\r\n  /**\r\n   * @method refreshdrawMoneyRecordList\r\n   * @description 交易记录（下拉刷新）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:34+0800\r\n   */\r\n  refreshTradeRecordList: function(dataRes) {\r\n    var data = {\r\n      'tradeRecordList': dataRes\r\n    };\r\n    var output = appFunc.renderTpl(trade_record_li_tpl, data);\r\n    // 模板编译成功后，把编译好的完整页面内容赋值到 推荐视图容器中，渲染到页面去\r\n     $$('#tmm-trade-record-page').find('#tmm-trade-record-ul').html(output);\r\n    // 通知下拉刷新完成\r\n    setTimeout(function() {\r\n      tmmApp.pullToRefreshDone();\r\n    }, 1000);\r\n  },\r\n  /**\r\n   * @method infinitedrawMoneyRecordList\r\n   * @description 交易记录（上拉加载）\r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-18T15:14:51+0800\r\n   */\r\n  infiniteTradeRecordList: function(dataRes) {\r\n    var data = {\r\n      'tradeRecordList': dataRes\r\n    };\r\n    var output = appFunc.renderTpl(trade_record_li_tpl, data);\r\n    // 把后面获取的数据，追加到页面上\r\n    $$('#tmm-trade-record-page').find('#tmm-trade-record-ul').append(output);\r\n  }\r\n};\r\n\r\nmodule.exports = recordView;\r\n"},{"id":150,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-record.tpl.html","name":"./src/modules/my/draw-money-record.tpl.html","index":150,"index2":143,"size":3151,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"./draw-money-record.tpl.html","loc":"10:26-65"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-trade-record-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">提现申请记录</div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"draw-money-record\\\" class=\\\"page tmm-withdrawal-application-record-page\\\" id=\\\"tmm-draw-money-record-page\\\">\\r\\n    <div class=\\\"page-content pull-to-refresh-content infinite-scroll\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n      <!--提现申请记录-->\\r\\n      <div class=\\\"tmm-recor-canter\\\">\\r\\n        <div class=\\\"tmm-pre-canter tmm-fin-con\\\">\\r\\n          <div class=\\\"list-block media-list tmm-list-block\\\">\\r\\n            <ul id=\\\"tmm-draw-money-record-ul\\\" class=\\\"tmm-record-conNo-ul\\\">\\r\\n              {{#each cashRecordList}}\\r\\n              <li class=\\\"item-content\\\">\\r\\n                <div class=\\\"item-inner\\\">\\r\\n                  <div class=\\\"item-title-row\\\">\\r\\n                    <div class=\\\"item-title list-block-font\\\">\\r\\n                      <b>提现</b>\\r\\n                      <p class=\\\"tmm-time-reason\\\">{{add_time}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"item-after color-gre\\\">{{price}} {{#js_compare \\\"this.audit_status.value == 3\\\"}}\\r\\n                      <p class=\\\"suc\\\">提现成功</p>\\r\\n                      {{/js_compare}} {{#js_compare \\\"this.audit_status.value == 2\\\"}}\\r\\n                      <p class=\\\"fail\\\">打款中...</p>\\r\\n                      {{/js_compare}} {{#js_compare \\\"this.audit_status.value == 0 || this.audit_status.value == 1\\\"}}\\r\\n                      <p class=\\\"fail\\\">审核中...</p>\\r\\n                      {{/js_compare}} {{#js_compare \\\"this.cash_status.value == -1 || this.cash_status.value == -2 || this.cash_status.value == -3\\\"}}\\r\\n                      <p class=\\\"fail\\\">提现失败</p>\\r\\n                      {{/js_compare}}\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  {{#js_compare \\\"this.audit_status.value == -1\\\"}}\\r\\n                  <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_first}}</div>\\r\\n                  {{/js_compare}} {{#js_compare \\\"this.audit_status.value == -2\\\"}}\\r\\n                  <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_double}}</div>\\r\\n                  {{/js_compare}} {{#js_compare \\\"this.audit_status.value == -3\\\"}}\\r\\n                  <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_submit}}</div>\\r\\n                  {{/js_compare}}\\r\\n                </div>\\r\\n              </li>\\r\\n              {{else}}\\r\\n              <li class=\\\"tmm-record-content tmm-record-conNo\\\">\\r\\n                你暂时还没有提现申请记录哦！\\r\\n              </li>\\r\\n              {{/each}}\\r\\n            </ul>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class=\\\"tip\\\" style=\\\"display:none;\\\">正在加载...</div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":151,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-record-li.tpl.html","name":"./src/modules/my/draw-money-record-li.tpl.html","index":151,"index2":144,"size":1514,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"./draw-money-record-li.tpl.html","loc":"11:29-71"}],"source":"module.exports = \"{{#each cashRecordList}}\\r\\n<li class=\\\"item-content\\\">\\r\\n  <div class=\\\"item-inner\\\">\\r\\n    <div class=\\\"item-title-row\\\">\\r\\n      <div class=\\\"item-title list-block-font\\\">\\r\\n        <b>提现</b>\\r\\n        <p class=\\\"tmm-time-reason\\\">{{add_time}}</p>\\r\\n      </div>\\r\\n      <div class=\\\"item-after color-gre\\\">{{price}} {{#js_compare \\\"this.audit_status.value == 3\\\"}}\\r\\n        <p class=\\\"suc\\\">提现成功</p>\\r\\n        {{/js_compare}} {{#js_compare \\\"this.audit_status.value == 2\\\"}}\\r\\n        <p class=\\\"fail\\\">打款中...</p>\\r\\n        {{/js_compare}} {{#js_compare \\\"this.audit_status.value == 0 || this.audit_status.value == 1\\\"}}\\r\\n        <p class=\\\"fail\\\">审核中...</p>\\r\\n        {{/js_compare}} {{#js_compare \\\"this.cash_status.value == -1 || this.cash_status.value == -2 || this.cash_status.value == -3\\\"}}\\r\\n        <p class=\\\"fail\\\">提现失败</p>\\r\\n        {{/js_compare}}\\r\\n      </div>\\r\\n    </div>\\r\\n    {{#js_compare \\\"this.audit_status.value == -1\\\"}}\\r\\n    <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_first}}</div>\\r\\n    {{/js_compare}} {{#js_compare \\\"this.audit_status.value == -2\\\"}}\\r\\n    <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_double}}</div>\\r\\n    {{/js_compare}} {{#js_compare \\\"this.audit_status.value == -3\\\"}}\\r\\n    <div class=\\\"item-text tmm-time-reason\\\">原因：{{remark_submit}}</div>\\r\\n    {{/js_compare}}\\r\\n  </div>\\r\\n</li>\\r\\n{{else}}\\r\\n<li class=\\\"tmm-record-content tmm-record-conNo\\\">\\r\\n  你暂时还没有提现申请记录哦！\\r\\n</li>\\r\\n{{/each}}\\r\\n\";"},{"id":152,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\trade-record.tpl.html","name":"./src/modules/my/trade-record.tpl.html","index":152,"index2":145,"size":1821,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"./trade-record.tpl.html","loc":"12:21-55"}],"source":"module.exports = \"<!-- 交易记录 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-trade-record-inner\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">交易记录</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <!-- <span id=\\\"tmm-draw-money-record\\\">提现记录</span> -->\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"trade-record\\\" class=\\\"page tmm-trade-record-page\\\" id=\\\"tmm-trade-record-page\\\">\\r\\n    <div class=\\\"page-content pull-to-refresh-content infinite-scroll\\\">\\r\\n      <!-- 默认的下拉刷新层 -->\\r\\n      <div class=\\\"pull-to-refresh-layer\\\">\\r\\n        <div class=\\\"preloader\\\"></div>\\r\\n        <div class=\\\"pull-to-refresh-arrow\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"list-block  tmm-trade-record-list-block\\\">\\r\\n        <ul id=\\\"tmm-trade-record-ul\\\" class=\\\"tmm-record-conNo-ul\\\">\\r\\n          {{#each tradeRecordList}}\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title\\\">\\r\\n                <span class=\\\"reason\\\">{{name}}</span>\\r\\n                <div class=\\\"date\\\">{{add_time}}</div>\\r\\n              </div>\\r\\n              <div class=\\\"item-after\\\">\\r\\n                <div class=\\\"detail\\\">{{use_money}}</div>\\r\\n                <div class=\\\"money\\\">余额：{{money}}元</div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          {{else}}\\r\\n          <li class=\\\"tmm-record-content tmm-record-conNo\\\">\\r\\n            你暂时还没有交易记录哦！\\r\\n          </li>\\r\\n          {{/each}}\\r\\n        </ul>\\r\\n        <div class=\\\"load\\\" style=\\\"display:none;\\\">正在加载...</div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":153,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\trade-record-li.tpl.html","name":"./src/modules/my/trade-record-li.tpl.html","index":153,"index2":146,"size":532,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":149,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\recordView.js","module":"./src/modules/my/recordView.js","moduleName":"./src/modules/my/recordView.js","type":"cjs require","userRequest":"./trade-record-li.tpl.html","loc":"13:24-61"}],"source":"module.exports = \"{{#each tradeRecordList}}\\r\\n<li class=\\\"item-content\\\">\\r\\n  <div class=\\\"item-inner\\\">\\r\\n    <div class=\\\"item-title\\\">\\r\\n      <span class=\\\"reason\\\">{{name}}</span>\\r\\n      <div class=\\\"date\\\">{{add_time}}</div>\\r\\n    </div>\\r\\n    <div class=\\\"item-after\\\">\\r\\n      <div class=\\\"detail\\\">{{use_money}}</div>\\r\\n      <div class=\\\"money\\\">余额：{{money}}元</div>\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\\r\\n{{else}}\\r\\n<li class=\\\"tmm-record-content tmm-record-conNo\\\">\\r\\n  你暂时还没有交易记录哦！\\r\\n</li>\\r\\n{{/each}}\\r\\n\";"},{"id":154,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-phone.tpl.html","name":"./src/modules/my/draw-money-phone.tpl.html","index":154,"index2":148,"size":1700,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"./draw-money-phone.tpl.html","loc":"12:25-63"}],"source":"module.exports = \"<!-- 验证手机号 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-verify-phone-inner\\\" id=\\\"draw-money-phone-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">验证手机号</div>\\r\\n    <div class=\\\"right\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div  data-page=\\\"draw-money-phone\\\" class=\\\"page tmm-modify-phone-page tmm-verify-phone-page\\\">\\r\\n    <div class=\\\"set-old-phone-wrap\\\">\\r\\n      <div class=\\\"txt\\\">验证码将发送至手机: {{phone}},请按提示操作。</div>\\r\\n      <form class=\\\"list-block tmm-setPhone-list-Form tmm-verifyPhone-list-Form\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\" style=\\\"display:none;\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title label tmm-setPhone-errlabel\\\">错误信息</div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner tmm-setPhone-item-inner tmm-verifyPhone-item-inner\\\">\\r\\n              <div class=\\\"item-input item-title-con\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"sms_code\\\" id=\\\"sms_code_money\\\" placeholder=\\\"填写验证码\\\" class=\\\"setPhoneInput\\\">\\r\\n                <span class=\\\"activity get_code\\\" id=\\\"get_sms_code_money\\\">获取验证码</span>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"bg_btn mob_btn\\\">\\r\\n          <button type=\\\"button\\\" class=\\\"sub_btn disabled\\\" id=\\\"draw-money-submit\\\">完成</button>\\r\\n        </div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";"},{"id":155,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-success.tpl.html","name":"./src/modules/my/draw-money-success.tpl.html","index":155,"index2":150,"size":1308,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":148,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\cash.js","module":"./src/modules/my/cash.js","moduleName":"./src/modules/my/cash.js","type":"cjs require","userRequest":"./draw-money-success.tpl.html","loc":"13:27-67"}],"source":"module.exports = \"<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner\\\">\\r\\n    <div class=\\\"left\\\"></div>\\r\\n    <div class=\\\"center\\\">提示</div>\\r\\n    <div class=\\\"right tmm-financing-right\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<!--银行卡管理-->\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"prompt\\\" class=\\\"page\\\">\\r\\n    <div class=\\\"page-content tmm-car-canter\\\">\\r\\n      \\r\\n      <div class=\\\"tmm-card-top\\\"><img src=\\\"\" + require(\"../../styles/images/card2.png\") + \"\\\" /><p>提现成功</p></div>\\r\\n      <div class=\\\"list-block tmm-card-canter\\\">\\r\\n        <ul>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-after\\\">提现金额</div>\\r\\n            <div class=\\\"item-title\\\">{{Cash.price}}元</div>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"item-content\\\">\\r\\n          <div class=\\\"item-inner\\\">\\r\\n            <div class=\\\"item-after\\\">到账日</div>\\r\\n            <div class=\\\"item-title\\\">预计1-3个工作日内</div>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <div class=\\\"tmm-list-label\\\">实际到帐时间依据帐户托管方及提现银行而有所差异</div>\\r\\n      </div>\\r\\n      <div class=\\\"tmm-prom-but\\\">\\r\\n        <span class=\\\"prom_btn\\\" id=\\\"tmm-my-wallet-back\\\">返回我的钱包</span>\\r\\n      </div>\\r\\n      \\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":156,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\url-loader\\index.js?name=styles/images/[hash:8].[name].[ext]&limit=8192&mimetype=image/png!E:\\svn\\front\\app\\v2\\user-webpack\\src\\styles\\images\\card2.png","name":"./src/styles/images/card2.png","index":156,"index2":149,"size":9333,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-success.tpl.html","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":155,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money-success.tpl.html","module":"./src/modules/my/draw-money-success.tpl.html","moduleName":"./src/modules/my/draw-money-success.tpl.html","type":"cjs require","userRequest":"../../styles/images/card2.png","loc":"1:440-480"}],"source":"module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADaCAYAAADjRg0OAAAbAElEQVR4nO2debQU1bWHvzsIEkBAvCZEREREREAQjEZRQMUhBgcU40BiNCY4EmeNmmhMIJrJKc5ReS+JzyEiDxVBiSwhGvQhTqgBQRFRUXBAENB44f3xO2X1vXT37aHG7v2t1es0fau7NnX2r+oM++xTc+iUkzFCoRPQ3b22A74JdG72ag10AGqBeqC9++5q4EtgA7AK+Bz4sNnrXeAtYIl7fRzy/6cqqY/bgAqgAejvXv1c2RM5fqm0z3jfucDvrAIWAS8BL2eUH5RhR9VjAimOemBXYC/g28C+wDY5jv0M3dnfdK/3gBU0fQqsAz4FGtETY7X7bnt3rjpgC2BzYCv8J08D8A2gB7A9ekp1AAa5VybvALOBp93rRXcuowBMIC3TEzgYOATYh6Z3d4A1wHx0x/bu2q8hMZTK6oz3Kwv8TgOwM/5TrD/QFwn4WPfyfns28CgwDT11jBzUWB9kE+qAocARSBQ9m/39DXQn/hcwC3gV9RWSSC3QBwl7L/fq0eyYRUgsk4En0dPMcJhARC2wN3A8cDRqznisAmagu+104O3IrQuWbYGD0FPxAJr2lVYCfwfuBp4iucKPjGoXyDbAycCP0EiTx9vAfcAU9LSo1DZ7PXqqHIZuDJnX4C3gDuBO1I+pSqpRIHXAd4FTUBOqzn3+LnA/cC8wB9gYi3XxUQPsCXwPicUbfGhETbA/Aw9TZU2wahJIW/S0OBu/Hf4fYCpwG2o+VVXl56EONcN+DBwKbOY+fwO4Fj1VPovHtGipBoF8HRgHnAps6T5bgkTxX+jJYeSmC3AiMBYNJwN8BNwCXA+8H49Z0VAbtwEh0gD8Hs1BXILE8TRqPvQEfoOJoxDeA65C1+xodA23RNf0TXSNG2KzLmQqUSBbAuNRc+A8oA1qQ++LRqoewJpSpdCIrt3eaNj4UXRtz0PXegL+E7piqCSBtEKVtRjd3dqh4dm9gO+gyTEjGP6Jrum30TVuB/wMXfvzUIxZRVApAjkSWIge9x2RGIYBI9CEnhEOc9A1HoqueUdUBwtQnaSetAukJxp9moTG8N8ARqHm1JMx2lVtzELXfBSamd8O1cl0No1ESBVpFUg9cCGKfToQxUNdhmKPHozRrmrnQRQDdhmqkwNRHV1ISuP+0iiQ3YBngatRJ3ES0At1zNfFaJch1qG66IU69W1QXT2L6i5VpEkgmwFXAs8AA9EQ7ZHAUWgo0kgW76Fh4SNRqMpAVHe/wp94TDxpEciOaPz952iW9zYUpTo5TqOMgpgM7ILqrA41v/6FnjCJJw0CORGYBwxGq+MOQ7O6q+I0yiiKVajORqI6HAQ8h+o20SRZIK2B24GJaJx9GuoAPhyjTUZ5PILqcCqq04mojhM7b5JUgXRD4+qnoIDCs9HEVEXH/VQJ76No6p+iuj0F1XW3OI3KRRIFsj8wF9gddcSHA9dRfeHnlcxGFOg4DHXgd0d1vn+MNmUlaQI5BTWlGtBdZRBa2WZUJk+jvuUsVOfTkA8khqQIpAYFu92OJpRuQneT5XEaZUTCclTXN6K6vx35Qk2cRnkkQSCtgb+hYLcNKNjtDNQ+NaqDL4EzgXORD/wMrYuPvfMet0DaoxGN49AM7Gjgj7FaZMTJNWhycR1KUzQVrQSNjTgFsiXwD2A/tEJtOAobMaqbB1Hn/UPkG49RXpbKsohLIA1IHLujNugwFIZgGKC4rWHIN/YCnqBpKqbIiEMgDeg/PABYii7EyzHYYSSb+WidyVIU5DiTGJb2Ri2QDmipZl+0dmNftLjGMLKxEPnIYuQz04i4uRWlQL6GOl2DUFaRYSg5mWHk4y3UP12CniRTkS9FQlQCaQU8hNqTy1DnK+0pPI3oeBv5zDLkQw8hnwqdKARSgxKN7Ycynh+C0sUYRjG8ifIJr0C+dCcRTCZGIZAJwAnAWhTuPD+CcxqVySvIh9Yin5oQ9gnDFshpwMUop9Jx2FCuUT7PIF9qRL51WpgnC1MgXhQuaBXZlBDPZVQXU1A4CigqeHhYJwpLINuiLOmbATej1JWGESS/Q75Vj3xt2zBOEoZAWqNsFg0oA9/ZIZzDMECLrmYjX5tECMGNYQjkRvzFTqOBL0I4h2GAIr6PQYuuBiPfC5SgBTIG7db0BTLc1nMYYbMc+doXyPfGBPnjQQqkB76CL8JWAhrR8TRwgXt/E5tuVFoyQQmkDvgr2tP7UfzRK8OIihuQ77VHvliX//DCCEogv0Cp8N9H25xZggUjajYCJyEf/DZKMlg2QQhkN7Qfx0a04N76HUZcvI98cCNwKQHkAi5XIPVo91OvtKRuRtw8TFOfLCurfLkCOQ8/kfQFLRxrGFFxAfLJgchHS6YcgfQELnfvz8By5RrJYRXySZCPlryJTzkCuRHt/fAAlmXdSB6T8fcnKXkCsVSBHIG/s9O4Uk9uGCEzDn+nqyNK+YFSBNIaP3fVBGyvcSO5vIt2uwLl3Nq82B8oRSDjgO3RCq9rSvi+YUTJtchXu1NCa6dYgWyJxpcBzgfWF3tCw4iY9fgjWZciHy6YYgVyPkq7MhvLgmikhweRz26BfLhgihHI1sBZ7n0g0/iGESGXuXIc8uWCKEYgF6Jts2YATxbxPcNIArOAx1Ey7AsL/VKhAukCnO7e29PDSCu/cOXpyKdbpFCBnI4mXKYCc4q3yzASwRy0kWgb/Jn2vBQikHZocxOA35Rml2EkBi+ByBnIt/NSiEBOAjqiBAz/LN0uw0gEnh93RL6dl5YEUo+fleQP5dllGInh9678KS2Ew7ckkO+i9b1LsbUeRuXwEMoWvwPy8Zy0JBAvreNNaKNFw6gENqCkc9BC6tJ8AtkeOAClU7kjGLsMIzHciXx7BPL1rOQTyA/d3ycBK4O0zDASwErk2zUo0UhWcgmkBgkEYGKQVhlGgpjoyh+QY6+RXALZC+iG4ukfD9ys8OmD1qy8hqI5N9orlNd64FV3rfsUVDPJ4nG0e1U35PObkEsgx7jyHtShSQttgFvQrrnnAL0JIaGx8RWtgZ3RtX4JdXzbxGpRcWxAPg6+zzchm0BqgaPd+7tDMCosvH0Qx6IRt+tRArH26PFpr+Bf7d01/hPa0OZUItw/MCA8gYwmix6yCWQI8E20TfNz4dkVONcA+6NM33ugSaA5aE2yEQ5r0DU+C9gTNcn3x1+SnQbmoW2muwD7NP9jNoEc5coHQjQqaPqiJ8fnwKHAC/GaU5U8j6795+hJsku85hSFt/hvVPM/ZBPIIa5MUyqfU1Cy4puBF2O2pZp5AfUB69BWBGnB2x7wO83/0FwgOwA7Ah+QrrD2g1x5b6xWGOC36Q+O1YrimIOSzfVEGviK5gLxnh6Pk67RK28/iHmxWmGAmloQ4B4dEfAl8Jh73+Qp0lwgnupnhG1RwHijJrbdW/x87sq0Da9Pd+VBmR9mCqQOGOrep3Fy0DDKYZorh5Kx+U6mQHZFK6zeREOlhlFNvIN8vx0wwPswUyB7u9L2FjSqFc/3vwo7ySYQW1ZrVCue7+cViD1BjGrF8/0h3geeQBqArsBqFJ1pGNXIq0gDXZEmvhJIf1fOJ13zH4YRJBuQBgD6gS+QXV35ctQWGUbC8DQwAHyB9HPlS5GbYxjJwtNAP/BzAnkCSXug38a4DTBSj6eBJk0sbxfQBZGbYxjJwhuk6gkSSCe0Kc5nwIqYjDKMpPAR8AnSRKdatHcbaAWhYRiwyJXdMwWyJBZTDCN5LHVl91r8rHJL4rHFMBJHE4F4O+3YfueGIZa7skst/ra4ll7UMISnhc6ZAvkwJmMMI2l85Mota3FBWZhADMPDe4I01AJbuX/YHIhhiCZNLC+X6mcxGWMYScPTwtfq0YwhwKcxGRMkWVPYG5GT9pi4Va5sXYufwaExJmMMI2l42w1uXou/V/TqmIwxjKThNbHqCtkn3TCqlXYmEMPIQy2wzr1P085AhhEmm7tyXS1+Pts07QpkGGHi5RX+wppYhpGHWvzRq/ZxGmIYCaKtKz+txZ8g7JDjYMOoNjq5cnUtWn8L0DEmYwwjaXha+KQWP7S3U46DDaPa8JaAfFQLfOz+0TkmYwwjaXgC+bgWf3nhN2IyxjCShrcMfXktsMz9o2tMxhhG0tjGle9kCuSbMRljGEnD08KyWvz9CLvFZIxhJA1PC8tq8TMq9sxxsGFUG54W3qpHa9E/QWO/DVT32vQrYv6+ET8NSAurcZ10gNdcuVMsJhlGcujlytfB3/7AS9ZrAjGqHU8Dr4EvEG9PhP6bHG4Y1UWT7Qg9gbzgyoGRm2MYyWKAK5+HTQUygKZ7pxtGNVGD/5CYB74YlqMJw/bADtHbZRiJoCfSwFJcdsXMp8WzrtwzYqMMIyns4cq53gf1GX+cDYwC9gb+EqFRSeKKuA0wYmUvV872Psh8gsxy5T6RmWMYyWJfV3paaCKQF9Hy252BrSM0yjCSQAPQB2nA2yu9iUAagadQT/6ASE0zjPgZgXz/KTLyVDcf0p3myoMjMioo1riyXd6jjCjwckp9HqsVxeP5/LTMD3MJ5CDStZXAW67sG6sVBvjzCG/kPSpZ1CCfB5ie+YfmAlkILEZ9kDTNqs9w5fGxWmEAnODK6XmPShYDkc8vBhZk/iHbrPkjrhwVslFB8mfUbvwJFk8WJ7uiOmhEdZIWPF9/pPkfsglkkiuPCs2c4JkP3Irav1Px42mM6BiAHKwVqotX4jWnKDxfn9T8D9kEMhuFnvQGdgnRqKA5B/gHWnD/DHAdigpom+9LRlm0Rdf4BnTNt0F1cE6cRhVJH+Try8mYIPTIJpANwAPu/ejw7AqcL4CR6O5VD4wD/oVGuDbaK5TXGneNz3TX/FZXB96OAWngGFdOQr7fhFyRu/e58vukazRrHXAqagtfhx7ztntvePwHdWqvQ32/U/H3m0kDNcAY9/6+bAfUZ/sQPWreAHqg0JNZOY5LKvOBs+M2wkg8+6Do9TfJ4eO5niAbgbvc+xODt8swEsEPXDmRHFtX51sc9d+oTXYMNkNtVB7tkG9vQALJSj6BLAUecz/0wwANM4wkcCJaHPUY8vWstLS89mZXnka6OuuGkY8a4HT3/pZ8B7YkkIdRSqA+wH7l22UYiWA48ulFwEP5DmxJIBuAm9z7NE3+GEY+znXlzWSZ+8ikkAwmd6HUpN/B4pyM9NMf+fInwJ0tHVyIQD5BT5Ea4KKyTDOM+LkI+fLN+Ptz5qTQHFjXAmvRsFiPkk0zjHjpgXx4LXBNIV8oVCArgNvQzPsVpVhmGAngcuTDt1PgLgbFZFH8LVLe8WgEwDDSRB+0mGstcHWhXypGIO8B1wN1wJVFmWYY8fNL5LvXI18uiGLz8P4WbRs9CsvAaKSHPdGiqI+RDxdMsQL5GLgKjQJcg82uG8kn01evQj5cMKVkcr8O7b6zJ34svWEklROQr76OfLcoShHI5/iz6r/BIn2N5NIOPTVAPlt0rq5S9wJ5xL22AX5d4m8YRthciXz0UbJkLCmEcjbLORstrzwTGFzG7xhGGAxGeQnWu7IkyhHIIvyhM28S0TCSQD3yyTrko4vyH56bcrdb+wPavm0gcGGZv2UYQXE+8skXgN+X80PlCuRL4BSU3eJy0pWu1KhM+qJwKM83vyznx4LYsPM51FFvhdaxt85/uGGERmvgb678FfLNsghqR9vxKIFYX/xhNcOImqvQeo85yCfLJiiBNKIUKmuAnwKHB/S7hlEohyPfW4MSHjbmP7wwgtwTfRFaCF+DViF2D/C3DSMf3ZHPeckYSh61ak6QAgHtjnsH0Am4H/VLDCNMWiFf64SW0Aa6Q3PQAgE4C3geTdTcFsLvG0YmtyFfex5NWgdKGAJZh0KLV6DkXOfmP9wwSuYc5GMrkM8Fnjg7DIGAkgEfhdLg/xY4MKTzGNXLgcDvkI8dhXwucMISCChD/Glouv8+oF+I5zKqi37Ip+qQj22y8U1QhCkQUKfpKqAD2tSxZ8jnMyqfHmibvQ7It1rMbVUOYQsE4BI0u9kFhR03RHBOozJpQDfarsinLgn7hFEIZCNwMvAEeoJMBzpGcF6jsuiI3wp5AvlU1j09giQKgYA6UoejEICBwDT0iDSMQuiAfGYg8qEjiGgfxKgEAgoBOBiYC+yBMse3j/D8RjppjzKw74GCDw8GVkd18igFArAKOAjF6Q8BHkczoIaRjU7IR/ZBPnMg8qHIiFogAB8BI9DM5x6oPbl1DHYYyWZr5Bt7IF85EPlOpMQhEICVwP6oPTkAeBILbjR8uiOfGAA8i3yloFy6QROXQEAJvEYAM4DeaD3JbjHaYySD3ZAv9Ab+gcRRVLK3IIk70cIa4FAUqnw8umscg+ZLKpm2qA82FCVV7gV8HT/H2BrgfWAh8Craw3s28FnklkbLwSgytx1wN3ASEY1W5aLm0Cknx3l+jxq0RPJStNDlQuCPsVoUPDVogOIkYCTQpsjvr0OjOXeh+YDQ5wAi5lwUt1cHTAAuIwH/x6QIxONHaOefzYC/Aj9GeY3SzijgF8Cu7t8b0JDlE65cCLyDP3zZHiU86wUMQhuoDsJvEr+IEhNMDt/00Nkc7dcxBiX/OMP9OxEkTSCgIb37UZPjOWA0IUVqRsAOSPAj3L/fRdvZ/YU8e3PnoBtaSnoaEg9oCPQ0YHHZlsbD9ijocDDwAarrWbFa1Iw4O+m5mI0u2P+hu+Y8NHOaNr6HbB+BRu3OQoF24yleHLjvjEeiOwt/kGMecGwA9kbNEcj2wWjyeDAJEwckUyAAy4B90WqxjsCDwA2kI6VQDUqDdA+wBfB3NCLzJ0pInpyFz91v7eR+ewvgf9w507AdRWtUlw+iur0NtRrejtOoXCRVIKC+x1g0qrUKLaecS7KT09WgyvcGG8ahZsOHIZxrhfvtce5cl6LmXJJFMhDV4ZnAp+gpO5YE9zOTLBCP+9GFfQbl3XoGdXjjHqLOxgTUyVyHOuY3RHDOG9y51iFnmxDBOYulHtVZZh0OQP2PRJMGgYA66UPQXXIjSkj8LLB7nEY141jgYnQ3PxaYEuG5p7hzNjobjovw3C2xO6qrX6K6uxTVZSoGXtIiEFCO1Qnogj+PH/p8A/GHzu8A3Oren0O04vCYgp8g41ZnU5x0QHXjLXF4AfgWqsOy8uVGSZoE4vESCmC7GLVdzwReQwto4vr/3Iw6y/cTTbMqF9c7G9o7m+KgFtXFa6hu1qO6+haav0kVaRQIaELpamAXtK6kC0pYNxcYFrEto9Bw60eo/xE3Z+BHTI+K+NzDUB3cgerkYVRHV6M6Sx1pFYjHEhS2cSRKNzkQmIlmmKPIolKDOp+4MpaI02aswLfpcqIZ1eqHrvlMVAeLUJ2MRHWUWtIuEI/J6E51Prp7Ho7avPcCO4d43gNR+MhSEhQegeYWlqJM5weFeJ7e6Bq/gK75x6gOdqEywmAqRiCgqM8/oM7peGAtmkOZjx/OEDQnufJW4ok6vQh/3/pM/oM/aPDDEM47CF3TV9A1XouueQ9UB7FG4AZJEmOxgmIr4ALUJm/rPpuJsvFNo/xI0bYohKQViikqJXykHMaijvgGYG80t5BJNzSU+gW6FuWGytegcPQLgOHus8+AG9E1XVnm7yeSSnqCNGclusP2QNsBr0QVOxVYgJoCncv4/SEoEnUe0Yvje8gxQSNFzcUBsmkusnFIGefqjK7VAnTthqNreSW6thdRoeKAyhaIxweos7odCstYBOyI7nrLUGTtAWgdQjEMdeUTwZhZMIegre7qUOK0W/IcO9OVQ/Mck406dE3+gq7R79A1W4yu4Xbomn5Q5O+mjmoQiMdaNEexE2oqTEbrTsagsPGlaEfUQmO9+rpybrBm5mUIClBshfoeLW1359nWN+9RPgPQNViKrskYdI0mo2vWC13DtUVZnWKSGM8UNhvQijwvheVJaLlvb+A893oTOcVk4Cmyb+e1oyv/HbK9HgPQvMLXUAe8kLSbC1y5Y46/16H+yxHutX3G3/6Nlr3ehZ4iVUkld9KLZXd0xxyNJrk8PkTJAx5HCSaWuM9XovZ5A+G3wXsCT7tz3ePsLGQPvq3QvMiH7j0oY8gI1ITan6b9sPfQTPxf0XqcqscEsim1KCzCu6vu1Ozv5wDXonUZrVAnuKV1Hpe78pcl2NMVZfnoijrJR1L4MGorZ9sXaB3G2cA1zY5ZiNZmTEZBhRtKsLFiqcYmVktsQAF2c1AMUU90tz0AjeDMK/L3+gI/xx8EKEYkDejp1RWttBxNeXMM89BE6kz0NJxBgBteViImkJZZ5F63ICf35k9Wo+ZJe/I/QeYDJ6B0/Ve4zwoRibenSi80Uz2S4jvHXu5jLxnEUyhjYSBbJFcD1TSKFQSN+E0QL+6qS45jM7kXiaQRieTyvEerIz4Fjai9Tuk5aT3bPFsbMXEURf3DI++I24bU8d2HfgRy3N7u9XIBX7vXlS09SVqhMI590ejRfpQeBNnbla8DWF0Xjz1BSme+KwcV8Z2WniR1wESUbXIFEkc5Q6yebfPzHmXkxARSOl6Kmv2K/F4ukdSgbCXH4W8T8XqZNnq2JS6dTlqwTnrpzEar5QahwMBi4rGyNbc2B05FHfGRaFlxOWyLIpjXE+IusJWOPUFK5zPgf9E1HFPC95s/SS5GQ7ijCcahv+9sm0LlJ70ODRNIeUx05VjUuS6WTJE0orUbUwOwazNnE/g2GiVgTazymI6SSPRHibZvzH94VrzmVieUITEIfoKafS+htS9GidgTpDy8HF24stQ94O8lf9h6MTSgtRq4MvYtBNKMCaR8JqFAxs5oFCpubgS2RGEkD8RsS+oxgQTDaSic4xi0wi8uzkKd/NXOJqNMTCDBsBi1+0GRvofFYMNh+JG6Y7EgxEAwgQTHPWiFX517PzLCc49056xzNgTV2a96TCDBcgnqA7RBfZMoMi2e7s7VhsJXGhoFYgIJlo2oHzAeDaH/CQUelpM9JRdbodV/N7pzjUf9Dhu1ChATSPBsRDu0noA2iRmN1nefSTA7ZLV2v7UAONqdYwwJ2RW20jCBhMfdKE5rBrrb34A68z9Dk3jF0s19d7H7LW8odxCK6TJCwGbSw2URSpBwFEoo3R/tj/FrlJJnpisXorD2Ne577dAy214o4HC4KzO3gf4VNs8ROiaQaHgAdaQPQntnjESJIb5VxG+sBx4C7kQhLtacigATSHRsRHFR09ATYghaNdgX5a36uvsc9CT5AD1ZXgGeBP6J/4QxIuL/AdYP57qdZR8NAAAAAElFTkSuQmCC\""},{"id":157,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\node_modules\\html-loader\\index.js?minimize=false!E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\draw-money.tpl.html","name":"./src/modules/my/draw-money.tpl.html","index":157,"index2":152,"size":2788,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":98,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\my\\my.js","module":"./src/modules/my/my.js","moduleName":"./src/modules/my/my.js","type":"cjs require","userRequest":"./draw-money.tpl.html","loc":"15:19-51"}],"source":"module.exports = \"<!-- 提现 -->\\r\\n<div class=\\\"navbar tmm-navbar\\\">\\r\\n  <div class=\\\"navbar-inner tmm-add-bank-inner tmm-trade-record-inner\\\" id=\\\"draw-money-navbar\\\">\\r\\n    <div class=\\\"left\\\">\\r\\n      <a href=\\\"#\\\" class=\\\"back link\\\">\\r\\n        <i class=\\\"icon ticon-arrow-back\\\"></i>\\r\\n      </a>\\r\\n    </div>\\r\\n    <div class=\\\"center sliding\\\">提现申请</div>\\r\\n    <div class=\\\"right\\\">\\r\\n      <span id=\\\"tmm-draw-money-record\\\">提现记录</span>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n<div class=\\\"pages\\\">\\r\\n  <div data-page=\\\"draw-money\\\" class=\\\"page tmm-add-bank-page tmm-withdraw-page\\\" id=\\\"tmm-draw-money-page\\\">\\r\\n    <div class=\\\"page-content tmm-add-retinue-page-contnet tmm-add-bank-page-contnet tmm-withdraw-page-contnet\\\">\\r\\n      <form class=\\\"list-block tmm-myinfo-item-addform tmm-bank-item-addform\\\">\\r\\n        <ul>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户行</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"bank\\\" class=\\\"add_input\\\" value=\\\"{{bankCardInfo.bank_value}}\\\" disabled>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">开户名</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"bank_name\\\" class=\\\"add_input\\\" value=\\\"{{bankCardInfo.bank_name}}\\\" disabled>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">卡号</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"code\\\" class=\\\"add_input\\\" value=\\\"{{bankCardInfo.bank_code_format}}\\\" disabled>\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n          <li class=\\\"item-content\\\">\\r\\n            <div class=\\\"item-inner\\\">\\r\\n              <div class=\\\"item-title item-title-con\\\">金额(元)</div>\\r\\n              <div class=\\\"item-input\\\">\\r\\n                <input type=\\\"text\\\" name=\\\"money\\\" maxlength=\\\"12\\\"  id=\\\"money\\\" placeholder=\\\"可提现余额{{burserInfo.money_format}}元\\\" class=\\\"add_input\\\">\\r\\n                <input type=\\\"hidden\\\" id=\\\"cash_money\\\" value=\\\"{{burserInfo.money}}\\\">\\r\\n              </div>\\r\\n            </div>\\r\\n          </li>\\r\\n        </ul>\\r\\n        <div class=\\\"f_bottom\\\">\\r\\n          <button class=\\\"sub_active\\\" type=\\\"button\\\" id=\\\"draw-money-before\\\">确认提现</button>\\r\\n        </div>\\r\\n        <div class=\\\"tip\\\">提现申请成功，预计1-3个工作日内到帐。</div>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\";"},{"id":158,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\seekFresh\\seekFresh.js","name":"./src/modules/seekFresh/seekFresh.js","index":158,"index2":154,"size":472,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"../seekFresh/seekFresh","loc":"5:20-53"}],"source":"var httpService = require('../services/httpService'),\r\n  appFunc = require('../utils/appFunc');\r\n\r\nvar seekFresh = {\r\n  init: function(){\r\n    seekFresh.bindEvent();\r\n    \r\n  },\r\n\r\n  goSeekFresh: function() {\r\n    appFunc.goSeekFresh();\r\n  },\r\n  bindEvent: function() {\r\n     var bindings = [{\r\n      element: '#seekFreshView',\r\n      event: 'show',\r\n      handler: seekFresh.goSeekFresh\r\n    }];\r\n\r\n    appFunc.bindEvents(bindings);\r\n  }\r\n}\r\n\r\nmodule.exports = seekFresh;"},{"id":159,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\device.js","name":"./src/modules/app/device.js","index":159,"index2":155,"size":1556,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"./device","loc":"7:17-36"}],"source":"var appFunc = require('../utils/appFunc'),\r\n    httpService = require('../services/httpService'),\r\n    recommendModule = require('../recommend/recommend');\r\n\r\nvar device = {\r\n  location: {\r\n    \"lng\": '',\r\n    \"lat\": '',\r\n    \"city\": ''\r\n  },\r\n  flag: false,\r\n\r\n  init: function() {\r\n    window.device = device;\r\n  },\r\n\r\n  getAddress: function(str1, str2, str3) {\r\n\r\n    if (!str1) {\r\n      \r\n      appFunc.hideToast();\r\n      appFunc.showToast('定位失败...');\r\n      setTimeout(function() {\r\n        appFunc.hideToast();\r\n      },500)\r\n      recommendModule.init();\r\n    } else { \r\n      device.location = {\r\n        \"lng\": str1,\r\n        \"lat\": str2,\r\n        \"city\": str3\r\n      }\r\n\r\n      device.setLocationCity(str1, str2);\r\n    }\r\n  },\r\n\r\n  // 设置gps定位城市\r\n  setLocationCity: function(str1, str2) {\r\n    var dataLoation = {\r\n      \"location\": {\r\n        \"lng\": str1, //维度 小数点后不超过6位\r\n        \"lat\": str2 //经度 小数点后不超过6位\r\n      }\r\n    }\r\n    httpService.setGPSCity(dataLoation, function(dataRes) {\r\n      device.flag = true;\r\n      appFunc.hideToast();\r\n      recommendModule.init();\r\n    }, function(dataRes) {\r\n\r\n    });\r\n  },\r\n\r\n  // 获取设备经纬度回调函数\r\n  getLocationCallBack: function(str1, str2, str3) {\r\n\r\n    if (!str1) {\r\n      tmmApp.alert('获取定位信息失败');\r\n    } else {\r\n      httpService.setGPSCity({\r\n         \"location\": {\r\n          \"lng\": str1,\r\n          \"lat\": str2\r\n        }\r\n      }, function(dataRes) {\r\n\r\n        tmmApp.getCurrentView().router.back();\r\n      }, function(dataRes) {\r\n       \r\n      });\r\n    }\r\n\r\n  }\r\n\r\n}\r\nmodule.exports = device;\r\n"},{"id":160,"identifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\tmmSdk.js","name":"./src/modules/app/tmmSdk.js","index":160,"index2":156,"size":602,"cacheable":true,"built":false,"optional":false,"prefetched":false,"chunks":[0],"assets":[],"issuer":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","failed":false,"errors":0,"warnings":0,"reasons":[{"moduleId":25,"moduleIdentifier":"E:\\svn\\front\\app\\v2\\user-webpack\\src\\modules\\app\\app.js","module":"./src/modules/app/app.js","moduleName":"./src/modules/app/app.js","type":"cjs require","userRequest":"./tmmSdk","loc":"8:17-36"}],"source":"var appFunc = require('../utils/appFunc'),\r\n  httpService = require('../services/httpService'),\r\n  roleModule = require('../role/role');\r\n\r\nvar tmmSdk = {\r\n\r\n  init: function() {\r\n    window.tmmSdk = tmmSdk;\r\n  },\r\n  /**\r\n   * @method JSLogin_Callback\r\n   * @description IOS回调 \r\n   * \r\n   * @author Moore Mo\r\n   * @datetime 2015-12-15T17:04:12+0800\r\n   */\r\n  JSLogin_Callback: function() {\r\n    roleModule.goToLogin();\r\n  },\r\n  setNumberKeyboardData: function(str) {\r\n    var moneyEle = $$('body').find('#tmm-draw-money-page').find('#money');\r\n    moneyEle.val(str);\r\n  }\r\n}\r\nmodule.exports = tmmSdk;\r\n"}],"filteredModules":0,"children":[]}